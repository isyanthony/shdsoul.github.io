<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSS(ä¸€):æ›´æ”¹æµè§ˆå™¨æ»šåŠ¨æ¡</title>
    <url>/2021/09/09/CSS%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>èµ·åˆæˆ‘å®¡æŸ¥å…ƒç´ ï¼Œå‘ç°æ‰¾ä¸åˆ°æ»šåŠ¨æ¡æ ·å¼ï¼Œåæ¥æ‰æƒ³èµ·æ¥ï¼Œæ»šåŠ¨æ¡è¿™ä¸ªæ˜¯æµè§ˆå™¨è‡ªå¸¦çš„å¹¶ä¸ç›´æ¥ä¾æ‰˜äºæˆ‘ä»¬è‡ªå·±å†™çš„HTMLã€CSSï¼Œèµ·åˆç”¨çš„æ˜¯element ui ä¸­çš„ elâ€”scrollbar è°ƒè¯•åŠå¤©éƒ½æœ‰é—®é¢˜ï¼Œå®³ï¼Œè¿˜æ˜¯è‡ªå®šä¹‰å¥½</p>
</blockquote>
<p><code>MDN</code> æ–‡æ¡£ : <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/::-webkit-scrollbar">MDNç›¸å…³æ–‡æ¡£</a></p>
<p><code>webkit</code>æ–‡æ¡£ï¼š<a href="https://webkit.org/blog/363/styling-scrollbars/">webkitæ–‡æ¡£</a></p>
<p>å…¶ä¸­æœ‰è¿™æ ·çš„<strong>æç¤º</strong>ï¼š</p>
<p><code>::-webkit-scrollbar</code> ä»…ä»…åœ¨æ”¯æŒ<a href="https://webkit.org/">WebKit</a>çš„æµè§ˆå™¨ (ä¾‹å¦‚, è°·æ­ŒChrome, è‹¹æœSafari)å¯ä»¥ä½¿ç”¨.</p>
<p>å¥½å·§ä¸å·§ï¼Œ<code>electron</code>ä¸­æœ¬èº«å°±æ˜¯åŸºäº<code>chrome</code>çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¹Ÿæ˜¯å…¼å®¹çš„</p>
<h2 id="CSSæ»šåŠ¨æ¡é€‰æ‹©å™¨"><a href="#CSSæ»šåŠ¨æ¡é€‰æ‹©å™¨" class="headerlink" title="CSSæ»šåŠ¨æ¡é€‰æ‹©å™¨"></a>CSSæ»šåŠ¨æ¡é€‰æ‹©å™¨</h2><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¼ªå…ƒç´ é€‰æ‹©å™¨å»ä¿®æ”¹å„å¼webkitæµè§ˆå™¨çš„æ»šåŠ¨æ¡æ ·å¼:</p>
<ul>
<li><code>::-webkit-scrollbar</code> â€” æ•´ä¸ªæ»šåŠ¨æ¡.</li>
<li><code>::-webkit-scrollbar-button</code> â€” æ»šåŠ¨æ¡ä¸Šçš„æŒ‰é’® (ä¸Šä¸‹ç®­å¤´).</li>
<li><code>::-webkit-scrollbar-thumb</code> â€” æ»šåŠ¨æ¡ä¸Šçš„æ»šåŠ¨æ»‘å—.</li>
<li><code>::-webkit-scrollbar-track</code> â€” æ»šåŠ¨æ¡è½¨é“.</li>
<li><code>::-webkit-scrollbar-track-piece</code> â€” æ»šåŠ¨æ¡æ²¡æœ‰æ»‘å—çš„è½¨é“éƒ¨åˆ†.</li>
<li><code>::-webkit-scrollbar-corner</code> â€” å½“åŒæ—¶æœ‰å‚ç›´æ»šåŠ¨æ¡å’Œæ°´å¹³æ»šåŠ¨æ¡æ—¶äº¤æ±‡çš„éƒ¨åˆ†.</li>
<li><code>::-webkit-resizer</code> â€” æŸäº›å…ƒç´ çš„corneréƒ¨åˆ†çš„éƒ¨åˆ†æ ·å¼(ä¾‹:textareaçš„å¯æ‹–åŠ¨æŒ‰é’®).</li>
</ul>
<p>å¦‚æœç›´æ¥å†™çš„è¯ä¼šä¸ç”Ÿæ•ˆï¼Œç”±äºè¿™äº›ä¼ªå…ƒç´ é€‰æ‹©å™¨æ¥æºäºç¬¬ä¸‰æ–¹ï¼Œæ‰€ä»¥å¾—ä½¿ç”¨ä¸€äº›é¢å¤–çš„ä¸œè¥¿ï¼Œ<strong>æ·±åº¦ä½œç”¨é€‰æ‹©å™¨</strong>(<code>&gt;&gt;&gt;</code>/ <code>/deep/</code>) å‰è€…ä»…ä»…é™äºåªæ˜¯ç”¨ <code>css</code>çš„æ—¶å€™ä¸ä½¿ç”¨ä¾‹å¦‚ <code>less/sass</code>è¿™æ ·çš„é¢„ç¼–è¯‘å™¨ï¼Œåè€…åˆ™å¯ä»¥å…¼å®¹äºé¢„ç¼–è¯‘å™¨.</p>
<p>ä½¿ç”¨æ¡ˆä¾‹:</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line">/deep/ ::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿˜æœ‰ä»¥ä¸‹çš„ä¼ªç±»é€‰æ‹©å™¨ï¼š(å¸¸ç”¨çš„æˆ‘æ„Ÿè§‰ä¸»è¦æ˜¯è¿™å‰ä¸‰ä¸ª)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ç”¨äºä¿®æ”¹é¡µé¢ä¸‹æ–¹å¹³è¡Œäº x è½´çš„æ»šåŠ¨æ¡</span></span><br></pre></td></tr></table></figure>

<p><code>:horizontal</code> â€“ The horizontal pseudo-class applies to any scrollbar pieces that have a horizontal orientation.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ç”¨äºä¿®æ”¹é¡µé¢ä¸‹æ–¹å¹³è¡Œäº y è½´çš„æ»šåŠ¨æ¡</span></span><br></pre></td></tr></table></figure>

<p><code>:vertical</code> â€“ The vertical pseudo-class applies to any scrollbar pieces that have a vertical orientation.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ç”¨äºä¿®æ”¹æ»šåŠ¨æ¡ä¸Šã€ä¸‹ / å·¦ã€å³ ä¸¤ç«¯çš„æŒ‰é’®(ç›¸å½“äºè¾…åŠ©æ»‘åŠ¨)</span></span><br></pre></td></tr></table></figure>

<p><code>:decrement</code> â€“ The decrement pseudo-class applies to buttons and track pieces. It indicates whether or not the button or track piece will decrement the viewâ€™s position when used (e.g., up on a vertical scrollbar, left on a horizontal scrollbar).</p>
<p><code>:increment</code> â€“ The increment pseudo-class applies to buttons and track pieces. It indicates whether or not a button or track piece will increment the viewâ€™s position when used (e.g., down on a vertical scrollbar, right on a horizontal scrollbar).</p>
<p><code>:start</code> â€“ The start pseudo-class applies to buttons and track pieces. It indicates whether the object is placed before the thumb.</p>
<p><code>:end</code> â€“ The end pseudo-class applies to buttons and track pieces. It indicates whether the object is placed after the thumb.</p>
<p><code>:double-button</code> â€“ The double-button pseudo-class applies to buttons and track pieces. It is used to detect whether a button is part of a pair of buttons that are together at the same end of a scrollbar. For track pieces it indicates whether the track piece abuts a pair of buttons.</p>
<p><code>:single-button</code> â€“ The single-button pseudo-class applies to buttons and track pieces. It is used to detect whether a button is by itself at the end of a scrollbar. For track pieces it indicates whether the track piece abuts a singleton button.</p>
<p><code>:no-button</code> â€“ Applies to track pieces and indicates whether or not the track piece runs to the edge of the scrollbar, i.e., there is no button at that end of the track.</p>
<p><code>:corner-present</code> â€“ Applies to all scrollbar pieces and indicates whether or not a scrollbar corner is present.</p>
<p><code>:window-inactive</code> â€“ Applies to all scrollbar pieces and indicates whether or not the window containing the scrollbar is currently active. (In recent nightlies, this pseudo-class now applies to ::selection as well. We plan to extend it to work with any content and to propose it as a new standard pseudo-class.)</p>
<p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†æ»‘åŠ¨å˜ä¸ºé€æ˜è‰²</span></span><br><span class="line">/deep/ ::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éšè—æ¨ªå‘æ»šåŠ¨æ¡</span></span><br><span class="line">/deep/ ::-webkit-scrollbar:horizontal &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ»‘å—æ›´æ”¹é¢œè‰²</span></span><br><span class="line">/deep/ ::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: rgb(<span class="number">199</span>, <span class="number">201</span>, <span class="number">204</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå›¾ï¼š</p>
<p><img src="http://anthony-img-bed.oss-cn-beijing.aliyuncs.com/e6db8fb0.png" alt="å›¾ç‰‡"></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS(äºŒ):gridå¸ƒå±€</title>
    <url>/2022/01/08/CSS%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p> å¼•è¨€ï¼Œèµ·åˆäº†è§£åˆ°<code>grid</code>å¸ƒå±€æ˜¯åœ¨<code>BootStrap</code>ä¸­ï¼Œæ¯”è¾ƒè‘—åçš„æ …æ ¼å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯<code>grid</code>å¸ƒå±€ï¼Œååˆ†çš„å¥½ç”¨ã€‚é€šä¿—æ¥è®²å°±æ˜¯å°†ç½‘é¡µçš„é•¿å®½åˆ†ä¸º<code>n</code>ä¸ªç­‰å®½é«˜çš„åŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>css</code>çš„ç¼–å†™æ¥è®©ä¸€ä¸ªå…ƒç´ å æœ‰ä¸€å®šæ•°é‡çš„åŒºåŸŸä»è€Œè¾¾åˆ°å¸ƒå±€çš„æ•ˆæœï¼Œå¹¶ä¸”è¿˜å…·æœ‰å“åº”å¼çš„ç‰¹ç‚¹ï¼Œååˆ†çš„å¥½ç”¨ã€‚</p>
</blockquote>
<h1 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h1><h2 id="ä½¿ç”¨gridå¸ƒå±€"><a href="#ä½¿ç”¨gridå¸ƒå±€" class="headerlink" title="ä½¿ç”¨gridå¸ƒå±€"></a>ä½¿ç”¨gridå¸ƒå±€</h2><p>â€‹        <code>grid</code>å¸ƒå±€ä¸<code>flex</code>å¸ƒå±€çš„ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œå…¶ä¸»è¦æ“ä½œå¸ƒå±€<code>container</code>å…ƒç´ å®¹å™¨ä¸­çš„ç¬¬ä¸€çº§å­å…ƒç´ ï¼Œè€Œä¸ä¼šæ”¹å˜å…¶ç¬¬äºŒçº§å­å…ƒç´ .</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„:</strong></p>
<p><strong>1. é»˜è®¤ä¸ºå—çº§å…ƒç´ ï¼Œå€¼ä¸º<code>inline-grid</code>æ—¶ä¸ºè¡Œå†…å—å…ƒç´ .</strong></p>
<p><strong>2. è®¾ä¸ºç½‘æ ¼å¸ƒå±€ä»¥åï¼Œå®¹å™¨å­å…ƒç´ ï¼ˆé¡¹ç›®ï¼‰çš„<code>floatã€display: inline-blockã€display: table-cellã€vertical-alignå’Œcolumn-*</code>ç­‰è®¾ç½®éƒ½å°†å¤±æ•ˆã€‚</strong></p>
<h2 id="åˆ’åˆ†å¸ƒå±€"><a href="#åˆ’åˆ†å¸ƒå±€" class="headerlink" title="åˆ’åˆ†å¸ƒå±€"></a>åˆ’åˆ†å¸ƒå±€</h2><p>ä¸»è¦ä½¿ç”¨åˆ°ä¿©ä¸ªå±æ€§ï¼Œ<code>grid-template-rows</code>ã€<code>grid-template-columns</code> ï¼Œå…·ä½“ä½¿ç”¨å¦‚ä¸‹ä»£ç .</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid gray;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="comment">/*ä¸ä»…å¯ä»¥ä½¿ç”¨ç»å¯¹å•ä½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”*/</span></span><br><span class="line">    grid-template-rows: <span class="number">200px</span> <span class="number">200px</span> <span class="number">200px</span>;</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="number">200px</span> <span class="number">200px</span> <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>grid-template-rows</code>ã€<code>grid-template-columns</code>å±æ€§ï¼Œåè·Ÿå¤šå°‘ä¸ªåº¦é‡å€¼å°±ç›¸å½“äºå°†å®¹å™¨åˆ†å‰²ä¸ºå¤šå°‘è¡Œå¤šå°‘åˆ—ï¼Œæ­¤å¤„ç›¸å½“äºåˆ†å‰²ä¸º3 Ã— 3 çš„å¸ƒå±€å®¹å™¨ï¼Œå¦‚è‹¥ç¬¬ä¸€çº§å­å…ƒç´ è¶…è¿‡9ä¸ªï¼Œåˆ™ä¼šå¢åŠ è¡Œç»§ç»­æ’åˆ—.</p>
<ul>
<li><strong>repeat()</strong></li>
</ul>
<p>â€‹    å¯¹äºéœ€è¦åˆ’åˆ†å¤šä¸ªç½‘æ ¼çš„æ—¶å€™å¦‚ä¸Šæ–¹é‚£æ ·èµ‹å€¼æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œäºæ˜¯å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨<code>repeat()</code>è¿›è¡Œèµ‹å€¼ï¼Œå°†ä¸Šæ–¹ä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid gray;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="comment">/*ä¸ä»…å¯ä»¥ä½¿ç”¨ç»å¯¹å•ä½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”*/</span></span><br><span class="line">    grid-template-rows: <span class="built_in">repeat</span>(<span class="number">3</span> , <span class="number">200px</span>);</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span> , <span class="number">200px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ä»…å¯ä»¥å¦‚æ­¤ï¼Œè¿˜å¯ä»¥é‡å¤æŸä¸€ç»„åºåˆ—å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid gray;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="comment">/*ä¸ä»…å¯ä»¥ä½¿ç”¨ç»å¯¹å•ä½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”*/</span></span><br><span class="line">    grid-template-rows: <span class="built_in">repeat</span>(<span class="number">2</span> , <span class="number">200px</span> <span class="number">100px</span> <span class="number">50px</span>);</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span> , <span class="number">200px</span> <span class="number">100px</span> <span class="number">50px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸å½“äºåˆ†æˆäº† 6 Ã— 6 çš„å¸ƒå±€å®¹å™¨</p>
<ul>
<li><strong>auto-fill</strong></li>
</ul>
<p>æœ‰æ—¶ï¼Œå•å…ƒæ ¼çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯å®¹å™¨çš„å¤§å°ä¸ç¡®å®šã€‚å¦‚æœå¸Œæœ›æ¯ä¸€è¡Œï¼ˆæˆ–æ¯ä¸€åˆ—ï¼‰å®¹çº³å°½å¯èƒ½å¤šçš„å•å…ƒæ ¼ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨<code>auto-fill</code>å…³é”®å­—è¡¨ç¤ºè‡ªåŠ¨å¡«å……ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">        <span class="comment">/* width: 600px;</span></span><br><span class="line"><span class="comment">        height: 600px; */</span></span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">        <span class="attribute">display</span>: grid;</span><br><span class="line">        grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(auto-fill,<span class="number">200px</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>å¦‚ä¸Šï¼Œè¡¨ç¤ºæ¯åˆ—å®½åº¦<code>200px</code>ï¼Œç„¶åè‡ªåŠ¨å¡«å……ï¼Œç›´åˆ°å®¹å™¨ä¸èƒ½æ”¾ç½®æ›´å¤šçš„åˆ—ã€‚</p>
<ul>
<li><strong>fr</strong>å…³é”®å­—</li>
</ul>
<p>â€‹    è¡¨ç¤ºæŒ‰å€æ•°åˆ’åˆ†ç¬¬ä¸€çº§å­å…ƒç´ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  grid-template-<span class="attribute">columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šè¡¨ç¤ºå°†åˆ— 1 ï¼š1 è¿›è¡Œåˆ’åˆ†æˆä¿©ä»½</p>
<ul>
<li><strong>auto</strong></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="number">1</span>fr auto <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¡¨ç¤ºç¬¬äºŒåˆ—çš„<code>auto</code>è¡¨ç¤ºç”±æµè§ˆå™¨è‡ªåŠ¨è°ƒèŠ‚å•å…ƒæ ¼çš„å®½åº¦.</p>
<ul>
<li><strong>minmax()</strong></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="number">1</span>fr <span class="built_in">minmax</span>(<span class="number">100px</span> . <span class="number">1</span>fr) <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®½åº¦é€‰æ‹©åœ¨<code>minmax(æœ€å°å€¼ï¼Œæœ€å¤§å€¼)</code>çš„åŒºé—´èŒƒå›´ä¸­.</p>
<p>â€‹    </p>
<h2 id="å¸ƒå±€å®ä¾‹"><a href="#å¸ƒå±€å®ä¾‹" class="headerlink" title="å¸ƒå±€å®ä¾‹"></a><strong>å¸ƒå±€å®ä¾‹</strong></h2><p><code>grid-template-columns</code>å±æ€§å¯¹äºç½‘é¡µå¸ƒå±€éå¸¸æœ‰ç”¨ã€‚ä¸¤æ å¼å¸ƒå±€åªéœ€è¦ä¸€è¡Œä»£ç ã€‚</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  grid-template-<span class="attribute">columns</span>: <span class="number">70%</span> <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ä¸Šé¢ä»£ç å°†å·¦è¾¹æ è®¾ä¸º70%ï¼Œå³è¾¹æ è®¾ä¸º30%ã€‚</p>
<p>ä¼ ç»Ÿçš„åäºŒç½‘æ ¼å¸ƒå±€ï¼Œå†™èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚</p>
<blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">12</span>, <span class="number">1</span>fr);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="å…¶å®ƒå±æ€§"><a href="#å…¶å®ƒå±æ€§" class="headerlink" title="å…¶å®ƒå±æ€§"></a>å…¶å®ƒå±æ€§</h2><ul>
<li><strong>grid-row-gapã€grid-column-gapã€gap</strong></li>
</ul>
<p>ä¸»è¦ç”¨äºè®¾ç½®è¡Œé—´è·ã€åˆ—é—´è·ï¼Œ<code>gap</code>ç”¨äºåŒæ—¶è®¾ç½®è¡Œé—´è·ä¸åˆ—é—´è·.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    grid-template-<span class="attribute">columns</span>: <span class="number">1</span>fr <span class="built_in">minmax</span>(<span class="number">100px</span> , <span class="number">1</span>fr) <span class="number">2</span>fr;</span><br><span class="line">    gap: <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>grid-auto-flow</strong></li>
</ul>
<p>â€‹    ç”¨äºè®¾ç½®è¡Œåˆ—æ’åºçš„ä¼˜å…ˆçº§ï¼Œé»˜è®¤å…ˆè¡Œååˆ—.</p>
<p>â€‹    å¯é€‰å±æ€§å¦‚ä¸‹: </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Keyword values */</span></span><br><span class="line">grid-<span class="attribute">auto</span>-flow: row;</span><br><span class="line">grid-<span class="attribute">auto</span>-flow: column;</span><br><span class="line">grid-<span class="attribute">auto</span>-flow: dense;</span><br><span class="line">grid-<span class="attribute">auto</span>-flow: row dense;</span><br><span class="line">grid-<span class="attribute">auto</span>-flow: column dense;</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼š<code>dense</code>å±æ€§ä¸»è¦æ˜¯ç”¨äºè¡¨ç¤ºå°†è¡Œæˆ–è€…åˆ—å°½å¯èƒ½ä¸ç•™ç¼éš™</strong></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>gridå¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker(ä¸‰):Dockerfile</title>
    <url>/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Dockerfileä»‹ç»"><a href="#Dockerfileä»‹ç»" class="headerlink" title="Dockerfileä»‹ç»"></a>Dockerfileä»‹ç»</h1><p>Dockerfileå¯ä»¥è®¤ä¸ºæ˜¯<strong>Dockeré•œåƒçš„æè¿°æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬</strong>ã€‚ä¸»è¦ä½œç”¨æ˜¯<strong>ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶</strong>ã€‚</p>
<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/1.png" class>

<ul>
<li><strong>é€šè¿‡æ¶æ„å›¾å¯ä»¥çœ‹å‡ºé€šè¿‡DockerFileå¯ä»¥ç›´æ¥æ„å»ºé•œåƒ</strong></li>
</ul>
<h2 id="Dockerfileè§£æè¿‡ç¨‹"><a href="#Dockerfileè§£æè¿‡ç¨‹" class="headerlink" title="Dockerfileè§£æè¿‡ç¨‹"></a>Dockerfileè§£æè¿‡ç¨‹</h2><img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/2.png" class>

<h2 id="Dockerfileçš„ä¿ç•™å‘½ä»¤"><a href="#Dockerfileçš„ä¿ç•™å‘½ä»¤" class="headerlink" title="Dockerfileçš„ä¿ç•™å‘½ä»¤"></a>Dockerfileçš„ä¿ç•™å‘½ä»¤</h2><p>å®˜æ–¹è¯´æ˜:<a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
<table>
<thead>
<tr>
<th>ä¿ç•™å­—</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><strong>FROM</strong></td>
<td><strong>å½“å‰é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒçš„</strong> <code>ç¬¬ä¸€ä¸ªæŒ‡ä»¤å¿…é¡»æ˜¯FROM</code></td>
</tr>
<tr>
<td>MAINTAINER</td>
<td>é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</td>
</tr>
<tr>
<td><strong>RUN</strong></td>
<td><strong>æ„å»ºé•œåƒæ—¶éœ€è¦è¿è¡Œçš„æŒ‡ä»¤</strong></td>
</tr>
<tr>
<td><strong>EXPOSE</strong></td>
<td><strong>å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²å‡ºçš„ç«¯å£å·</strong></td>
</tr>
<tr>
<td><strong>WORKDIR</strong></td>
<td><strong>æŒ‡å®šåœ¨åˆ›å»ºå®¹å™¨åï¼Œç»ˆç«¯é»˜è®¤ç™»å½•è¿›æ¥çš„å·¥ä½œç›®å½•ï¼Œä¸€ä¸ªè½è„šç‚¹</strong></td>
</tr>
<tr>
<td><strong>ENV</strong></td>
<td><strong>ç”¨æ¥åœ¨æ„å»ºé•œåƒè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</strong></td>
</tr>
<tr>
<td><strong>ADD</strong></td>
<td><strong>å°†å®¿ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒä¸”ADDå‘½ä»¤ä¼šè‡ªåŠ¨å¤„ç†URLå’Œè§£å‹taråŒ…</strong></td>
</tr>
<tr>
<td><strong>COPY</strong></td>
<td><strong>ç±»ä¼¼äºADDï¼Œæ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒä¸­<br>å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­&lt;åŸè·¯å¾„&gt;çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„&lt;ç›®æ ‡è·¯å¾„&gt;ä½ç½®</strong></td>
</tr>
<tr>
<td><strong>VOLUME</strong></td>
<td><strong>å®¹å™¨æ•°æ®å·ï¼Œç”¨äºæ•°æ®ä¿å­˜å’ŒæŒä¹…åŒ–å·¥ä½œ</strong></td>
</tr>
<tr>
<td><strong>CMD</strong></td>
<td><strong>æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤<br>Dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªCMDæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆï¼ŒCMDä¼šè¢«docker runä¹‹åçš„å‚æ•°æ›¿æ¢</strong></td>
</tr>
<tr>
<td><strong>ENTRYPOINT</strong></td>
<td><strong>æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤<br>ENTRYPOINTçš„ç›®çš„å’ŒCMDä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºåŠå…¶å‚æ•°</strong></td>
</tr>
</tbody></table>
<h3 id="FROM-å‘½ä»¤"><a href="#FROM-å‘½ä»¤" class="headerlink" title="FROM å‘½ä»¤"></a>FROM å‘½ä»¤</h3><ul>
<li><p>åŸºäºé‚£ä¸ªé•œåƒè¿›è¡Œæ„å»ºæ–°çš„é•œåƒ,åœ¨æ„å»ºæ—¶ä¼šè‡ªåŠ¨ä»docker hubæ‹‰å–baseé•œåƒ å¿…é¡»ä½œä¸ºDockerfileçš„ç¬¬ä¸€ä¸ªæŒ‡ä»¤å‡ºç°</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  &lt;image&gt;</span><br><span class="line"><span class="keyword">FROM</span>  &lt;image&gt;[:&lt;tag&gt;]     ä½¿ç”¨ç‰ˆæœ¬ä¸å†™ä¸ºlatest</span><br><span class="line"><span class="keyword">FROM</span>  &lt;image&gt;[@&lt;digest&gt;]  ä½¿ç”¨æ‘˜è¦</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="MAINTAINER-å‘½ä»¤"><a href="#MAINTAINER-å‘½ä»¤" class="headerlink" title="MAINTAINER  å‘½ä»¤"></a>MAINTAINER  å‘½ä»¤</h3><ul>
<li><p>é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€[åºŸå¼ƒ]</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">MAINTAINER</span> &lt;name&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="RUN-å‘½ä»¤"><a href="#RUN-å‘½ä»¤" class="headerlink" title="RUN å‘½ä»¤"></a>RUN å‘½ä»¤</h3><ul>
<li><p>RUNæŒ‡ä»¤å°†åœ¨å½“å‰æ˜ åƒä¹‹ä¸Šçš„æ–°å±‚ä¸­æ‰§è¡Œä»»ä½•å‘½ä»¤å¹¶æäº¤ç»“æœã€‚ç”Ÿæˆçš„æäº¤æ˜ åƒå°†ç”¨äºDockerfileä¸­çš„ä¸‹ä¸€æ­¥</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> &lt;<span class="built_in">command</span>&gt; (shell form, the <span class="built_in">command</span> is run <span class="keyword">in</span> a shell, <span class="built_in">which</span> by default is /bin/sh -c on Linux or cmd /S /C on Windows)</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> hello</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;executable&quot;</span>, <span class="string">&quot;param1&quot;</span>, <span class="string">&quot;param2&quot;</span>] (<span class="built_in">exec</span> form)</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;/bin/bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;echo hello&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="EXPOSE-å‘½ä»¤"><a href="#EXPOSE-å‘½ä»¤" class="headerlink" title="EXPOSE å‘½ä»¤"></a>EXPOSE å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥æŒ‡å®šæ„å»ºçš„é•œåƒåœ¨è¿è¡Œä¸ºå®¹å™¨æ—¶å¯¹å¤–æš´éœ²çš„ç«¯å£</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span>/tcp  å¦‚æœæ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šåˆ™é»˜è®¤æš´éœ²éƒ½æ˜¯tcp</span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span>/udp</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="CMD-å‘½ä»¤"><a href="#CMD-å‘½ä»¤" class="headerlink" title="CMD å‘½ä»¤"></a>CMD å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥ä¸ºå¯åŠ¨çš„å®¹å™¨æŒ‡å®šæ‰§è¡Œçš„å‘½ä»¤,åœ¨Dockerfileä¸­åªèƒ½æœ‰ä¸€æ¡CMDæŒ‡ä»¤ã€‚å¦‚æœåˆ—å‡ºå¤šä¸ªå‘½ä»¤ï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªå‘½ä»¤æ‰ä¼šç”Ÿæ•ˆã€‚</p>
</li>
<li><p>æ³¨æ„: <strong>Dockerfileä¸­åªèƒ½æœ‰ä¸€æ¡CMDæŒ‡ä»¤ã€‚å¦‚æœåˆ—å‡ºå¤šä¸ªå‘½ä»¤ï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªå‘½ä»¤æ‰ä¼šç”Ÿæ•ˆã€‚</strong></p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;executable&quot;</span>,<span class="string">&quot;param1&quot;</span>,<span class="string">&quot;param2&quot;</span>] (<span class="built_in">exec</span> form, this is the preferred form)</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;param1&quot;</span>,<span class="string">&quot;param2&quot;</span>] (as default parameters to ENTRYPOINT)</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">command</span> param1 param2 (shell form)</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="WORKDIR-å‘½ä»¤"><a href="#WORKDIR-å‘½ä»¤" class="headerlink" title="WORKDIR å‘½ä»¤"></a>WORKDIR å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥ä¸ºDockerfileä¸­çš„ä»»ä½•RUNã€CMDã€ENTRYPOINTã€COPYå’ŒADDæŒ‡ä»¤è®¾ç½®å·¥ä½œç›®å½•ã€‚å¦‚æœWORKDIRä¸å­˜åœ¨ï¼Œå³ä½¿å®ƒæ²¡æœ‰åœ¨ä»»ä½•åç»­DockerfileæŒ‡ä»¤ä¸­ä½¿ç”¨ï¼Œå®ƒä¹Ÿå°†è¢«åˆ›å»ºã€‚</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /path/to/workdir</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /a</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> b</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> c</span></span><br><span class="line">`æ³¨æ„:<span class="keyword">WORKDIR</span><span class="bash">æŒ‡ä»¤å¯ä»¥åœ¨Dockerfileä¸­å¤šæ¬¡ä½¿ç”¨ã€‚å¦‚æœæä¾›äº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è¯¥è·¯å¾„å°†ä¸å…ˆå‰WORKDIRæŒ‡ä»¤çš„è·¯å¾„ç›¸å¯¹`</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ENV-å‘½ä»¤"><a href="#ENV-å‘½ä»¤" class="headerlink" title="ENV å‘½ä»¤"></a>ENV å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥ä¸ºæ„å»ºé•œåƒè®¾ç½®ç¯å¢ƒå˜é‡ã€‚è¿™ä¸ªå€¼å°†å‡ºç°åœ¨æ„å»ºé˜¶æ®µä¸­æ‰€æœ‰åç»­æŒ‡ä»¤çš„ç¯å¢ƒä¸­ã€‚</p>
</li>
<li><p>è¯­æ³•ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ENV</span> &lt;key&gt; &lt;value&gt;</span><br><span class="line"><span class="keyword">ENV</span> &lt;key&gt;=&lt;value&gt; ...</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ADD-å‘½ä»¤"><a href="#ADD-å‘½ä»¤" class="headerlink" title="ADD å‘½ä»¤"></a>ADD å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥ä»contextä¸Šä¸‹æ–‡å¤åˆ¶æ–°æ–‡ä»¶ã€ç›®å½•æˆ–è¿œç¨‹æ–‡ä»¶urlï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°ä½äºæŒ‡å®šè·¯å¾„çš„æ˜ åƒæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="bash"> hom* /mydir/       é€šé…ç¬¦æ·»åŠ å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> hom?.txt /mydir/   é€šé…ç¬¦æ·»åŠ </span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> test.txt relativeDir/  å¯ä»¥æŒ‡å®šç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> test.txt /absoluteDir/ ä¹Ÿå¯ä»¥æŒ‡å®šç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> url </span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="COPY-å‘½ä»¤"><a href="#COPY-å‘½ä»¤" class="headerlink" title="COPY å‘½ä»¤"></a>COPY å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥å°†contextç›®å½•ä¸­æŒ‡å®šæ–‡ä»¶å¤åˆ¶åˆ°é•œåƒçš„æŒ‡å®šç›®å½•ä¸­</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> src dest</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> [<span class="string">&quot;&lt;src&gt;&quot;</span>,... <span class="string">&quot;&lt;dest&gt;&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="VOLUME-å‘½ä»¤"><a href="#VOLUME-å‘½ä»¤" class="headerlink" title="VOLUME å‘½ä»¤"></a>VOLUME å‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥å®šä¹‰å®¹å™¨è¿è¡Œæ—¶å¯ä»¥æŒ‚åœ¨åˆ°å®¿ä¸»æœºçš„ç›®å½•</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/data&quot;</span>]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="ENTRYPOINTå‘½ä»¤"><a href="#ENTRYPOINTå‘½ä»¤" class="headerlink" title="ENTRYPOINTå‘½ä»¤"></a>ENTRYPOINTå‘½ä»¤</h3><ul>
<li><p>ç”¨æ¥æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œå‘½ä»¤å’ŒCMDç±»ä¼¼</p>
</li>
<li><p>è¯­æ³•:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">  [<span class="string">&quot;executable&quot;</span>, <span class="string">&quot;param1&quot;</span>, <span class="string">&quot;param2&quot;</span>]</span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> <span class="built_in">command</span> param1 param2</span></span><br></pre></td></tr></table></figure>

<p>ENTRYPOINTæŒ‡ä»¤ï¼Œå¾€å¾€ç”¨äºè®¾ç½®å®¹å™¨å¯åŠ¨åçš„<strong>ç¬¬ä¸€ä¸ªå‘½ä»¤</strong>ï¼Œè¿™å¯¹ä¸€ä¸ªå®¹å™¨æ¥è¯´å¾€å¾€æ˜¯å›ºå®šçš„ã€‚<br>CMDæŒ‡ä»¤ï¼Œå¾€å¾€ç”¨äºè®¾ç½®å®¹å™¨å¯åŠ¨çš„ç¬¬ä¸€ä¸ªå‘½ä»¤çš„<strong>é»˜è®¤å‚æ•°</strong>ï¼Œè¿™å¯¹ä¸€ä¸ªå®¹å™¨æ¥è¯´å¯ä»¥æ˜¯å˜åŒ–çš„ã€‚</p>
</li>
</ul>
<h1 id="æ„å»ºSpringbooté¡¹ç›®"><a href="#æ„å»ºSpringbooté¡¹ç›®" class="headerlink" title="æ„å»ºSpringbooté¡¹ç›®"></a>æ„å»ºSpringbooté¡¹ç›®</h1><ul>
<li>ç¼–å†™<code>Dockerfile</code></li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åŸºäºjdk 8 è¿›è¡Œæ„å»º</span></span><br><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span></span><br><span class="line"><span class="comment">#æ·»åŠ é¡¹ç›®jaråŒ…ï¼ŒjaråŒ…ä¸dockerfileåœ¨åŒä¸€çº§ç›®å½•ä¸‹</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> Docker-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class="line"><span class="comment">#æš´éœ²é¡¹ç›®è¿è¡Œçš„ç«¯å£å·ä¾¿äºæœåŠ¡å™¨æ˜ å°„</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8888</span></span><br><span class="line"><span class="comment">#é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®è¿œç¨‹è¿æ¥</li>
</ul>
<p><font color="skyblue">æ³¨æ„ï¼šæ­¤å¤„é€‰æ‹©<code>tcp socket </code>è¿æ¥ , è¿™é‡Œä¼šç”¨åˆ°2375ç«¯å£å·ï¼Œéœ€è¦é…ç½®æœåŠ¡å™¨å¼€æ”¾2375ç«¯å£å·è¿›è¡Œ(ä¸€ä¸ªæ˜¯åœ¨å®å¡”é¡µé¢è®¾ç½®å¼€æ”¾ï¼Œä¸€ä¸ªæ˜¯åœ¨æœåŠ¡å™¨å®‰å…¨ç»„è®¾ç½®å¼€æ”¾) ï¼Œè¿˜éœ€è¦è¿›è¡Œå…¶å®ƒç›¸å…³è®¾ç½®è¯·ç»§ç»­å¾€ä¸‹é˜…è¯», é©¬èµ›å…‹çš„ä½ç½®æ˜¯æœåŠ¡å™¨ipåœ°å€</font></p>
<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/3.png" class>

<p><font color="red">é‡è¦é…ç½®:</font></p>
<p>è¿˜éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­:</p>
<p><code>/lib/systemd/system/docker.service</code></p>
<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/7.png" class>

<p>è¿›å…¥æ–‡ä»¶åæŒ‰ <code>i </code>è¿›å…¥ <code>insert </code>æ¨¡å¼ï¼Œç„¶åæ”¹ä¸ºä¸Šé¢çš„çº¢è‰²è¯­å¥</p>
<p>å³ <code>ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375</code></p>
<p>å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯<code>centos7 </code>åŠä»¥ä¸Šï¼Œå°±æ”¹ä¸ºï¼š</p>
<p><code>ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock</code><br>ç„¶åä¿å­˜é€€å‡º.</p>
<p>éšåå†è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é€šçŸ¥dockeræœåŠ¡åšå‡ºçš„ä¿®æ”¹</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯docker</span></span><br><span class="line">service docker restart</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>é…ç½®é•œåƒç›¸å…³ä¿¡æ¯</li>
</ul>
<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/4.png" class>

<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/5.png" class>



<ul>
<li>å‘å¸ƒé¡¹ç›®</li>
</ul>
<img src="/2021/07/27/Docker%EF%BC%88%E4%B8%89%EF%BC%89/6.png" class>

]]></content>
      <categories>
        <category>è™šæ‹ŸåŒ–å®¹å™¨</category>
      </categories>
      <tags>
        <tag>è™šæ‹ŸåŒ–å®¹å™¨</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker(ä¸€):è™šæ‹ŸåŒ–å®¹å™¨æŠ€æœ¯</title>
    <url>/2021/07/24/Docker%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šæ›¾ç»å°è¯•è¿‡ä½¿ç”¨Vmwareæ¥å­¦ä¹ Linuxï¼Œå°è¯•å½“åšæœåŠ¡å™¨ï¼Œä¹‹åä¾¿å¼€å§‹æ­ç¯å¢ƒï¼Œä¸€å¥—æ•´ä¸‹æ¥ï¼Œç¡®å®éº»çƒ¦ï¼Œè€Œä¸”è¿˜åƒè‡ªå·±ç”µè„‘çš„èµ„æºï¼Œç”µè„‘ä¸å‡ºæ‰€æ–™çš„å‘ç”Ÿäº†ä¸€äº›å¾®å°çš„å˜åŒ–hhhhï¼Œç›´åˆ°åæ¥æˆ‘çš„Vmwareå‡ºäº†ç‚¹å°é—®é¢˜ï¼Œæ€ä¹ˆè°ƒéƒ½è°ƒä¸å¥½ï¼Œè°ƒå¥½äº†åˆå¾—é‡æ–°é…ç¯å¢ƒï¼Œå¿ƒæ€å´©äº†ï¼Œé‚æ”¾å¼ƒï¼Œè½¬å¤´å°±åœ¨è…¾è®¯äº‘ä¹°äº†ä¸€å°æœåŠ¡å™¨ç©.å½“ç„¶äº†ï¼Œä¹Ÿéƒ¨ç½²è¿‡ä¸€äº›æœåŠ¡ï¼Œemmmï¼Œç‰ˆæœ¬é—®é¢˜æˆ‘å§‹ç»ˆè°ƒä¸å¥½ï¼Œè¦ä¸‹è½½ä¸€å †ä¸œè¥¿ï¼Œåæ¥æ‰å‘ç°äº†dockerè¿™ä¸ªå¥½ä¸œè¥¿</p>
</blockquote>
<ul>
<li>å®˜æ–¹æ–‡æ¡£åœ°å€:<a href="https://www.docker.com/get-started">https://www.docker.com/get-started</a></li>
<li>ä¸­æ–‡å‚è€ƒæ‰‹å†Œ:<a href="https://docker_practice.gitee.io/zh-cn/">https://docker_practice.gitee.io/zh-cn/</a></li>
</ul>
<hr>
<h1 id="ğŸ˜ä»€ä¹ˆæ˜¯Dcoker"><a href="#ğŸ˜ä»€ä¹ˆæ˜¯Dcoker" class="headerlink" title="ğŸ˜ä»€ä¹ˆæ˜¯Dcoker"></a>ğŸ˜ä»€ä¹ˆæ˜¯Dcoker</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.å®˜æ–¹ä»‹ç»</span></span><br><span class="line"><span class="bullet">-</span> We have a complete container solution for you - no matter who you are and where you are on your containerization journey.</span><br><span class="line"><span class="bullet">-</span> ç¿»è¯‘: æˆ‘ä»¬ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„å®¹å™¨è§£å†³æ–¹æ¡ˆ,ä¸ç®¡ä½ æ˜¯è°,ä¸ç®¡ä½ åœ¨å“ª,ä½ éƒ½å¯ä»¥å¼€å§‹å®¹å™¨çš„çš„æ—…ç¨‹ã€‚</span><br><span class="line"><span class="bullet">-</span> å®˜æ–¹å®šä¹‰: dockeræ˜¯ä¸€ä¸ªå®¹å™¨æŠ€æœ¯ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ˜®Dockerçš„èµ·æº"><a href="#ğŸ˜®Dockerçš„èµ·æº" class="headerlink" title="ğŸ˜®Dockerçš„èµ·æº"></a>ğŸ˜®Dockerçš„èµ·æº</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Docker æœ€åˆæ˜¯ dotCloud å…¬å¸åˆ›å§‹äºº Solomon Hykes åœ¨æ³•å›½æœŸé—´å‘èµ·çš„ä¸€ä¸ªå…¬å¸å†…éƒ¨é¡¹ç›®ï¼Œå®ƒæ˜¯åŸºäº dotCloud å…¬å¸å¤šå¹´äº‘æœåŠ¡æŠ€æœ¯çš„ä¸€æ¬¡é©æ–°ï¼Œå¹¶äº 2013 å¹´ 3 æœˆä»¥ Apache 2.0 æˆæƒåè®®å¼€æºï¼Œä¸»è¦é¡¹ç›®ä»£ç åœ¨ GitHub ä¸Šè¿›è¡Œç»´æŠ¤ã€‚Docker é¡¹ç›®åæ¥è¿˜åŠ å…¥äº† Linux åŸºé‡‘ä¼šï¼Œå¹¶æˆç«‹æ¨åŠ¨ å¼€æ”¾å®¹å™¨è”ç›Ÿï¼ˆOCIï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">Docker è‡ªå¼€æºåå—åˆ°å¹¿æ³›çš„å…³æ³¨å’Œè®¨è®ºï¼Œè‡³ä»Šå…¶ GitHub é¡¹ç›® å·²ç»è¶…è¿‡ 5 ä¸‡ 7 åƒä¸ªæ˜Ÿæ ‡å’Œä¸€ä¸‡å¤šä¸ª forkã€‚ç”šè‡³ç”±äº Docker é¡¹ç›®çš„ç«çˆ†ï¼Œåœ¨ 2013 å¹´åº•ï¼ŒdotCloud å…¬å¸å†³å®šæ”¹åä¸º Dockerã€‚Docker æœ€åˆæ˜¯åœ¨ Ubuntu 12.04 ä¸Šå¼€å‘å®ç°çš„ï¼›Red Hat åˆ™ä» RHEL 6.5 å¼€å§‹å¯¹ Docker è¿›è¡Œæ”¯æŒï¼›Google ä¹Ÿåœ¨å…¶ PaaS äº§å“ä¸­å¹¿æ³›åº”ç”¨ Dockerã€‚</span><br><span class="line"></span><br><span class="line">Docker ä½¿ç”¨ Google å…¬å¸æ¨å‡ºçš„ Go è¯­è¨€ è¿›è¡Œå¼€å‘å®ç°ï¼ŒåŸºäº Linux å†…æ ¸çš„ cgroupï¼Œnamespaceï¼Œä»¥åŠ OverlayFS ç±»çš„ Union FS ç­‰æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äºæ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚ç”±äºéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»å’Œå…¶å®ƒçš„éš”ç¦»çš„è¿›ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ˜²ä¸ºä»€ä¹ˆæ˜¯Docker"><a href="#ğŸ˜²ä¸ºä»€ä¹ˆæ˜¯Docker" class="headerlink" title="ğŸ˜²ä¸ºä»€ä¹ˆæ˜¯Docker"></a>ğŸ˜²ä¸ºä»€ä¹ˆæ˜¯Docker</h2><ul>
<li><p><code>åœ¨å¼€å‘çš„æ—¶å€™ï¼Œåœ¨æœ¬æœºæµ‹è¯•ç¯å¢ƒå¯ä»¥è·‘ï¼Œç”Ÿäº§ç¯å¢ƒè·‘ä¸èµ·æ¥</code></p>
<p>è¿™é‡Œæˆ‘ä»¬æ‹¿java Webåº”ç”¨ç¨‹åºä¸¾ä¾‹ï¼Œæˆ‘ä»¬ä¸€ä¸ªjava Webåº”ç”¨ç¨‹åºæ¶‰åŠå¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚jdkã€tomcatã€mysqlç­‰è½¯ä»¶ç¯å¢ƒã€‚å½“è¿™äº›å…¶ä¸­æŸä¸€é¡¹ç‰ˆæœ¬ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè·‘ä¸èµ·æ¥è¿™ç§æƒ…å†µã€‚Dockeråˆ™å°†ç¨‹åºä»¥åŠä½¿ç”¨è½¯ä»¶ç¯å¢ƒç›´æ¥æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ— è®ºåœ¨é‚£ä¸ªæœºå™¨ä¸Šä¿è¯äº†ç¯å¢ƒä¸€è‡´ã€‚</p>
<p><strong>ä¼˜åŠ¿1:  ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ,æ›´è½»æ¾çš„è¿ç§»</strong></p>
</li>
<li><p><code>æœåŠ¡å™¨è‡ªå·±çš„ç¨‹åºæŒ‚äº†ï¼Œç»“æœå‘ç°æ˜¯åˆ«äººç¨‹åºå‡ºäº†é—®é¢˜æŠŠå†…å­˜åƒå®Œäº†ï¼Œè‡ªå·±ç¨‹åºå› ä¸ºå†…å­˜ä¸å¤Ÿå°±æŒ‚äº†</code></p>
<p>è¿™ç§ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æƒ…å†µï¼Œå¦‚æœä½ çš„ç¨‹åºé‡è¦æ€§ä¸æ˜¯ç‰¹åˆ«é«˜çš„è¯ï¼Œå…¬å¸åŸºæœ¬ä¸Šä¸å¯èƒ½è®©ä½ çš„ç¨‹åºç‹¬äº«ä¸€å°æœåŠ¡å™¨çš„ï¼Œè¿™æ—¶å€™ä½ çš„æœåŠ¡å™¨å°±ä¼šè·Ÿå…¬å¸å…¶ä»–äººçš„ç¨‹åºå…±äº«ä¸€å°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸å¯é¿å…åœ°å°±ä¼šå—åˆ°å…¶ä»–ç¨‹åºçš„å¹²æ‰°ï¼Œå¯¼è‡´è‡ªå·±çš„ç¨‹åºå‡ºç°é—®é¢˜ã€‚Dockerå°±å¾ˆå¥½è§£å†³äº†ç¯å¢ƒéš”ç¦»çš„é—®é¢˜ï¼Œåˆ«äººç¨‹åºä¸ä¼šå½±å“åˆ°è‡ªå·±çš„ç¨‹åºã€‚</p>
<p><strong>ä¼˜åŠ¿2ï¼šå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»,å®¹å™¨ä¸å®¹å™¨ä¹‹é—´äº’ä¸å½±å“,æ›´é«˜æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æº</strong></p>
</li>
<li><p><code>å…¬å¸è¦å¼„ä¸€ä¸ªæ´»åŠ¨ï¼Œå¯èƒ½ä¼šæœ‰å¤§é‡çš„æµé‡è¿›æ¥ï¼Œå…¬å¸éœ€è¦å†å¤šéƒ¨ç½²å‡ åå°æœåŠ¡å™¨</code></p>
<p>åœ¨æ²¡æœ‰Dockerçš„æƒ…å†µä¸‹ï¼Œè¦åœ¨å‡ å¤©å†…éƒ¨ç½²å‡ åå°æœåŠ¡å™¨ï¼Œè¿™å¯¹è¿ç»´æ¥è¯´æ˜¯ä¸€ä»¶éå¸¸æŠ˜ç£¨äººçš„äº‹ï¼Œè€Œä¸”æ¯å°æœåŠ¡å™¨çš„ç¯å¢ƒè¿˜ä¸ä¸€å®šä¸€æ ·ï¼Œå°±ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæœ€åéƒ¨ç½²åœ°å¤´çš®å‘éº»ã€‚ç”¨Dockerçš„è¯ï¼Œæˆ‘åªéœ€è¦å°†ç¨‹åºæ‰“åŒ…åˆ°é•œåƒï¼Œä½ è¦å¤šå°‘å°æœåŠ¡ï¼Œæˆ‘å°±ç»™åŠ›è·‘å¤šå°‘å®¹å™¨ï¼Œæå¤§åœ°æé«˜äº†éƒ¨ç½²æ•ˆç‡ã€‚</p>
<p><strong>ä¼˜åŠ¿3: é€šè¿‡é•œåƒå¤åˆ¶Nå¤šä¸ªç¯å¢ƒä¸€è‡´å®¹å™¨</strong></p>
</li>
</ul>
<hr>
<h1 id="ğŸ˜‰Dockerå’Œè™šæ‹ŸæœºåŒºåˆ«"><a href="#ğŸ˜‰Dockerå’Œè™šæ‹ŸæœºåŒºåˆ«" class="headerlink" title="ğŸ˜‰Dockerå’Œè™šæ‹ŸæœºåŒºåˆ«"></a>ğŸ˜‰Dockerå’Œè™šæ‹ŸæœºåŒºåˆ«</h1><blockquote>
<p>å…³äºDockerä¸è™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Œæˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„ä¸€å¼ å›¾ï¼Œéå¸¸ç›´è§‚å½¢è±¡åœ°å±•ç¤ºå‡ºæ¥ï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå›¾ã€‚</p>
</blockquote>
<img src="/2021/07/24/Docker%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class>

<p><code>æ¯”è¾ƒä¸Šé¢ä¸¤å¼ å›¾ï¼Œæˆ‘ä»¬å‘ç°è™šæ‹Ÿæœºæ˜¯æºå¸¦æ“ä½œç³»ç»Ÿï¼Œæœ¬èº«å¾ˆå°çš„åº”ç”¨ç¨‹åºå´å› ä¸ºæºå¸¦äº†æ“ä½œç³»ç»Ÿè€Œå˜å¾—éå¸¸å¤§ï¼Œå¾ˆç¬¨é‡</code>ã€‚Dockeræ˜¯ä¸æºå¸¦æ“ä½œç³»ç»Ÿçš„ï¼Œæ‰€ä»¥Dockerçš„åº”ç”¨å°±éå¸¸çš„è½»å·§ã€‚å¦å¤–åœ¨è°ƒç”¨å®¿ä¸»æœºçš„CPUã€ç£ç›˜ç­‰ç­‰è¿™äº›èµ„æºçš„æ—¶å€™ï¼Œæ‹¿å†…å­˜ä¸¾ä¾‹ï¼Œè™šæ‹Ÿæœºæ˜¯åˆ©ç”¨Hypervisorå»è™šæ‹ŸåŒ–å†…å­˜ï¼Œæ•´ä¸ªè°ƒç”¨è¿‡ç¨‹æ˜¯è™šæ‹Ÿå†…å­˜-&gt;è™šæ‹Ÿç‰©ç†å†…å­˜-&gt;çœŸæ­£ç‰©ç†å†…å­˜ï¼Œä½†æ˜¯Dockeræ˜¯åˆ©ç”¨Docker Engineå»è°ƒç”¨å®¿ä¸»çš„çš„èµ„æºï¼Œè¿™æ—¶å€™è¿‡ç¨‹æ˜¯è™šæ‹Ÿå†…å­˜-&gt;çœŸæ­£ç‰©ç†å†…å­˜ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th>ä¼ ç»Ÿè™šæ‹Ÿæœº</th>
<th>Dockerå®¹å™¨</th>
</tr>
</thead>
<tbody><tr>
<td>ç£ç›˜å ç”¨</td>
<td>å‡ ä¸ªGBåˆ°å‡ åä¸ªGBå·¦å³</td>
<td>å‡ åMBåˆ°å‡ ç™¾MBå·¦å³</td>
</tr>
<tr>
<td>CPUå†…å­˜å ç”¨</td>
<td>è™šæ‹Ÿæ“ä½œç³»ç»Ÿéå¸¸å ç”¨CPUå’Œå†…å­˜</td>
<td>Dockerå¼•æ“å ç”¨æä½</td>
</tr>
<tr>
<td>å¯åŠ¨é€Ÿåº¦</td>
<td>ï¼ˆä»å¼€æœºåˆ°è¿è¡Œé¡¹ç›®ï¼‰å‡ åˆ†é’Ÿ</td>
<td>ï¼ˆä»å¼€å¯å®¹å™¨åˆ°è¿è¡Œé¡¹ç›®ï¼‰å‡ ç§’</td>
</tr>
<tr>
<td>å®‰è£…ç®¡ç†</td>
<td>éœ€è¦ä¸“é—¨çš„è¿ç»´æŠ€æœ¯</td>
<td>å®‰è£…ã€ç®¡ç†æ–¹ä¾¿</td>
</tr>
<tr>
<td>åº”ç”¨éƒ¨ç½²</td>
<td>æ¯æ¬¡éƒ¨ç½²éƒ½è´¹æ—¶è´¹åŠ›</td>
<td>ä»ç¬¬äºŒæ¬¡éƒ¨ç½²å¼€å§‹è½»æ¾ç®€æ·</td>
</tr>
<tr>
<td>è€¦åˆæ€§</td>
<td>å¤šä¸ªåº”ç”¨æœåŠ¡å®‰è£…åˆ°ä¸€èµ·ï¼Œå®¹æ˜“äº’ç›¸å½±å“</td>
<td>æ¯ä¸ªåº”ç”¨æœåŠ¡ä¸€ä¸ªå®¹å™¨ï¼Œè¾¾æˆéš”ç¦»</td>
</tr>
<tr>
<td>ç³»ç»Ÿä¾èµ–</td>
<td>æ— </td>
<td>éœ€æ±‚ç›¸åŒæˆ–ç›¸ä¼¼çš„å†…æ ¸ï¼Œç›®å‰æ¨èæ˜¯Linux</td>
</tr>
</tbody></table>
<h1 id="ğŸ˜Dockerå®‰è£…-Linux"><a href="#ğŸ˜Dockerå®‰è£…-Linux" class="headerlink" title="ğŸ˜Dockerå®‰è£…(Linux)"></a>ğŸ˜Dockerå®‰è£…(Linux)</h1><ul>
<li><p>åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒCentOS ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ <code>--mirror</code> é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">$ sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨docker</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> docker</span><br><span class="line">$ sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºdockerç”¨æˆ·ç»„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo groupadd docker</span><br></pre></td></tr></table></figure></li>
<li><p>å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"><span class="comment">#é‡å¯docker</span></span><br><span class="line">$ systemctl restart docker</span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•dockerå®‰è£…æ˜¯å¦æ­£ç¡®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run hello-world</span><br></pre></td></tr></table></figure></li>
<li><p>å‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå³æˆåŠŸ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker run hello-world</span></span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>è™šæ‹ŸåŒ–å®¹å™¨</category>
      </categories>
      <tags>
        <tag>è™šæ‹ŸåŒ–å®¹å™¨</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker(å››):Docker-composeçš„ä½¿ç”¨</title>
    <url>/2021/07/28/Docker%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>Compose</code> é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚ä»åŠŸèƒ½ä¸Šçœ‹ï¼Œè·Ÿ <code>OpenStack</code> ä¸­çš„ <code>Heat</code> ååˆ†ç±»ä¼¼ã€‚</p>
<p>å…¶ä»£ç ç›®å‰åœ¨ <a href="https://github.com/docker/compose">https://github.com/docker/compose</a> ä¸Šå¼€æºã€‚</p>
<p><code>Compose</code> å®šä½æ˜¯ ã€Œå®šä¹‰å’Œè¿è¡Œå¤šä¸ª Docker å®¹å™¨çš„åº”ç”¨ï¼ˆDefining and running multi-container Docker applicationsï¼‰ã€ï¼Œå…¶å‰èº«æ˜¯å¼€æºé¡¹ç›® Figã€‚</p>
<p>é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ä½¿ç”¨ä¸€ä¸ª <code>Dockerfile</code> æ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚</p>
<p><code>Compose</code> æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ <code>docker-compose.yml</code> æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</p>
<p><code>Compose</code> ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p>
<ul>
<li>æœåŠ¡ (<code>service</code>)ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li>
<li>é¡¹ç›® (<code>project</code>)ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
</ul>
<p><code>Compose</code> çš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯é¡¹ç›®ï¼Œé€šè¿‡å­å‘½ä»¤å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><code>Compose</code> é¡¹ç›®ç”± Python ç¼–å†™ï¼Œå®ç°ä¸Šè°ƒç”¨äº† Docker æœåŠ¡æä¾›çš„ API æ¥å¯¹å®¹å™¨è¿›è¡Œç®¡ç†ã€‚å› æ­¤ï¼Œåªè¦æ‰€æ“ä½œçš„å¹³å°æ”¯æŒ Docker APIï¼Œå°±å¯ä»¥åœ¨å…¶ä¸Šåˆ©ç”¨ <code>Compose</code> æ¥è¿›è¡Œç¼–æ’ç®¡ç†ã€‚</p>
<h2 id="å®‰è£…ä¸å¸è½½"><a href="#å®‰è£…ä¸å¸è½½" class="headerlink" title="å®‰è£…ä¸å¸è½½"></a>å®‰è£…ä¸å¸è½½</h2><h3 id="1-linux"><a href="#1-linux" class="headerlink" title="1.linux"></a>1.linux</h3><p>æ³¨æ„ï¼š<strong>ä¸‹è½½éœ€è¦è¿‡æ…¢éœ€è¦æ¢ä¸‹è½½åœ°å€ï¼Œ</strong></p>
<ul>
<li>åœ¨ Linux ä¸Šçš„ä¹Ÿå®‰è£…ååˆ†ç®€å•ï¼Œä» å®˜æ–¹ GitHub Release å¤„ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux 64 ä½ç³»ç»Ÿä¸Šç›´æ¥ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶åŒ…ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo curl -L https://github.com/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨ä»¥ä¸‹é“¾æ¥æ¥ä¸‹è½½ï¼Œé€Ÿåº¦è¾ƒå¿«</span></span><br><span class="line">$ sudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-macosã€window"><a href="#2-macosã€window" class="headerlink" title="2.macosã€window"></a>2.macosã€window</h3><ul>
<li>Compose å¯ä»¥é€šè¿‡ Python çš„åŒ…ç®¡ç†å·¥å…· pip è¿›è¡Œå®‰è£…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨ï¼Œç”šè‡³èƒ½å¤Ÿç›´æ¥åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚<code>Docker Desktop for Mac/Windows è‡ªå¸¦ docker-compose äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®‰è£… Docker ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨</code>ã€‚</li>
</ul>
<h3 id="3-bashå‘½ä»¤è¡¥å…¨"><a href="#3-bashå‘½ä»¤è¡¥å…¨" class="headerlink" title="3.bashå‘½ä»¤è¡¥å…¨"></a>3.bashå‘½ä»¤è¡¥å…¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -L https://raw.githubusercontent.com/docker/compose/1.25.5/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span></span><br></pre></td></tr></table></figure>

<h3 id="4-å¸è½½"><a href="#4-å¸è½½" class="headerlink" title="4.å¸è½½"></a>4.å¸è½½</h3><ul>
<li>å¦‚æœæ˜¯äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…çš„ï¼Œåˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br></pre></td></tr></table></figure>

<h3 id="5-æµ‹è¯•å®‰è£…æˆåŠŸ"><a href="#5-æµ‹è¯•å®‰è£…æˆåŠŸ" class="headerlink" title="5.æµ‹è¯•å®‰è£…æˆåŠŸ"></a>5.æµ‹è¯•å®‰è£…æˆåŠŸ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose --version</span></span><br><span class="line"> docker-compose version 1.25.5, build 4667896b</span><br></pre></td></tr></table></figure>

<h2 id="docker-composeä½¿ç”¨"><a href="#docker-composeä½¿ç”¨" class="headerlink" title="docker composeä½¿ç”¨"></a>docker composeä½¿ç”¨</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ç›¸å…³æ¦‚å¿µ</span></span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆä»‹ç»å‡ ä¸ªæœ¯è¯­ã€‚</p>
<ul>
<li>æœåŠ¡ (<code>service</code>)ï¼šä¸€ä¸ªåº”ç”¨å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªç›¸åŒé•œåƒçš„å®ä¾‹ã€‚</li>
<li>é¡¹ç›® (<code>project</code>)ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒã€‚âˆ‚ä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”±å¤šä¸ªæœåŠ¡ï¼ˆå®¹å™¨ï¼‰å…³è”è€Œæˆï¼Œ<code>Compose</code> é¢å‘é¡¹ç›®è¿›è¡Œç®¡ç†ã€‚</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 2.åœºæ™¯</span></span><br></pre></td></tr></table></figure>

<p>æœ€å¸¸è§çš„é¡¹ç›®æ˜¯ web ç½‘ç«™ï¼Œè¯¥é¡¹ç›®åº”è¯¥åŒ…å« web åº”ç”¨å’Œç¼“å­˜ã€‚</p>
<ul>
<li>springbootåº”ç”¨</li>
<li>mysqlæœåŠ¡</li>
<li>redisæœåŠ¡</li>
<li>elasticsearchæœåŠ¡</li>
<li>â€¦â€¦.</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.docker-composeæ¨¡æ¿</span></span><br><span class="line"><span class="bullet">-</span> å‚è€ƒæ–‡æ¡£:https://docker<span class="emphasis">_practice.gitee.io/zh-cn/compose/compose_</span>file.html</span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysqldb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7.19</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/root/mysql/conf:/etc/mysql/conf.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/root/mysql/logs:/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/root/mysql/data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ems</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:4.0.14</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ems</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/root/redis/data:/data</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">ems:</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 4.é€šè¿‡docker-composeè¿è¡Œä¸€ç»„å®¹å™¨</span></span><br><span class="line"><span class="bullet">-</span> å‚è€ƒæ–‡æ¡£:https://docker<span class="emphasis">_practice.gitee.io/zh-cn/compose/commands.html</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># docker-compose up    							//å‰å°å¯åŠ¨ä¸€ç»„æœåŠ¡</span></span><br><span class="line">[root@centos ~]<span class="comment"># docker-compose up -d 							//åå°å¯åŠ¨ä¸€ç»„æœåŠ¡</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="docker-compose-æ¨¡æ¿æ–‡ä»¶"><a href="#docker-compose-æ¨¡æ¿æ–‡ä»¶" class="headerlink" title="docker-compose æ¨¡æ¿æ–‡ä»¶"></a>docker-compose æ¨¡æ¿æ–‡ä»¶</h2><p>æ¨¡æ¿æ–‡ä»¶æ˜¯ä½¿ç”¨ <code>Compose</code> çš„æ ¸å¿ƒï¼Œæ¶‰åŠåˆ°çš„æŒ‡ä»¤å…³é”®å­—ä¹Ÿæ¯”è¾ƒå¤šã€‚ä½†å¤§å®¶ä¸ç”¨æ‹…å¿ƒï¼Œè¿™é‡Œé¢å¤§éƒ¨åˆ†æŒ‡ä»¤è·Ÿ <code>docker run</code> ç›¸å…³å‚æ•°çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>é»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶åç§°ä¸º <code>docker-compose.yml</code>ï¼Œæ ¼å¼ä¸º YAML æ ¼å¼ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">examples/web</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/data&quot;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ <code>image</code> æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ– <code>build</code> æŒ‡ä»¤ï¼ˆéœ€è¦ Dockerfileï¼‰ç­‰æ¥è‡ªåŠ¨æ„å»ºç”Ÿæˆé•œåƒã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>build</code> æŒ‡ä»¤ï¼Œåœ¨ <code>Dockerfile</code> ä¸­è®¾ç½®çš„é€‰é¡¹(ä¾‹å¦‚ï¼š<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> ç­‰) å°†ä¼šè‡ªåŠ¨è¢«è·å–ï¼Œæ— éœ€åœ¨ <code>docker-compose.yml</code> ä¸­é‡å¤è®¾ç½®ã€‚</p>
<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»å„ä¸ªæŒ‡ä»¤çš„ç”¨æ³•ã€‚</p>
<h3 id="build"><a href="#build" class="headerlink" title="build"></a><code>build</code></h3><p>æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…ç›¸å¯¹ docker-compose.yml æ–‡ä»¶çš„è·¯å¾„ï¼‰ã€‚ <code>Compose</code> å°†ä¼šåˆ©ç”¨å®ƒè‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨è¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>context</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</p>
<p>ä½¿ç”¨ <code>dockerfile</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ–‡ä»¶åã€‚</p>
<p>ä½¿ç”¨ <code>arg</code> æŒ‡ä»¤æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„å˜é‡ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="command"><a href="#command" class="headerlink" title="command"></a><code>command</code></h3><p>è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">echo</span> <span class="string">&quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a><code>container_name</code></h3><p>æŒ‡å®šå®¹å™¨åç§°ã€‚é»˜è®¤å°†ä¼šä½¿ç”¨ <code>é¡¹ç›®åç§°_æœåŠ¡åç§°_åºå·</code> è¿™æ ·çš„æ ¼å¼ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">docker-web-container</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„: æŒ‡å®šå®¹å™¨åç§°åï¼Œè¯¥æœåŠ¡å°†æ— æ³•è¿›è¡Œæ‰©å±•ï¼ˆscaleï¼‰ï¼Œå› ä¸º Docker ä¸å…è®¸å¤šä¸ªå®¹å™¨å…·æœ‰ç›¸åŒçš„åç§°ã€‚</p>
</blockquote>
<h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a><code>depends_on</code></h3><p>è§£å†³å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜ã€‚ä»¥ä¸‹ä¾‹å­ä¸­ä¼šå…ˆå¯åŠ¨ <code>redis</code> <code>db</code> å†å¯åŠ¨ <code>web</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼š<code>web</code> æœåŠ¡ä¸ä¼šç­‰å¾… <code>redis</code> <code>db</code> ã€Œå®Œå…¨å¯åŠ¨ã€ä¹‹åæ‰å¯åŠ¨ã€‚</p>
</blockquote>
<h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a><code>env_file</code></h3><p>ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä¸ºå•ç‹¬çš„æ–‡ä»¶è·¯å¾„æˆ–åˆ—è¡¨ã€‚</p>
<p>å¦‚æœé€šè¿‡ <code>docker-compose -f FILE</code> æ–¹å¼æ¥æŒ‡å®š Compose æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ™ <code>env_file</code> ä¸­å˜é‡çš„è·¯å¾„ä¼šåŸºäºæ¨¡æ¿æ–‡ä»¶è·¯å¾„ã€‚</p>
<p>å¦‚æœæœ‰å˜é‡åç§°ä¸ <code>environment</code> æŒ‡ä»¤å†²çªï¼Œåˆ™æŒ‰ç…§æƒ¯ä¾‹ï¼Œä»¥åè€…ä¸ºå‡†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">env_file: .env</span><br><span class="line"></span><br><span class="line">env_file:</span><br><span class="line">  - ./common.env</span><br><span class="line">  - ./apps/web.env</span><br><span class="line">  - /opt/secrets.env</span><br></pre></td></tr></table></figure>

<p>ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå¿…é¡»ç¬¦åˆæ ¼å¼ï¼Œæ”¯æŒ <code>#</code> å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># common.env: Set development environment</span></span><br><span class="line">PROG_ENV=development</span><br></pre></td></tr></table></figure>

<h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a><code>environment</code></h3><p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å­—å…¸ä¸¤ç§æ ¼å¼ã€‚</p>
<p>åªç»™å®šåç§°çš„å˜é‡ä¼šè‡ªåŠ¨è·å–è¿è¡Œ Compose ä¸»æœºä¸Šå¯¹åº”å˜é‡çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥é˜²æ­¢æ³„éœ²ä¸å¿…è¦çš„æ•°æ®ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">RACK_ENV:</span> <span class="string">development</span></span><br><span class="line">  <span class="attr">SESSION_SECRET:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RACK_ENV=development</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SESSION_SECRET</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœå˜é‡åç§°æˆ–è€…å€¼ä¸­ç”¨åˆ° <code>true|falseï¼Œyes|no</code> ç­‰è¡¨è¾¾ <a href="https://yaml.org/type/bool.html">å¸ƒå°”</a> å«ä¹‰çš„è¯æ±‡ï¼Œæœ€å¥½æ”¾åˆ°å¼•å·é‡Œï¼Œé¿å… YAML è‡ªåŠ¨è§£ææŸäº›å†…å®¹ä¸ºå¯¹åº”çš„å¸ƒå°”è¯­ä¹‰ã€‚è¿™äº›ç‰¹å®šè¯æ±‡ï¼ŒåŒ…æ‹¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">y|Y|yes|Yes|YES|n|N|no|No|NO|<span class="literal">true</span>|True|TRUE|<span class="literal">false</span>|False|FALSE|on|On|ON|off|Off|OFF</span><br></pre></td></tr></table></figure>

<h3 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a><code>healthcheck</code></h3><p>é€šè¿‡å‘½ä»¤æ£€æŸ¥å®¹å™¨æ˜¯å¦å¥åº·è¿è¡Œã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line">  <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost&quot;</span>]</span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m30s</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="image"><a href="#image" class="headerlink" title="image"></a><code>image</code></h3><p>æŒ‡å®šä¸ºé•œåƒåç§°æˆ–é•œåƒ IDã€‚å¦‚æœé•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼Œ<code>Compose</code> å°†ä¼šå°è¯•æ‹‰å–è¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">ubuntu</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">orchardup/postgresql</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">a4bc65fd</span></span><br></pre></td></tr></table></figure>

<h3 id="networks"><a href="#networks" class="headerlink" title="networks"></a><code>networks</code></h3><p>é…ç½®å®¹å™¨è¿æ¥çš„ç½‘ç»œã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">some-service:</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">some-network</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">other-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">some-network:</span></span><br><span class="line">  <span class="attr">other-network:</span></span><br></pre></td></tr></table></figure>

<h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a><code>ports</code></h3><p>æš´éœ²ç«¯å£ä¿¡æ¯ã€‚</p>
<p>ä½¿ç”¨å®¿ä¸»ç«¯å£ï¼šå®¹å™¨ç«¯å£ <code>(HOST:CONTAINER)</code> æ ¼å¼ï¼Œæˆ–è€…ä»…ä»…æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼ˆå®¿ä¸»å°†ä¼šéšæœºé€‰æ‹©ç«¯å£ï¼‰éƒ½å¯ä»¥ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;3000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;49100:22&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;127.0.0.1:8001:8001&quot;</span></span><br></pre></td></tr></table></figure>

<p><em>æ³¨æ„ï¼šå½“ä½¿ç”¨ <code>HOST:CONTAINER</code> æ ¼å¼æ¥æ˜ å°„ç«¯å£æ—¶ï¼Œå¦‚æœä½ ä½¿ç”¨çš„å®¹å™¨ç«¯å£å°äº 60 å¹¶ä¸”æ²¡æ”¾åˆ°å¼•å·é‡Œï¼Œå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯ç»“æœï¼Œå› ä¸º <code>YAML</code> ä¼šè‡ªåŠ¨è§£æ <code>xx:yy</code> è¿™ç§æ•°å­—æ ¼å¼ä¸º 60 è¿›åˆ¶ã€‚ä¸ºé¿å…å‡ºç°è¿™ç§é—®é¢˜ï¼Œå»ºè®®æ•°å­—ä¸²éƒ½é‡‡ç”¨å¼•å·åŒ…æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚</em></p>
<h3 id="sysctls"><a href="#sysctls" class="headerlink" title="sysctls"></a><code>sysctls</code></h3><p>é…ç½®å®¹å™¨å†…æ ¸å‚æ•°ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="attr">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">  <span class="attr">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.core.somaxconn=1024</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure>

<h3 id="ulimits"><a href="#ulimits" class="headerlink" title="ulimits"></a><code>ulimits</code></h3><p>æŒ‡å®šå®¹å™¨çš„ ulimits é™åˆ¶å€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŒ‡å®šæœ€å¤§è¿›ç¨‹æ•°ä¸º 65535ï¼ŒæŒ‡å®šæ–‡ä»¶å¥æŸ„æ•°ä¸º 20000ï¼ˆè½¯é™åˆ¶ï¼Œåº”ç”¨å¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œä¸èƒ½è¶…è¿‡ç¡¬é™åˆ¶ï¼‰ å’Œ 40000ï¼ˆç³»ç»Ÿç¡¬é™åˆ¶ï¼Œåªèƒ½ root ç”¨æˆ·æé«˜ï¼‰ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ulimits:</span></span><br><span class="line">  <span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">  <span class="attr">nofile:</span></span><br><span class="line">    <span class="attr">soft:</span> <span class="number">20000</span></span><br><span class="line">    <span class="attr">hard:</span> <span class="number">40000</span></span><br></pre></td></tr></table></figure>

<h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a><code>volumes</code></h3><p>æ•°æ®å·æ‰€æŒ‚è½½è·¯å¾„è®¾ç½®ã€‚å¯ä»¥è®¾ç½®ä¸ºå®¿ä¸»æœºè·¯å¾„(<code>HOST:CONTAINER</code>)æˆ–è€…æ•°æ®å·åç§°(<code>VOLUME:CONTAINER</code>)ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®è®¿é—®æ¨¡å¼ ï¼ˆ<code>HOST:CONTAINER:ro</code>ï¼‰ã€‚</p>
<p>è¯¥æŒ‡ä»¤ä¸­è·¯å¾„æ”¯æŒç›¸å¯¹è·¯å¾„ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/var/lib/mysql</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">cache/:/tmp/cache</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">~/configs:/etc/configs/:ro</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœè·¯å¾„ä¸ºæ•°æ®å·åç§°ï¼Œå¿…é¡»åœ¨æ–‡ä»¶ä¸­é…ç½®æ•°æ®å·ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">my_src:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:8.0</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql_data:/var/lib/mysql</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">mysql_data:</span></span><br></pre></td></tr></table></figure>

<h2 id="å®Œæ•´æ¨¡æ¿"><a href="#å®Œæ•´æ¨¡æ¿" class="headerlink" title="å®Œæ•´æ¨¡æ¿"></a>å®Œæ•´æ¨¡æ¿</h2><img src="/2021/07/28/Docker%EF%BC%88%E5%9B%9B%EF%BC%89/2.png" class>

<h2 id="docker-compose-å¸¸ç”¨å‘½ä»¤"><a href="#docker-compose-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="docker-compose å¸¸ç”¨å‘½ä»¤"></a>docker-compose å¸¸ç”¨å‘½ä»¤</h2><h3 id="1-å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼"><a href="#1-å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼" class="headerlink" title="1. å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼"></a>1. å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼</h3><p>å¯¹äº Compose æ¥è¯´ï¼Œå¤§éƒ¨åˆ†å‘½ä»¤çš„å¯¹è±¡æ—¢å¯ä»¥æ˜¯é¡¹ç›®æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºé¡¹ç›®ä¸­çš„æœåŠ¡æˆ–è€…å®¹å™¨ã€‚å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„è¯´æ˜ï¼Œå‘½ä»¤å¯¹è±¡å°†æ˜¯é¡¹ç›®ï¼Œè¿™æ„å‘³ç€é¡¹ç›®ä¸­æ‰€æœ‰çš„æœåŠ¡éƒ½ä¼šå—åˆ°å‘½ä»¤å½±å“ã€‚</p>
<p>æ‰§è¡Œ <code>docker-compose [COMMAND] --help</code> æˆ–è€… <code>docker-compose help [COMMAND]</code> å¯ä»¥æŸ¥çœ‹å…·ä½“æŸä¸ªå‘½ä»¤çš„ä½¿ç”¨æ ¼å¼ã€‚</p>
<p><code>docker-compose</code> å‘½ä»¤çš„åŸºæœ¬çš„ä½¿ç”¨æ ¼å¼æ˜¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS...]</span><br></pre></td></tr></table></figure>

<h3 id="2-å‘½ä»¤é€‰é¡¹"><a href="#2-å‘½ä»¤é€‰é¡¹" class="headerlink" title="2. å‘½ä»¤é€‰é¡¹"></a>2. å‘½ä»¤é€‰é¡¹</h3><ul>
<li><code>-f, --file FILE</code> æŒ‡å®šä½¿ç”¨çš„ Compose æ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤ä¸º <code>docker-compose.yml</code>ï¼Œå¯ä»¥å¤šæ¬¡æŒ‡å®šã€‚</li>
<li><code>-p, --project-name NAME</code> æŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤å°†ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åã€‚</li>
<li><code>--x-networking</code> ä½¿ç”¨ Docker çš„å¯æ‹”æ’ç½‘ç»œåç«¯ç‰¹æ€§</li>
<li><code>--x-network-driver DRIVER</code> æŒ‡å®šç½‘ç»œåç«¯çš„é©±åŠ¨ï¼Œé»˜è®¤ä¸º <code>bridge</code></li>
<li><code>--verbose</code> è¾“å‡ºæ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚</li>
<li><code>-v, --version</code> æ‰“å°ç‰ˆæœ¬å¹¶é€€å‡ºã€‚</li>
</ul>
<h3 id="3-å‘½ä»¤ä½¿ç”¨è¯´æ˜"><a href="#3-å‘½ä»¤ä½¿ç”¨è¯´æ˜" class="headerlink" title="3.å‘½ä»¤ä½¿ç”¨è¯´æ˜"></a>3.å‘½ä»¤ä½¿ç”¨è¯´æ˜</h3><h4 id="up"><a href="#up" class="headerlink" title="up"></a><code>up</code></h4><p>æ ¼å¼ä¸º <code>docker-compose up [options] [SERVICE...]</code>ã€‚</p>
<ul>
<li><p>è¯¥å‘½ä»¤ååˆ†å¼ºå¤§ï¼Œå®ƒå°†å°è¯•è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒï¼Œï¼ˆé‡æ–°ï¼‰åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œã€‚</p>
</li>
<li><p>é“¾æ¥çš„æœåŠ¡éƒ½å°†ä¼šè¢«è‡ªåŠ¨å¯åŠ¨ï¼Œé™¤éå·²ç»å¤„äºè¿è¡ŒçŠ¶æ€ã€‚</p>
</li>
<li><p>å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¡¹ç›®ã€‚</p>
</li>
<li><p>é»˜è®¤æƒ…å†µï¼Œ<code>docker-compose up</code> å¯åŠ¨çš„å®¹å™¨éƒ½åœ¨å‰å°ï¼Œæ§åˆ¶å°å°†ä¼šåŒæ—¶æ‰“å°æ‰€æœ‰å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚</p>
</li>
<li><p>å½“é€šè¿‡ <code>Ctrl-C</code> åœæ­¢å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰å®¹å™¨å°†ä¼šåœæ­¢ã€‚</p>
</li>
<li><p>å¦‚æœä½¿ç”¨ <code>docker-compose up -d</code>ï¼Œå°†ä¼šåœ¨åå°å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰çš„å®¹å™¨ã€‚ä¸€èˆ¬æ¨èç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p>
</li>
<li><p>é»˜è®¤æƒ…å†µï¼Œå¦‚æœæœåŠ¡å®¹å™¨å·²ç»å­˜åœ¨ï¼Œ<code>docker-compose up</code> å°†ä¼šå°è¯•åœæ­¢å®¹å™¨ï¼Œç„¶åé‡æ–°åˆ›å»ºï¼ˆä¿æŒä½¿ç”¨ <code>volumes-from</code> æŒ‚è½½çš„å·ï¼‰ï¼Œä»¥ä¿è¯æ–°å¯åŠ¨çš„æœåŠ¡åŒ¹é… <code>docker-compose.yml</code> æ–‡ä»¶çš„æœ€æ–°å†…å®¹</p>
</li>
</ul>
<hr>
<h4 id="down"><a href="#down" class="headerlink" title="down"></a><code>down</code></h4><ul>
<li>æ­¤å‘½ä»¤å°†ä¼šåœæ­¢ <code>up</code> å‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ï¼Œå¹¶ç§»é™¤ç½‘ç»œ</li>
</ul>
<hr>
<h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a><code>exec</code></h4><ul>
<li>è¿›å…¥æŒ‡å®šçš„å®¹å™¨ã€‚</li>
</ul>
<hr>
<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a><code>ps</code></h4><p>æ ¼å¼ä¸º <code>docker-compose ps [options] [SERVICE...]</code>ã€‚</p>
<p>åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰çš„æ‰€æœ‰å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-q</code> åªæ‰“å°å®¹å™¨çš„ ID ä¿¡æ¯ã€‚</li>
</ul>
<hr>
<h4 id="restart"><a href="#restart" class="headerlink" title="restart"></a><code>restart</code></h4><p>æ ¼å¼ä¸º <code>docker-compose restart [options] [SERVICE...]</code>ã€‚</p>
<p>é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-t, --timeout TIMEOUT</code> æŒ‡å®šé‡å¯å‰åœæ­¢å®¹å™¨çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<hr>
<h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a><code>rm</code></h4><p>æ ¼å¼ä¸º <code>docker-compose rm [options] [SERVICE...]</code>ã€‚</p>
<p>åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨ã€‚æ¨èå…ˆæ‰§è¡Œ <code>docker-compose stop</code> å‘½ä»¤æ¥åœæ­¢å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-f, --force</code> å¼ºåˆ¶ç›´æ¥åˆ é™¤ï¼ŒåŒ…æ‹¬éåœæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¸€èˆ¬å°½é‡ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</li>
<li><code>-v</code> åˆ é™¤å®¹å™¨æ‰€æŒ‚è½½çš„æ•°æ®å·ã€‚</li>
</ul>
<hr>
<h4 id="start"><a href="#start" class="headerlink" title="start"></a><code>start</code></h4><p>æ ¼å¼ä¸º <code>docker-compose start [SERVICE...]</code>ã€‚</p>
<p>å¯åŠ¨å·²ç»å­˜åœ¨çš„æœåŠ¡å®¹å™¨ã€‚</p>
<hr>
<h4 id="stop"><a href="#stop" class="headerlink" title="stop"></a><code>stop</code></h4><p>æ ¼å¼ä¸º <code>docker-compose stop [options] [SERVICE...]</code>ã€‚</p>
<p>åœæ­¢å·²ç»å¤„äºè¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼Œä½†ä¸åˆ é™¤å®ƒã€‚é€šè¿‡ <code>docker-compose start</code> å¯ä»¥å†æ¬¡å¯åŠ¨è¿™äº›å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-t, --timeout TIMEOUT</code> åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<hr>
<h4 id="top"><a href="#top" class="headerlink" title="top"></a><code>top</code></h4><p>æŸ¥çœ‹å„ä¸ªæœåŠ¡å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ã€‚</p>
<hr>
<h4 id="unpause"><a href="#unpause" class="headerlink" title="unpause"></a><code>unpause</code></h4><p>æ ¼å¼ä¸º <code>docker-compose unpause [SERVICE...]</code>ã€‚</p>
<p>æ¢å¤å¤„äºæš‚åœçŠ¶æ€ä¸­çš„æœåŠ¡ã€‚</p>
<h1 id="dockerå¯è§†åŒ–å·¥å…·"><a href="#dockerå¯è§†åŒ–å·¥å…·" class="headerlink" title="dockerå¯è§†åŒ–å·¥å…·"></a>dockerå¯è§†åŒ–å·¥å…·</h1><h2 id="å®‰è£…Portainer"><a href="#å®‰è£…Portainer" class="headerlink" title="å®‰è£…Portainer"></a>å®‰è£…Portainer</h2><p>å®˜æ–¹å®‰è£…è¯´æ˜ï¼š<a href="http://www.yunweipai.com/go?_=8fe4813824aHR0cHM6Ly93d3cucG9ydGFpbmVyLmlvL2luc3RhbGxhdGlvbi8=">https://www.portainer.io/installation/</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@ubuntu1804 ~]#docker pull  portainer/portainer</span><br><span class="line"></span><br><span class="line">[root@ubuntu1804 ~]#docker volume create portainer_data</span><br><span class="line">portainer_data</span><br><span class="line">[root@ubuntu1804 ~]#docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</span><br><span class="line">20db26b67b791648c2ef6aee444a5226a9c897ebcf0160050e722dbf4a4906e3</span><br><span class="line">[root@ubuntu1804 ~]#docker ps </span><br><span class="line">CONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                                            NAMES</span><br><span class="line">20db26b67b79        portainer/portainer   &quot;/portainer&quot;        5 seconds ago       Up 4 seconds        0.0.0.0:8000-&gt;8000/tcp, 0.0.0.0:9000-&gt;9000/tcp   portainer</span><br></pre></td></tr></table></figure>

<h2 id="ç™»å½•å’Œä½¿ç”¨Portainer"><a href="#ç™»å½•å’Œä½¿ç”¨Portainer" class="headerlink" title="ç™»å½•å’Œä½¿ç”¨Portainer"></a>ç™»å½•å’Œä½¿ç”¨Portainer</h2><blockquote>
<p>ç”¨æµè§ˆå™¨è®¿é—®ï¼š<code>http://localhost:9000</code></p>
</blockquote>
<img src="/2021/07/28/Docker%EF%BC%88%E5%9B%9B%EF%BC%89/1.png" class>

]]></content>
      <categories>
        <category>è™šæ‹ŸåŒ–å®¹å™¨</category>
      </categories>
      <tags>
        <tag>è™šæ‹ŸåŒ–å®¹å™¨</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubbo(ä¸€):æ ¸å¿ƒæ¦‚å¿µä¸åŸºç¡€é…ç½®</title>
    <url>/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<p>æ³¨ï¼šå†…å®¹å¤§éƒ¨åˆ†éƒ½å‚è€ƒäº <a href="https://dubbo.apache.org/zh/docs/">Dubboå®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></p>
<h1 id="ğŸ¤¯ä¸ºä½•éœ€è¦RPC"><a href="#ğŸ¤¯ä¸ºä½•éœ€è¦RPC" class="headerlink" title="ğŸ¤¯ä¸ºä½•éœ€è¦RPC"></a>ğŸ¤¯ä¸ºä½•éœ€è¦RPC</h1><img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class>

<p>R P C  (Remote Procedure Callï¼Œä¸­æ–‡æ„æ€å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨)</p>
<p>å¦‚ä¸Šå›¾ ï¼Œ æ˜¯ <code>web</code> å¼€å‘çš„å‘å±•å†å²ï¼Œæ›¾ç»çš„ <code>all in one </code> åº”ç”¨å¼€å‘ï¼Œæ‰€æœ‰æœåŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼ˆåŒ…æ‹¬å‰ç«¯ï¼‰ï¼Œå½“æœåŠ¡é‡è¿›ä¸€æ­¥å¢å¤§æ—¶ï¼Œåº”ç”¨çš„ä½“ç§¯ä¹Ÿä¼šå˜å¾—å·¨å¤§ï¼Œæ­¤æ—¶è¦æƒ³ç»´æŠ¤è¿™ä¸ªåº”ç”¨æ˜¯ååˆ†è´¹åŠ›çš„ï¼Œå¹¶ä¸”è¿™ç§å¼€å‘æ¨¡å¼å¯¼è‡´æ•´ä¸ªåº”ç”¨å¯¼è‡´å¤šäººå¼€å‘æå…¶ä¸ä¾¿ï¼Œè°ƒè¯•ååˆ†å›°éš¾ï¼Œäºæ˜¯å‡ºç°äº† <code>MVC å‰åç«¯åˆ†ç¦»</code>æ¶æ„ï¼Œå¯¹åº”ç”¨è¿›è¡Œåˆ†å±‚å¼€å‘ï¼Œæ¥é™ä½å¼€å‘è€…å·¥ä½œé‡æå‡å¯ç»´æŠ¤æ€§ï¼Œå‰åç«¯åˆ†ç¦»å¼€å‘ ï¼Œå‰åç«¯å¯ä»¥ç‹¬è‡ªå¼€å‘ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡å¼€å‘è¿›åº¦ï¼Œç„¶è€Œé—®é¢˜åˆéšä¹‹è€Œæ¥ï¼ŒåŸºäºåˆ†ç¦»å¼€å‘çš„æ¨¡å¼ï¼Œåç«¯ç³»ç»Ÿå¯èƒ½æ˜¯æœ‰å¤šä¸ªäººä¸€èµ·å¼€å‘çš„ï¼Œå¦‚æœåº”ç”¨Aéœ€è¦åº”ç”¨Bçš„ä¸€äº›æœåŠ¡ï¼Œå¿…é¡»è‡ªå·±é‡æ–°å®ç°ä¸€éå…¶é€»è¾‘ï¼Œååˆ†ä½æ•ˆï¼Œè¿™ä¸€ç‚¹åœ¨å¤§åº”ç”¨ä¸­å°¤ä¸ºæ˜æ˜¾ï¼Œå„ç§æ•°æ®ä¾èµ–æ€§è¾ƒå¼ºï¼Œäºæ˜¯å‡ºç°äº† <code>rpc</code> æ¡†æ¶.å…¶è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯å°†<strong>ç³»ç»ŸB</strong>æä¾›çš„æœåŠ¡<strong>äº¤ç”±ç¬¬ä¸‰æ–¹è¿›è¡Œç®¡ç†</strong>ï¼Œå¹¶ä¸”è¿™ä¸ªç¬¬ä¸‰æ–¹è¿˜å¯ä»¥<strong>å¯¹å¤–å¼€æ”¾</strong>ç³»ç»ŸBæ‰€æä¾›çš„æœåŠ¡ï¼Œ<strong>ç³»ç»ŸA</strong>åˆ™å¯ä»¥é€šè¿‡è¿™ä¸ªç¬¬ä¸‰æ–¹æ¥è·å–<strong>ç³»ç»ŸB</strong>çš„æœåŠ¡ ï¼Œå…¶åº•å±‚å®é™…ä¸Šæ˜¯é‡‡ç”¨ <code>TCP</code>çš„æ–¹å¼è¿›è¡Œè¿æ¥çš„ï¼ŒåŒæ—¶ï¼Œ<code>rpc</code> æ¡†æ¶ä¹Ÿå¯ä»¥å®ç°è·¨è¯­è¨€æä¾›æœåŠ¡ï¼Œä½†æ˜¯ï¼Œ<code>dubbo</code> ç›®å‰è¿˜ä¸æ”¯æŒï¼Œåªæ”¯æŒ<code>java</code> ï¼Œ æ®æˆ‘äº†è§£<code>thriftã€motan</code> , <code>Dubbo</code>å…¶æ¶æ„å¦‚ä¸‹å›¾</p>
<img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class>

<img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class>



<p><strong>è°ƒç”¨å…³ç³»è¯´æ˜:</strong></p>
<ol>
<li><p>æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿â¾æœåŠ¡æä¾›è€…ã€‚ </p>
</li>
<li><p>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­â¼¼è®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚ </p>
</li>
<li><p>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚ </p>
</li>
</ol>
<h1 id="ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹"><a href="#ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹" class="headerlink" title="ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹"></a>ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹</h1><p>è¿™é‡Œæ¼”ç¤ºåŸºäº <code>Spring</code> æ¥ä½¿ç”¨ <code>Dubbo</code> ï¼Œ<code>Dubbo</code> å¯ä»¥ å¾ˆå¥½çš„æ¥å…¥ <code>Spring</code> æ²¡æœ‰ä»»ä½•çš„ <code>API</code> ä¾µå…¥</p>
<p>é¦–å…ˆåˆ›å»ºä¸¤ä¸ª<code>module</code>  ï¼Œä½¿ç”¨æ™®é€šçš„<code>mavon</code>é¡¹ç›®æ¥æ„å»ºï¼Œä¸€ä¸ªæ˜¯ <code>dubbo_consumer</code> æœåŠ¡æ¶ˆè´¹è€…ï¼Œä¸€ä¸ªæ˜¯<code>dubbo_provider</code> æœåŠ¡æä¾›è€…</p>
<p>å…ˆå¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><font color="skyblue">é¦–å…ˆå…ˆæ¥å†™ æä¾›è€…</font></p>
</blockquote>
<ul>
<li>å®šä¹‰æœåŠ¡æ¥å£åŠå…¶å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">&quot;æ­£åœ¨è®¿é—®çš„ç”¨æˆ·ä¸ºï¼š&quot;</span>+ username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®<code>Dubbo</code>(åœ¨<code>Spring</code>çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®) </li>
</ul>
<p><code>spring-dubbo.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æä¾›æ–¹åº”ç”¨ä¿¡æ¯ ï¼Œ ç”¨äºè®¡ç®—ä¾èµ–å…³ç³»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;hello-world-app&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒ æš´éœ²æœåŠ¡åœ°å€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;multicast://224.5.6.7:1234&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨dubboåè®®åœ¨20880ç«¯å£æš´éœ²æœåŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;dubbo&quot;</span> <span class="attr">port</span>=<span class="string">&quot;20880&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å£°æ˜éœ€è¦æš´éœ²çš„æœåŠ¡æ¥å£--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å°†å®ç°ç±»æ³¨å…¥springå®¹å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.anthony.service.impl.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åŠ è½½é…ç½®(æœ¬è´¨ä¸Šå°±æ˜¯æ³¨å†Œæ‰€æš´éœ²çš„æˆ–è€…è¯´æ˜¯æä¾›çš„æœåŠ¡)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–é…ç½®</span></span><br><span class="line">        ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring-dubbo.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line">        context.start();</span><br><span class="line">        System.in.read(); <span class="comment">//æŒ‰ä»»æ„é”®é€€å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><font color="skyblue">å†æ¥å†™ æ¶ˆè´¹è€…</font></p>
</blockquote>
<ul>
<li>åˆ›å»ºæœåŠ¡æ¥å£ï¼Œä½†æ˜¯ä¸éœ€è¦åˆ›å»ºå…¶å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
</ul>
<p><code>spring-dubbo.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆè´¹æ–¹åº”ç”¨åï¼Œç”¨äºè®¡ç®—ä¾èµ–å…³ç³»ï¼Œä¸æ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸è¦ä¸æä¾›æ–¹ä¸€æ · --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;consumer-of-hello-world-app&quot;</span>  /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒæš´éœ²å‘ç°æœåŠ¡åœ°å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;multicast://224.5.6.7:1234&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨demoService --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¼€å§‹æµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–é…ç½®</span></span><br><span class="line">        ClassPathXmlApplicationContext Context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring-dubbo.xml&quot;</span>);</span><br><span class="line">       	<span class="comment">//è®¢é˜…æœåŠ¡</span></span><br><span class="line">        Context.start();;</span><br><span class="line">        <span class="comment">//è·å–æœåŠ¡</span></span><br><span class="line">        UserService userService = Context.getBean(<span class="string">&quot;userService&quot;</span>,UserService.class);</span><br><span class="line">        <span class="comment">//æœåŠ¡è°ƒç”¨</span></span><br><span class="line">        String hello_world = userService.findByUsername(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        System.out.println(hello_world);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ˜Dubboé…ç½®"><a href="#ğŸ˜Dubboé…ç½®" class="headerlink" title="ğŸ˜Dubboé…ç½®"></a>ğŸ˜Dubboé…ç½®</h1><table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>ç”¨é€”</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;dubbo:service/&gt;</code></td>
<td>æœåŠ¡é…ç½®</td>
<td>ç”¨äºæš´éœ²ä¸€ä¸ªæœåŠ¡ï¼Œå®šä¹‰æœåŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥ç”¨å¤šä¸ªåè®®æš´éœ²ï¼Œä¸€ä¸ªæœåŠ¡ä¹Ÿå¯ä»¥æ³¨å†Œåˆ°å¤šä¸ªæ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td><code>&lt;dubbo:reference/&gt;</code></td>
<td>å¼•ç”¨é…ç½®</td>
<td>ç”¨äºåˆ›å»ºä¸€ä¸ªè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œä¸€ä¸ªå¼•ç”¨å¯ä»¥æŒ‡å‘å¤šä¸ªæ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td><code>&lt;dubbo:protocol/&gt;</code></td>
<td>åè®®é…ç½®</td>
<td>ç”¨äºé…ç½®æä¾›æœåŠ¡çš„åè®®ä¿¡æ¯ï¼Œåè®®ç”±æä¾›æ–¹æŒ‡å®šï¼Œæ¶ˆè´¹æ–¹è¢«åŠ¨æ¥å—</td>
</tr>
<tr>
<td><code>&lt;dubbo:application/&gt;</code></td>
<td>åº”ç”¨é…ç½®</td>
<td>ç”¨äºé…ç½®å½“å‰åº”ç”¨ä¿¡æ¯ï¼Œä¸ç®¡è¯¥åº”ç”¨æ˜¯æä¾›è€…è¿˜æ˜¯æ¶ˆè´¹è€…</td>
</tr>
<tr>
<td><code>&lt;dubbo:module/&gt;</code></td>
<td>æ¨¡å—é…ç½®</td>
<td>ç”¨äºé…ç½®å½“å‰æ¨¡å—ä¿¡æ¯ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:registry/&gt;</code></td>
<td>æ³¨å†Œä¸­å¿ƒé…ç½®</td>
<td>ç”¨äºé…ç½®è¿æ¥æ³¨å†Œä¸­å¿ƒç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td><code>&lt;dubbo:monitor/&gt;</code></td>
<td>ç›‘æ§ä¸­å¿ƒé…ç½®</td>
<td>ç”¨äºé…ç½®è¿æ¥ç›‘æ§ä¸­å¿ƒç›¸å…³ä¿¡æ¯ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:provider/&gt;</code></td>
<td>æä¾›æ–¹é…ç½®</td>
<td>å½“ ProtocolConfig å’Œ ServiceConfig æŸå±æ€§æ²¡æœ‰é…ç½®æ—¶ï¼Œé‡‡ç”¨æ­¤ç¼ºçœå€¼ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:consumer/&gt;</code></td>
<td>æ¶ˆè´¹æ–¹é…ç½®</td>
<td>å½“ ReferenceConfig æŸå±æ€§æ²¡æœ‰é…ç½®æ—¶ï¼Œé‡‡ç”¨æ­¤ç¼ºçœå€¼ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:method/&gt;</code></td>
<td>æ–¹æ³•é…ç½®</td>
<td>ç”¨äº ServiceConfig å’Œ ReferenceConfig æŒ‡å®šæ–¹æ³•çº§çš„é…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td><code>&lt;dubbo:argument/&gt;</code></td>
<td>å‚æ•°é…ç½®</td>
<td>ç”¨äºæŒ‡å®šæ–¹æ³•å‚æ•°é…ç½®</td>
</tr>
</tbody></table>
<h2 id="ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»"><a href="#ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»" class="headerlink" title="ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»"></a>ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»</h2><p>ä»¥ timeout ä¸ºä¾‹ï¼Œä¸‹å›¾æ˜¾ç¤ºäº†é…ç½®çš„æŸ¥æ‰¾é¡ºåºï¼Œå…¶å®ƒ retries, loadbalance, actives ç­‰ç±»ä¼¼ï¼š</p>
<ul>
<li>æ–¹æ³•çº§ä¼˜å…ˆï¼Œæ¥å£çº§æ¬¡ä¹‹ï¼Œå…¨å±€é…ç½®å†æ¬¡ä¹‹ã€‚</li>
<li>å¦‚æœçº§åˆ«ä¸€æ ·ï¼Œåˆ™æ¶ˆè´¹æ–¹ä¼˜å…ˆï¼Œæä¾›æ–¹æ¬¡ä¹‹ã€‚</li>
</ul>
<p>å…¶ä¸­ï¼ŒæœåŠ¡æä¾›æ–¹é…ç½®ï¼Œé€šè¿‡ URL ç»ç”±æ³¨å†Œä¸­å¿ƒä¼ é€’ç»™æ¶ˆè´¹æ–¹ã€‚</p>
<p><img src="https://dubbo.apache.org/imgs/user/dubbo-config-override.jpg" alt="dubbo-config-override"></p>
<p>ï¼ˆå»ºè®®ç”±æœåŠ¡æä¾›æ–¹è®¾ç½®è¶…æ—¶ï¼Œå› ä¸ºä¸€ä¸ªæ–¹æ³•éœ€è¦æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼ŒæœåŠ¡æä¾›æ–¹æ›´æ¸…æ¥šï¼Œå¦‚æœä¸€ä¸ªæ¶ˆè´¹æ–¹åŒæ—¶å¼•ç”¨å¤šä¸ªæœåŠ¡ï¼Œå°±ä¸éœ€è¦å…³å¿ƒæ¯ä¸ªæœåŠ¡çš„è¶…æ—¶è®¾ç½®ï¼‰ã€‚</p>
<p>ç†è®ºä¸Š ReferenceConfig ä¸­é™¤äº†<code>interface</code>è¿™ä¸€é¡¹ï¼Œå…¶ä»–æ‰€æœ‰é…ç½®é¡¹éƒ½å¯ä»¥ç¼ºçœä¸é…ç½®ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨ä½¿ç”¨ConsumerConfigï¼ŒServiceConfig, ProviderConfigç­‰æä¾›çš„ç¼ºçœé…ç½®ã€‚</p>
]]></content>
      <categories>
        <category>åˆ†å¸ƒå¼</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker(äºŒ):å¸¸ç”¨å‘½ä»¤ä»¥åŠé«˜çº§é…ç½®</title>
    <url>/2021/07/25/Docker%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Dockeré˜¿é‡Œäº‘åŠ é€ŸæœåŠ¡"><a href="#Dockeré˜¿é‡Œäº‘åŠ é€ŸæœåŠ¡" class="headerlink" title="Dockeré˜¿é‡Œäº‘åŠ é€ŸæœåŠ¡"></a>Dockeré˜¿é‡Œäº‘åŠ é€ŸæœåŠ¡</h1><ul>
<li><p>æ³¨å†Œé˜¿é‡Œäº‘å¼€å‘è€…è´¦å·</p>
</li>
<li><p>åœ¨æ§åˆ¶å°ä¸­æœç´¢å®¹å™¨é•œåƒæœåŠ¡</p>
</li>
<li><p>é•œåƒå·¥å…·â€”&gt;é•œåƒåŠ é€Ÿå™¨ â€”&gt; é€‰æ‹©å¯¹åº”ç³»ç»Ÿ </p>
</li>
<li><p>æ‰§è¡Œå‘½åå³å¯</p>
</li>
<li><p><code>docker info</code> æŸ¥çœ‹æ˜¯å¦è®¾ç½®é•œåƒæˆåŠŸ</p>
</li>
</ul>
<h1 id="å¸¸ç”¨é•œåƒå‘½ä»¤"><a href="#å¸¸ç”¨é•œåƒå‘½ä»¤" class="headerlink" title="å¸¸ç”¨é•œåƒå‘½ä»¤"></a>å¸¸ç”¨é•œåƒå‘½ä»¤</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ä¸‹è½½</span></span><br><span class="line"><span class="bullet">1.</span> docker pull é•œåƒå</span><br><span class="line"><span class="bullet">2.</span> docker pull é•œåƒå:tag</span><br><span class="line"><span class="bullet">3.</span> docker pull é•œåƒå:@DIGEST</span><br><span class="line"></span><br><span class="line"><span class="section"># æœç´¢</span></span><br><span class="line"><span class="bullet">1.</span> docker search é•œåƒå</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section"># åˆ é™¤</span></span><br><span class="line"><span class="bullet">1.</span> docker image rm é•œåƒå:tag</span><br><span class="line"><span class="bullet">2.</span> docker rmi é•œåƒå:tag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="å¸¸ç”¨å®¹å™¨å‘½ä»¤"><a href="#å¸¸ç”¨å®¹å™¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å®¹å™¨å‘½ä»¤"></a>å¸¸ç”¨å®¹å™¨å‘½ä»¤</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.è¿è¡Œå®¹å™¨</span></span><br><span class="line"><span class="code">	docker run é•œåƒå	--------------------------	é•œåƒåæ–°å»ºå¹¶å¯åŠ¨å®¹å™¨</span></span><br><span class="line"><span class="code">    --name 					åˆ«åä¸ºå®¹å™¨èµ·ä¸€ä¸ªåå­—</span></span><br><span class="line"><span class="code">    -d							å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨ï¼ˆåœ¨åå°å¯åŠ¨å®¹å™¨ï¼‰</span></span><br><span class="line"><span class="code">    -p 							æ˜ å°„ç«¯å£å·ï¼šåŸå§‹ç«¯å£å·		 æŒ‡å®šç«¯å£å·å¯åŠ¨</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">	ä¾‹ï¼šdocker run -it --name myTomcat -p 8888:8080 tomcat</span></span><br><span class="line"><span class="code">   	 docker run -d --name myTomcat -P tomcat</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 2.æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line"><span class="code">	docker ps					--------------------------	åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line"><span class="code">	-a			æ­£åœ¨è¿è¡Œçš„å’Œå†å²è¿è¡Œè¿‡çš„å®¹å™¨</span></span><br><span class="line"><span class="code">	-q			é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 3.åœæ­¢|å…³é—­|é‡å¯å®¹å™¨</span></span><br><span class="line"><span class="code">	docker start   å®¹å™¨åå­—æˆ–è€…å®¹å™¨id  --------------- å¼€å¯å®¹å™¨</span></span><br><span class="line"><span class="code">	docker restart å®¹å™¨åæˆ–è€…å®¹å™¨id    --------------- é‡å¯å®¹å™¨</span></span><br><span class="line"><span class="code">	docker stop  å®¹å™¨åæˆ–è€…å®¹å™¨id 	    ------------------ æ­£å¸¸åœæ­¢å®¹å™¨è¿è¡Œ</span></span><br><span class="line"><span class="code">	docker kill  å®¹å™¨åæˆ–è€…å®¹å™¨id      ------------------ ç«‹å³åœæ­¢å®¹å™¨è¿è¡Œ</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 4.åˆ é™¤å®¹å™¨</span></span><br><span class="line"><span class="code">	docker rm -f å®¹å™¨idå’Œå®¹å™¨å     </span></span><br><span class="line"><span class="code">	docker rm -f $(docker ps -aq)		--------------------------	åˆ é™¤æ‰€æœ‰å®¹å™¨</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 5.æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹</span></span><br><span class="line"><span class="code">	docker top å®¹å™¨idæˆ–è€…å®¹å™¨å ------------------ æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 6.æŸ¥çœ‹æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</span></span><br><span class="line"><span class="code">	docker inspect å®¹å™¨id 		------------------ æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 7.æŸ¥çœ‹å®¹å™¨çš„è¿è¡Œæ—¥å¿—</span></span><br><span class="line"><span class="code">	docker logs [OPTIONS] å®¹å™¨idæˆ–å®¹å™¨å	------------------ æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span></span><br><span class="line"><span class="code">    -t			 åŠ å…¥æ—¶é—´æˆ³</span></span><br><span class="line"><span class="code">    -f			 è·Ÿéšæœ€æ–°çš„æ—¥å¿—æ‰“å°</span></span><br><span class="line"><span class="code">    --tail 	 æ•°å­—	æ˜¾ç¤ºæœ€åå¤šå°‘æ¡</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 8.è¿›å…¥å®¹å™¨å†…éƒ¨</span></span><br><span class="line"><span class="code">	docker exec [options] å®¹å™¨id å®¹å™¨å†…å‘½ä»¤ ------------------ è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="code">		-i		ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-tä¸€èµ·ä½¿ç”¨</span></span><br><span class="line"><span class="code">    	-t		åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯    shellçª—å£   bash </span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 9.å®¹å™¨å’Œå®¿ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="code">	docker cp æ–‡ä»¶|ç›®å½• å®¹å™¨id:å®¹å™¨è·¯å¾„           -----------------   å°†å®¿ä¸»æœºå¤åˆ¶åˆ°å®¹å™¨å†…éƒ¨</span></span><br><span class="line"><span class="code">	docker cp å®¹å™¨id:å®¹å™¨å†…èµ„æºè·¯å¾„ å®¿ä¸»æœºç›®å½•è·¯å¾„  -----------------   å°†å®¹å™¨å†…èµ„æºæ‹·è´åˆ°ä¸»æœºä¸Š</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 10.æ•°æ®å·(volum)å®ç°ä¸å®¿ä¸»æœºå…±äº«ç›®å½•</span></span><br><span class="line"><span class="code">	docker run -v å®¿ä¸»æœºçš„è·¯å¾„|ä»»æ„åˆ«å:/å®¹å™¨å†…çš„è·¯å¾„ é•œåƒå</span></span><br><span class="line"><span class="code">		æ³¨æ„: </span></span><br><span class="line"><span class="code">				1.å¦‚æœæ˜¯å®¿ä¸»æœºè·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„,å®¿ä¸»æœºç›®å½•ä¼šè¦†ç›–å®¹å™¨å†…ç›®å½•å†…å®¹</span></span><br><span class="line"><span class="code">				2.å¦‚æœæ˜¯åˆ«ååˆ™ä¼šåœ¨dockerè¿è¡Œå®¹å™¨æ—¶è‡ªåŠ¨åœ¨å®¿ä¸»æœºä¸­åˆ›å»ºä¸€ä¸ªç›®å½•,å¹¶å°†å®¹å™¨ç›®å½•æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºä¸­</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 11.æ‰“åŒ…é•œåƒ</span></span><br><span class="line"><span class="code">		docker save é•œåƒå -o  åç§°.tar</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 12.è½½å…¥é•œåƒ</span></span><br><span class="line"><span class="code">		docker load -i   åç§°.tar</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 13.å®¹å™¨æ‰“åŒ…æˆæ–°çš„é•œåƒ</span></span><br><span class="line"><span class="code">	  docker commit -m &quot;æè¿°ä¿¡æ¯&quot; -a &quot;ä½œè€…ä¿¡æ¯&quot;   ï¼ˆå®¹å™¨idæˆ–è€…åç§°ï¼‰æ‰“åŒ…çš„é•œåƒåç§°:æ ‡ç­¾</span></span><br></pre></td></tr></table></figure>

<h1 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="headerlink" title="ç½‘ç»œé…ç½®"></a>ç½‘ç»œé…ç½®</h1><img src="/2021/07/25/Docker%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class>

<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>å½“ Docker å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ª <code>docker0</code> è™šæ‹Ÿç½‘æ¡¥ï¼Œå®é™…ä¸Šæ˜¯ Linux çš„ä¸€ä¸ª bridgeï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½¯ä»¶äº¤æ¢æœºã€‚å®ƒä¼šåœ¨æŒ‚è½½åˆ°å®ƒçš„ç½‘å£ä¹‹é—´è¿›è¡Œè½¬å‘ã€‚</p>
<p>åŒæ—¶ï¼ŒDocker éšæœºåˆ†é…ä¸€ä¸ªæœ¬åœ°æœªå ç”¨çš„ç§æœ‰ç½‘æ®µï¼ˆåœ¨ <a href="https://tools.ietf.org/html/rfc1918">RFC1918</a> ä¸­å®šä¹‰ï¼‰ä¸­çš„ä¸€ä¸ªåœ°å€ç»™ <code>docker0</code> æ¥å£ã€‚æ¯”å¦‚å…¸å‹çš„ <code>172.17.42.1</code>ï¼Œæ©ç ä¸º <code>255.255.0.0</code>ã€‚æ­¤åå¯åŠ¨çš„å®¹å™¨å†…çš„ç½‘å£ä¹Ÿä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªåŒä¸€ç½‘æ®µï¼ˆ<code>172.17.0.0/16</code>ï¼‰çš„åœ°å€ã€‚</p>
<p>å½“åˆ›å»ºä¸€ä¸ª Docker å®¹å™¨çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šåˆ›å»ºäº†ä¸€å¯¹ <code>veth pair</code> æ¥å£ï¼ˆå½“æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªæ¥å£æ—¶ï¼Œå¦å¤–ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥æ”¶åˆ°ç›¸åŒçš„æ•°æ®åŒ…ï¼‰ã€‚è¿™å¯¹æ¥å£ä¸€ç«¯åœ¨å®¹å™¨å†…ï¼Œå³ <code>eth0</code>ï¼›å¦ä¸€ç«¯åœ¨æœ¬åœ°å¹¶è¢«æŒ‚è½½åˆ° <code>docker0</code> ç½‘æ¡¥ï¼Œåç§°ä»¥ <code>veth</code> å¼€å¤´ï¼ˆä¾‹å¦‚ <code>vethAQI2QT</code>ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸»æœºå¯ä»¥è·Ÿå®¹å™¨é€šä¿¡ï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿå¯ä»¥ç›¸äº’é€šä¿¡ã€‚Docker å°±åˆ›å»ºäº†åœ¨ä¸»æœºå’Œæ‰€æœ‰å®¹å™¨ä¹‹é—´ä¸€ä¸ªè™šæ‹Ÿå…±äº«ç½‘ç»œã€‚</p>
<img src="/2021/07/25/Docker%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class>

<h2 id="æŸ¥çœ‹ç½‘ç»œä¿¡æ¯"><a href="#æŸ¥çœ‹ç½‘ç»œä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œä¿¡æ¯"></a>æŸ¥çœ‹ç½‘ç»œä¿¡æ¯</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># docker network ls</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºä¸€ä¸ªç½‘æ¡¥"><a href="#åˆ›å»ºä¸€ä¸ªç½‘æ¡¥" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç½‘æ¡¥"></a>åˆ›å»ºä¸€ä¸ªç½‘æ¡¥</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># docker network create -d bridge ç½‘æ¡¥åç§°</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤ä¸€ä¸ªç½‘æ¡¥"><a href="#åˆ é™¤ä¸€ä¸ªç½‘æ¡¥" class="headerlink" title="åˆ é™¤ä¸€ä¸ªç½‘æ¡¥"></a>åˆ é™¤ä¸€ä¸ªç½‘æ¡¥</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># docker network rm ç½‘æ¡¥åç§°</span></span><br></pre></td></tr></table></figure>

<h2 id="å®¹å™¨ä¹‹å‰ä½¿ç”¨ç½‘ç»œé€šä¿¡"><a href="#å®¹å™¨ä¹‹å‰ä½¿ç”¨ç½‘ç»œé€šä¿¡" class="headerlink" title="å®¹å™¨ä¹‹å‰ä½¿ç”¨ç½‘ç»œé€šä¿¡"></a>å®¹å™¨ä¹‹å‰ä½¿ç”¨ç½‘ç»œé€šä¿¡</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æŸ¥è¯¢å½“å‰ç½‘ç»œé…ç½®</span></span><br><span class="line"><span class="bullet">-</span> docker network ls</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">8e424e5936b7        bridge              bridge              local</span><br><span class="line">17d974db02da        docker_gwbridge     bridge              local</span><br><span class="line">d6c326e433f7        host                host                local</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 2.åˆ›å»ºæ¡¥æ¥ç½‘ç»œ</span></span><br><span class="line"><span class="bullet">-</span> docker network create -d bridge info</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@centos ~]# docker network create -d bridge info</span><br><span class="line">6e4aaebff79b1df43a064e0e8fdab08f52d64ce34db78dd5184ce7aaaf550a2f</span><br><span class="line">[root@centos ~]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">8e424e5936b7        bridge              bridge              local</span><br><span class="line">17d974db02da        docker_gwbridge     bridge              local</span><br><span class="line">d6c326e433f7        host                host                local</span><br><span class="line">6e4aaebff79b        info                bridge              local</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.å¯åŠ¨å®¹å™¨æŒ‡å®šä½¿ç”¨ç½‘æ¡¥</span></span><br><span class="line"><span class="bullet">-</span> docker run -d -p 8890:80 --name nginx001 --network info nginx </span><br><span class="line"><span class="bullet">-</span> docker run -d -p 8891:80 --name nginx002 --network info nginx </span><br><span class="line"><span class="code">	`æ³¨æ„:ä¸€æ—¦æŒ‡å®šç½‘æ¡¥å--nameæŒ‡å®šåå­—å°±æ˜¯ä¸»æœºå,å¤šä¸ªå®¹å™¨æŒ‡å®šåœ¨åŒä¸€ä¸ªç½‘æ¡¥æ—¶,å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªå®¹å™¨ä¸­ä½¿ç”¨ä¸»æœºåä¸å®¹å™¨è¿›è¡Œäº’é€š`</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@centos ~]# docker run -d -p 8890:80 --name nginx001 --network info nginx </span><br><span class="line">c315bcc94e9ddaa36eb6c6f16ca51592b1ac8bf1ecfe9d8f01d892f3f10825fe</span><br><span class="line">[root@centos ~]# docker run -d -p 8891:80 --name nginx002 --network info nginx</span><br><span class="line">f8682db35dd7fb4395f90edb38df7cad71bbfaba71b6a4c6e2a3a525cb73c2a5</span><br><span class="line">[root@centos ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">f8682db35dd7        nginx               &quot;/docker-entrypoint.â€¦&quot;   3 seconds ago       Up 2 seconds        0.0.0.0:8891-&gt;80/tcp   nginx002</span><br><span class="line">c315bcc94e9d        nginx               &quot;/docker-entrypoint.â€¦&quot;   7 minutes ago       Up 7 minutes        0.0.0.0:8890-&gt;80/tcp   nginx001</span><br><span class="line">b63169d43792        mysql:5.7.19        &quot;docker-entrypoint.sâ€¦&quot;   7 minutes ago       Up 7 minutes        3306/tcp               mysql_mysql.1.s75qe5kkpwwttyf0wrjvd2cda</span><br><span class="line">[root@centos ~]# docker exec -it f8682db35dd7 /bin/bash</span><br><span class="line">root@f8682db35dd7:/# curl http://nginx001</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<h1 id="é«˜çº§æ•°æ®å·é…ç½®"><a href="#é«˜çº§æ•°æ®å·é…ç½®" class="headerlink" title="é«˜çº§æ•°æ®å·é…ç½®"></a>é«˜çº§æ•°æ®å·é…ç½®</h1><h2 id="è¯´æ˜-1"><a href="#è¯´æ˜-1" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p><code>æ•°æ®å·</code> æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><code>æ•°æ®å·</code> å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ</li>
<li><code>æ•°æ®å·</code> é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š<code>æ•°æ®å·</code> çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountï¼Œé•œåƒä¸­çš„è¢«æŒ‡å®šä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šå¤åˆ¶åˆ°æ•°æ®å·ä¸­ï¼ˆä»…æ•°æ®å·ä¸ºç©ºæ—¶ä¼šå¤åˆ¶ï¼‰ã€‚</p>
</blockquote>
<h2 id="åˆ›å»ºæ•°æ®å·"><a href="#åˆ›å»ºæ•°æ®å·" class="headerlink" title="åˆ›å»ºæ•°æ®å·"></a>åˆ›å»ºæ•°æ®å·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@centos ~]# docker volume create my-vol</span><br><span class="line">my-vol</span><br></pre></td></tr></table></figure>

<h2 id="æŸ¥çœ‹æ•°æ®å·"><a href="#æŸ¥çœ‹æ•°æ®å·" class="headerlink" title="æŸ¥çœ‹æ•°æ®å·"></a>æŸ¥çœ‹æ•°æ®å·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@centos ~]# docker volume inspect my-vol       </span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2020-11-25T11:43:56+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/my-vol/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;my-vol&quot;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‚è½½æ•°æ®å·"><a href="#æŒ‚è½½æ•°æ®å·" class="headerlink" title="æŒ‚è½½æ•°æ®å·"></a>æŒ‚è½½æ•°æ®å·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@centos ~]# docker run -d -P --name web  -v my-vol:/usr/share/nginx/html  nginx</span><br><span class="line">[root@centos ~]# docker inspect web</span><br><span class="line">				&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;my-vol&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/my-vol/_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/usr/share/nginx/html&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;z&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤æ•°æ®å·"><a href="#åˆ é™¤æ•°æ®å·" class="headerlink" title="åˆ é™¤æ•°æ®å·"></a>åˆ é™¤æ•°æ®å·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker volume rm my-vol</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è™šæ‹ŸåŒ–å®¹å™¨</category>
      </categories>
      <tags>
        <tag>è™šæ‹ŸåŒ–å®¹å™¨</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubbo(äºŒ):é›†ç¾¤æ­å»º</title>
    <url>/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ˜®è´Ÿè½½å‡è¡¡"><a href="#ğŸ˜®è´Ÿè½½å‡è¡¡" class="headerlink" title="ğŸ˜®è´Ÿè½½å‡è¡¡"></a>ğŸ˜®è´Ÿè½½å‡è¡¡</h1><p><strong>å„ç§è´Ÿè½½å‡è¡¡ç­–ç•¥</strong></p>
<h2 id="éšæœº"><a href="#éšæœº" class="headerlink" title="éšæœº"></a>éšæœº</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> <span class="attr">loadbalance</span>=<span class="string">&quot;random&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è½®è¯¢"><a href="#è½®è¯¢" class="headerlink" title="è½®è¯¢"></a>è½®è¯¢</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> <span class="attr">loadbalance</span>=<span class="string">&quot;roundrobin&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æœ€å°‘æ´»è·ƒæ•°"><a href="#æœ€å°‘æ´»è·ƒæ•°" class="headerlink" title="æœ€å°‘æ´»è·ƒæ•°"></a>æœ€å°‘æ´»è·ƒæ•°</h2><ul>
<li>æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ï¼Œç›¸åŒæ´»è·ƒæ•°çš„éšæœºï¼Œæ´»è·ƒæ•°æŒ‡è°ƒç”¨å‰åè®¡æ•°å·®ã€‚</li>
<li>ä½¿æ…¢çš„æä¾›è€…æ”¶åˆ°æ›´å°‘è¯·æ±‚ï¼Œå› ä¸ºè¶Šæ…¢çš„æä¾›è€…çš„è°ƒç”¨å‰åè®¡æ•°å·®ä¼šè¶Šå¤§ã€‚</li>
</ul>
<h2 id="ä¸€è‡´æ€§å“ˆå¸Œ"><a href="#ä¸€è‡´æ€§å“ˆå¸Œ" class="headerlink" title="ä¸€è‡´æ€§å“ˆå¸Œ"></a>ä¸€è‡´æ€§å“ˆå¸Œ</h2><h3 id="ä¸€è‡´æ€§Hashç®—æ³•èƒŒæ™¯"><a href="#ä¸€è‡´æ€§Hashç®—æ³•èƒŒæ™¯" class="headerlink" title="ä¸€è‡´æ€§Hashç®—æ³•èƒŒæ™¯"></a>ä¸€è‡´æ€§Hashç®—æ³•èƒŒæ™¯</h3><p>ã€€ã€€ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨1997å¹´ç”±éº»çœç†å·¥å­¦é™¢çš„Kargerç­‰äººåœ¨è§£å†³åˆ†å¸ƒå¼Cacheä¸­æå‡ºçš„ï¼Œè®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†è§£å†³å› ç‰¹ç½‘ä¸­çš„çƒ­ç‚¹(Hot spot)é—®é¢˜ï¼Œåˆè¡·å’ŒCARPååˆ†ç±»ä¼¼ã€‚ä¸€è‡´æ€§å“ˆå¸Œä¿®æ­£äº†CARPä½¿ç”¨çš„ç®€å•å“ˆå¸Œç®—æ³•å¸¦æ¥çš„é—®é¢˜ï¼Œä½¿å¾—DHTå¯ä»¥åœ¨P2Pç¯å¢ƒä¸­çœŸæ­£å¾—åˆ°åº”ç”¨ã€‚</p>
<p>ã€€ã€€ä½†ç°åœ¨ä¸€è‡´æ€§hashç®—æ³•åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œç ”ç©¶è¿‡<code>memcached</code>ç¼“å­˜æ•°æ®åº“çš„äººéƒ½çŸ¥é“ï¼Œ<code>memcached</code>æœåŠ¡å™¨ç«¯æœ¬èº«ä¸æä¾›åˆ†å¸ƒå¼cacheçš„ä¸€è‡´æ€§ï¼Œè€Œæ˜¯ç”±å®¢æˆ·ç«¯æ¥æä¾›ï¼Œå…·ä½“åœ¨è®¡ç®—ä¸€è‡´æ€§hashæ—¶é‡‡ç”¨å¦‚ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆæ±‚å‡º<code>memcached</code>æœåŠ¡å™¨ï¼ˆèŠ‚ç‚¹ï¼‰çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶é…ç½®åˆ°<code>0ï½2^32</code>çš„åœ†ï¼ˆcontinuumï¼‰ä¸Šã€‚</li>
<li>ç„¶åé‡‡ç”¨åŒæ ·çš„æ–¹æ³•æ±‚å‡ºå­˜å‚¨æ•°æ®çš„é”®çš„å“ˆå¸Œå€¼ï¼Œå¹¶æ˜ å°„åˆ°ç›¸åŒçš„åœ†ä¸Šã€‚</li>
<li>ç„¶åä»æ•°æ®æ˜ å°„åˆ°çš„ä½ç½®å¼€å§‹é¡ºæ—¶é’ˆæŸ¥æ‰¾ï¼Œå°†æ•°æ®ä¿å­˜åˆ°æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚å¦‚æœè¶…è¿‡2^32ä»ç„¶æ‰¾ä¸åˆ°æœåŠ¡å™¨ï¼Œå°±ä¼šä¿å­˜åˆ°ç¬¬ä¸€å°<code>memcached</code>æœåŠ¡å™¨ä¸Šã€‚</li>
</ol>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class>

<p>ã€€ã€€ä»ä¸Šå›¾çš„çŠ¶æ€ä¸­æ·»åŠ ä¸€å°memcachedæœåŠ¡å™¨ã€‚ä½™æ•°åˆ†å¸ƒå¼ç®—æ³•ç”±äºä¿å­˜é”®çš„æœåŠ¡å™¨ä¼šå‘ç”Ÿå·¨å¤§å˜åŒ–è€Œå½±å“ç¼“å­˜çš„å‘½ä¸­ç‡ï¼Œä½†Consistent Hashingä¸­ï¼Œåªæœ‰åœ¨å›­ï¼ˆcontinuumï¼‰ä¸Šå¢åŠ æœåŠ¡å™¨çš„åœ°ç‚¹é€†æ—¶é’ˆæ–¹å‘çš„ç¬¬ä¸€å°æœåŠ¡å™¨ä¸Šçš„é”®ä¼šå—åˆ°å½±å“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class>



<h3 id="ä¸€è‡´æ€§Hashæ€§è´¨"><a href="#ä¸€è‡´æ€§Hashæ€§è´¨" class="headerlink" title="ä¸€è‡´æ€§Hashæ€§è´¨"></a>ä¸€è‡´æ€§Hashæ€§è´¨</h3><p>ã€€ã€€è€ƒè™‘åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½å¤±æ•ˆï¼Œå¹¶ä¸”æ–°çš„èŠ‚ç‚¹å¾ˆå¯èƒ½åŠ¨æ€çš„å¢åŠ è¿›æ¥ï¼Œå¦‚ä½•ä¿è¯å½“ç³»ç»Ÿçš„èŠ‚ç‚¹æ•°ç›®å‘ç”Ÿå˜åŒ–æ—¶ä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›è‰¯å¥½çš„æœåŠ¡ï¼Œè¿™æ˜¯å€¼å¾—è€ƒè™‘çš„ï¼Œå°¤å…¶å®åœ¨è®¾è®¡åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿæ—¶ï¼Œå¦‚æœæŸå°æœåŠ¡å™¨å¤±æ•ˆï¼Œå¯¹äºæ•´ä¸ªç³»ç»Ÿæ¥è¯´å¦‚æœä¸é‡‡ç”¨åˆé€‚çš„ç®—æ³•æ¥ä¿è¯ä¸€è‡´æ€§ï¼Œé‚£ä¹ˆç¼“å­˜äºç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å¯èƒ½ä¼šå¤±æ•ˆï¼ˆå³ç”±äºç³»ç»ŸèŠ‚ç‚¹æ•°ç›®å˜å°‘ï¼Œå®¢æˆ·ç«¯åœ¨è¯·æ±‚æŸä¸€å¯¹è±¡æ—¶éœ€è¦é‡æ–°è®¡ç®—å…¶hashå€¼ï¼ˆé€šå¸¸ä¸ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹æ•°ç›®æœ‰å…³ï¼‰ï¼Œç”±äºhashå€¼å·²ç»æ”¹å˜ï¼Œæ‰€ä»¥å¾ˆå¯èƒ½æ‰¾ä¸åˆ°ä¿å­˜è¯¥å¯¹è±¡çš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼‰ï¼Œå› æ­¤ä¸€è‡´æ€§hashå°±æ˜¾å¾—è‡³å…³é‡è¦ï¼Œè‰¯å¥½çš„åˆ†å¸ƒå¼cahceç³»ç»Ÿä¸­çš„ä¸€è‡´æ€§hashç®—æ³•åº”è¯¥æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>å¹³è¡¡æ€§(Balance)</strong></li>
</ul>
<p>å¹³è¡¡æ€§æ˜¯æŒ‡å“ˆå¸Œçš„ç»“æœèƒ½å¤Ÿå°½å¯èƒ½åˆ†å¸ƒåˆ°æ‰€æœ‰çš„ç¼“å†²ä¸­å»ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ‰€æœ‰çš„ç¼“å†²ç©ºé—´éƒ½å¾—åˆ°åˆ©ç”¨ã€‚å¾ˆå¤šå“ˆå¸Œç®—æ³•éƒ½èƒ½å¤Ÿæ»¡è¶³è¿™ä¸€æ¡ä»¶ã€‚</p>
<ul>
<li><strong>å•è°ƒæ€§(Monotonicity)</strong></li>
</ul>
<p>å•è°ƒæ€§æ˜¯æŒ‡å¦‚æœå·²ç»æœ‰ä¸€äº›å†…å®¹é€šè¿‡å“ˆå¸Œåˆ†æ´¾åˆ°äº†ç›¸åº”çš„ç¼“å†²ä¸­ï¼Œåˆæœ‰æ–°çš„ç¼“å†²åŒºåŠ å…¥åˆ°ç³»ç»Ÿä¸­ï¼Œé‚£ä¹ˆå“ˆå¸Œçš„ç»“æœåº”èƒ½å¤Ÿä¿è¯åŸæœ‰å·²åˆ†é…çš„å†…å®¹å¯ä»¥è¢«æ˜ å°„åˆ°æ–°çš„ç¼“å†²åŒºä¸­å»ï¼Œè€Œä¸ä¼šè¢«æ˜ å°„åˆ°æ—§çš„ç¼“å†²é›†åˆä¸­çš„å…¶ä»–ç¼“å†²åŒºã€‚ç®€å•çš„å“ˆå¸Œç®—æ³•å¾€å¾€ä¸èƒ½æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚ï¼Œå¦‚æœ€ç®€å•çš„çº¿æ€§å“ˆå¸Œï¼šx = (ax + b) mod (P)ï¼Œåœ¨ä¸Šå¼ä¸­ï¼ŒPè¡¨ç¤ºå…¨éƒ¨ç¼“å†²çš„å¤§å°ã€‚ä¸éš¾çœ‹å‡ºï¼Œå½“ç¼“å†²å¤§å°å‘ç”Ÿå˜åŒ–æ—¶(ä»P1åˆ°P2)ï¼ŒåŸæ¥æ‰€æœ‰çš„å“ˆå¸Œç»“æœå‡ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œä¸æ»¡è¶³å•è°ƒæ€§çš„è¦æ±‚ã€‚å“ˆå¸Œç»“æœçš„å˜åŒ–æ„å‘³ç€å½“ç¼“å†²ç©ºé—´å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰çš„æ˜ å°„å…³ç³»éœ€è¦åœ¨ç³»ç»Ÿå†…å…¨éƒ¨æ›´æ–°ã€‚è€Œåœ¨P2Pç³»ç»Ÿå†…ï¼Œç¼“å†²çš„å˜åŒ–ç­‰ä»·äºPeeråŠ å…¥æˆ–é€€å‡ºç³»ç»Ÿï¼Œè¿™ä¸€æƒ…å†µåœ¨P2Pç³»ç»Ÿä¸­ä¼šé¢‘ç¹å‘ç”Ÿï¼Œå› æ­¤ä¼šå¸¦æ¥æå¤§è®¡ç®—å’Œä¼ è¾“è´Ÿè·ã€‚å•è°ƒæ€§å°±æ˜¯è¦æ±‚å“ˆå¸Œç®—æ³•èƒ½å¤Ÿåº”å¯¹è¿™ç§æƒ…å†µã€‚</p>
<ul>
<li><strong>åˆ†æ•£æ€§(Spread)</strong></li>
</ul>
<p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç»ˆç«¯æœ‰å¯èƒ½çœ‹ä¸åˆ°æ‰€æœ‰çš„ç¼“å†²ï¼Œè€Œæ˜¯åªèƒ½çœ‹åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å½“ç»ˆç«¯å¸Œæœ›é€šè¿‡å“ˆå¸Œè¿‡ç¨‹å°†å†…å®¹æ˜ å°„åˆ°ç¼“å†²ä¸Šæ—¶ï¼Œç”±äºä¸åŒç»ˆç«¯æ‰€è§çš„ç¼“å†²èŒƒå›´æœ‰å¯èƒ½ä¸åŒï¼Œä»è€Œå¯¼è‡´å“ˆå¸Œçš„ç»“æœä¸ä¸€è‡´ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ç›¸åŒçš„å†…å®¹è¢«ä¸åŒçš„ç»ˆç«¯æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒºä¸­ã€‚è¿™ç§æƒ…å†µæ˜¾ç„¶æ˜¯åº”è¯¥é¿å…çš„ï¼Œå› ä¸ºå®ƒå¯¼è‡´ç›¸åŒå†…å®¹è¢«å­˜å‚¨åˆ°ä¸åŒç¼“å†²ä¸­å»ï¼Œé™ä½äº†ç³»ç»Ÿå­˜å‚¨çš„æ•ˆç‡ã€‚åˆ†æ•£æ€§çš„å®šä¹‰å°±æ˜¯ä¸Šè¿°æƒ…å†µå‘ç”Ÿçš„ä¸¥é‡ç¨‹åº¦ã€‚å¥½çš„å“ˆå¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é¿å…ä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿï¼Œä¹Ÿå°±æ˜¯å°½é‡é™ä½åˆ†æ•£æ€§ã€‚</p>
<ul>
<li><strong>è´Ÿè½½(Load)</strong></li>
</ul>
<p>è´Ÿè½½é—®é¢˜å®é™…ä¸Šæ˜¯ä»å¦ä¸€ä¸ªè§’åº¦çœ‹å¾…åˆ†æ•£æ€§é—®é¢˜ã€‚æ—¢ç„¶ä¸åŒçš„ç»ˆç«¯å¯èƒ½å°†ç›¸åŒçš„å†…å®¹æ˜ å°„åˆ°ä¸åŒçš„ç¼“å†²åŒºä¸­ï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ªç‰¹å®šçš„ç¼“å†²åŒºè€Œè¨€ï¼Œä¹Ÿå¯èƒ½è¢«ä¸åŒçš„ç”¨æˆ·æ˜ å°„ä¸ºä¸åŒçš„å†…å®¹ã€‚ä¸åˆ†æ•£æ€§ä¸€æ ·ï¼Œè¿™ç§æƒ…å†µä¹Ÿæ˜¯åº”å½“é¿å…çš„ï¼Œå› æ­¤å¥½çš„å“ˆå¸Œç®—æ³•åº”èƒ½å¤Ÿå°½é‡é™ä½ç¼“å†²çš„è´Ÿè·ã€‚</p>
<ul>
<li><strong>å¹³æ»‘æ€§(Smoothness)</strong></li>
</ul>
<p>å¹³æ»‘æ€§æ˜¯æŒ‡ç¼“å­˜æœåŠ¡å™¨çš„æ•°ç›®å¹³æ»‘æ”¹å˜å’Œç¼“å­˜å¯¹è±¡çš„å¹³æ»‘æ”¹å˜æ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>ã€€ã€€ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼ˆConsistent Hashingï¼‰æœ€æ—©åœ¨è®ºæ–‡ã€Š<a href="http://dl.acm.org/citation.cfm?id=258660">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a>ã€‹ä¸­è¢«æå‡ºã€‚ç®€å•æ¥è¯´ï¼Œä¸€è‡´æ€§å“ˆå¸Œå°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼Œå¦‚å‡è®¾æŸå“ˆå¸Œå‡½æ•°Hçš„å€¼ç©ºé—´ä¸º0-2^32-1ï¼ˆå³å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ª32ä½æ— ç¬¦å·æ•´å½¢ï¼‰ï¼Œæ•´ä¸ªå“ˆå¸Œç©ºé—´ç¯å¦‚ä¸‹ï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class>

<p>ã€€ã€€æ•´ä¸ªç©ºé—´æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡ã€‚0å’Œ232-1åœ¨é›¶ç‚¹ä¸­æ–¹å‘é‡åˆã€‚</p>
<p>ã€€ã€€ä¸‹ä¸€æ­¥å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œå…·ä½“å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„ipæˆ–ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œï¼Œè¿™æ ·æ¯å°æœºå™¨å°±èƒ½ç¡®å®šå…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®ï¼Œè¿™é‡Œå‡è®¾å°†ä¸Šæ–‡ä¸­å››å°æœåŠ¡å™¨ä½¿ç”¨ipåœ°å€å“ˆå¸Œååœ¨ç¯ç©ºé—´çš„ä½ç½®å¦‚ä¸‹ï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/4.png" class> 

<p>æ¥ä¸‹æ¥ä½¿ç”¨å¦‚ä¸‹ç®—æ³•å®šä½æ•°æ®è®¿é—®åˆ°ç›¸åº”æœåŠ¡å™¨ï¼šå°†æ•°æ®keyä½¿ç”¨ç›¸åŒçš„å‡½æ•°Hashè®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œå¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ã€‚</p>
<p>ã€€ã€€ä¾‹å¦‚æˆ‘ä»¬æœ‰Object Aã€Object Bã€Object Cã€Object Då››ä¸ªæ•°æ®å¯¹è±¡ï¼Œç»è¿‡å“ˆå¸Œè®¡ç®—åï¼Œåœ¨ç¯ç©ºé—´ä¸Šçš„ä½ç½®å¦‚ä¸‹ï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/5.png" class>

<p>æ ¹æ®ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œæ•°æ®Aä¼šè¢«å®šä¸ºåˆ°Node Aä¸Šï¼ŒBè¢«å®šä¸ºåˆ°Node Bä¸Šï¼ŒCè¢«å®šä¸ºåˆ°Node Cä¸Šï¼ŒDè¢«å®šä¸ºåˆ°Node Dä¸Šã€‚</p>
<p>ä¸‹é¢åˆ†æä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„å®¹é”™æ€§å’Œå¯æ‰©å±•æ€§ã€‚ç°å‡è®¾Node Cä¸å¹¸å®•æœºï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å¯¹è±¡Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Cå¯¹è±¡è¢«é‡å®šä½åˆ°Node Dã€‚ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸­ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´æ•°æ®ï¼Œå…¶å®ƒä¸ä¼šå—åˆ°å½±å“ã€‚</p>
<p>ä¸‹é¢è€ƒè™‘å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœåœ¨ç³»ç»Ÿä¸­å¢åŠ ä¸€å°æœåŠ¡å™¨Node Xï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/6.png" class>

<p>æ­¤æ—¶å¯¹è±¡Object Aã€Bã€Dä¸å—å½±å“ï¼Œåªæœ‰å¯¹è±¡Céœ€è¦é‡å®šä½åˆ°æ–°çš„Node X ã€‚ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸­ï¼Œå¦‚æœå¢åŠ ä¸€å°æœåŠ¡å™¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ–°æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´æ•°æ®ï¼Œå…¶å®ƒæ•°æ®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯¹äºèŠ‚ç‚¹çš„å¢å‡éƒ½åªéœ€é‡å®šä½ç¯ç©ºé—´ä¸­çš„ä¸€å°éƒ¨åˆ†æ•°æ®ï¼Œå…·æœ‰è¾ƒå¥½çš„å®¹é”™æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>å¦å¤–ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨æœåŠ¡èŠ‚ç‚¹å¤ªå°‘æ—¶ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†éƒ¨ä¸å‡åŒ€è€Œé€ æˆæ•°æ®å€¾æ–œé—®é¢˜ã€‚ä¾‹å¦‚ç³»ç»Ÿä¸­åªæœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œå…¶ç¯åˆ†å¸ƒå¦‚ä¸‹ï¼Œ</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/7.png" class>

<p>æ­¤æ—¶å¿…ç„¶é€ æˆå¤§é‡æ•°æ®é›†ä¸­åˆ°Node Aä¸Šï¼Œè€Œåªæœ‰æå°‘é‡ä¼šå®šä½åˆ°Node Bä¸Šã€‚ä¸ºäº†è§£å†³è¿™ç§æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ï¼Œå³å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—å¤šä¸ªå“ˆå¸Œï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤æœåŠ¡èŠ‚ç‚¹ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¯ä»¥åœ¨æœåŠ¡å™¨ipæˆ–ä¸»æœºåçš„åé¢å¢åŠ ç¼–å·æ¥å®ç°ã€‚ä¾‹å¦‚ä¸Šé¢çš„æƒ…å†µï¼Œå¯ä»¥ä¸ºæ¯å°æœåŠ¡å™¨è®¡ç®—ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œäºæ˜¯å¯ä»¥åˆ†åˆ«è®¡ç®— â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ã€â€œNode B#1â€ã€â€œNode B#2â€ã€â€œNode B#3â€çš„å“ˆå¸Œå€¼ï¼Œäºæ˜¯å½¢æˆå…­ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼š</p>
<img src="/2021/07/24/Dubbo%EF%BC%88%E4%BA%8C%EF%BC%89/8.png" class>

<p>åŒæ—¶æ•°æ®å®šä½ç®—æ³•ä¸å˜ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥è™šæ‹ŸèŠ‚ç‚¹åˆ°å®é™…èŠ‚ç‚¹çš„æ˜ å°„ï¼Œä¾‹å¦‚å®šä½åˆ°â€œNode A#1â€ã€â€œNode A#2â€ã€â€œNode A#3â€ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®å‡å®šä½åˆ°Node Aä¸Šã€‚è¿™æ ·å°±è§£å†³äº†æœåŠ¡èŠ‚ç‚¹å°‘æ—¶æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸å°†è™šæ‹ŸèŠ‚ç‚¹æ•°è®¾ç½®ä¸º32ç”šè‡³æ›´å¤§ï¼Œå› æ­¤å³ä½¿å¾ˆå°‘çš„æœåŠ¡èŠ‚ç‚¹ä¹Ÿèƒ½åšåˆ°ç›¸å¯¹å‡åŒ€çš„æ•°æ®åˆ†å¸ƒã€‚</p>
<h1 id="ğŸ‰é›†ç¾¤å®¹é”™"><a href="#ğŸ‰é›†ç¾¤å®¹é”™" class="headerlink" title="ğŸ‰é›†ç¾¤å®¹é”™"></a>ğŸ‰é›†ç¾¤å®¹é”™</h1><p>é›†ç¾¤è°ƒç”¨å¤±è´¥æ—¶ï¼ŒDubbo æä¾›çš„å®¹é”™æ–¹æ¡ˆ</p>
<p>åœ¨é›†ç¾¤è°ƒç”¨å¤±è´¥æ—¶ï¼ŒDubbo æä¾›äº†å¤šç§å®¹é”™æ–¹æ¡ˆï¼Œç¼ºçœä¸º failover é‡è¯•ã€‚</p>
<p><img src="https://dubbo.apache.org/imgs/user/cluster.jpg" alt="cluster"></p>
<p>å„èŠ‚ç‚¹å…³ç³»ï¼š</p>
<ul>
<li>è¿™é‡Œçš„ <code>Invoker</code> æ˜¯ <code>Provider</code> çš„ä¸€ä¸ªå¯è°ƒç”¨ <code>Service</code> çš„æŠ½è±¡ï¼Œ<code>Invoker</code> å°è£…äº† <code>Provider</code> åœ°å€åŠ <code>Service</code> æ¥å£ä¿¡æ¯</li>
<li><code>Directory</code> ä»£è¡¨å¤šä¸ª <code>Invoker</code>ï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆ <code>List&lt;Invoker&gt;</code> ï¼Œä½†ä¸ <code>List</code> ä¸åŒçš„æ˜¯ï¼Œå®ƒçš„å€¼å¯èƒ½æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯”å¦‚æ³¨å†Œä¸­å¿ƒæ¨é€å˜æ›´</li>
<li><code>Cluster</code> å°† <code>Directory</code> ä¸­çš„å¤šä¸ª <code>Invoker</code> ä¼ªè£…æˆä¸€ä¸ª <code>Invoker</code>ï¼Œå¯¹ä¸Šå±‚é€æ˜ï¼Œä¼ªè£…è¿‡ç¨‹åŒ…å«äº†å®¹é”™é€»è¾‘ï¼Œè°ƒç”¨å¤±è´¥åï¼Œé‡è¯•å¦ä¸€ä¸ª</li>
<li><code>Router</code> è´Ÿè´£ä»å¤šä¸ª <code>Invoker</code> ä¸­æŒ‰è·¯ç”±è§„åˆ™é€‰å‡ºå­é›†ï¼Œæ¯”å¦‚è¯»å†™åˆ†ç¦»ï¼Œåº”ç”¨éš”ç¦»ç­‰</li>
<li><code>LoadBalance</code> è´Ÿè´£ä»å¤šä¸ª <code>Invoker</code> ä¸­é€‰å‡ºå…·ä½“çš„ä¸€ä¸ªç”¨äºæœ¬æ¬¡è°ƒç”¨ï¼Œé€‰çš„è¿‡ç¨‹åŒ…å«äº†è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œè°ƒç”¨å¤±è´¥åï¼Œéœ€è¦é‡é€‰</li>
</ul>
<h2 id="é›†ç¾¤å®¹é”™æ¨¡å¼"><a href="#é›†ç¾¤å®¹é”™æ¨¡å¼" class="headerlink" title="é›†ç¾¤å®¹é”™æ¨¡å¼"></a>é›†ç¾¤å®¹é”™æ¨¡å¼</h2><p>å¯ä»¥è‡ªè¡Œæ‰©å±•é›†ç¾¤å®¹é”™ç­–ç•¥ï¼Œå‚è§ï¼š<a href="https://dubbo.apache.org/zh/docs/dev/impls/cluster">é›†ç¾¤æ‰©å±•</a></p>
<h3 id="Failover-Cluster"><a href="#Failover-Cluster" class="headerlink" title="Failover Cluster"></a>Failover Cluster</h3><p>å¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œå½“å‡ºç°å¤±è´¥ï¼Œé‡è¯•å…¶å®ƒæœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºè¯»æ“ä½œï¼Œä½†é‡è¯•ä¼šå¸¦æ¥æ›´é•¿å»¶è¿Ÿã€‚å¯é€šè¿‡ <code>retries=&quot;2&quot;</code> æ¥è®¾ç½®é‡è¯•æ¬¡æ•°(ä¸å«ç¬¬ä¸€æ¬¡)ã€‚</p>
<p>é‡è¯•æ¬¡æ•°é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">retries</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">retries</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:method</span> <span class="attr">name</span>=<span class="string">&quot;findFoo&quot;</span> <span class="attr">retries</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dubbo:reference</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Failfast-Cluster"><a href="#Failfast-Cluster" class="headerlink" title="Failfast Cluster"></a>Failfast Cluster</h3><p>å¿«é€Ÿå¤±è´¥ï¼Œåªå‘èµ·ä¸€æ¬¡è°ƒç”¨ï¼Œå¤±è´¥ç«‹å³æŠ¥é”™ã€‚é€šå¸¸ç”¨äºéå¹‚ç­‰æ€§çš„å†™æ“ä½œï¼Œæ¯”å¦‚æ–°å¢è®°å½•ã€‚</p>
<h3 id="Failsafe-Cluster"><a href="#Failsafe-Cluster" class="headerlink" title="Failsafe Cluster"></a>Failsafe Cluster</h3><p>å¤±è´¥å®‰å…¨ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œç›´æ¥å¿½ç•¥ã€‚é€šå¸¸ç”¨äºå†™å…¥å®¡è®¡æ—¥å¿—ç­‰æ“ä½œã€‚</p>
<h3 id="Failback-Cluster"><a href="#Failback-Cluster" class="headerlink" title="Failback Cluster"></a>Failback Cluster</h3><p>å¤±è´¥è‡ªåŠ¨æ¢å¤ï¼Œåå°è®°å½•å¤±è´¥è¯·æ±‚ï¼Œå®šæ—¶é‡å‘ã€‚é€šå¸¸ç”¨äºæ¶ˆæ¯é€šçŸ¥æ“ä½œã€‚</p>
<h3 id="Forking-Cluster"><a href="#Forking-Cluster" class="headerlink" title="Forking Cluster"></a>Forking Cluster</h3><p>å¹¶è¡Œè°ƒç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œåªè¦ä¸€ä¸ªæˆåŠŸå³è¿”å›ã€‚é€šå¸¸ç”¨äºå®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„è¯»æ“ä½œï¼Œä½†éœ€è¦æµªè´¹æ›´å¤šæœåŠ¡èµ„æºã€‚å¯é€šè¿‡ <code>forks=&quot;2&quot;</code> æ¥è®¾ç½®æœ€å¤§å¹¶è¡Œæ•°ã€‚</p>
<h3 id="Broadcast-Cluster"><a href="#Broadcast-Cluster" class="headerlink" title="Broadcast Cluster"></a>Broadcast Cluster</h3><p>å¹¿æ’­è°ƒç”¨æ‰€æœ‰æä¾›è€…ï¼Œé€ä¸ªè°ƒç”¨ï¼Œä»»æ„ä¸€å°æŠ¥é”™åˆ™æŠ¥é”™ã€‚é€šå¸¸ç”¨äºé€šçŸ¥æ‰€æœ‰æä¾›è€…æ›´æ–°ç¼“å­˜æˆ–æ—¥å¿—ç­‰æœ¬åœ°èµ„æºä¿¡æ¯ã€‚</p>
<p>ç°åœ¨å¹¿æ’­è°ƒç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>broadcast.fail.percent </code>é…ç½®èŠ‚ç‚¹è°ƒç”¨å¤±è´¥çš„æ¯”ä¾‹ï¼Œå½“è¾¾åˆ°è¿™ä¸ªæ¯”ä¾‹åï¼Œ<code>BroadcastClusterInvoker</code> å°†ä¸å†è°ƒç”¨å…¶ä»–èŠ‚ç‚¹ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚ <code>broadcast.fail.percent</code> å–å€¼åœ¨ 0ï½100 èŒƒå›´å†…ã€‚é»˜è®¤æƒ…å†µä¸‹å½“å…¨éƒ¨è°ƒç”¨å¤±è´¥åï¼Œæ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ <code>broadcast.fail.percent</code> åªæ˜¯æ§åˆ¶çš„å½“å¤±è´¥åæ˜¯å¦ç»§ç»­è°ƒç”¨å…¶ä»–èŠ‚ç‚¹ï¼Œå¹¶ä¸æ”¹å˜ç»“æœ(ä»»æ„ä¸€å°æŠ¥é”™åˆ™æŠ¥é”™)ã€‚broadcast.fail.percent å‚æ•° åœ¨ dubbo2.7.10 åŠä»¥ä¸Šç‰ˆæœ¬ç”Ÿæ•ˆã€‚</p>
<p><code>Broadcast Cluster</code> é…ç½® <code>broadcast.fail.percent</code>ã€‚</p>
<p><code>broadcast.fail.percent=20</code> ä»£è¡¨äº†å½“ 20% çš„èŠ‚ç‚¹è°ƒç”¨å¤±è´¥å°±æŠ›å‡ºå¼‚å¸¸ï¼Œä¸å†è°ƒç”¨å…¶ä»–èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@reference(cluster = &quot;broadcast&quot;, parameters = &#123;&quot;broadcast.fail.percent&quot;, &quot;20&quot;&#125;)</span></span><br></pre></td></tr></table></figure>

<p><code>2.1.0</code> å¼€å§‹æ”¯æŒ</p>
<h2 id="é›†ç¾¤æ¨¡å¼é…ç½®"><a href="#é›†ç¾¤æ¨¡å¼é…ç½®" class="headerlink" title="é›†ç¾¤æ¨¡å¼é…ç½®"></a>é›†ç¾¤æ¨¡å¼é…ç½®</h2><p>æŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹åœ¨æœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹é…ç½®é›†ç¾¤æ¨¡å¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">cluster</span>=<span class="string">&quot;failsafe&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">cluster</span>=<span class="string">&quot;failsafe&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>åˆ†å¸ƒå¼</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Electron(ä¸€):ç®€å•ä½¿ç”¨</title>
    <url>/2021/09/09/Electron%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>Electronæ˜¯ä¸€ä¸ªä½¿ç”¨JavaScriptã€HTMLã€CSSæ¥æ„å»ºæ¡Œé¢åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œå†…éƒ¨åµŒå…¥äº†Chromiumå’ŒNode.jsï¼Œé“ç†ä¸Šæ¥è®²å¯ä»¥å’ŒVueç»“åˆä¸€èµ·ä½¿ç”¨çš„ï¼Œæœç„¶electronç¤¾åŒºä¸­å¼€æºäº†electron-vueçš„æ•´åˆè„šæ‰‹æ¶ï¼Œä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ï¼ŒåŸºæœ¬å°±æ˜¯åœ¨å†™Vueï¼Œåªæ˜¯Electronä¸­æœ¬èº«çš„APIè¿˜æ˜¯éœ€è¦å¤šç¿»é˜…æ–‡æ¡£å­¦ä¹ .</p>
</blockquote>
<p><code>Electron-Vueæ–‡æ¡£</code>ï¼š<a href="https://simulatedgreg.gitbooks.io/electron-vue/content/cn/">electron-vueæ–‡æ¡£</a></p>
<p><code>Electronæ–‡æ¡£</code>ï¼š<a href="https://www.electronjs.org/docs">Electronå®˜æ–¹æ–‡æ¡£</a></p>
<h1 id="çª—å£åˆ›å»º"><a href="#çª—å£åˆ›å»º" class="headerlink" title="çª—å£åˆ›å»º"></a>çª—å£åˆ›å»º</h1><p><code>src/main/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Initial window options</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">	<span class="comment">//çª—å£å®½åº¦ä»¥åŠé«˜åº¦</span></span><br><span class="line">    height: <span class="number">563</span>,</span><br><span class="line">    width: <span class="number">1000</span>,</span><br><span class="line">    useContentSize: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//å…³é—­å¤´éƒ¨æ (å…³é—­ï¼Œç¼©å°åŠŸèƒ½)</span></span><br><span class="line">    frame: <span class="literal">false</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//ç”¨äºè®¾ç½®åŠ è½½ä»€ä¹ˆé¡µé¢</span></span><br><span class="line">  <span class="comment">// mainWindow.loadURL(&#x27;https://electronjs.org&#x27;)</span></span><br><span class="line">  mainWindow.loadURL(winURL)</span><br><span class="line"></span><br><span class="line">  mainWindow.on(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//ç‚¹å‡»å…³é—­åç»“æŸåº”ç”¨</span></span><br><span class="line">    mainWindow = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//å…³é—­èœå•</span></span><br><span class="line">  mainWindow.setMenu(<span class="literal">null</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="è‡ªå®šä¹‰çª—å£å¤´éƒ¨"><a href="#è‡ªå®šä¹‰çª—å£å¤´éƒ¨" class="headerlink" title="è‡ªå®šä¹‰çª—å£å¤´éƒ¨"></a>è‡ªå®šä¹‰çª—å£å¤´éƒ¨</h1><p>é€šè¿‡<code>ipcRenderer</code>ä¼ è¾¾ç›¸åº”çš„ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;icons&quot;&gt;</span><br><span class="line">            &lt;span @click&#x3D;&quot;changeSmall()&quot;&gt;&lt;i class&#x3D;&quot;iconfont&quot; style&#x3D;&quot;font-size: 27px&quot;&gt;&amp;#xe61b;&lt;&#x2F;i&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;span @click&#x3D;&quot;changeBig()&quot;&gt;&lt;i class&#x3D;&quot;iconfont&quot; style&#x3D;&quot;font-size: 27px&quot;&gt;&amp;#xe61b;&lt;&#x2F;i&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;span @click&#x3D;&quot;changeClose()&quot;&gt;&lt;i class&#x3D;&quot;iconfont&quot; style&#x3D;&quot;font-size: 30px;&quot;&gt;&amp;#xe6c9;&lt;&#x2F;i&gt;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ipcRenderer&#125; from &#39;electron&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &quot;index&quot;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        changeSmall()&#123;</span><br><span class="line">            console.log(&quot;small&quot;)</span><br><span class="line">            ipcRenderer.send(&quot;window-min&quot;)</span><br><span class="line">        &#125;,</span><br><span class="line">        changeBig()&#123;</span><br><span class="line">            console.log(&quot;big&quot;)</span><br><span class="line">            ipcRenderer.send(&quot;window-max&quot;)</span><br><span class="line">        &#125;,</span><br><span class="line">        changeClose()&#123;</span><br><span class="line">            console.log(&quot;close&quot;)</span><br><span class="line">            ipcRenderer.send(&quot;window-close&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><code>src/main/index.js</code>ä¸‹é€šè¿‡<code>ipcMain</code>æ¥æ”¶ä¼ é€’çš„äº‹ä»¶ä¿¡æ¯å¹¶è¿›è¡Œç›¸åº”çš„æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥ipcMain</span></span><br><span class="line"><span class="keyword">import</span> &#123;ipcMain&#125; <span class="keyword">from</span> <span class="string">&#x27;electron&#x27;</span></span><br><span class="line"></span><br><span class="line">ipcMain.on(<span class="string">&#x27;window-min&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  mainWindow.minimize()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ipcMain.on(<span class="string">&#x27;window-max&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(mainWindow.isMaximized())&#123;</span><br><span class="line">    mainWindow.restore()</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    mainWindow.maximize();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ipcMain.on(<span class="string">&#x27;window-close&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  mainWindow.close()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Electron</category>
      </categories>
      <tags>
        <tag>Electron</tag>
      </tags>
  </entry>
  <entry>
    <title>Electron(äºŒ):æ‰“åŒ…ä¸­é‡åˆ°çš„å‘</title>
    <url>/2021/09/09/Electron%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>è¯´å®è¯ï¼Œelectronä½¿ç”¨è¿‡ç¨‹ä¸­å‘è¿˜çœŸæ˜¯æ¯”è¾ƒå¤šï¼Œæäº†å¤§åŠå¤©ç»ˆäºâ€¦ç»ˆäºæ‰“åŒ…æˆåŠŸäº†ï¼Œå®åœ¨ä¸å®¹æ˜“å•Šï¼Œè¿™æ¬¡å°±æ¥è®°å½•ä¸€ä¸‹ï¼Œå…å¾—ä»¥åå†é‡åˆ°ä¸ä¼šå¼„.</p>
</blockquote>
<h1 id="æ‰“åŒ…å·¥å…·"><a href="#æ‰“åŒ…å·¥å…·" class="headerlink" title="æ‰“åŒ…å·¥å…·"></a>æ‰“åŒ…å·¥å…·</h1><p>å¯¹äº<code>electron</code>åº”ç”¨ï¼Œæœ‰ä¸¤ç§æ‰“åŒ…å·¥å…·ï¼Œä¸€ç§æ˜¯<code>electron-packager</code> ï¼Œä¸€ç§æ˜¯<code>electron-builder</code>.</p>
<p>ç¬¬ä¸€ç§: æ‰“åŒ…åä¼šç›´æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿è¡Œè¿‡åå°±ç›´æ¥æ˜¯<code>electron</code>åº”ç”¨</p>
<p>ç¬¬äºŒç§: æ‰“åŒ…åä¼šç”Ÿæˆ<code>electoron</code>çš„<code>exe</code>å®‰è£…åŒ…ï¼Œè¿è¡Œè¿‡åå¯ä»¥å®‰è£…<code>electron</code>åº”ç”¨å³å¯è¿è¡Œ</p>
<p>æ³¨æ„ï¼šå¦‚ä¸Šä¸¤ç§éƒ½å°è¯•äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯ç¬¬äºŒç§æ¯”è¾ƒä½¿ç”¨ï¼Œæ¯•ç«Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ†å‘ç»™åˆ«äººä½¿ç”¨.</p>
<h1 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h1><ul>
<li><code>can&#39;t resolve node moudleï¼šxxx</code></li>
</ul>
<p>è¿™ç§ä¸€èˆ¬éƒ½æ˜¯æ²¡æœ‰å®‰è£…æŸä¸ªåŒ…ï¼Œ<code>npm install xxx</code> å³å¯</p>
<ul>
<li><code> UnhandledPromiseRejectionWarning: ReferenceError: Multispinner is not defined</code></li>
</ul>
<p>è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯åœ¨<code>npm run build</code>è¿›è¡Œæ‰“åŒ…æ—¶ä¼šé‡åˆ°çš„ï¼Œæ‰“åŒ…æ—¶å€™éœ€è¦<code>Multispinner</code>ï¼Œè€Œ<code>electron-vue</code>ä¸­æ²¡æœ‰è¿™ç§æ’ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£….</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">npm install multispinner -D</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ <code>build.js</code> ä¸­å¼•å…¥å³å¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Multispinner = <span class="built_in">require</span>(<span class="string">&#x27;multispinner&#x27;</span>)</span><br></pre></td></tr></table></figure>





<ul>
<li><code>Get https://github.com/electron-userland/electron-builder-binaries/releases/xxxxx. dial tcp 20.205.243.166:443: connectex: A connection attempt failed</code></li>
</ul>
<p>è¿™ç§æƒ…å†µå°±æ˜¯ä»<code>Github</code>ä¸Šä¸‹è½½ä¸œè¥¿ä¸‹è½½å¤±è´¥å¯¼è‡´çš„ï¼Œäºæ˜¯åªèƒ½æ‰‹åŠ¨å»ä¸‹è½½ï¼Œåªéœ€å¤åˆ¶æç¤ºçš„è¿™ä¸ªé“¾æ¥å»ä¸‹è½½ç›¸åº”çš„ä¸œè¥¿å³å¯.ä¸€èˆ¬æ¥è®²éœ€è¦ä¸‹ä¸‰ä¸ªä¸œè¥¿ï¼Œ<code>winCodeSign</code> ã€<code>nsis</code>ã€<code>nsis-resources</code> </p>
<p>é€‰å¥½ç›¸åº”çš„ç‰ˆæœ¬è¿‡åï¼Œåœ¨<code>C</code>ç›˜ä¸­<code>C:\Users\user\AppData\Local\electron-builder\Cache</code>ç›®å½•ä¸‹ï¼Œæ–°å»º<code>winCodeSign</code>ã€<code>nsis</code>æ–‡ä»¶å¤¹ï¼Œåœ¨<code>winCodeSIgn</code>ä¸­ç›´æ¥æ”¾å…¥è§£å‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬æœ€å¤–å±‚çš„æ–‡ä»¶å¤¹ä¸€èµ·å¤åˆ¶è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹å³å¯ï¼Œè€Œå¯¹äº<code>nsis</code>éœ€è¦æ–°å»º<code>nsis-ç‰ˆæœ¬å·</code>ï¼Œ<code>nsis-resources-ç‰ˆæœ¬å·</code> ï¼Œè¿™ä¿©ä¸ªæ–‡ä»¶å¤¹åªéœ€è¦å¤åˆ¶è§£å‹åæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œä¸éœ€è¦æœ€å¤–å±‚çš„æ–‡ä»¶å¤¹.</p>
]]></content>
      <categories>
        <category>Electron</category>
      </categories>
      <tags>
        <tag>Electron</tag>
      </tags>
  </entry>
  <entry>
    <title>Git:å…³è”å¤šä¸ªä»“åº“</title>
    <url>/2021/09/09/Git%EF%BC%9A%E5%85%B3%E8%81%94%E5%A4%9A%E4%B8%AA%E4%BB%93%E5%BA%93/</url>
    <content><![CDATA[<blockquote>
<p>ç”±äºæƒ³å°†ä»£ç åŒæ—¶ä¿å­˜åˆ° GitHubã€Giteeäºæ˜¯å­¦ä¹ äº†ä¸€ç•ªï¼Œåœ¨æ­¤åšä¸€ä¸‹è®°å½•.</p>
</blockquote>
<p><strong>è¿œç¨‹ä»“åº“è¿æ¥</strong></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.å…ˆæŸ¥çœ‹æœ¬åœ°å·²ç»è¿æ¥çš„ä»“åº“,ç„¶åå†æ·»åŠ è¿œç¨‹ä»“åº“</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯</span></span><br><span class="line">git remote -v</span><br><span class="line"><span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“ï¼Œä»“åº“æ˜µç§°éœ€è¦å’Œå·²ç»æœ‰çš„ä¸ä¸€æ ·(æŸ¥è¯¢å‡ºæ¥çš„ç¬¬ä¸€ä¸ªå•è¯å°±æ˜¯å·²ç»æœ‰çš„ä»“åº“æ˜µç§°)</span></span><br><span class="line">git remote add ä»“åº“æ˜µç§° SSHé“¾æ¥/httpé“¾æ¥</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢å‡ºæ¥çš„ç»“æœå¤§è‡´å¦‚ä¸‹:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">origin  git@gitee.com:soul-pe/anthony-blog.git (fetch)</span><br><span class="line">origin  git@gitee.com:soul-pe/anthony-blog.git (push)</span><br></pre></td></tr></table></figure>

<p>äºæ˜¯å°±å¯ä»¥å¼€å§‹æ·»åŠ è¿œç¨‹ä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add github SSHé“¾æ¥/httpé“¾æ¥</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ å®Œæ¯•åï¼Œå¦‚æœæ˜¯æ–°çš„ä»“åº“ï¼Œéœ€è¦å…ˆåŒæ­¥ï¼Œä½†æ˜¯ç”±äºå†å²è®°å½•ä¸åŒå¯¼è‡´ä¸èƒ½åŒæ­¥ä»è€Œä¼šæŠ›å‡ºä¸€ä¸ªæ‹’ç»åŒæ­¥çš„é”™è¯¯.</p>
<p><strong>è§£å†³æ–¹æ¡ˆâ‘ ï¼š</strong></p>
<p>å¼ºåˆ¶<code>pull</code> ï¼Œå³å¼ºåˆ¶å°†æœ¬åœ°ä»“åº“å’Œå†å²ä»“åº“çš„è®°å½•åŒæ­¥ï¼Œä»è€Œå¯ä»¥<code>push</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull github --force</span><br></pre></td></tr></table></figure>

<p><strong>è§£å†³æ–¹æ¡ˆâ‘¡ï¼š</strong></p>
<p>å¼ºåˆ¶<code>push</code>ï¼Œå³å¼ºåˆ¶å°†æœ¬åœ°ä»“åº“å†…å®¹æ¨é€æ¥åŒæ­¥å†å²è®°å½•(ä»…æ¨èäºè¿œç¨‹ä»“åº“æ²¡æœ‰å­˜å‚¨ä»£ç çš„æ—¶å€™ä½¿ç”¨)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push github --force</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaåŸºç¡€(ä¸€):Lambdaè¡¨è¾¾å¼</title>
    <url>/2021/09/09/Java%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šJava æ˜¯ä¸€ä¸ªçº¯é¢å‘å¯¹è±¡çš„ä¸€é—¨è¯­è¨€ï¼Œæ‰€æœ‰æ–¹æ³•å¿…é¡»å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡ä¹‹ä¸­å¦åˆ™æ˜¯æ— æ³•å­˜åœ¨çš„ï¼Œå®ƒä¸åƒä¸€äº›å‡½æ•°å¼è¯­è¨€ï¼Œä¾‹å¦‚ JavaScriptã€Cç­‰ï¼Œæ¯ä¸ªå‡½æ•°å¯ä»¥ç‹¬ç«‹å­˜åœ¨.</p>
</blockquote>
<h1 id="ä½•ä¸ºLambdaè¡¨è¾¾å¼ï¼Ÿ"><a href="#ä½•ä¸ºLambdaè¡¨è¾¾å¼ï¼Ÿ" class="headerlink" title="ä½•ä¸ºLambdaè¡¨è¾¾å¼ï¼Ÿ"></a>ä½•ä¸ºLambdaè¡¨è¾¾å¼ï¼Ÿ</h1><p>å¦‚æœä½¿ç”¨è¿‡<code>JavaScript</code>è¿™ç§è¯­è¨€çš„è¯ï¼Œå…¶å®å°±æ˜¯å…¶ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œå½¢å¦‚ï¼š<code>ï¼ˆå‚æ•°Â·Â·Â·ï¼‰=&gt; &#123; å‡½æ•°ä½“ &#125; </code>.åªä¸è¿‡åœ¨<code>Java</code>ä¸­ç¨å¾®æ”¹å˜äº†ä¸€ä¸ªå°åœ°æ–¹ï¼Œ<code>ï¼ˆå‚æ•°Â·Â·Â·ï¼‰-&gt; &#123; å‡½æ•°ä½“ &#125; </code>ï¼Œ<code>Lambda</code>è¡¨è¾¾å¼è®©æ–¹æ³•è„±ç¦»äº†ä¸€ä¸ªç±»çš„æŸç¼š(å…¶å®æ˜¯ä¸å®Œå…¨çš„è„±ç¦»ï¼Œå› ä¸ºè‡³å°‘éœ€è¦åœ¨ä¸€ä¸ªmainå‡½æ•°é‡Œé¢)ï¼Œè®©ä¸€äº›ç®€å•çš„æ“ä½œï¼Œå†™æ³•å˜å¾—ååˆ†çµæ´».</p>
<h1 id="Lambdaè¡¨è¾¾å¼å°ç»†èŠ‚"><a href="#Lambdaè¡¨è¾¾å¼å°ç»†èŠ‚" class="headerlink" title="Lambdaè¡¨è¾¾å¼å°ç»†èŠ‚"></a>Lambdaè¡¨è¾¾å¼å°ç»†èŠ‚</h1><p>å…¶å®å¾ˆå¤šç»†èŠ‚ä¸ç®­å¤´å‡½æ•°å…¶å®æ˜¯ä¸€æ ·ï¼Œè¿™é‡Œä¹Ÿè¿˜æ˜¯ä¸€ä¸€åˆ—ä¸¾ä¸€ä¸‹ï¼Œæƒå½“å›é¡¾ä¸€ä¸‹.</p>
<ul>
<li>å½“å‚æ•°åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œå¹¶ä¸”å‚æ•°ç±»å‹å¯ä»¥æ¨å¯¼çš„æ—¶å€™ï¼Œåœ†æ‹¬å·å¯ä»¥çœç•¥</li>
<li>å½“å‡½æ•°ä½“è¯­å¥åªæœ‰ä¸€å¥æ—¶ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·ï¼Œåä¹‹åˆ™å¿…é¡»åŠ ä¸ŠèŠ±æ‹¬å·</li>
<li>å½“å‚æ•°æœ‰å¤šä¸ªçš„æ—¶å€™ï¼Œå¦‚æœç±»å‹å¯ä»¥æ¨å¯¼ï¼Œå‚æ•°ç±»å‹ä¹Ÿå¯ä»¥çœç•¥ä¸å†™</li>
<li>å½“å‡½æ•°ä½“è¯­å¥åªæœ‰ä¸€å¥æ—¶ï¼Œä¼šè‡ªåŠ¨è¿”å›å…¶ç»“æœ</li>
</ul>
<h1 id="å®é™…åº”ç”¨"><a href="#å®é™…åº”ç”¨" class="headerlink" title="å®é™…åº”ç”¨"></a>å®é™…åº”ç”¨</h1><h2 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h2><p>æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹</p>
<p>1 <strong>å¯¹è±¡::å®ä¾‹æ–¹æ³•</strong>ï¼Œå°†lambdaçš„å‚æ•°å½“åšæ–¹æ³•çš„å‚æ•°ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">objectName::instanceMethod</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Consumer&lt;String&gt; sc = System.out::println;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Consumer&lt;String&gt; sc2 = (x) -&gt; System.out.println(x);</span><br><span class="line">sc.accept(<span class="string">&quot;618, ç‹‚æ¬¢happy&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>2 <strong>ç±»::é™æ€æ–¹æ³•</strong>ï¼Œå°†lambdaçš„å‚æ•°å½“åšæ–¹æ³•çš„å‚æ•°ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ClassName::staticMethod		</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ClassName::staticMethod  ç±»çš„é™æ€æ–¹æ³•ï¼šæŠŠè¡¨è¾¾å¼çš„å‚æ•°å€¼ä½œä¸ºstaticMethodæ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">Function&lt;Integer, String&gt; sf = String::valueOf;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Function&lt;Integer, String&gt; sf2 = (x) -&gt; String.valueOf(x);</span><br><span class="line">String apply1 = sf.apply(<span class="number">61888</span>);</span><br></pre></td></tr></table></figure>

<p>3 <strong>ç±»::å®ä¾‹æ–¹æ³•</strong>ï¼Œå°†lambdaçš„ç¬¬ä¸€ä¸ªå‚æ•°å½“åšæ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå…¶ä»–çš„å‚æ•°ä½œä¸ºæ–¹æ³•çš„å‚æ•°ã€‚å¼€å‘ä¸­å°½é‡å°‘äº›æ­¤ç±»å†™æ³•ï¼Œå‡å°‘åç»­ç»´æŠ¤æˆæœ¬ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ClassName::instanceMethod</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ClassName::instanceMethod  ç±»çš„å®ä¾‹æ–¹æ³•ï¼šæŠŠè¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå‚æ•°å½“æˆinstanceMethodçš„è°ƒç”¨è€…ï¼Œå…¶ä»–å‚æ•°ä½œä¸ºè¯¥æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">BiPredicate&lt;String, String&gt; sbp = String::equals;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">BiPredicate&lt;String, String&gt; sbp2 = (x, y) -&gt; x.equals(y);</span><br><span class="line"><span class="keyword">boolean</span> test = sbp.test(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;A&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p><strong>æ— å‚</strong>çš„æ„é€ æ–¹æ³•å°±æ˜¯<strong>ç±»::å®ä¾‹æ–¹æ³•æ¨¡å‹ï¼Œå¦‚ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Supplier&lt;User&gt; us = User::<span class="keyword">new</span>;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Supplier&lt;User&gt; us2 = () -&gt; <span class="keyword">new</span> User();</span><br><span class="line"><span class="comment">//è·å–å¯¹è±¡</span></span><br><span class="line">User user = us.get();</span><br></pre></td></tr></table></figure>

<p><strong>å½“æœ‰å‚æ•°æ—¶</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸€ä¸ªå‚æ•°,å‚æ•°ç±»å‹ä¸åŒåˆ™ä¼šç¼–è¯‘å‡ºé”™</span></span><br><span class="line">Function&lt;Integer, User&gt; uf = id -&gt; <span class="keyword">new</span> User(id);</span><br><span class="line"><span class="comment">//æˆ–åŠ æ‹¬å·</span></span><br><span class="line">Function&lt;Integer, User&gt; uf2 = (id) -&gt; <span class="keyword">new</span> User(id);</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Function&lt;Integer, User&gt; uf3 = (Integer id) -&gt; <span class="keyword">new</span> User(id);</span><br><span class="line">User apply = uf.apply(<span class="number">61888</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line">BiFunction&lt;Integer, String, User&gt; ubf = (id, name) -&gt; <span class="keyword">new</span> User(id, name);</span><br><span class="line">User ç‹‚æ¬¢happy = ubf.apply(<span class="number">618</span>, <span class="string">&quot;ç‹‚æ¬¢happy&quot;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="å¤šçº¿ç¨‹å®ç°Runableæ¥å£"><a href="#å¤šçº¿ç¨‹å®ç°Runableæ¥å£" class="headerlink" title="å¤šçº¿ç¨‹å®ç°Runableæ¥å£"></a>å¤šçº¿ç¨‹å®ç°<code>Runableæ¥å£</code></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Java 8ä¹‹å‰ï¼š</span></span><br><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Before Java8, too much code for too little to do&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">//Java 8æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">new</span> Thread( () -&gt; System.out.println(<span class="string">&quot;In Java8, Lambda expression rocks !!&quot;</span>) ).start();</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>JavaåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkins(ä¸€):è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸æŒç»­äº¤ä»˜</title>
    <url>/2021/11/08/Jenkins%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Jenkinsä»‹ç»"><a href="#Jenkinsä»‹ç»" class="headerlink" title="Jenkinsä»‹ç»"></a>Jenkinsä»‹ç»</h1><p><code>Jenkins</code>æ˜¯åŸºäº<code>java</code>å¼€å‘çš„ä¸€å¥—è¿›è¡Œå¿«é€Ÿäº¤ä»˜ï¼ŒæŒç»­äº¤ä»˜çš„ç³»ç»Ÿï¼Œå¦‚æœè¦è¯´æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ååˆ†å›ºå®šä¸”ç¹ççš„æ“ä½œè«è¿‡äºæ›´æ–°ä»£ç ç‰ˆæœ¬åï¼Œä¸Šä¼ ç‰ˆæœ¬åº“å®¡æ ¸ï¼Œå®¡æ ¸è¿‡åï¼Œæ‰“åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨è¿›è¡Œæ›´æ–°è¿™ä¸€æ“ä½œäº†ï¼Œåœ¨ä¸€ä¸ªæµç¨‹æ°åˆ°çš„å…¬å¸ä¹‹ä¸­ï¼Œè¿™æ•´ä¸ªæµç¨‹åœ¨å…¬å¸ä¸­è‡³å°‘éœ€è¦ä¸€ä¸ªå¼€å‘äººå‘˜å’Œä¸€ä¸ªè¿ç»´äººå‘˜è¿›è¡Œæ“ä½œï¼Œéšç€ç‰ˆæœ¬çš„å¿«é€Ÿæ¨è¿›ï¼Œè¿™ä¸€å¥—æµç¨‹æ˜¯ååˆ†ç¼“æ…¢ä¸”ä½æ•ˆçš„ï¼Œäºæ˜¯<code>Jenkins</code>åº”è¿è€Œç”Ÿ.</p>
<p><code>Jenkins</code>éƒ¨ç½²æµç¨‹ï¼š</p>
<ul>
<li>å¼€å‘äººå‘˜ä¸Šä¼ ä»£ç è‡³ä»£ç ä»“åº“</li>
<li>è‹¥æ»¡è¶³æå‰è®¾ç½®å¥½çš„è§¦å‘æ¡ä»¶ï¼Œä»£ç ä»“åº“å‘é€æ„å»ºè¯·æ±‚è‡³<code>Jenkins</code></li>
<li><code>Jenkins</code>å¼€å§‹æ‹‰å–ä»£ç ä»“åº“çš„ä»£ç </li>
<li>æ„å»ºæ‰“åŒ…é¡¹ç›®</li>
<li>ä¸Šä¼ æœåŠ¡å™¨å¹¶æ‰§è¡Œç›¸åº”çš„å‘½ä»¤è¿è¡ŒæœåŠ¡</li>
</ul>
<p>åœ¨<code>Jenkins 1.x</code> ç‰ˆæœ¬ä¸­ï¼Œåªæ”¯æŒå›¾å½¢åŒ–<code>web</code>ç•Œé¢æ“ä½œï¼Œè®¾ç½®æµç¨‹ï¼Œå¯ç§»æ¤æ€§è¾ƒå·®ï¼Œå‡è‹¥è¦æ›´æ¢æœåŠ¡å™¨ï¼Œåˆ™è¦ä»˜å‡ºè¾ƒå¤§æˆæœ¬é‡æ–°è®¾ç½®ï¼Œè€Œåœ¨<code>2.x</code>ä¸­æ¨å‡ºäº†<code>pipeline</code>è„šæœ¬è¿›è¡Œæµç¨‹è®¾å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º<code>Jenkinsfile</code>è¿›è¡Œè„šæœ¬ç¼–å†™ï¼ŒåŒæ—¶æ”¯æŒ<code>Grovery</code>è¿›è¡Œç¼–å†™ï¼Œå¦‚æ­¤æ›´åŠ å¢åŠ äº†<code>Jenkins</code>çš„çµæ´»æ€§.</p>
<h1 id="Jenkins-å¸¸ç”¨æ’ä»¶"><a href="#Jenkins-å¸¸ç”¨æ’ä»¶" class="headerlink" title="Jenkins å¸¸ç”¨æ’ä»¶"></a>Jenkins å¸¸ç”¨æ’ä»¶</h1><p><code>Config File Provider Plugin</code> : ç”¨äºé…ç½®å…¨å±€çš„é…ç½®æ–‡ä»¶</p>
<p><code>Blue Ocean</code> ï¼šå…¨æ–°çš„<code>Jenkins æµæ°´çº¿</code> æ„å»ºé¡µé¢</p>
<p><code>SSH</code>ï¼šç”¨äºè¿›è¡Œ<code>SSH</code>è¿æ¥æœåŠ¡</p>
<p><code>Gitee</code>ï¼šç”¨äºè¿æ¥<code>Gitee</code>ä»“åº“</p>
<p><code>maven plugin</code>ï¼šç”¨äºæ„å»º<code>maven</code>é¡¹ç›®</p>
<h1 id="Jenkins-åŸºæœ¬é…ç½®æµç¨‹"><a href="#Jenkins-åŸºæœ¬é…ç½®æµç¨‹" class="headerlink" title="Jenkins åŸºæœ¬é…ç½®æµç¨‹"></a>Jenkins åŸºæœ¬é…ç½®æµç¨‹</h1><h2 id="å…¨å±€å·¥å…·é…ç½®"><a href="#å…¨å±€å·¥å…·é…ç½®" class="headerlink" title="å…¨å±€å·¥å…·é…ç½®"></a>å…¨å±€å·¥å…·é…ç½®</h2><ul>
<li>é…ç½® <code>maven</code>ç‰ˆæœ¬</li>
<li>é…ç½®<code>JDK</code>ç‰ˆæœ¬ï¼Œå¹¶ç»‘å®š<code>oracle</code>è´¦å·</li>
<li>é…ç½®<code>git</code>ä¸‹è½½</li>
</ul>
<h2 id="ç³»ç»Ÿé…ç½®"><a href="#ç³»ç»Ÿé…ç½®" class="headerlink" title="ç³»ç»Ÿé…ç½®"></a>ç³»ç»Ÿé…ç½®</h2><ul>
<li>é…ç½®æ‰€éœ€è¦ç”¨åˆ°çš„<code>SSH</code>æœåŠ¡å™¨</li>
<li>é…ç½®<code>Gitee</code>èº«ä»½ä»¤ç‰Œ</li>
</ul>
<p>æ³¨æ„ï¼šä»¥ä¸Šå‡å¯é…ç½®å¤šä¸ª</p>
<h2 id="åˆ›å»ºæ„å»ºä»»åŠ¡"><a href="#åˆ›å»ºæ„å»ºä»»åŠ¡" class="headerlink" title="åˆ›å»ºæ„å»ºä»»åŠ¡"></a>åˆ›å»ºæ„å»ºä»»åŠ¡</h2><p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103002039965.png" alt="image-20211103002039965"></p>
<p>è¿™é‡Œä»¥æ„å»ºä¸€ä¸ª<code>maven</code>é¡¹ç›®ä¸ºä¾‹ï¼Œåç»­ä¼šå°è¯•æ„å»ºæµæ°´çº¿é¡¹ç›®ï¼Œæ›´åŠ æ™ºèƒ½åŒ–çš„é…ç½®.</p>
<ul>
<li>é…ç½®é¡¹ç›®ä»“åº“åœ°å€ï¼Œå‡­è¯ä¸ºä»“åº“æ‰€åœ¨å¹³å°çš„è´¦æˆ·ä»¥åŠå¯†ç ï¼Œå¹¶é€‰æ‹©åˆ†æ”¯</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103002002190.png" alt="image-20211103002002190"></p>
<ul>
<li>æ„å»ºè§¦å‘å™¨<ul>
<li>å‹¾é€‰ <code>Gitee webhook</code> è§¦å‘ï¼Œå°†åæ–¹é“¾æ¥å†™å…¥åˆ°<code>Gitee</code>å¯¹åº”ä»“åº“ç®¡ç†é€‰é¡¹ä¸­çš„<code>Webhook</code>ä¸­ï¼Œä»¥åŠåç»­ç”Ÿæˆçš„è®¤è¯ç ï¼Œå¹¶ä¸”é€‚å½“é€‰æ‹©è§¦å‘æ¡ä»¶</li>
</ul>
</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103002712793.png" alt="image-20211103002712793"></p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003055902.png" alt="image-20211103003055902"></p>
<ul>
<li>é…ç½®æ„å»ºç¯å¢ƒ</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003126074.png" alt="image-20211103003126074"></p>
<ul>
<li>é…ç½®<code>maven</code></li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003217315.png" alt="image-20211103003217315"></p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003228816.png" alt="image-20211103003228816"></p>
<ul>
<li>é…ç½®æ„å»ºåæ“ä½œ</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> <code>SSH</code> è¿æ¥ä¹‹åçš„é»˜è®¤ä½ç½®æ˜¯åœ¨<code>jenkins</code>å·¥ä½œç›®å½•ä¸‹çš„å½“å‰æ„å»ºä»»åŠ¡åçš„ç›®å½•ä¸‹ ï¼Œæ‰“åŒ…åçš„<code>jar</code>åŒ…ä¹Ÿæ”¾åœ¨è¯¥ç›®å½•ä¸‹ ï¼Œè¯¥ç›®å½•ä¸‹çš„ç»“æ„å°±æ˜¯ä»“åº“ä»£ç çš„ç»“æ„ï¼Œå¦‚æœæ˜¯<code>maven</code>èšåˆé¡¹ç›®ï¼Œè®°å¾—è¦åœ¨è·¯å¾„ä¸­åŠ ä¸Šä¸»æ¨¡å—çš„åŒ…å</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003342561.png" alt="image-20211103003342561"></p>
<p><code>Remove prefix</code> ä¸éœ€è¦å¸¦åé¢<code>/</code></p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211103003409421.png" alt="image-20211103003409421"></p>
<p><code>Remote directory</code> ï¼šè¡¨ç¤ºéœ€è¦å°†<code>source file</code> ä¸Šä¼ åˆ°çš„ä½ç½®</p>
<p><code>Exec command</code>ï¼šè¡¨ç¤ºéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œé€šå¸¸å¯ä»¥æ‰§è¡Œ <code>docker restart xxx</code> è¿›è¡Œæ›´æ–°</p>
<p>ä»¥ä¸Šæ‰€æœ‰é…ç½®å®Œæˆä»¥åå³å¯ä¸Šä¼ ä»£ç è¿›è¡Œæ„‰å¿«çš„è‡ªåŠ¨åŒ–æ„å»ºäº†~</p>
]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkins(äºŒ):ä½¿ç”¨Jenkinsfileè®¾ç½®æµç¨‹</title>
    <url>/2021/11/08/Jenkins%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Pipelineè„šæœ¬"><a href="#Pipelineè„šæœ¬" class="headerlink" title="Pipelineè„šæœ¬"></a><code>Pipeline</code>è„šæœ¬</h1><p><code>pipline</code>è„šæœ¬çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line">	&#x2F;&#x2F;æŒ‡å®šæµæ°´çº¿çš„æ‰§è¡Œä½ç½® ç‰©ç†æœº&#x2F;docker&#x2F;è™šæ‹Ÿæœº</span><br><span class="line">    agent any</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; javaæ‰“åŒ…å·¥å…·</span><br><span class="line">    tools &#123;</span><br><span class="line">         maven &#39;maven-3.6.3&#39;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F;è§¦å‘å™¨</span><br><span class="line">    triggers &#123;</span><br><span class="line">            &#96;&#96;&#96;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;é˜¶æ®µ</span><br><span class="line">    stages &#123;</span><br><span class="line">    	&#x2F;&#x2F; æ‹‰å–ä»£ç </span><br><span class="line">        stage(&#39;Checkout&#39;) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                Â·Â·Â·Â·</span><br><span class="line">                &#x2F;&#x2F;å‘½ä»¤</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">		&#x2F;&#x2F;æ‰“åŒ…</span><br><span class="line">        stage(&#39;Build&#39;) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">               Â·Â·Â·Â·</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F; å‘å¸ƒåˆ°æœåŠ¡å™¨</span><br><span class="line">        stage(&#39;Publish&#39;) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">				Â·Â·Â·</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">		&#x2F;&#x2F; å‘å¸ƒæ¶ˆæ¯æé†’</span><br><span class="line">        stage(&#39;Notice&#39;) &#123;</span><br><span class="line">           steps &#123;</span><br><span class="line">				&#96;&#96;&#96;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="è„šæœ¬ç”Ÿæˆ"><a href="#è„šæœ¬ç”Ÿæˆ" class="headerlink" title="è„šæœ¬ç”Ÿæˆ"></a>è„šæœ¬ç”Ÿæˆ</h1><p>æƒ³è¦ä½¿ç”¨<code>Jenkinsfile</code>æ¥è¿›è¡Œæµç¨‹æ§åˆ¶ï¼Œå¯ä»¥æ–°å»ºæµæ°´çº¿ä»»åŠ¡æˆ–è€…å¤šåˆ†æ”¯æµæ°´çº¿ä»»åŠ¡ï¼Œå…¶ä¸­ <code>stages</code>ã€<code>stage</code>ã€<code>steps</code> æ˜¯å¿…é¡»æœ‰çš„ï¼Œåœ¨è¿™å…¶ä¸­å¡«å……è¿™äº›ç”Ÿæˆçš„ç‰‡æ®µ.<code>tools</code>ã€<code>trigger</code>è¿™ä¸¤ä¸ªç‰‡æ®µåœ¨ä¸<code>stages</code>å¹³çº§</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211107235823828.png" alt="image-20211107235823828"></p>
<h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p><code>Git</code>ä»“åº“è®¤è¯ä¿¡æ¯ï¼Œ<code>SSH</code>å‡­è¯ä¿¡æ¯ ï¼Œ<code>Maven</code>å…¨å±€é…ç½®æ–‡ä»¶ä½¿ç”¨é˜¿é‡Œé•œåƒ</p>
<h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h1><h2 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a><code>checkout</code></h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">checkout([</span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">	$class: &#x27;GitSCM&#x27;, </span></span><br><span class="line"><span class="code">	branches: [</span></span><br><span class="line"><span class="code">		//æ‹‰å–åˆ†æ”¯åç§°</span></span><br><span class="line"><span class="code">		[name: &#x27;*/master&#x27;]</span></span><br><span class="line"><span class="code">	], </span></span><br><span class="line"><span class="code">	extensions: [], </span></span><br><span class="line"><span class="code">	userRemoteConfigs: [</span></span><br><span class="line"><span class="code">		[</span></span><br><span class="line"><span class="code">			// gitä»“åº“è®¤è¯ä¿¡æ¯id</span></span><br><span class="line"><span class="code">			credentialsId: &#x27;xxxx_gitee&#x27;, </span></span><br><span class="line"><span class="code">			//ä»“åº“åœ°å€</span></span><br><span class="line"><span class="code">			url: &#x27;https://gitee.com/xxxxxx.git&#x27;</span></span><br><span class="line"><span class="code">		]</span></span><br><span class="line"><span class="code">	]</span></span><br><span class="line"><span class="code">])</span></span><br></pre></td></tr></table></figure>



<h2 id="tools"><a href="#tools" class="headerlink" title="tools"></a><code>tools</code></h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">tools &#123;</span><br><span class="line"><span class="code">		// å·¥å…·å &#x27;å…¨å±€é…ç½®ä¸­è‡ªå®šä¹‰çš„å·¥å…·å&#x27;</span></span><br><span class="line"><span class="code">         maven &#x27;maven-3.6.3&#x27;</span></span><br><span class="line"><span class="code">&#125;</span></span><br></pre></td></tr></table></figure>





<h2 id="trigger"><a href="#trigger" class="headerlink" title="trigger"></a><code>trigger</code></h2><p>è§¦å‘å™¨è¿˜éœ€è¦åœ¨æµæ°´çº¿é…ç½®ä¸­å‹¾é€‰</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211108001315265.png" alt="image-20211108001315265"></p>
<p>å¹¶è®¾ç½®<code>token</code></p>
<p>åŒæ—¶éœ€è¦åœ¨ <code>Git</code>ä»“åº“ä¸­çš„ <code>webhook</code>è®¾ç½®ä¸­æ·»åŠ  </p>
<p><code>url: http://JENKINS_URL/generic-webhook-trigger/invoke?token=YOUR_TOKEN</code></p>
<p>æ— éœ€è®¾ç½®å¯†ç ï¼Œé€‰æ‹©è§¦å‘æ¡ä»¶æ›´æ–°å³å¯.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"> triggers &#123;</span><br><span class="line"> 			// ä¸€èˆ¬è§¦å‘å™¨</span><br><span class="line"><span class="code">            GenericTrigger (</span></span><br><span class="line"><span class="code">            	// è§¦å‘åŸå› </span></span><br><span class="line"><span class="code">                causeString: &#x27;Triggered by develop&#x27;,</span></span><br><span class="line"><span class="code">                // ä¸€èˆ¬å˜é‡,ä»å‘æ¥çš„è¯·æ±‚ä¸­è¯»å– .refå€¼ èµ‹å€¼ç»™ ref</span></span><br><span class="line"><span class="code">                genericVariables: [[key: &#x27;ref&#x27;, value: &#x27;$.ref&#x27;]],</span></span><br><span class="line"><span class="code">                printContributedVariables: true,</span></span><br><span class="line"><span class="code">                printPostContent: true,</span></span><br><span class="line"><span class="code">                // éœ€è¦åŒ¹é…çš„è¡¨è¾¾å¼</span></span><br><span class="line"><span class="code">                regexpFilterExpression: &#x27;refs/heads/master&#x27;,</span></span><br><span class="line"><span class="code">                // è¿‡æ»¤æ‰å¼€å¤´ä¸ä¸ºä¸Šæ–¹è·å–çš„ ref çš„å€¼çš„</span></span><br><span class="line"><span class="code">                regexpFilterText: &#x27;$ref&#x27;,</span></span><br><span class="line"><span class="code">                // Gitä»“åº“webhookå¯†ç </span></span><br><span class="line"><span class="code">                token: &#x27;xxxxx&#x27;</span></span><br><span class="line"><span class="code">            )</span></span><br><span class="line"><span class="code">&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="build"><a href="#build" class="headerlink" title="build"></a><code>build</code></h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">configFileProvider(</span><br><span class="line"> 	[</span><br><span class="line"> 		configFile(</span><br><span class="line"> 			//å…¨å±€è®¾ç½®çš„mavené…ç½®æ–‡ä»¶id</span><br><span class="line"> 			fileId: &#x27;maven-global-settings&#x27;,</span><br><span class="line"><span class="code">            //å›ºå®šå†™æ­»</span></span><br><span class="line"><span class="code"> 			variable: &#x27;MAVEN_GLOBAL_ENV&#x27;</span></span><br><span class="line"><span class="code"> 		)</span></span><br><span class="line"><span class="code"> 	]</span></span><br><span class="line"><span class="code"> ) </span></span><br><span class="line"><span class="code"> &#123;</span></span><br><span class="line"><span class="code"> 			// ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶è¿›è¡Œæ‰“åŒ… -P é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ         è·³è¿‡æµ‹è¯•é˜¶æ®µ</span></span><br><span class="line"><span class="code">     sh &#x27;mvn  -s $MAVEN_GLOBAL_ENV  -P test clean package -Dmaven.test.skip=true&#x27;</span></span><br><span class="line"><span class="code"> &#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="Publish"><a href="#Publish" class="headerlink" title="Publish"></a><code>Publish</code></h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">sshPublisher(</span><br><span class="line"><span class="code">            publishers: [</span></span><br><span class="line"><span class="code">                        sshPublisherDesc(</span></span><br><span class="line"><span class="code">                        // å…¨å±€sshå‡­è¯ä¿¡æ¯</span></span><br><span class="line"><span class="code">                        configName: &#x27;root@192.168.50.200&#x27;,</span></span><br><span class="line"><span class="code">                        transfers: [</span></span><br><span class="line"><span class="code">                            sshTransfer(</span></span><br><span class="line"><span class="code">                                cleanRemote: false,</span></span><br><span class="line"><span class="code">                                excludes: &#x27;&#x27;,</span></span><br><span class="line"><span class="code">                                //æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="code">                                execCommand: &#x27;docker restart admin-hi-dev&#x27;,</span></span><br><span class="line"><span class="code">                                execTimeout: 120000,</span></span><br><span class="line"><span class="code">                                flatten: false,</span></span><br><span class="line"><span class="code">                                makeEmptyDirs: false,</span></span><br><span class="line"><span class="code">                                noDefaultExcludes: false,</span></span><br><span class="line"><span class="code">                                patternSeparator: &#x27;[, ]+&#x27;,</span></span><br><span class="line"><span class="code">                                //ä¼ è¾“çš„è¿œç¨‹æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="code">                                remoteDirectory: &#x27;/www/api-java&#x27;,</span></span><br><span class="line"><span class="code">                                remoteDirectorySDF: false,</span></span><br><span class="line"><span class="code">                                //åˆ é™¤sourceFilesä¸­çš„å‰ç¼€éƒ¨åˆ†</span></span><br><span class="line"><span class="code">                                removePrefix: &#x27;bluesky-admin/target&#x27;,</span></span><br><span class="line"><span class="code">                                sourceFiles: &#x27;bluesky-admin/target/bluesky-admin-1.0.jar&#x27;</span></span><br><span class="line"><span class="code">                                )</span></span><br><span class="line"><span class="code">                         ],</span></span><br><span class="line"><span class="code">                         usePromotionTimestamp: false,</span></span><br><span class="line"><span class="code">                         useWorkspaceInPromotion: false,</span></span><br><span class="line"><span class="code">                         verbose: false</span></span><br><span class="line"><span class="code">                         )</span></span><br><span class="line"><span class="code">              ]</span></span><br><span class="line"><span class="code">)</span></span><br></pre></td></tr></table></figure>





<h1 id="Javaè„šæœ¬æ¨¡æ¿"><a href="#Javaè„šæœ¬æ¨¡æ¿" class="headerlink" title="Javaè„šæœ¬æ¨¡æ¿"></a>Javaè„šæœ¬æ¨¡æ¿</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">pipeline&#123;</span><br><span class="line"><span class="code">	//æŒ‡å®šæµæ°´çº¿çš„æ‰§è¡Œä½ç½® ç‰©ç†æœº/docker/è™šæ‹Ÿæœº</span></span><br><span class="line"><span class="code">    agent any</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">    // javaæ‰“åŒ…å·¥å…·</span></span><br><span class="line"><span class="code">    tools &#123;</span></span><br><span class="line"><span class="code">         maven &#x27;maven-3.6.3&#x27;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code">	//è§¦å‘å™¨</span></span><br><span class="line"><span class="code">    triggers &#123;</span></span><br><span class="line"><span class="code"> 			// ä¸€èˆ¬è§¦å‘å™¨</span></span><br><span class="line"><span class="code">            GenericTrigger (</span></span><br><span class="line"><span class="code">            	// è§¦å‘åŸå› </span></span><br><span class="line"><span class="code">                causeString: &#x27;Triggered by develop&#x27;,</span></span><br><span class="line"><span class="code">                // ä¸€èˆ¬å˜é‡,ä»å‘æ¥çš„è¯·æ±‚ä¸­è¯»å– .refå€¼ èµ‹å€¼ç»™ ref</span></span><br><span class="line"><span class="code">                genericVariables: [[key: &#x27;ref&#x27;, value: &#x27;$.ref&#x27;]],</span></span><br><span class="line"><span class="code">                printContributedVariables: true,</span></span><br><span class="line"><span class="code">                printPostContent: true,</span></span><br><span class="line"><span class="code">                // éœ€è¦åŒ¹é…çš„è¡¨è¾¾å¼</span></span><br><span class="line"><span class="code">                regexpFilterExpression: &#x27;refs/heads/master&#x27;,</span></span><br><span class="line"><span class="code">                // è¿‡æ»¤æ‰å¼€å¤´ä¸ä¸ºä¸Šæ–¹è·å–çš„ ref çš„å€¼çš„</span></span><br><span class="line"><span class="code">                regexpFilterText: &#x27;$ref&#x27;,</span></span><br><span class="line"><span class="code">                // Gitä»“åº“webhookå¯†ç </span></span><br><span class="line"><span class="code">                token: &#x27;xxxxx&#x27;</span></span><br><span class="line"><span class="code">            )</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">	//é˜¶æ®µ</span></span><br><span class="line"><span class="code">    stages &#123;</span></span><br><span class="line"><span class="code">    	// æ‹‰å–ä»£ç </span></span><br><span class="line"><span class="code">        stage(&#x27;Checkout&#x27;) &#123;</span></span><br><span class="line"><span class="code">            steps &#123;</span></span><br><span class="line"><span class="code">                checkout([</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">                    $class: &#x27;GitSCM&#x27;, </span></span><br><span class="line"><span class="code">                    branches: [</span></span><br><span class="line"><span class="code">                        //æ‹‰å–åˆ†æ”¯åç§°</span></span><br><span class="line"><span class="code">                        [name: &#x27;*/master&#x27;]</span></span><br><span class="line"><span class="code">                    ], </span></span><br><span class="line"><span class="code">                    extensions: [], </span></span><br><span class="line"><span class="code">                    userRemoteConfigs: [</span></span><br><span class="line"><span class="code">                        [</span></span><br><span class="line"><span class="code">                            // gitä»“åº“è®¤è¯ä¿¡æ¯id</span></span><br><span class="line"><span class="code">                            credentialsId: &#x27;xxxx_gitee&#x27;, </span></span><br><span class="line"><span class="code">                            //ä»“åº“åœ°å€</span></span><br><span class="line"><span class="code">                            url: &#x27;https://gitee.com/xxxxxx.git&#x27;</span></span><br><span class="line"><span class="code">                        ]</span></span><br><span class="line"><span class="code">                    ]</span></span><br><span class="line"><span class="code">                ])</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">		//æ‰“åŒ…</span></span><br><span class="line"><span class="code">        stage(&#x27;Build&#x27;) &#123;</span></span><br><span class="line"><span class="code">            steps &#123;</span></span><br><span class="line"><span class="code">                configFileProvider(</span></span><br><span class="line"><span class="code">                    [</span></span><br><span class="line"><span class="code">                        configFile(</span></span><br><span class="line"><span class="code">                            //å…¨å±€è®¾ç½®çš„mavené…ç½®æ–‡ä»¶id</span></span><br><span class="line"><span class="code">                            fileId: &#x27;maven-global-settings&#x27;,</span></span><br><span class="line"><span class="code">                            //å›ºå®šå†™æ­»</span></span><br><span class="line"><span class="code">                            variable: &#x27;MAVEN_GLOBAL_ENV&#x27;</span></span><br><span class="line"><span class="code">                        )</span></span><br><span class="line"><span class="code">                    ]</span></span><br><span class="line"><span class="code">                 ) </span></span><br><span class="line"><span class="code">                 &#123;</span></span><br><span class="line"><span class="code">                            // ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶è¿›è¡Œæ‰“åŒ… -P é€‰æ‹©æ‰“åŒ…ç¯å¢ƒ         è·³è¿‡æµ‹è¯•é˜¶æ®µ</span></span><br><span class="line"><span class="code">                     sh &#x27;mvn  -s $MAVEN_GLOBAL_ENV  -P test clean package -Dmaven.test.skip=true&#x27;</span></span><br><span class="line"><span class="code">                 &#125;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">		// å‘å¸ƒåˆ°æœåŠ¡å™¨</span></span><br><span class="line"><span class="code">        stage(&#x27;Publish&#x27;) &#123;</span></span><br><span class="line"><span class="code">            steps &#123;</span></span><br><span class="line"><span class="code">                sshPublisher(</span></span><br><span class="line"><span class="code">                            publishers: [</span></span><br><span class="line"><span class="code">                                        sshPublisherDesc(</span></span><br><span class="line"><span class="code">                                        // å…¨å±€sshå‡­è¯ä¿¡æ¯</span></span><br><span class="line"><span class="code">                                        configName: &#x27;root@192.168.50.200&#x27;,</span></span><br><span class="line"><span class="code">                                        transfers: [</span></span><br><span class="line"><span class="code">                                            sshTransfer(</span></span><br><span class="line"><span class="code">                                                cleanRemote: false,</span></span><br><span class="line"><span class="code">                                                excludes: &#x27;&#x27;,</span></span><br><span class="line"><span class="code">                                                //æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="code">                                                execCommand: &#x27;docker restart admin-hi-	dev&#x27;,</span></span><br><span class="line"><span class="code">                                                execTimeout: 120000,</span></span><br><span class="line"><span class="code">                                                flatten: false,</span></span><br><span class="line"><span class="code">                                                makeEmptyDirs: false,</span></span><br><span class="line"><span class="code">                                                noDefaultExcludes: false,</span></span><br><span class="line"><span class="code">                                                patternSeparator: &#x27;[, ]+&#x27;,</span></span><br><span class="line"><span class="code">                                                //ä¼ è¾“çš„è¿œç¨‹æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="code">                                                remoteDirectory: &#x27;/www/api-java&#x27;,</span></span><br><span class="line"><span class="code">                                                remoteDirectorySDF: false,</span></span><br><span class="line"><span class="code">                                                //åˆ é™¤sourceFilesä¸­çš„å‰ç¼€éƒ¨åˆ†</span></span><br><span class="line"><span class="code">                                                removePrefix: &#x27;bluesky-admin/target&#x27;,</span></span><br><span class="line"><span class="code">                                                sourceFiles: &#x27;bluesky-admin/target/bluesky-admin-1.0.jar&#x27;</span></span><br><span class="line"><span class="code">                                                )</span></span><br><span class="line"><span class="code">                                         ],</span></span><br><span class="line"><span class="code">                                         usePromotionTimestamp: false,</span></span><br><span class="line"><span class="code">                                         useWorkspaceInPromotion: false,</span></span><br><span class="line"><span class="code">                                         verbose: false</span></span><br><span class="line"><span class="code">                                         )</span></span><br><span class="line"><span class="code">                              ]</span></span><br><span class="line"><span class="code">                )</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">		// å‘å¸ƒæ¶ˆæ¯æé†’</span></span><br><span class="line"><span class="code">        stage(&#x27;Notice&#x27;) &#123;</span></span><br><span class="line"><span class="code">           steps &#123;</span></span><br><span class="line"><span class="code">           &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">   &#125;</span></span><br><span class="line"><span class="code">&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownå…¥é—¨</title>
    <url>/2021/04/09/Markdown%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="1-ä»£ç å—"><a href="#1-ä»£ç å—" class="headerlink" title="1.ä»£ç å—:"></a>1.ä»£ç å—:</h2><p>â€‹    ä½¿ç”¨ä¸‰ä¸ª â€œ ``` â€ å³å¯ç”Ÿæˆä»£ç å—,å¹¶ä¸”å¯ä»¥é€‰æ‹©è¯­è¨€ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( args [] string)</span></span>&#123;</span><br><span class="line">        System.println(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="2-æ ‡é¢˜"><a href="#2-æ ‡é¢˜" class="headerlink" title="2.æ ‡é¢˜"></a>2.æ ‡é¢˜</h2><p>â€‹    ä½¿ç”¨ â€œ # â€ æ¥è¡¨ç¤ºï¼Œâ€œ # â€è¶Šå¤šå­—ä½“è¶Šå° ï¼Œ æœ€å¤šå…­çº§æ ‡é¢˜ï¼Œæ³¨æ„ï¼š# åé¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜ </span><br></pre></td></tr></table></figure>

<h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6><h1 id="3-å­—ä½“"><a href="#3-å­—ä½“" class="headerlink" title="3.å­—ä½“"></a>3.å­—ä½“</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ ç²—</span></span><br><span class="line">	**åŠ ç²—**</span><br><span class="line"><span class="comment">//ä»£ç é«˜äº®æ˜¾ç¤º</span></span><br><span class="line">    ==é«˜äº®==</span><br><span class="line"><span class="comment">//åˆ é™¤çº¿</span></span><br><span class="line">    ~åˆ é™¤çº¿~</span><br><span class="line"><span class="comment">//æ–œä½“</span></span><br><span class="line">    *æ–œä½“*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ï¼ˆé«˜äº®å¥½åƒæœ‰ç‚¹é—®é¢˜å“ˆï¼‰</p>
<p><strong>åŠ ç²—</strong></p>
<p><del>åˆ é™¤çº¿</del></p>
<p><em>æ–œä½“</em></p>
<h1 id="4-å¼•ç”¨"><a href="#4-å¼•ç”¨" class="headerlink" title="4.å¼•ç”¨"></a>4.å¼•ç”¨</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨è¯­æ³•</span></span><br><span class="line">&gt;ä½œè€…:XXX</span><br><span class="line">&gt;&gt;ä½œè€…:XXX</span><br><span class="line">&gt;&gt;&gt;ä½œè€…:XXX</span><br></pre></td></tr></table></figure>



<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
<blockquote>
<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
</blockquote>
</blockquote>
<h1 id="5-åˆ†å‰²çº¿"><a href="#5-åˆ†å‰²çº¿" class="headerlink" title="5.åˆ†å‰²çº¿"></a>5.åˆ†å‰²çº¿</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†å‰²çº¿</span></span><br><span class="line">	---</span><br><span class="line"><span class="comment">//åˆ†å‰²çº¿2</span></span><br><span class="line">   	***</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h1 id="6-å›¾ç‰‡æ’å…¥"><a href="#6-å›¾ç‰‡æ’å…¥" class="headerlink" title="6.å›¾ç‰‡æ’å…¥"></a>6.å›¾ç‰‡æ’å…¥</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åœ¨çº¿å›¾ç‰‡å’Œæœ¬åœ°å›¾ç‰‡</span></span><br><span class="line">![å¥¥ç‰¹æ›¼](https:<span class="comment">//ss2.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/42166d224f4a20a46b610b709b529822720ed00d.jpg)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://ss2.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/42166d224f4a20a46b610b709b529822720ed00d.jpg" alt="å¥¥ç‰¹æ›¼" title="å¥¥ç‰¹æ›¼"></p>
<img src="/2021/04/09/Markdown%E5%85%A5%E9%97%A8/ddm.jpg" class title="å®å½“çŒ«">





<h1 id="7-è¶…é“¾æ¥"><a href="#7-è¶…é“¾æ¥" class="headerlink" title="7.è¶…é“¾æ¥"></a>7.è¶…é“¾æ¥</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¶…é“¾æ¥è¯­æ³•</span></span><br><span class="line">[å†…å®¹](é“¾æ¥)</span><br></pre></td></tr></table></figure>

<p><a href="www.baidu.com">ç™¾åº¦</a></p>
<h1 id="8-åˆ—è¡¨"><a href="#8-åˆ—è¡¨" class="headerlink" title="8.åˆ—è¡¨"></a>8.åˆ—è¡¨</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ— åºåˆ—è¡¨</span></span><br><span class="line">- ç›®å½•<span class="number">1</span></span><br><span class="line">- ç›®å½•<span class="number">2</span></span><br><span class="line">- ç›®å½•<span class="number">3</span></span><br><span class="line">- ç›®å½•<span class="number">4</span></span><br><span class="line"><span class="comment">//æœ‰åºåˆ—è¡¨</span></span><br><span class="line"><span class="number">1</span>+. +åç§°</span><br></pre></td></tr></table></figure>





<ul>
<li>ç›®å½•1</li>
<li>ç›®å½•2</li>
<li>ç›®å½•3</li>
<li>ç›®å½•4</li>
</ul>
<ol>
<li>é¦–é¡µ</li>
<li>æ‹‰æ–‡å…‹åŠ³</li>
<li>æŒ–é‡‘çŸ¿ä¸ºäº†æ•‘</li>
</ol>
<h1 id="9-è¡¨æ ¼"><a href="#9-è¡¨æ ¼" class="headerlink" title="9.è¡¨æ ¼"></a>9.è¡¨æ ¼</h1><p>â€‹    ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥ç”¨Typoraå¿«é€Ÿç”Ÿæˆï¼Œååˆ†æ–¹ä¾¿</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­é…ç½®Redis</title>
    <url>/2021/05/27/Linux%E4%B8%AD%E9%85%8D%E7%BD%AERedis/</url>
    <content><![CDATA[<h1 id="ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis"><a href="#ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis" class="headerlink" title="ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis"></a>ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis</h1><p>è¿™é‡Œå…ˆç»™å‡ºæ‰€ç”¨åˆ°çš„ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p>VMware 15.x+</p>
<p>CentOS 7 </p>
<p>Redis 4.0.10</p>
</blockquote>
<p>â€‹        è¿˜è¦ä½¿ç”¨ <code>xshell</code> ä»¥åŠ <code>xftp</code> è¿™ä¸¤ä¸ªå·¥å…·ï¼Œä¸€ä¸ªæ˜¯ç”¨æ¥è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œæœåŠ¡å™¨ï¼Œä¸€ä¸ªæ˜¯è¿æ¥è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¼ è¾“ä»¥åŠå¯¹æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶è¿›è¡Œä¸€ç³»åˆ—æ“ä½œ.</p>
<ul>
<li>åˆ©ç”¨<code>xftp</code> å°†ä¸‹è½½å¥½çš„ <code>redis.tar</code> ä¸Šä¼ åˆ°è™šæ‹Ÿæœºä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¯ä¸Šä¼ åˆ°æ ¹ç›®å½•ä¸‹çš„<code>opt</code>ç›®å½•ä¹‹ä¸­</li>
<li>åˆ©ç”¨ <code>xshell</code> æˆ–è€… <code>VMware</code> ç»ˆç«¯å°†å‹ç¼©åŒ…è¿›è¡Œè§£å‹å®‰è£…ï¼Œè§£å‹ç¼©ä¹‹å‰éœ€è¦æŠŠç»ˆç«¯è·¯å¾„åˆ‡æ¢åˆ°<code>tar</code>åŒ…æ‰€åœ¨è·¯å¾„</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å¯¹taråŒ…è¿›è¡Œè§£å‹</span></span><br><span class="line"><span class="bullet">-</span> tar -zxvf redis-4.0.10.tar.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>å®‰è£…<code>gcc</code>ç¼–è¯‘<code>redis</code> æºç  (<code>Redis</code>æ˜¯<code>C</code>è¯­è¨€æ‰€ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦<code>c</code>è¯­è¨€çš„ç¼–è¯‘å™¨ <code>gcc</code>è¿›è¡Œç¼–è¯‘)</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 5.å®‰è£…gcc  </span></span><br><span class="line"><span class="bullet">-</span> yum install -y gcc</span><br><span class="line"></span><br><span class="line"><span class="section"># 6.è¿›å…¥è§£å‹ç¼©ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="bullet">-</span> make MALLOC=libc</span><br><span class="line"></span><br><span class="line"><span class="section"># 7.ç¼–è¯‘å®Œæˆåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="bullet">-</span> make install PREFIX=/usr/redis</span><br><span class="line"></span><br><span class="line"><span class="section"># 8.è¿›å…¥/usr/redisç›®å½•å¯åŠ¨redisæœåŠ¡ </span></span><br><span class="line"><span class="bullet">-</span> ./redis-server</span><br></pre></td></tr></table></figure>

<img src="/2021/05/27/Linux%E4%B8%AD%E9%85%8D%E7%BD%AERedis/1.png" class title="é…ç½®æˆåŠŸæç¤º">

<ul>
<li>å¤åˆ¶ä¸€ä¸ªä¼šè¯ï¼Œè¿›è¡Œå®¢æˆ·ç«¯è¿æ¥</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 9.RedisæœåŠ¡ç«¯å£é»˜è®¤æ˜¯ 6379</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 10.è¿›å…¥binç›®å½•æ‰§è¡Œå®¢æˆ·ç«¯è¿æ¥æ“ä½œ</span></span><br><span class="line"><span class="bullet">-</span> ./redis-cli â€“p 6379</span><br></pre></td></tr></table></figure>

<p>å‡ºç°å¦‚ä¸‹æç¤ºå³è¿æ¥æˆåŠŸ !</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-cli -p 6379</span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>



<h1 id="ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥"><a href="#ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥" class="headerlink" title="ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥"></a>ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥</h1><p>â€‹        é€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šçœ‹<code>Redis</code>ä¸­çš„æ•°æ®ï¼Œä½¿ç”¨<code>xshell</code>ç”¨å‘½ä»¤æ¥æŸ¥è¯¢æ•ˆç‡ååˆ†ä½ä¸‹ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>Redis</code>å¯è§†åŒ–å·¥å…·åœ¨æœ¬åœ°è¿æ¥åï¼Œæœ¬åœ°æŸ¥çœ‹æ•°æ®åº“ä¸­çš„å†…å®¹.</p>
<ul>
<li><p>å¯ä»¥åœ¨æœ¬åœ°å…ˆå®‰è£… <code>RedisDeskManager</code></p>
</li>
<li><p>Linuxä¸­å®‰è£…é˜²ç«å¢™æœåŠ¡</p>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å®‰è£…iptables-services</span></span><br><span class="line"><span class="bullet">-</span> yum install iptables-services</span><br><span class="line"></span><br><span class="line"><span class="section"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="bullet">-</span> systemctl enable iptables</span><br><span class="line"><span class="bullet">-</span> systemctl start iptables</span><br><span class="line"></span><br><span class="line"><span class="section"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></span><br><span class="line"><span class="bullet">-</span> service iptables status</span><br><span class="line"></span><br><span class="line"><span class="section"># å…³é—­é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables stop</span><br><span class="line"></span><br><span class="line"><span class="section"># æ‰“å¼€é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables start </span><br><span class="line"></span><br><span class="line"><span class="section"># é‡å¯é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables restart </span><br></pre></td></tr></table></figure>



<ul>
<li><p>ç¼–è¾‘<code>Linux</code>é˜²ç«å¢™ </p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å¢åŠ é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line"><span class="bullet">-</span> vi /etc/sysconfig/iptables</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŠ å…¥é˜²ç«å¢™è§„åˆ™ï¼š<code>-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 6379 -j ACCEPT</code></p>
</li>
<li><p>å°†å‹ç¼©åŒ…è§£å‹ç›®å½•ä¹‹ä¸­çš„<code>redis.conf</code> ç§»åŠ¨åˆ° <code>usr/redis</code> ä¸‹ï¼ˆä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼‰</p>
<ul>
<li>æ³¨æ„ï¼šä¸€å®šè¦ç”¨ç®¡ç†å‘˜èº«ä»½è¿›è¡Œç¼–è¾‘ï¼Œä¸ç„¶æ–‡ä»¶ä¸ºåªè¯»æ–‡ä»¶æ— æ³•æ›´æ”¹</li>
</ul>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># æ›´æ”¹ç™½åå•</span></span><br><span class="line">bind 127.0.0.1 </span><br><span class="line"><span class="section"># æ”¹ä¸º ï¼ˆæ³¨é‡Šæ‰ï¼‰</span></span><br><span class="line">= &gt; # bind 127.0.0.1 </span><br><span class="line"></span><br><span class="line"><span class="section"># å°†yesæ”¹ä¸ºno</span></span><br><span class="line">protected-mode yes</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL(ä¸€)</title>
    <url>/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸŠMySQLçš„å®‰è£…"><a href="#ğŸŠMySQLçš„å®‰è£…" class="headerlink" title="ğŸŠMySQLçš„å®‰è£…"></a>ğŸŠMySQLçš„å®‰è£…</h1><p>â€‹    â‘ ï¼šå»å®˜ç½‘ä¸‹è½½ç¤¾åŒºç‰ˆä¸Šé¢çš„ä¸€ä¸ªï¼›<br>â€‹    ï¼ˆå»ºè®®å¤åˆ¶ä¸‹è½½åœ°å€ç„¶ååœ¨è¿…é›·å½“ä¸­ä¸‹è½½æ¯”è¾ƒå¿«ï¼‰<br>â€‹    â‘¡ï¼šåœ¨éCç›˜å»ºä¸€ä¸ª <code>MySQL</code> æ–‡ä»¶å¤¹è£…å…¥ä¸‹è½½æ–‡ä»¶å¹¶ä¸”è§£å‹ï¼›<br>â€‹    â‘¢ï¼šå°†binç›®å½•é…å…¥ç¯å¢ƒå˜é‡ï¼›<br>â€‹    â‘£ï¼šç¼–å†™é…ç½®æ–‡ä»¶ï¼š(å…ˆå»ºæ–‡æœ¬æ–‡ä»¶ï¼Œç¼–å†™å¥½ä»¥åï¼Œå°†æ–‡ä»¶æ›´æ”¹ä¸º <code>my.ini</code> æ–‡ä»¶å¹¶æ”¹ä»¥ <code>ANSCI</code> ç¼–è¯‘ä¿å­˜)ï¼›<br>â€‹        å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼‰è®¾ç½® <code>mysql</code> çš„å®‰è£…ç›®å½•å’Œæ•°æ®åº“çš„æ•°æ®å­˜æ”¾ç›®å½•æ ¹æ®ä¸ªäººä¸‹è½½ä½ç½®è¿›æ›´æ”¹<br>â€‹            </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line"></span><br><span class="line">	[mysqld]</span><br><span class="line">	# è®¾ç½®3306ç«¯å£</span><br><span class="line">	port=3306</span><br><span class="line">	# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•</span><br><span class="line">	basedir=Z:\\MySQL8.0\\mysql-8.0.22-winx64</span><br><span class="line">	# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•</span><br><span class="line">	datadir=Z:\\MySQL8.0\\mysql-8.0.22-winx64\\data</span><br><span class="line">	# å…è®¸æœ€å¤§è¿æ¥æ•°</span><br><span class="line">	max_connections=200</span><br><span class="line">	# å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚</span><br><span class="line">	max_connect_errors=10</span><br><span class="line">	# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºutf8mb4</span><br><span class="line">	character-set-server=utf8mb4</span><br><span class="line">	# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span><br><span class="line">	default-storage-engine=INNODB</span><br><span class="line">	# é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯</span><br><span class="line">	#mysql_native_password</span><br><span class="line">	default_authentication_plugin=mysql_native_password</span><br><span class="line">	[mysql]</span><br><span class="line">	# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span><br><span class="line">	default-character-set=utf8mb4</span><br><span class="line">	[client]</span><br><span class="line">	# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">	port=3306</span><br><span class="line">	default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">â‘¤ï¼šå¯¹MySQLè¿›è¡Œåˆå§‹åŒ–å®‰è£…ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼›</span><br><span class="line">å¹¶ä¸”å°†è·¯å¾„åˆ‡æ¢è‡³binç›®å½•ä¸‹ï¼›</span><br><span class="line">â‘¥ï¼š</span><br><span class="line">	1.è¾“å…¥å‘½ä»¤ï¼šmysqld --initialize --console </span><br><span class="line">		è¿›è¡Œåˆå§‹åŒ–,æœ€åé¢ä¼šæ˜¾ç¤ºéšæœºç”Ÿæˆçš„å¯†ç ï¼Œè¦è®°ä½</span><br><span class="line">	2.è¾“å…¥å‘½ä»¤ï¼šmysqld -install mysql</span><br><span class="line">		å‡ºç°ï¼šService successfully installed å³æˆåŠŸ</span><br><span class="line">	3.å¯åŠ¨mysqlæœåŠ¡ ï¼šnet start mysql</span><br><span class="line">	   å…³é—­mysqlæœåŠ¡ ï¼š net stop mysql</span><br><span class="line">	4.ä¿®æ”¹å¯†ç  </span><br><span class="line">		ALTER USER &#x27;root&#x27; @&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;å¯†ç &#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>è¡¥å……ï¼šæœ‰çš„ç”µè„‘ä¼šç¼ºå°‘ä¸€äº›æ³¨å†Œè¡¨ï¼Œå®‰è£…ä¸€ä¸ªVC++2015redistå³å¯</strong></p>
<h1 id="ğŸMySQLç›¸å…³æ¦‚å¿µ"><a href="#ğŸMySQLç›¸å…³æ¦‚å¿µ" class="headerlink" title="ğŸMySQLç›¸å…³æ¦‚å¿µ"></a>ğŸMySQLç›¸å…³æ¦‚å¿µ</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯SQLï¼Ÿ</strong></p>
<p>&emsp;&emsp;ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ä¸€é—¨æ ‡å‡†é€šç”¨çš„è¯­è¨€ã€‚æ ‡å‡†çš„ <code>sql</code> é€‚åˆäºæ‰€æœ‰æ•°æ®åº“äº§å“ ,<code>SQL</code> å±äºé«˜çº§è¯­è¨€ã€‚åªè¦èƒ½çœ‹æ‡‚è‹±è¯­å•è¯çš„ï¼Œå†™å‡ºæ¥çš„ <code>sql</code> è¯­å¥ï¼Œå¯ä»¥è¯»æ‡‚ä»€ä¹ˆæ„æ€. <code>SQL</code> è¯­å¥åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®é™…ä¸Šå†…éƒ¨ä¹Ÿä¼šå…ˆè¿›è¡Œç¼–è¯‘ï¼Œç„¶ååœ¨æ‰§è¡Œ <code>sql</code> .( <code>sql</code> è¯­å¥çš„ç¼–è¯‘ç”±<code>DBMS</code>å®Œæˆ.)</p>
</li>
<li><p><strong>DB ã€DBMS æ¦‚å¿µï¼Ÿ</strong></p>
<ul>
<li>DBï¼ˆDatabaseï¼‰ï¼šæ•°æ®åº“ï¼Œå­˜å‚¨åœ¨ç”µè„‘ç¡¬ç›˜ä¸­</li>
<li>DBMSï¼ˆDataBase Management Systemï¼‰ï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå¸¸è§çš„æœ‰MySQL ã€Sqlserver ã€Oracleã€DB2 ã€Sybase</li>
</ul>
</li>
<li><p><strong>DBMSæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</strong></p>
</li>
</ul>
<p>&emsp;&emsp;<code>DBMS</code> è´Ÿè´£æ‰§è¡Œ <code>sql</code> è¯­å¥ï¼Œé€šè¿‡æ‰§è¡Œ <code>sql</code> è¯­å¥å¯¹ <code>DB</code> ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œ.</p>
<ul>
<li><strong>è¡¨</strong></li>
</ul>
<p>&emsp;&emsp;è¡¨ï¼ˆtable) æ˜¯æ•°æ®åº“çš„åŸºæœ¬ç»„æˆå•ä½ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ç”¨è¡¨ï¼Œæ— ä¸æ˜¯ä¸ºäº†è®©æ•°æ®æ–¹ä¾¿æŸ¥è¯¢å’Œç»Ÿè®¡ä»¥åŠä¿®æ”¹ï¼Œååˆ†ä¾¿åˆ©ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè®©æˆ‘ä»¬å¯è¯»æ€§å˜å¼º. ä¸€ä¸ªè¡¨åŒ…æ‹¬è¡Œå’Œåˆ—.</p>
<p>&emsp;&emsp;<code>è¡Œ</code>ï¼šè¢«ç§°ä¸ºæ•°æ®è®°å½•ï¼ˆdataï¼‰</p>
<p>&emsp;&emsp;<code>åˆ—</code>ï¼šè¢«ç§°ä¸ºå­—æ®µï¼ˆcolumnï¼‰</p>
<p> &emsp;&emsp;<strong>å­—æ®µåŒ…å«çš„å±æ€§æœ‰ï¼šå­—æ®µå ã€æ•°æ®ç±»å‹ ã€ç›¸å…³çº¦æŸ</strong></p>
<ul>
<li><p><strong>SQLè¯­å¥çš„åˆ†ç±»</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰ï¼šæŸ¥è¯¢è¯­å¥ï¼Œå‡¡æ˜¯selectè¯­å¥éƒ½æ˜¯DQLã€‚</span><br><span class="line"></span><br><span class="line">DMLï¼ˆæ•°æ®æ“ä½œï¼‰ï¼šinsert delet update å¯¹è¡¨å½“ä¸­æ•°æ®è¿›å­¦æ ¡å¢åˆ æ”¹</span><br><span class="line"></span><br><span class="line">DDLï¼ˆæ•°æ®å®šä¹‰ï¼‰ï¼šcreat drop alter å¯¹è¡¨ç»“æ„çš„å¢åˆ æ”¹ã€‚</span><br><span class="line"></span><br><span class="line">TCLï¼ˆäº‹ç‰©æ§åˆ¶ï¼‰ï¼šcommitæäº¤äº‹åŠ¡ï¼Œrollbackå›æ»šäº‹åŠ¡ã€‚ï¼ˆTä¸ºtransactionï¼‰</span><br><span class="line"></span><br><span class="line">DCLï¼ˆæ•°æ®æ§åˆ¶ï¼‰ï¼šgrantæˆæƒã€revokeæ’¤é”€æƒé™ã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="ğŸ‡MySQLåŸºæœ¬è¯­å¥"><a href="#ğŸ‡MySQLåŸºæœ¬è¯­å¥" class="headerlink" title="ğŸ‡MySQLåŸºæœ¬è¯­å¥"></a>ğŸ‡MySQLåŸºæœ¬è¯­å¥</h1><p>â€‹    <strong>ç™»å½•ï¼šmysql -uroot -på¯†ç ï¼›æˆ–è€… mysql -uroot -på›è½¦ï¼›ï¼ˆä¸‹ä¸€è¡Œè¾“å…¥å¯†ç ä¸å¯è§ï¼‰</strong><br>â€‹    <strong>é€€å‡ºï¼šexit</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹æ•°æ®åº“</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">#åˆå§‹åŒ–æ•°æ®</span><br><span class="line">source æ‹–åˆ°æºæ–‡ä»¶åˆ°CMDä¸­ </span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šæ‰€æœ‰ <code>sql</code> è¯­å¥éƒ½è¦ä»¥è‹±æ–‡<code>â€˜;â€™</code> ç»“æŸä¸ç„¶ä¸ä¼šæ‰§è¡Œï¼Œä»¥ä¸Šå®é™…ä¸ºMySQLçš„å‘½ä»¤ï¼Œè€Œä¸”sqlè¯­å¥ä¸åŒºåˆ†å¤§å°å†™å“¦</strong></p>
<h2 id="æŸ¥è¯¢è¡¨ç»“æ„"><a href="#æŸ¥è¯¢è¡¨ç»“æ„" class="headerlink" title="æŸ¥è¯¢è¡¨ç»“æ„"></a>æŸ¥è¯¢è¡¨ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢æŸä¸ªè¡¨çš„ç»“æ„</span><br><span class="line">desc è¡¨å;</span><br><span class="line"></span><br><span class="line">è¡¨ç»“æ„å½“ä¸­ä¼šæ˜¾ç¤ºï¼Œå­—æ®µå ï¼Œ æ•°æ®ç±»å‹ ï¼Œçº¦æŸ ï¼Œ é»˜è®¤å€¼ </span><br></pre></td></tr></table></figure>



<h2 id="æŸ¥è¯¢è¯­å¥"><a href="#æŸ¥è¯¢è¯­å¥" class="headerlink" title="æŸ¥è¯¢è¯­å¥"></a>æŸ¥è¯¢è¯­å¥</h2><h3 id="æ™®é€šæŸ¥è¯¢è¯­å¥"><a href="#æ™®é€šæŸ¥è¯¢è¯­å¥" class="headerlink" title="æ™®é€šæŸ¥è¯¢è¯­å¥"></a>æ™®é€šæŸ¥è¯¢è¯­å¥</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æŸ¥è¯¢æŸä¸ªå­—æ®µ</span><br><span class="line">select å­—æ®µ from è¡¨å;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</span><br><span class="line">select * from è¡¨å;</span><br><span class="line"></span><br><span class="line">#ä¸€èˆ¬æ€§æ ¼å¼</span><br><span class="line">select å­—æ®µ1,å­—æ®µ2ï¼ŒÂ·Â·Â·ï¼Œå­—æ®µn from è¡¨å;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å½“å‰æ‰€ä½¿ç”¨çš„æ•°æ®åº“1</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢mysqlç‰ˆæœ¬å·</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line"># \c å¯ä»¥ç»“æŸä¸€æ¡è¯­å¥çš„è¾“å…¥</span><br></pre></td></tr></table></figure>



<p>æŸ¥è¯¢è¯­å¥ä¸­ï¼Œå­—æ®µå¯ä»¥å‚ä¸æ•°å­¦è¿ç®—ï¼Œä»¥åŠå¯ä»¥å–åˆ«å.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å–åˆ«åæ—¶ç”¨åˆ° as , åŒæ—¶aså¯ä»¥çœç•¥ä»¥ç©ºæ ¼ä»£æ›¿å³å¯.</span><br><span class="line">select å­—æ®µ1 (as) åˆ«å1,å­—æ®µ2*12 åˆ«å2 from è¡¨åï¼› </span><br><span class="line"></span><br><span class="line">#æ³¨æ„ï¼Œå½“åˆ«åå–ä¸­æ–‡åçš„æ—¶å€™,éœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ æ—¢å¯ä»¥ä½¿ç”¨å•å¼•å·å’ŒåŒå¼•å·</span><br><span class="line">#MySQLå¯¹äºä¸¤ç§å¼•å·éƒ½å…¼å®¹ï¼Œè€ŒOracleåªå¯¹å•å¼•å·å…¼å®¹ï¼Œè€ƒè™‘ä»¥åä¼šæ¥è§¦åˆ°å…¶å®ƒæ•°æ®åº“</span><br><span class="line">#æ›´æ¨èä½¿ç”¨ å•å¼•å· .</span><br></pre></td></tr></table></figure>



<h3 id="æ¡ä»¶æŸ¥è¯¢è¯­å¥"><a href="#æ¡ä»¶æŸ¥è¯¢è¯­å¥" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢è¯­å¥"></a>æ¡ä»¶æŸ¥è¯¢è¯­å¥</h3><p>åŸºæœ¬çš„è¯­å¥ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select</span><br><span class="line">	å­—æ®µn</span><br><span class="line">from</span><br><span class="line">	è¡¨å</span><br><span class="line">where</span><br><span class="line">	æ¡ä»¶;</span><br><span class="line"></span><br><span class="line">#ä»¥ä¸Šè¿™ç§æ ¼å¼åœ¨å‘½ä»¤è¡Œä¸­ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œè¿™ä¹ˆå†™åªæ˜¯ä¸ºäº†çœ‹çš„æ›´æ¸…æ¥š.</span><br><span class="line">#æ¡ä»¶ å¯ä»¥æ˜¯ è¯¸å¦‚ å­—æ®µ &#x3D; xxxx; åŒæ ·çš„ä¸­æ–‡éœ€è¦å•å¼•å·</span><br></pre></td></tr></table></figure>



<p>ç°åœ¨ç»™å‡ºä¸€å¼ æ ·è¡¨ï¼Œä»¥ä¾¿åç»­çš„ä¸¾ä¾‹å’Œå­¦ä¹ .</p>
<img src="/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="table">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„å¤§äº(å°äº)2000ä»¥ä¸Šçš„äººçš„åå•</span><br><span class="line">select ename from emp where sal &gt;ï¼ˆ&lt;ï¼‰ 2000;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„å¤§äºç­‰äº2000ä»¥ä¸Šçš„äººçš„åå•</span><br><span class="line">select ename from emp where sal &gt;&#x3D; 2000;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸ç­‰äº3000çš„</span><br><span class="line">select ename from emp where sal &lt;&gt; 3000;</span><br><span class="line">#æˆ–è€…</span><br><span class="line">select ename from emp where sal !&#x3D; 3000;</span><br></pre></td></tr></table></figure>



<h4 id="betweenÂ·Â·Â·and-in-and-or"><a href="#betweenÂ·Â·Â·and-in-and-or" class="headerlink" title="betweenÂ·Â·Â·and, in , and , or"></a>betweenÂ·Â·Â·and, in , and , or</h4><ul>
<li><strong>betweenÂ·Â·Â·and</strong></li>
</ul>
<p><code>betweenÂ·Â·Â·and</code> ä¸ºé—­åŒºé—´.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä½äº1000 åˆ° 2000çš„äººçš„åå•</span><br><span class="line">select ename,sal from emp where sal between 1000 and 2000;</span><br><span class="line"></span><br><span class="line">#ä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²ä½¿ç”¨</span><br><span class="line">select ename from emp where ename between &#39;A&#39; and &#39;F&#39;;</span><br><span class="line"></span><br><span class="line">#å½“ç„¶äº†æ•°æ®å¿…é¡»å·¦å°å³å¤§ï¼Œæ‡‚çš„éƒ½æ‡‚å“ˆï¼Œä¸ç„¶æŸ¥ä¸åˆ°çš„</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>andã€or</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 å’Œ 1500çš„äººçš„åå•</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 and sal &#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 æˆ– 1500çš„äººçš„åå•</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 or sal &#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º 3000 å’Œ éƒ¨é—¨ç¼–å·ä¸º15æˆ–è€…30çš„</span><br><span class="line">#åº”è¯¥ä¸ä¼šæœ‰äººè¿™ä¹ˆå†™å§ï¼Œè¿™æ— ç–‘æ˜¯é”™è¯¯çš„å†™æ³•</span><br><span class="line">select ename,deptno , sal from emp where sal &#x3D; 3000 and deptno &#x3D; 15 or deptno &#x3D; 30;</span><br><span class="line">#è¿™æ¡è¯­å¥æŸ¥è¯¢çš„æ˜¯ ï¼ˆå·¥èµ„ä¸º3000å¹¶ä¸”ç¼–å·ä¸º15ï¼‰ æˆ–è€… ç¼–å·ä¸º30çš„äººçš„åå•</span><br><span class="line"></span><br><span class="line">#æ­£ç¡®å†™æ³•</span><br><span class="line">select ename,deptno , sal from emp where sal &#x3D; 3000 and (deptno &#x3D; 15 or deptno &#x3D; 30);</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>in</strong></li>
</ul>
<p>inçš„ç”¨æ³•ä¸oråŸºæœ¬ç›¸åŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 æˆ–è€… 1500çš„äººçš„åå•</span><br><span class="line">#ç”¨or</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 or sal &#x3D; 1500;</span><br><span class="line">#ç”¨in</span><br><span class="line">select ename , sal from emp where sal in (3000, 1500);</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š inçš„æ‹¬å·ä¸æ˜¯åŒºé—´èŒƒå›´è€Œæ˜¯å€¼ï¼Œç±»ä¼¼äºä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢åŒæ ·ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè®°å¾—è¦åŠ å•å¼•å·</strong></p>
<hr>
<p>æ¥ä¸‹æ¥ç»™å‡ºä¸€ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸æ˜¯3000å’Œ1500çš„äººçš„åå•</span><br><span class="line">#æœ€ç›´ç™½çš„å†™æ³•</span><br><span class="line">select ename , sal from emp where sal !&#x3D; 3000 and sal !&#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨in</span><br><span class="line">select ename , sal from emp where sal not in (3000 , 1500);</span><br></pre></td></tr></table></figure>



<p><strong>ä»¥ä¸Šå¯ä»¥çŸ¥é“ï¼Œ<code>not in</code> çš„ä½¿ç”¨ååˆ†æ–¹ä¾¿ï¼Œå†æ¬¡å¼ºè°ƒï¼Œæ‹¬å·ä¸­å¹¶ä¸æ˜¯èŒƒå›´è€Œæ˜¯å…·ä½“çš„å€¼</strong></p>
<ul>
<li><strong>NULL</strong></li>
</ul>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹ç©º(NULL) ï¼Œè¡¨ä¸­å­—æ®µ <code>comm</code> ä¸­åŒ…å« <code>NULL</code> å€¼ï¼Œé‚£ä¹ˆå¦‚ä½•ç­›é€‰å‡ºè¿™äº›åŒ…å« <code>NULL</code> çš„åå•å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#è¿™ä¸ç®€å•å˜›ï¼Œäºæ˜¯è¿…é€Ÿå†™ä¸‹äº†</span><br><span class="line">select ename , sal from emp where comm &#x3D; â€˜NULLâ€™ ;</span><br><span class="line">#å¥½å®¶ä¼™ï¼Œæœä¸å…¶ç„¶æŠ¥é”™äº†ï¼Œä¸æ„§æ˜¯æˆ‘</span><br><span class="line">#å®é™…ä¸Šè¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</span><br><span class="line">select ename , sal from emp where comm is null;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢commä¸ä¸ºç©ºçš„åå•</span><br><span class="line">select ename , sal from emp where comm is not null;</span><br></pre></td></tr></table></figure>



<h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h4><ul>
<li><strong><code>like</code></strong> : è‹±æ–‡å¯è¯‘ä¸º åƒï¼Œç±»ä¼¼ (ç”±æ­¤å¯è§ <code>sql </code> è¯­å¥æ˜¯å¤šä¹ˆè´´åˆè‹±è¯­çš„å®é™…è¡¨è¾¾å“ˆå“ˆå“ˆå“ˆ)</li>
<li><strong><code>%</code></strong> : ä»£è¡¨å¤šä¸ªå­—ç¬¦</li>
<li><strong><code>_</code></strong> : ä»£è¡¨å•ä¸ªå­—ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢åå­—ä¸­é¦–å­—æ¯ä¸ºAçš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;a%&#39;;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­å«æœ‰Açš„äººçš„åå• </span><br><span class="line">select ename from emp where ename like &#39;%a%&#39; or ename like &#39;a%&#39;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­ä»¥ç¬¬äºŒä¸ªå­—æ¯ä¸ºbçš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;_b%&#39;;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­ä»¥bå­—æ¯ç»“å°¾çš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;%b&#39;;</span><br></pre></td></tr></table></figure>



<h3 id="æ’åºä»¥åŠåˆ†ç»„å‡½æ•°"><a href="#æ’åºä»¥åŠåˆ†ç»„å‡½æ•°" class="headerlink" title="æ’åºä»¥åŠåˆ†ç»„å‡½æ•°"></a>æ’åºä»¥åŠåˆ†ç»„å‡½æ•°</h3><p><strong>æ’åº</strong></p>
<p>&emsp;&emsp;æ’åºåœ¨æ•°æ®å¤„ç†ä¸Šä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œå½“ç„¶ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œä¸‹é¢å°†ç»™å‡ºç›¸å…³çš„ä¸€äº›å‘½ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th align="center">asc</th>
<th align="center">å‡åº</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>desc</strong></td>
<td align="center"><strong>é™åº</strong></td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„åœ¨1500 - 3000ä¹‹é—´çš„å¹¶ä¸”æŒ‰é™åºæ’åˆ—çš„åå•</span><br><span class="line">select ename , sal from emp where sal between 1500 and 3000 order by sal desc;</span><br><span class="line"></span><br><span class="line">#æ’åºè¿˜å¯ä»¥è§„å®šç¬¬äºŒçº§çš„æ’åºï¼Œå³ç¬¬ä¸€çº§æ’åºæ•°å€¼ç›¸åŒçš„æ—¶å€™ï¼Œè§¦å‘äºŒçº§æ’åº æ¯”å¦‚å·¥èµ„ç›¸åŒçš„æ—¶å€™æŒ‰åå­—é¦–å­—æ¯æ’åº</span><br><span class="line">select ename , sal from emp where sal between 1500 and 3000 order by sal desc , ename asc;</span><br><span class="line"></span><br><span class="line">#</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼šå¦‚æœåœ¨ <code>order by </code> ä¸­ä¸å†™æ’åºæ–¹å¼ï¼Œé»˜è®¤å‡åºæ’åˆ—.</strong></p>
<hr>
<p><strong>åˆ†ç»„å‡½æ•°</strong></p>
<table>
<thead>
<tr>
<th align="center">count</th>
<th align="center">sum</th>
<th align="center">avg</th>
<th align="center">max</th>
<th align="center">min</th>
</tr>
</thead>
<tbody><tr>
<td align="center">è®¡æ•°</td>
<td align="center">æ±‚å’Œ</td>
<td align="center">æ±‚å¹³å‡å€¼</td>
<td align="center">æ±‚æœ€å¤§å€¼</td>
<td align="center">æ±‚æœ€å°å€¼</td>
</tr>
</tbody></table>
<p>è®°ä½ï¼šæ‰€æœ‰çš„åˆ†ç»„å‡½æ•°éƒ½æ˜¯å¯¹â€œæŸä¸€ç»„â€æ•°æ®è¿›è¡Œæ“ä½œçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æ‰¾å‡ºå·¥èµ„æ€»å’Œï¼Ÿ</span><br><span class="line">	select sum(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæœ€é«˜å·¥èµ„ï¼Ÿ</span><br><span class="line">	select max(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæœ€ä½å·¥èµ„ï¼Ÿ</span><br><span class="line">	select min(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºå¹³å‡å·¥èµ„ï¼Ÿ</span><br><span class="line">	select avg(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæ€»äººæ•°ï¼Ÿ</span><br><span class="line">	select count(*) from emp;</span><br><span class="line">	select count(ename) from emp;</span><br><span class="line"></span><br><span class="line">#åˆ†ç»„å‡½æ•°ä¸€å…±5ä¸ªã€‚</span><br><span class="line">#åˆ†ç»„å‡½æ•°è¿˜æœ‰å¦ä¸€ä¸ªåå­—ï¼šå¤šè¡Œå¤„ç†å‡½æ•°ã€‚</span><br><span class="line">#å¤šè¡Œå¤„ç†å‡½æ•°çš„ç‰¹ç‚¹ï¼šè¾“å…¥å¤šè¡Œï¼Œæœ€ç»ˆè¾“å‡ºçš„ç»“æœæ˜¯1è¡Œã€‚</span><br><span class="line">#åˆ†ç»„å‡½æ•°è‡ªåŠ¨å¿½ç•¥NULL , å¹¶ä¸”ä¹Ÿå¯ä»¥é€šè¿‡ as é‡æ–°å‘½å</span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸‹æ¥ï¼Œè¦å¼€å§‹æŒ–å‘äº†ï¼Œé—®é¢˜å¦‚ä¸‹ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„å‘˜å·¥åå•ï¼Ÿ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å­¦ä¹ äº†åˆ†ç»„å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªavgæ°å¥½å¯ä»¥æ±‚å¹³å‡å€¼</span><br><span class="line">#äºæ˜¯</span><br><span class="line">select ename , sal from emp where sal &gt; avg(sal);</span><br><span class="line">#çœ‹ä¼¼è¿™æ¡è¯­å¥é€»è¾‘æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ‰§è¡Œè¿‡åå´ç›´æ¥æŠ¥é”™~~~</span><br><span class="line">#Whyï¼Ÿ</span><br><span class="line">#è¿™é‡Œå…ˆä¸è¿›è¡Œè®²è¿°å’Œåˆ†æï¼Œæˆ‘ä»¬å…ˆæ¥ç€å¾€ä¸‹é¢è®²</span><br></pre></td></tr></table></figure>





<h3 id="å•è¡Œå¤„ç†å‡½æ•°"><a href="#å•è¡Œå¤„ç†å‡½æ•°" class="headerlink" title="å•è¡Œå¤„ç†å‡½æ•°"></a>å•è¡Œå¤„ç†å‡½æ•°</h3><ul>
<li><strong>ä»€ä¹ˆæ˜¯å•è¡Œå¤„ç†å‡½æ•°ï¼Ÿ</strong></li>
</ul>
<p>&emsp;&emsp;è¾“å…¥ä¸€è¡Œï¼Œè¾“å‡ºä¸€è¡Œ</p>
<ul>
<li><p><strong>è®¡ç®—æ¯ä¸ªå‘˜å·¥çš„å¹´è–ªï¼Ÿ</strong></p>
<p><code>select ename , (sal + comm ) * 12 &#39;å¹´è–ª&#39; from emp;</code></p>
<p>æŒ‰ä¸‹å›è½¦ä¼šå‘ç°ï¼Œå¤§éƒ¨åˆ†äººçš„å¹´è–ªä¸º <code>NULL</code> ï¼Œè¾›è¾›è‹¦è‹¦å¹²äº†ä¸€å¹´ï¼Œå…¨ç™½ç»™äº†ï¼Œ23333.</p>
<p>è¿™æ˜¯å› ä¸ºåªè¦æœ‰å«æœ‰ <strong><code>NULL</code></strong> å€¼å‚ä¸è¿ç®—ï¼Œç»“æœéƒ½ä¼šæ˜¯ **<code>NULL</code>**ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦æˆ‘ä»¬çš„å•è¡Œå¤„ç†å‡½æ•°äº†ï¼š</p>
<ul>
<li><p><strong>ifnull()</strong></p>
<p>ç©ºå¤„ç†å‡½æ•°. å¦‚ï¼šcommï¼ˆæ´¥è´´ï¼‰ä¸­æœ‰çš„å€¼ä¸ºç©ºï¼Œæ„æ€å…¶å®å°±æ˜¯0 ï¼Œ é‚£ä¹ˆå°±æ˜¯ <strong><code>ifnull(comm , 0)</code><strong>ï¼Œæ„æ€å°±æ˜¯å¦‚æœcommçš„å€¼ä¸º</strong><code>NULL</code></strong> é‚£ä¹ˆå°±ç”¨ 0 ä»£æ›¿è¿™ä¸ªå€¼.</p>
</li>
</ul>
<p>æ‰€ä»¥ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯ï¼š</p>
<p><strong><code>select ename , (sal + ifnull(comm , 0)) * 12 &#39;yearsal&#39; from emp;</code></strong></p>
</li>
</ul>
<p>ç±»ä¼¼çš„å•è¡Œå¤„ç†å‡½æ•°è¿˜æœ‰å¦‚ä¸‹è¿™äº›ï¼ˆä¸”ä¸å±€é™äºä»¥ä¸‹è¿™äº›ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">Lower</th>
<th align="center">è½¬æ¢å°å†™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>upper</strong></td>
<td align="center"><strong>è½¬æ¢å¤§å†™</strong></td>
</tr>
<tr>
<td align="center"><strong>substr</strong></td>
<td align="center"><strong>å–å­ä¸²</strong>ï¼ˆ**substr(è¢«æˆªå–çš„å­—ç¬¦ä¸²,èµ·å§‹ä¸‹æ ‡,æˆªå–çš„é•¿åº¦)**ï¼‰</td>
</tr>
<tr>
<td align="center"><strong>length</strong></td>
<td align="center"><strong>å–é•¿åº¦</strong></td>
</tr>
<tr>
<td align="center"><strong>trim</strong></td>
<td align="center"><strong>å»ç©ºæ ¼</strong></td>
</tr>
<tr>
<td align="center"><strong>str_to_date</strong></td>
<td align="center"><strong>å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸ</strong></td>
</tr>
<tr>
<td align="center"><strong>date_format</strong></td>
<td align="center"><strong>æ ¼å¼åŒ–æ—¥æœŸ</strong></td>
</tr>
<tr>
<td align="center"><strong>format</strong></td>
<td align="center"><strong>è®¾ç½®åƒåˆ†ä½</strong></td>
</tr>
<tr>
<td align="center"><strong>round</strong></td>
<td align="center"><strong>å››èˆäº”å…¥</strong></td>
</tr>
<tr>
<td align="center"><strong>rand()</strong></td>
<td align="center"><strong>ç”Ÿæˆéšæœºæ•°</strong></td>
</tr>
</tbody></table>
<h3 id="group-by-ä»¥åŠ-having"><a href="#group-by-ä»¥åŠ-having" class="headerlink" title="group by ä»¥åŠ having"></a>group by ä»¥åŠ having</h3><ul>
<li><p><strong>group by ï¼š æŒ‰ç…§æŸä¸ªå­—æ®µæˆ–è€…æŸäº›å­—æ®µè¿›è¡Œåˆ†ç»„</strong></p>
</li>
<li><p><strong>having :  havingæ˜¯å¯¹åˆ†ç»„ä¹‹åçš„æ•°æ®è¿›è¡Œå†æ¬¡è¿‡æ»¤</strong></p>
<hr>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šåˆ†ç»„å‡½æ•°ä¸€èˆ¬éƒ½ä¼šå’Œgroup byè”åˆä½¿ç”¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒè¢«ç§°ä¸ºåˆ†ç»„å‡½æ•°çš„åŸå› .å¹¶ä¸”ä»»ä½•ä¸€ä¸ªåˆ†ç»„å‡½æ•°count sum avg max minï¼‰éƒ½æ˜¯åœ¨group byè¯­å¥æ‰§è¡Œç»“æŸä¹‹åæ‰ä¼šæ‰§è¡Œçš„ï¼Œå½“ä¸€æ¡ <code>sql</code>è¯­å¥æ²¡æœ‰group byçš„è¯ï¼Œæ•´å¼ è¡¨çš„æ•°æ®ä¼šè‡ªæˆä¸€ç»„ã€‚</strong></p>
<p>å¤§è‡´äº†è§£äº†æ˜¯å¹²ä»€ä¹ˆçš„ä¹‹åï¼Œç°åœ¨å…ˆæ¥è®²ä¸€ä¸‹ï¼Œ<code>sql</code> è¯­å¥çš„å„ä¸ªéƒ¨åˆ†çš„æ‰§è¡Œé¡ºåº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select			5.å¯¹å­—æ®µè¿›è¡Œé€‰æ‹©</span><br><span class="line">	xxx</span><br><span class="line">from			1.ç¬¬ä¸€ä¸ªæ‰§è¡Œ,å…ˆç¡®å®šå¤„ç†å“ªä¸€å¼ è¡¨</span><br><span class="line">	xxx</span><br><span class="line">where			2.å¤„ç†whereæ¡ä»¶</span><br><span class="line">	xxx</span><br><span class="line">group by		3.è¿›è¡Œåˆ†ç»„å¤„ç†</span><br><span class="line">	xxx</span><br><span class="line">having			4.è¿›è¡Œæ¡ä»¶è¿‡æ»¤</span><br><span class="line">	xxx</span><br><span class="line">order by		6.è¿›è¡Œæ’åº</span><br><span class="line">	xxx;</span><br></pre></td></tr></table></figure>

<p>è¿˜è®°å¾—è¿™ä¸ªå—ï¼Ÿ æ¥ä¸‹æ¥è¦å¼€å§‹å¡«å‘äº†</p>
<blockquote>
<p><strong>æ¥ä¸‹æ¥ï¼Œè¦å¼€å§‹æŒ–å‘äº†ï¼Œé—®é¢˜å¦‚ä¸‹ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„å‘˜å·¥åå•ï¼Ÿ</strong></p>
</blockquote>
<p>æˆ‘ä»¬å†çœ‹ä¸€çœ¼è¯­å¥ï¼š</p>
<blockquote>
<p><code>select ename , sal from emp where sal &gt; avg(sal);</code></p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢è¯´åˆ°çš„æ‰§è¡Œé¡ºåºå¯ä»¥å‘ç° where çš„æ‰§è¡Œé¡ºåºåœ¨group by ä¹‹å‰ï¼Œ whereä¸­ avg çš„æ‰§è¡Œéœ€è¦group by ä¹‹åæ‰å¯ä»¥æ‰§è¡Œï¼Œæ•…æŠ¥é”™. </p>
<ul>
<li>æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªèµ„ï¼Œè¦æ±‚æ˜¾ç¤ºè–ªèµ„å¤§äº2000çš„æ•°æ®?</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#é€šè¿‡havingè¿›è¡Œè¿‡æ»¤</span><br><span class="line">select deptno , avg(sal) from emp group by deptno having avg(sal) &gt; 2000;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><strong>é€šè¿‡group by è¿›è¡Œåˆ†ç»„è¿‡å ï¼Œ select çš„ åªèƒ½æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå’Œåˆ†ç»„è¿‡åå­˜åœ¨å¯¹åº”å…³ç³»çš„å€¼.  æ¯”å¦‚å®‰è£…éƒ¨é—¨ç¼–å·deptno è¿›è¡Œåˆ†ç»„ ä¼šåˆ†ä¸ºå››ç»„ï¼Œæ¯ä¸€ç»„ä¸­åŒ…å«å¤šä¸ªäººçš„ä¿¡æ¯</strong></li>
</ul>
<img src="/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="result">

<ul>
<li><strong>ç”±äºæ‰§è¡Œé¡ºåºå¯ä»¥çŸ¥é“ï¼Œä½ éœ€è¦æŸ¥è¯¢çš„å­—æ®µå¿…é¡»èƒ½å¤Ÿå’Œåˆ†ç»„ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚æ¯ä¸ªéƒ¨é—¨å·¥èµ„çš„æœ€å¤§å€¼å’Œæ¯ä¸ªéƒ¨é—¨å·¥èµ„çš„å¹³å‡å€¼</strong></li>
</ul>
<h3 id="æŸ¥è¯¢å»é‡â€”distinct"><a href="#æŸ¥è¯¢å»é‡â€”distinct" class="headerlink" title="æŸ¥è¯¢å»é‡â€”distinct"></a>æŸ¥è¯¢å»é‡â€”distinct</h3><ul>
<li><strong>æŸ¥è¯¢æœ‰å“ªäº›å·¥ä½œå²—ä½ï¼Ÿ</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ä¸€èˆ¬å†™æ³•</span><br><span class="line">select job from emp ;</span><br><span class="line">#å¤„ç†åä¼šå‘ç°,ä¼šæœ‰é‡å¤çš„å·¥ä½œï¼Œä¸æ–¹ä¾¿æŸ¥çœ‹</span><br><span class="line">#äºæ˜¯å¼€å§‹è€ƒè™‘è¿›è¡Œå»é‡</span><br><span class="line">select distinct job from emp ;</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼šdistinct åªèƒ½æ”¾åœ¨æ‰€æœ‰å­—æ®µçš„æœ€å‰é¢ï¼Œå¦‚æœåŒ…å«å¤šä¸ªå­—æ®µï¼Œå»é‡èŒƒå›´å˜å¤§ï¼Œè¡¨ç¤ºå¤šä¸ªå­—æ®µä¸èƒ½å®Œå…¨ä¸€æ ·è€Œä¸æ˜¯ç¬¬ä¸€ä¸ªå­—æ®µä¸èƒ½é‡å¤.ä¾‹å¦‚</strong><code>select distinct deptno , sal from emp ;</code><strong>è¡¨ç¤ºè¿‡æ»¤æ‰éƒ¨é—¨ç¼–å·å’Œå·¥èµ„éƒ½ä¸€æ ·çš„äººï¼Œé”™è¯¯å†™æ³•å¦‚ä¸‹ï¼ˆè°¨è®° <code>distinct</code>åªèƒ½å‡ºç°åœ¨ç¬¬ä¸€ä¸ªå­—æ®µçš„ç­¾åçš„ï¼‰ï¼š</strong><code>select deptno , distinct sal from emp ; </code> </p>
<ul>
<li><strong>ç»Ÿè®¡å²—ä½æ•°é‡ï¼Ÿ</strong></li>
</ul>
<p>&emsp;&emsp;<code>select count(distinct job) from emp;</code></p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MybatisPlus(ä¸€):æè‡´ç®€åŒ–</title>
    <url>/2021/05/12/MybatisPlus%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ"><a href="#ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ"></a>ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ</h1><p>â€‹    <a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a href="http://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li>
<li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ <code>CURD</code>ï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li>
<li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ <code>Mapper</code>ã€é€šç”¨ <code>Service</code>ï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† <code>CRUD</code> æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</li>
<li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ <code>Lambda</code> è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li>
<li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ -<code> Sequence</code>ï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li>
<li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ <code>ActiveRecord </code>å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li>
<li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ <code>Write once</code>, <code>use anywhere</code> ï¼‰</li>
<li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€…<code> Maven</code> æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ<code>Mapper</code>ã€ <code>Model </code>ã€<code> Service</code> ã€ <code>Controller </code>å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li>
<li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº<code>MyBatis</code> ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li>
<li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ<code> MySQL</code>ã€<code>MariaDB</code>ã€<code>Oracle</code>ã€<code>DB2</code>ã€<code>H2</code>ã€<code>HSQL</code>ã€<code>SQLite</code>ã€<code>Postgre</code>ã€<code>SQLServer</code> ç­‰å¤šç§æ•°æ®åº“</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º<code> Sql</code> è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li>
<li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨<code> delete</code> ã€<code>update</code>æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li>
</ul>
<p>â€‹    </p>
<p>å¯¹äº<code>SpringBoot</code>é¡¹ç›®è€Œè¨€ï¼Œä½¿ç”¨<code>MybatisPlus</code>ååˆ†ä¾¿æºï¼Œç›´æ¥åœ¨ä¾èµ–æ–‡ä»¶ä¸­æ·»åŠ ç›¸å…³ä¾èµ–å³å¯</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­å·²ç»åŒ…å«äº†<code>Mybatis</code>çš„ç›¸å…³ä¾èµ–ï¼Œä¸ç”¨é¢å¤–æ·»åŠ .</p>
<h1 id="ğŸ‡åŸºæœ¬çš„SQLè¯­å¥"><a href="#ğŸ‡åŸºæœ¬çš„SQLè¯­å¥" class="headerlink" title="ğŸ‡åŸºæœ¬çš„SQLè¯­å¥"></a>ğŸ‡åŸºæœ¬çš„SQLè¯­å¥</h1><p>æ„å»ºå®ä½“ç±»ï¼š</p>
<p>ï¼ˆå…¶ä¸­çš„æ³¨é‡Šä¼šåœ¨åç»­æ–‡ç« ä¸­åšæ±‡æ€»ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹åº”çš„æ•°æ®åº“è¡¨åï¼Œè¡¨åçš„é¦–å­—æ¯å¤§å†™å°±æ˜¯ç±»åçš„è¯å¯ä»¥ä¸ç”¨å†™ï¼Œä¸è¿‡è¿˜æ˜¯å»ºè®®åŠ ä¸Šï¼Œæ–¹ä¾¿ç»´æŠ¤</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> </span>&#123;</span><br><span class="line">	<span class="comment">//   æ•°æ®è¡¨ä¸»é”®ï¼Œvalueå€¼ä¸ºè¡¨ä¸­çš„å­—æ®µ  ç±»å‹ä¸ºä¸»é”®è‡ªå¢ </span></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookId</span><span class="params">(Integer bookId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookId = bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getBookName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookName</span><span class="params">(String bookName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookCounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookCounts</span><span class="params">(Integer bookCounts)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetail</span><span class="params">(String detail)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.detail = detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Books&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;bookId=&quot;</span> + bookId +</span><br><span class="line">            <span class="string">&quot;, bookName=&#x27;&quot;</span> + bookName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, bookCounts=&quot;</span> + bookCounts +</span><br><span class="line">            <span class="string">&quot;, detail=&#x27;&quot;</span> + detail + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ„å»º <code>dao</code> å±‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿ä¹‹åæ‰ä¼šæœ‰åŸºæœ¬çš„SQLè¯­å¥ï¼Œè¿™é‡Œä½¿ç”¨äº†æ³›å‹ï¼Œé¿å…éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BooksMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€ååœ¨å¯åŠ¨ç±»é…ç½®æ‰«æåŒ…ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//ç”¨äºè®©SpringBootè‡ªåŠ¨å¸®daoæ¥å£è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.soucat.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå®Œæˆä¹‹åå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ï¼Œååˆ†çš„æ–¹ä¾¿.</p>
<p>åœ¨æµ‹è¯•ç±»ä¸­å…ˆè¦å°†<code>dao</code>æ¥å£è‡ªåŠ¨æ³¨å…¥ï¼Œ<code>idea</code>ä¼šæŠ¥é”™ï¼Œåªæ˜¯å› ä¸ºè¿™ä¸ªå¯¹è±¡æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰ä¼šäº§ç”Ÿï¼Œç¼–è¯‘é˜¶æ®µæ²¡æœ‰åˆ›å»º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> BooksMapper booksMapper;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>æŸ¥è¯¢ç”¨æˆ·</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    System.out.println(booksMapper.selectById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBoos</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Integer&gt; list = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>).collect(Collectors.toList());</span><br><span class="line">    <span class="comment">//è¿™é‡Œå½“ç„¶äº†ä¹Ÿå¯ä»¥åˆ›å»ºListå¯¹è±¡åä¸€ä¸ªä¸€ä¸ªåŠ è¿›å»ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œåªæ˜¯ä»¥ä¸Šæ–¹å¼æ¯”è¾ƒæ–¹ä¾¿</span></span><br><span class="line">    System.out.println(booksMapper.selectBatchIds(list));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>â€‹        å…¶ä½™çš„ä¹Ÿéƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ¯•ç«Ÿåªæ˜¯åŸºæœ¬çš„ <code>SQL</code> è¯­å¥ï¼Œå½“ç„¶äº†ï¼Œ<code>MybatisPlus</code> ä¹Ÿå¯ä»¥åƒ <code>Mybatis</code> é‚£æ ·è‡ªå®šä¹‰ <code>SQL</code> è¯­å¥ï¼Œç¼–å†™é…ç½®æ–‡ä»¶å®ç°.å°±ä¸ä¸€ä¸€æ¼”ç¤ºäº†.</p>
<h1 id="ğŸ¨ARæ¨¡å¼"><a href="#ğŸ¨ARæ¨¡å¼" class="headerlink" title="ğŸ¨ARæ¨¡å¼"></a>ğŸ¨ARæ¨¡å¼</h1><p>â€‹        <code>Active Record</code>(æ´»åŠ¨è®°å½•)ï¼Œæ˜¯ä¸€ç§é¢†åŸŸæ¨¡å‹æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯ä¸€ä¸ªæ¨¡å‹ç±»å¯¹åº”å…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼Œè€Œæ¨¡å‹ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹åº”è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ï¼Œå±äºåŠ¨æ€æ¨¡å‹ã€‚è€ŒJavaä½œä¸ºå‡†é™æ€è¯­è¨€ï¼Œå¯¹äº <code>ActiveRecord </code>å¾€å¾€åªèƒ½æ„Ÿå¹å…¶ä¼˜é›…ï¼Œæ‰€ä»¥ <code>MP</code> ä¹Ÿåœ¨ <code>AR </code>é“è·¯ä¸Šè¿›è¡Œäº†ä¸€å®šçš„æ¢ç´¢ï¼Œæ‰æœ‰äº†ç°åœ¨çš„åŠŸèƒ½Javaä¹Ÿèƒ½å®ç°ARæ¨¡å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ç›´æ¥ç”¨å®ä½“ç±»å¯¹æ•°æ®åº“è¿›è¡Œ<code>CRUD</code>æ“ä½œï¼Œæ¥ä¸‹æ¥çœ‹å…·ä½“ä»£ç ï¼š</p>
<p><strong>è¦å®ç°ARæ¨¡å¼éœ€è¦ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯å®ä½“ç±»ç»§æ‰¿ModelæŠ½è±¡ç±»ï¼ŒäºŒæ˜¯å®šä¹‰å®ä½“ç±»å¯¹åº”çš„mapperæ¥å£ç»§æ‰¿BaseMapper</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line">				<span class="comment">//ä¸€å®šè¦ç»§æ‰¿è¿™ä¸ªModel</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookId</span><span class="params">(Integer bookId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookId = bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getBookName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookName</span><span class="params">(String bookName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookCounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookCounts</span><span class="params">(Integer bookCounts)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetail</span><span class="params">(String detail)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.detail = detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Books&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;bookId=&quot;</span> + bookId +</span><br><span class="line">            <span class="string">&quot;, bookName=&#x27;&quot;</span> + bookName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, bookCounts=&quot;</span> + bookCounts +</span><br><span class="line">            <span class="string">&quot;, detail=&#x27;&quot;</span> + detail + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>dao</code>æ¥å£ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿ä¹‹åæ‰ä¼šæœ‰åŸºæœ¬çš„SQLè¯­å¥ï¼Œè¿™é‡Œä½¿ç”¨äº†æ³›å‹ï¼Œé¿å…éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BooksMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ç±»:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//ç”¨äºè®©SpringBootè‡ªåŠ¨å¸®daoæ¥å£è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.soucat.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>æŸ¥è¯¢åŠŸèƒ½</strong></p>
</blockquote>
<p>ARæ¨¡å¼å’Œæ™®é€šçš„æ¨¡å¼ä¸åŒä¹‹å¤„å°±åœ¨äºå¯ä»¥ç›´æ¥ä½¿ç”¨å®ä½“ç±»è¿›è¡ŒæŸ¥è¯¢,ä¸éœ€è¦ <code>dao</code> æ¥å£å¯¹è±¡æ¥è°ƒï¼Œå½“ç„¶äº†è¿™ä¸æ„å‘³ç€æ¥å£ç±»å¯ä»¥ä¸å†™äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    Books books = <span class="keyword">new</span> Books();</span><br><span class="line">    books.setBookId(<span class="number">1</span>);</span><br><span class="line">    Books books1 = books.selectById();</span><br><span class="line">    System.out.println(books1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä½™çš„åŸºæœ¬è¯­å¥ä¹Ÿéƒ½ç±»ä¼¼ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MybatisPlus</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatisï¼ˆä¸€ï¼‰</title>
    <url>/2021/04/18/Mybatis%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸšåˆè¯†Mybatis"><a href="#ğŸšåˆè¯†Mybatis" class="headerlink" title="ğŸšåˆè¯†Mybatis"></a>ğŸšåˆè¯†Mybatis</h1><blockquote>
<p>&emsp;&emsp;MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
</blockquote>
<p>&emsp;&emsp;MyBatis æ˜¯æ”¯æŒæ™®é€š SQLæŸ¥è¯¢ï¼Œ<a href="https://baike.so.com/doc/2045557-2164405.html">å­˜å‚¨è¿‡ç¨‹</a>å’Œé«˜çº§æ˜ å°„çš„ä¼˜ç§€<a href="https://baike.so.com/doc/7722506-7996601.html">æŒä¹…å±‚</a>æ¡†æ¶ã€‚MyBatis æ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„<a href="https://baike.so.com/doc/2417290-2555569.html">JDBC</a>ä»£ç å’Œå‚æ•°çš„æ‰‹å·¥è®¾ç½®ä»¥åŠ<a href="https://baike.so.com/doc/2123416-2246652.html">ç»“æœé›†</a>çš„æ£€ç´¢ã€‚MyBatis ä½¿ç”¨ç®€å•çš„ XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„POJOs(Plain Ordinary Java Objectsï¼Œæ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<p>&emsp;&emsp;æ¯ä¸ªMyBatisåº”ç”¨ç¨‹åºä¸»è¦éƒ½æ˜¯ä½¿ç”¨SqlSessionFactoryå®ä¾‹çš„ï¼Œä¸€ä¸ªSqlSessionFactoryå®ä¾‹å¯ä»¥é€šè¿‡SqlSessionFactoryBuilderè·å¾—ã€‚SqlSessionFactoryBuilderå¯ä»¥ä»ä¸€ä¸ªxmlé…ç½®æ–‡ä»¶æˆ–è€…ä¸€ä¸ªé¢„å®šä¹‰çš„é…ç½®ç±»çš„å®ä¾‹è·å¾—ã€‚</p>
<p>&emsp;&emsp;ç”¨xmlæ–‡ä»¶æ„å»ºSqlSessionFactoryå®ä¾‹æ˜¯éå¸¸ç®€å•çš„äº‹æƒ…ã€‚æ¨èåœ¨è¿™ä¸ªé…ç½®ä¸­ä½¿ç”¨ç±»è·¯å¾„èµ„æº(classpath resource)ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•Readerå®ä¾‹ï¼ŒåŒ…æ‹¬ç”¨æ–‡ä»¶è·¯å¾„æˆ–file://å¼€å¤´çš„urlåˆ›å»ºçš„å®ä¾‹ã€‚MyBatisæœ‰ä¸€ä¸ªå®ç”¨ç±»â€”-Resourcesï¼Œå®ƒæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä»ç±»è·¯å¾„åŠå…¶å®ƒä½ç½®åŠ è½½èµ„æºã€‚</p>
<p><strong>ç®€è€Œè¨€ä¹‹ï¼š<code>Mybatis</code> å¯ä»¥ç®€åŒ– <code>JDBC</code> çš„ä»£ç ï¼Œå¹¶ä¸”å°† <code>SQL</code> è¯­å¥ä» <code>Java </code> ä»£ç ä¸­ç‹¬ç«‹äº†å‡ºæ¥ï¼Œé™ä½äº†ä»£ç çš„ç»´æŠ¤æˆæœ¬</strong></p>
<h1 id="ğŸƒMybatisçš„å®‰è£…"><a href="#ğŸƒMybatisçš„å®‰è£…" class="headerlink" title="ğŸƒMybatisçš„å®‰è£…"></a>ğŸƒMybatisçš„å®‰è£…</h1><p>&emsp;&emsp;å¯ä»¥åœ¨Mavenä¸­çš„è¿œç¨‹ä»“åº“è¿›è¡Œä¸‹è½½ï¼Œå…·ä½“åœ°å€å¦‚ä¸‹:<strong><code>https://mvnrepository.com/</code></strong> ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬ <code>3.5.6</code> å¤åˆ¶å…¶åæ ‡ï¼Œæ·»åŠ è‡³ <code>pom.xml</code> æ–‡ä»¶ä¸­å³å¯ï¼Œä¸‹é¢ä¹Ÿç»™å‡ºäº†æ‰€éœ€è¦çš„ <code>mysql</code>é©±åŠ¨åŒ… ,ä»¥åŠ <code>maven</code> çš„å•å…ƒæµ‹è¯•åŒ….</p>
<ul>
<li><strong>é¡¹ç›®åˆ›å»ºå°æŠ€å·§ï¼šå…ˆåˆ›å»ºå¥½ä¸€ä¸ª <code>maven</code> é¡¹ç›®ï¼Œå°†ä¸‹æ–¹ä¾èµ–å†™å…¥ï¼Œå¹¶è¿›è¡Œå®‰è£…ä¸‹è½½ï¼Œç„¶ååˆ é™¤ <code>src</code> ç›®å½•ï¼Œä»¥æ­¤é¡¹ç›®ä½œä¸ºçˆ¶é¡¹ç›®ï¼Œè¿™æ ·<code>pom.xml</code> ä¸­çš„ä¾èµ–ä¼šè¢«å­æ¨¡å—ç»§æ‰¿ï¼Œè¿™æ ·å°±ä¸éœ€è¦é¢‘ç¹çš„å¯¼å…¥ä¾èµ–.æ¥ç€ï¼Œåœ¨è¯¥å·¥ç¨‹ä¸‹åˆ›å»ºæˆ‘ä»¬æ‰€éœ€è¦çš„æµ‹è¯• <code>module</code> å³å¯.</strong></li>
</ul>
<p><strong>Mybatisé¡¹ç›®æ‰€éœ€ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>&emsp;&emsp;æ¥ç€åœ¨<code>src--&gt;main--&gt;resources--&gt;æ–°å»º mybatis-config.xml</code> ï¼Œå¹¶ä¸”åŠ å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">r<span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>            <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>                  <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span>        <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>        <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span>    <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>${driver}</strong> ï¼š<code>com.mysql.cj.jdbc.driver</code> é«˜ç‰ˆæœ¬çš„ <code>mysql</code> éœ€è¦æ·»åŠ  <code>cj</code> </li>
<li><strong>${url}</strong> ï¼š <code>jdbc:mysql://localhost:3306/ä½¿ç”¨çš„æ•°æ®åº“å?serverTimezone=UTC&quot;</code>  é«˜ç‰ˆæœ¬çš„éœ€è¦æ·»åŠ æ—¶åŒº</li>
<li><strong>${username}</strong> ï¼š é»˜è®¤ä¸º <code>root</code></li>
<li><strong>${password}</strong> : æ‡‚çš„éƒ½æ‡‚</li>
<li><strong>resource</strong> ï¼š é…ç½®<code>Mapper.xml</code>æ–‡ä»¶ ï¼Œå¯¹æ­¤æ–‡ä»¶è¿›è¡Œæ³¨å†Œ</li>
</ul>
<h1 id="ğŸ‰Mybatisåˆä½“éªŒ"><a href="#ğŸ‰Mybatisåˆä½“éªŒ" class="headerlink" title="ğŸ‰Mybatisåˆä½“éªŒ"></a>ğŸ‰Mybatisåˆä½“éªŒ</h1><p>å…ˆæ”¾å‡ºå‡†å¤‡å¥½çš„æ•°æ®æ–‡ä»¶ï¼š</p>
<img src="/2021/04/18/Mybatis%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="table">

<p>æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ï¼š</p>
<ul>
<li><strong>Mybatiså·¥å…·ç±»çš„ç¼–å†™</strong></li>
</ul>
<p>é¦–å…ˆï¼š <code>src--&gt;main--&gt;java--&gt;æ–°å»ºutilsåŒ…--&gt;Mybatisutils.java</code></p>
<p><strong>mybaitsçš„å·¥å…·ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mybatisutils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥: è·å– SqlsessionFactoryå¯¹è±¡</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºå®ä½“ç±»</strong></li>
</ul>
<p>åœ¨ <code>java</code> åŒ…ä¸‹åˆ›å»º <code>pojo</code> åŒ… ï¼Œåˆ›å»ºå®ä½“ç±» <code>User</code> , å®šä¹‰ç§æœ‰å±æ€§ï¼Œå±æ€§åä¸æ•°æ®åº“ä¸­çš„å­—æ®µåä¸€ä¸€å¯¹åº”ï¼Œå¹¶ä¸”å¯¹å¤–æä¾› <code>get/set</code> æ–¹æ³•ï¼Œä»¥åŠæœ‰å‚æ„é€ æ–¹æ³•å’Œæ— å‚æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”é‡å†™ <code>tostring</code> æ–¹æ³•ï¼Œåˆ›å»ºå¦‚ä¸‹.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name, String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºæ•°æ®åº“è®¿é—®å¯¹è±¡</strong></li>
</ul>
<p>åœ¨ <code>java</code> åŒ…ä¸‹åˆ›å»º <code>Dao</code> åŒ…ï¼Œåˆ›å»ºæ•°æ®åº“è®¿é—®æ¥å£ <code>UserDao</code> ï¼Œå¹¶ä¸”å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œ<code>getUserList</code> ï¼Œè¿”å›å€¼ç±»å‹ä¸º <code>List&lt;User&gt;</code> </p>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°† <code>UserDao</code> æ›´åä¸ºäº† <code>UserMapper</code> æ˜¯ä¸ºäº†ç»Ÿä¸€è·Ÿé…ç½®æ–‡ä»¶ä¸­çš„ <code>Mapper</code> æ³¨å†Œæ ‡ç­¾ä¸€è‡´.</p>
<ul>
<li><strong>æ•°æ®åº“è®¿é—®å¯¹è±¡å®ç°ç±»</strong></li>
</ul>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§ä»¥å‰çš„æ“ä½œï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ <code>JDBC</code> ä»£ç ï¼Œè¿›è¡Œæ•°æ®åº“è¿æ¥ï¼Œååˆ†å†—æ‚ï¼Œé¡ºä¾¿å›é¡¾ä¸€ä¸‹ <code>JDBC</code> ä¸­å¸¸ç”¨çš„å‡ ä¸ªç±»ï¼š</p>
<p>ç»“æœé›†ç±»ï¼š<code>ResultSet</code> ï¼Œè¿æ¥ç±»ï¼š <code>Connection</code> , æ•°æ®åº“æ“ä½œå¯¹è±¡ç±»ï¼š<code>Statement</code> ä»¥åŠé˜²æ­¢ <code>SQLæ³¨å…¥ </code> çš„ <code>PreparedStatement</code></p>
<p>Mybatisä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºç®€å•çš„æ–¹å¼ï¼Œç¼–å†™<code>xml</code> æ–‡ä»¶ï¼Œ å°† <code>SQL</code> è¯­å¥å®Œå…¨ä¸ <code>Java</code> ä»£ç åˆ†å¼€ .</p>
<p>åœ¨ <code>Dao</code> åŒ…ä¸‹æ–°å»º <code>UserMapper.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;Dao.UserMapper&quot;</span>&gt;</span><span class="comment">&lt;!--æ­¤å¤„å¡«å†™æ–‡ä»¶ä½ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--idä¸­å¡«å†™å¯¹åº”çš„æ¥å£ä¸­çš„æ–¹æ³•resultType ä¸­å¡«å†™å®ä½“ç±»çš„è·¯å¾„--&gt;</span></span><br><span class="line">        select * from bjpowernode.users  <span class="comment">&lt;!--å…·ä½“çš„å¯¹åº”çš„SQLè¯­å¥ä»¥åŠæ•°æ®åº“ä¸­çš„å“ªä¸€ä¸ªè¡¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºæµ‹è¯•ç±»</strong></li>
</ul>
<p>åœ¨<code>test---&gt; Dao ---&gt; UserMapperTest</code> </p>
<p>ç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"><span class="keyword">import</span> utils.Mybatisutils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">        <span class="comment">//è·å–å®ç°ç±»å¯¹è±¡</span></span><br><span class="line">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; list = userMapper.getUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user : list)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç‚¹å‡»æµ‹è¯•å³å¯</strong></li>
</ul>
<h1 id="ğŸæ•°æ®åº“çš„CRUDæ“ä½œ"><a href="#ğŸæ•°æ®åº“çš„CRUDæ“ä½œ" class="headerlink" title="ğŸæ•°æ®åº“çš„CRUDæ“ä½œ"></a>ğŸæ•°æ®åº“çš„CRUDæ“ä½œ</h1><p>æ¥ä¸‹æ¥å°†æ¼”ç¤ºæ•°æ®åº“çš„å››ç§åŸºæœ¬æ“ä½œ.</p>
<p>å‰è¨€ï¼š åœ¨æ•°æ®åº“æ“ä½œå¯¹è±¡çš„å®ç°çš„æ˜ å°„æ–‡ä»¶ä¸­ï¼Œæœ€å¸¸ç”¨çš„è«è¿‡äº <code>select</code> æ ‡ç­¾ï¼Œæ¥ä¸‹æ¥ä»‹ç»å¸¸ç”¨å±æ€§</p>
<ul>
<li><strong><code>parameterType</code></strong> ï¼šè¡¨ç¤ºå½¢å¼å‚æ•°çš„æ•°æ®çš„ç±»å‹</li>
<li><strong><code>id</code></strong> ï¼šå¯¹åº”æ¥å£çš„æ–¹æ³•å</li>
<li><strong><code>resultType</code></strong> ï¼šå®šä¹‰è¿”å›å€¼çš„æ•°æ®ç±»å‹</li>
</ul>
<h2 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p><code>UserMapper</code>çš„æ¥å£ä¸­æ–°åŠ å…¥æŸ¥è¯¢æ–¹æ³• <code>selectUserById</code>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">      select * from bjpowernode.users where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByIdTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">       </span><br><span class="line">       SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">       UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">       User u = userMapper.selectUserById(<span class="number">1</span>);</span><br><span class="line">       System.out.println(u);</span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä¿®æ”¹æ“ä½œ"><a href="#ä¿®æ”¹æ“ä½œ" class="headerlink" title="ä¿®æ”¹æ“ä½œ"></a>ä¿®æ”¹æ“ä½œ</h2><p><strong>æ³¨æ„ï¼šå¢åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤éƒ½éœ€è¦æäº¤äº‹åŠ¡æ‰å¯ä»¥ç”Ÿæ•ˆ</strong></p>
<ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserByNP1</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name ,<span class="meta">@Param(&quot;pwd&quot;)</span> String pwd)</span></span>;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒä½¿ç”¨Mapï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserByNP2</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<p>æ³¨æ„ï¼šå¦‚æœå½¢å¼å‚æ•°æœ‰å¤šä¸ªï¼Œå¯ä»¥ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œæ·»åŠ å¤šä¸ª ï¼Œæ³¨è§£åéœ€è¦å’Œå½¢å¼å‚æ•°åä¿æŒä¸€è‡´.</p>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!--    æ–¹å¼ä¸€:é€šè¿‡<span class="meta">@param</span>æ³¨è§£è¿›è¡Œ--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;selectUserByNP1&quot;</span> resultType=<span class="string">&quot;pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from bjpowernode.users where name = #&#123;name&#125; and pwd = #&#123;pwd&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼š</p>
<p>æœ¬è´¨ä¸Šï¼Œ<code>SQL</code> è¯­å¥ä¸­çš„ <code>#&#123;name&#125; / #&#123;pwd&#125;</code> çš„å‘½åæ˜¯éšæ„ï¼Œåªéœ€ä¿è¯ï¼ŒåŠ å…¥<code>Map</code> é›†åˆçš„ <code>Key</code> å€¼ä¸è¿™ä¸ªä¿æŒä¸€ä¸€å¯¹åº”çš„å…³ç³»å³å¯.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!--    æ–¹å¼äºŒä½¿ç”¨Mapé›†åˆ--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;selectUserByNP2&quot;</span> parameterType=<span class="string">&quot;map&quot;</span> resultType=<span class="string">&quot;pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from bjpowernode.users where name = #&#123;name&#125; and pwd = #&#123;pwd&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByNpTest01</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User u = userMapper.selectUserByNP1(<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">    System.out.println(u);</span><br><span class="line">    sqlsession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ–¹å¼äºŒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByNpTest02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map  = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pwd&quot;</span>,<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">    User u = userMapper.selectUserByNP2(map);</span><br><span class="line">    System.out.println(u);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å¢åŠ æ“ä½œ"><a href="#å¢åŠ æ“ä½œ" class="headerlink" title="å¢åŠ æ“ä½œ"></a>å¢åŠ æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p>è¿”å›å€¼ä¸ºåŒ…è£…ç±»ï¼Œå¦åˆ™ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Integer <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!--    è¿›è¡Œæ•°æ®åº“æ·»åŠ æ•°æ®--&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        insert into users (id,name,pwd) values (#</span><span class="template-variable">&#123;id&#125;</span><span class="xml"> , #</span><span class="template-variable">&#123;name&#125;</span><span class="xml"> , #</span><span class="template-variable">&#123;pwd&#125;</span><span class="xml">)</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User u = <span class="keyword">new</span> User(<span class="number">5</span>,<span class="string">&quot;ç‹äºŒ&quot;</span>,<span class="string">&quot;987654321&quot;</span>);</span><br><span class="line">    Integer i = userMapper.addUser(u);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Integer <span class="title">deletUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<p>å¯¹äºåŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ <code>String</code>, <code>resultTypeä»¥åŠparameterType</code> å¯ä»¥ä¸ç”¨å†™</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;select <span class="built_in">id</span>=<span class="string">&quot;deletUser&quot;</span> resultType=<span class="string">&quot;integer&quot;</span> &gt;</span><br><span class="line">    delete <span class="keyword">from</span> users <span class="keyword">where</span> <span class="built_in">id</span> = <span class="comment">#&#123;id&#125;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deletUserTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Integer i = userMapper.deletUser(<span class="number">4</span>);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="ğŸ‰Bugè®°å½•"><a href="#ğŸ‰Bugè®°å½•" class="headerlink" title="ğŸ‰Bugè®°å½•"></a>ğŸ‰Bugè®°å½•</h1><p>1.<strong>java.io.IOException: Could not find resource Dao/UserMapper.xml</strong></p>
<p>â€‹    ä¸€èˆ¬ä¸ºDaoç›®å½•ä¸‹çš„mapper.xmlæ–‡ä»¶æ²¡æœ‰è¢«mavenç¼–è¯‘å¤„ç†åˆ°targetä¸­çš„Daoç›®å½•ä¸‹éœ€è¦åœ¨pomä¸­è¿›è¡Œé…ç½®å¤„ç†ï¼Œä½¿mavenå¯ä»¥ä¸€åŒå¤„ç†xmlæ–‡ä»¶ , åœ¨buildæ ‡ç­¾ä¸‹æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>2.<strong>Invalid bound statement (not found): Dao.UserDao.getUserList</strong></p>
<p>â€‹    å¯èƒ½ä¸º<code>æ•°æ®åº“æ“ä½œå¯¹è±¡çš„å®ç°ï¼ˆç±»ï¼‰</code>ï¼ˆMapper.xmlï¼‰æ–‡ä»¶ä¸­ select æ ‡ç­¾ä¸­idå±æ€§ä¸ä¸ºæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•å.</p>
<p>3.<strong>Type interface Dao.UserDao is not known to the MapperRegistry.</strong></p>
<p>â€‹    å¯èƒ½ä¸ºMapper.xml æ–‡ä»¶ä¸­çš„ namespace å¡«å†™é”™è¯¯.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.js(ä¸€):åŒæ­¥ä¸å¼‚æ­¥æ‰§è¡Œæµç¨‹</title>
    <url>/2021/09/09/Node-js%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>Node.jsæ˜¯JavaScriptçš„ä¸€ä¸ªæ‹“å±•ï¼Œä½¿å¾—JavaScriptå¯ä»¥ç”¨åšæœåŠ¡ç«¯çš„è¯­è¨€æ¥å†™åç«¯ï¼ŒNode.jså¤§éƒ¨åˆ†æ˜¯ç”±C++ç¼–å†™ï¼ŒNode.jsç¨‹åºè¿è¡Œäºå•ä¸ªçº¿ç¨‹ä¹‹ä¸­ï¼Œä¸å­˜åœ¨ä¼—å¤šæœåŠ¡ç«¯è¯­è¨€çš„å¤šçº¿ç¨‹ç­‰é—®é¢˜ï¼Œå¹¶ä¸”Node.jsé…å¤‡äº†å¼‚æ­¥I/OåŠŸèƒ½ï¼Œå…¶åº“ä¹Ÿä½¿ç”¨äº†éé˜»å¡çš„æ–¹å¼è¿›è¡Œç¼–å†™ï¼Œä½¿å¾—Node.jså¤„ç†å¹¶å‘è¿æ¥ååˆ†è½»æ¾ï¼Œæ— éœ€å¼•å…¥ç®¡ç†çº¿ç¨‹å¹¶å‘çš„è´Ÿæ‹…ï¼Œå½“ç„¶äº†å¹¶å‘è¿‡äºå¤§ï¼Œä¹Ÿæ˜¯ä¼šé€ æˆBugçš„ã€‚</p>
</blockquote>
<h1 id="JavaScriptå¼‚æ­¥ä¸åŒæ­¥"><a href="#JavaScriptå¼‚æ­¥ä¸åŒæ­¥" class="headerlink" title="JavaScriptå¼‚æ­¥ä¸åŒæ­¥"></a>JavaScriptå¼‚æ­¥ä¸åŒæ­¥</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>JavaScript</code>ä¸ºå•çº¿ç¨‹çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ç¨‹åºå¹¶è¡Œè¿è¡Œï¼Œä»£ç æ‰§è¡Œå¿…ç„¶å­˜åœ¨å…ˆåçš„é—®é¢˜ï¼Œè¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« æƒ³è¦è®²è¿°çš„é—®é¢˜.</p>
<h2 id="JavaScriptä»£ç æ‰§è¡Œæµç¨‹"><a href="#JavaScriptä»£ç æ‰§è¡Œæµç¨‹" class="headerlink" title="JavaScriptä»£ç æ‰§è¡Œæµç¨‹"></a>JavaScriptä»£ç æ‰§è¡Œæµç¨‹</h2><p>å…ˆæ˜ç¡®ä¸€äº›æ¦‚å¿µï¼Œ<code>JavaScript</code>çš„ä»£ç æ‰§è¡Œæ˜¯ä¾æ‰˜äºæ ˆçš„ï¼Œå¯¹äºä¸å­˜åœ¨å¼‚æ­¥çš„ä»£ç ï¼Œå³æŒ‰ç…§æ ˆå…ˆå…¥åå‡ºçš„è§„åˆ™è¿›è¡Œæ‰§è¡Œï¼Œç„¶è€Œï¼Œå¯¹äºå­˜åœ¨å¼‚æ­¥æ“ä½œçš„ä»£ç ï¼Œå°±ä¼šå°†å¼‚æ­¥æ“ä½œæ”¾å…¥ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ ˆï¼Œå¼‚æ­¥ä»»åŠ¡åˆåˆ†ä¸º<code>å®ä»»åŠ¡</code>ï¼Œ<code>å¾®ä»»åŠ¡</code>ï¼Œç­‰å¾…ä¸»æ‰§è¡Œæ ˆæ‰§è¡Œå®Œæ¯•åä¼šæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ ˆï¼Œç„¶åä¾æ¬¡æ‰§è¡Œ.</p>
<p><strong>å®ä»»åŠ¡</strong>(åŒ…æ‹¬)ï¼š</p>
<ul>
<li>script(æ•´ä½“ä»£ç )</li>
<li>setTimeout, setInterval, setImmediate,</li>
<li>I/O</li>
<li>UI rendering<br>ajaxè¯·æ±‚ä¸å±äºå®ä»»åŠ¡ï¼Œjsçº¿ç¨‹é‡åˆ°ajaxè¯·æ±‚ï¼Œä¼šå°†è¯·æ±‚äº¤ç»™å¯¹åº”çš„httpçº¿ç¨‹å¤„ç†ï¼Œä¸€æ—¦è¯·æ±‚è¿”å›ç»“æœï¼Œå°±ä¼šå°†å¯¹åº”çš„å›è°ƒæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰è¯·æ±‚å®Œæˆæ‰§è¡Œã€‚</li>
</ul>
<p><strong>å¾®ä»»åŠ¡</strong>(åŒ…æ‹¬)ï¼š</p>
<ul>
<li>process.nextTick</li>
<li>Promise</li>
<li>Object.observe(å·²åºŸå¼ƒ)</li>
<li>MutationObserver(html5æ–°ç‰¹æ€§)</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;timeout&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>)</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise resolved&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;end&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š<code>start</code> =&gt; <code>promise</code> =&gt; <code>end</code> =&gt; <code>promise resolved</code> =&gt; <code>timeout</code></p>
<p>å¯ä»¥ç¨å¾®åˆ†æä¸€ä¸‹:</p>
<ul>
<li>ä»£ç ä»ä¸Šå¾€ä¸‹æ‰§è¡Œï¼Œé¦–å…ˆä¼šè¾“å‡º <code>start</code> </li>
<li>æ‰§è¡Œåˆ°<code>setTimeout</code>çš„æ—¶å€™ï¼Œä¼šå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œæ‰§è¡Œåˆ°<code>promise</code>æ—¶ï¼Œä¼šç»§ç»­æ‰§è¡Œå…¶ä¸­å†…å®¹ï¼Œé¦–å…ˆä¼šè¾“å‡º<code>promise</code>ï¼Œ<code>resolve</code>ä¸ºå¼‚æ­¥ä»»åŠ¡æ•…åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæˆ‘ä»¬çŸ¥é“å¯¹äº<code>Promise</code>å¯¹è±¡ï¼Œå…¶<code>then</code>å›è°ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä½¿ç”¨<code>resolve</code>æ¥è§¦å‘ï¼Œ<code>catch</code> åŒç†ï¼Œåªä¸è¿‡ä½¿ç”¨<code>reject</code>è§¦å‘ï¼Œäºæ˜¯æ‰§è¡Œåˆ°æœ€åè¾“å‡º<code>end</code></li>
<li>ä¸»æ‰§è¡Œæ ˆæ‰§è¡Œå®Œæ¯•åï¼Œå¼€å§‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡**(æ³¨æ„:**ä¸»æ‰§è¡Œæ ˆæ‰§è¡Œä»»åŠ¡ä¹Ÿæ˜¯éœ€è¦èŠ±è´¹æ—¶é—´çš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ <code>setTimeout</code>è®¾ç½®çš„ç­‰å¾…æ—¶é—´åªæ˜¯æœ€å°‘çš„ç­‰å¾…æ—¶é—´ï¼Œå®é™…æ—¶é—´åº”è¯¥æ˜¯å¤§äºç­‰äºè¿™ä¸ªæ—¶é—´çš„)</li>
<li>å…ˆæ˜¯æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå¦‚æœæ²¡æœ‰ä»»åŠ¡å®Œæˆæœ¬æ¬¡å¾ªç¯ï¼Œä¸‹æ¬¡å¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œå®ä»»åŠ¡ï¼‰<code>then</code>æ¥æ”¶åˆ°äº†å¤„ç†ç»“æœï¼Œè¾“å‡ºäº† <code>promise resolved</code> </li>
<li>å†å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡<code>setTimeout</code> ï¼Œæ‰§è¡Œç­‰å¾…æ—¶é—´ï¼Œç„¶åè¾“å‡ºæ¥ç€å°±è¾“å‡ºäº†<code>timeout</code>.</li>
</ul>
]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.js(ä¸‰):ä½¿ç”¨ç²˜è´´æ¿</title>
    <url>/2021/09/09/Node-js%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>åœ¨åšElectronåº”ç”¨æ—¶ï¼Œéœ€è¦å®ç°ä¸€ä¸ªç‚¹å‡»æŒ‰é’®ä¸€é”®å¤åˆ¶æ–‡æœ¬çš„åŠŸèƒ½ï¼Œç‰¹æ­¤æ¥è®°å½•ä¸€ä¸‹.</p>
</blockquote>
<h1 id="åŸç”ŸJSå®ç°"><a href="#åŸç”ŸJSå®ç°" class="headerlink" title="åŸç”ŸJSå®ç°"></a>åŸç”ŸJSå®ç°</h1><p><code>select</code>åªå¯¹<code>textarea/input</code>æœ‰æ•ˆï¼Œåªéœ€è¦é€‰ä¸­å…ƒç´ è°ƒç”¨<code>select</code>æ–¹æ³•</p>
<p>æ‰§è¡Œ<code> document.execCommand(&quot;copy&quot;)</code> å³å¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> copyToclipboard = <span class="function">(<span class="params">value</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> textarea = <span class="built_in">document</span>.createElement( <span class="string">&quot;textarea &quot;</span> );</span><br><span class="line">    textarea.value = value;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(textarea);</span><br><span class="line">    textarea.select();</span><br><span class="line">    <span class="built_in">document</span>.execCommand(<span class="string">&quot;copy&quot;</span>);</span><br><span class="line">    <span class="built_in">document</span>.body. removeChild(textarea);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a>ç¬¬ä¸‰æ–¹åº“</h1><p>ä½¿ç”¨<code>clipboard</code>å®ç°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">npm install cliboard --save</span><br></pre></td></tr></table></figure>



<p>åœ¨<code>Vue</code>ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éœ€è¦å¤åˆ¶çš„å†…å®¹å¡«å…¥ data-clipboard-text --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;copy&quot;</span> <span class="attr">:data-clipboard-text</span>=<span class="string">&quot;file.path&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;copy()&quot;</span>&gt;</span>COPY<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">copy</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ä¼ å…¥ç±»å/id</span></span><br><span class="line">     <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">&#x27;.copy&#x27;</span>)</span><br><span class="line">     <span class="built_in">this</span>.$message.success(<span class="string">&quot;Copy Successï¼&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis(ä¸€):äº”å¤§æ•°æ®ç±»å‹</title>
    <url>/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="â›µNoSQL"><a href="#â›µNoSQL" class="headerlink" title="â›µNoSQL"></a>â›µNoSQL</h1><p>â€‹    <code>NoSQL</code>ï¼Œæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ã€‚éšç€äº’è”ç½‘<a href="https://baike.so.com/doc/7119987-7343121.html">web2.0</a>ç½‘ç«™çš„å…´èµ·ï¼Œä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“åœ¨åº”ä»˜<code>web2.0</code>ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯è¶…å¤§è§„æ¨¡å’Œé«˜å¹¶å‘çš„<a href="https://baike.so.com/doc/3656419-3843163.html">SNS</a>ç±»å‹çš„<code>web2.0</code>çº¯åŠ¨æ€ç½‘ç«™å·²ç»æ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œæš´éœ²äº†å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼Œè€Œéå…³ç³»å‹çš„æ•°æ®åº“åˆ™ç”±äºå…¶æœ¬èº«çš„ç‰¹ç‚¹å¾—åˆ°äº†éå¸¸è¿…é€Ÿçš„å‘å±•ã€‚<code>NoSQL</code>æ•°æ®åº“çš„äº§ç”Ÿå°±æ˜¯ä¸ºäº†è§£å†³å¤§è§„æ¨¡æ•°æ®é›†åˆå¤šé‡æ•°æ®ç§ç±»å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åº”ç”¨éš¾é¢˜ã€‚</p>
<p>â€‹        è™½ç„¶<code>NoSQL</code>æµè¡Œè¯­ç«èµ·æ¥æ‰çŸ­çŸ­ä¸€å¹´çš„æ—¶é—´ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ï¼Œç°åœ¨å·²ç»å¼€å§‹äº†ç¬¬äºŒä»£è¿åŠ¨ã€‚å°½ç®¡æ—©æœŸçš„å †æ ˆä»£ç åªèƒ½ç®—æ˜¯ä¸€ç§å®éªŒï¼Œç„¶è€Œç°åœ¨çš„ç³»ç»Ÿå·²ç»æ›´åŠ çš„æˆç†Ÿã€ç¨³å®šã€‚ä¸è¿‡ç°åœ¨ä¹Ÿé¢ä¸´ç€ä¸€ä¸ªä¸¥é…·çš„äº‹å®:æŠ€æœ¯è¶Šæ¥è¶Šæˆç†Ÿâ€“ä»¥è‡³äºåŸæ¥å¾ˆå¥½çš„<code>NoSQL</code>æ•°æ®å­˜å‚¨ä¸å¾—ä¸è¿›è¡Œé‡å†™ï¼Œä¹Ÿæœ‰å°‘æ•°äººè®¤ä¸ºè¿™å°±æ˜¯æ‰€è°“çš„2.0ç‰ˆæœ¬ã€‚è¿™é‡Œåˆ—å‡ºä¸€äº›æ¯”è¾ƒçŸ¥åçš„å·¥å…·ï¼Œå¯ä»¥ä¸ºå¤§æ•°æ®å»ºç«‹å¿«é€Ÿã€å¯æ‰©å±•çš„å­˜å‚¨åº“ã€‚</p>
<h2 id="NoSQLçš„åº”ç”¨åœºæ™¯"><a href="#NoSQLçš„åº”ç”¨åœºæ™¯" class="headerlink" title="NoSQLçš„åº”ç”¨åœºæ™¯"></a>NoSQLçš„åº”ç”¨åœºæ™¯</h2><ul>
<li><p>æ•°æ®æ¨¡å‹æ¯”è¾ƒç®€å•</p>
</li>
<li><p>éœ€è¦çµæ´»æ€§æ›´å¼ºçš„ITç³»ç»Ÿ</p>
</li>
<li><p>å¯¹æ•°æ®åº“æ€§èƒ½è¦æ±‚è¾ƒé«˜</p>
</li>
<li><p>ä¸éœ€è¦é«˜åº¦çš„æ•°æ®ä¸€è‡´æ€§</p>
</li>
</ul>
<p>å¦‚ï¼šå•†åŸç½‘ç«™ä¸­å¯¹å•†å“æ•°æ®é¢‘ç¹æŸ¥è¯¢ã€å¯¹çƒ­æœå•†å“çš„æ’è¡Œç»Ÿè®¡ã€è®¢å•è¶…æ—¶é—®é¢˜ã€ä»¥åŠå¾®ä¿¡æœ‹å‹åœˆï¼ˆéŸ³é¢‘ï¼Œè§†é¢‘ï¼‰ã€éªŒè¯ç æ¶ˆæ¯éªŒè¯ç­‰</p>
<h1 id="ğŸš‹Redis"><a href="#ğŸš‹Redis" class="headerlink" title="ğŸš‹Redis"></a>ğŸš‹Redis</h1><ul>
<li><p>redisæ˜¯ä¸€ä¸ªå†…å­˜å‹çš„æ•°æ®åº“</p>
</li>
<li><p> Redisæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½key/valueå†…å­˜å‹æ•°æ®åº“</p>
</li>
<li><p> Redisæ”¯æŒä¸°å¯Œçš„æ•°æ®ç±»å‹ </p>
</li>
<li><p> Redisæ”¯æŒæŒä¹…åŒ– </p>
</li>
<li><p> Rediså•çº¿ç¨‹,å•è¿›ç¨‹ï¼ˆé«˜ç‰ˆæœ¬ä¹Ÿæ”¯æŒå¤šçº¿ç¨‹ï¼‰</p>
</li>
</ul>
<h2 id="Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤"><a href="#Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤" class="headerlink" title="Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤"></a>Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤</h2><h3 id="æ•°æ®åº“æ“ä½œæŒ‡ä»¤"><a href="#æ•°æ®åº“æ“ä½œæŒ‡ä»¤" class="headerlink" title="æ•°æ®åº“æ“ä½œæŒ‡ä»¤"></a>æ•°æ®åº“æ“ä½œæŒ‡ä»¤</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.Redisä¸­åº“è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> ä½¿ç”¨redisçš„é»˜è®¤é…ç½®å™¨åŠ¨redisæœåŠ¡å,é»˜è®¤ä¼šå­˜åœ¨16ä¸ªåº“,ç¼–å·ä»0-15</span><br><span class="line"><span class="bullet">-</span> å¯ä»¥ä½¿ç”¨select åº“çš„ç¼–å· æ¥é€‰æ‹©ä¸€ä¸ªredisçš„åº“</span><br><span class="line"></span><br><span class="line"><span class="section"># 2.Redisä¸­æ“ä½œåº“çš„æŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> æ¸…ç©ºå½“å‰çš„åº“  FLUSHDB</span><br><span class="line"><span class="bullet">-</span> æ¸…ç©ºå…¨éƒ¨çš„åº“  FLUSHALL</span><br><span class="line"></span><br><span class="line"><span class="section"># 3.rediså®¢æˆ·ç«¯æ˜¾ç¤ºä¸­æ–‡</span></span><br><span class="line"><span class="bullet">-</span>	./redis-cli  -p 7000 --raw</span><br></pre></td></tr></table></figure>

<h3 id="æ“ä½œkeyç›¸å…³æŒ‡ä»¤"><a href="#æ“ä½œkeyç›¸å…³æŒ‡ä»¤" class="headerlink" title="æ“ä½œkeyç›¸å…³æŒ‡ä»¤"></a>æ“ä½œkeyç›¸å…³æŒ‡ä»¤</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.DELæŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³• :  DEL key [key ...] </span><br><span class="line"><span class="bullet">-</span> ä½œç”¨ :  åˆ é™¤ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªkey ã€‚ä¸å­˜åœ¨çš„key ä¼šè¢«å¿½ç•¥ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼š è¢«åˆ é™¤key çš„æ•°é‡ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="section"># 2.EXISTSæŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:  EXISTS key</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨:  æ£€æŸ¥ç»™å®škey æ˜¯å¦å­˜åœ¨ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼š è‹¥key å­˜åœ¨ï¼Œè¿”å›1 ï¼Œå¦åˆ™è¿”å›0ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 3.EXPIRE</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:  EXPIRE key seconds</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨:  ä¸ºç»™å®škey è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œå½“key è¿‡æœŸæ—¶(ç”Ÿå­˜æ—¶é—´ä¸º0 )ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼šè®¾ç½®æˆåŠŸè¿”å›1 ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 4.KEYS</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³• :  KEYS pattern</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨ :  æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼pattern çš„key ã€‚</span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:</span><br><span class="line"><span class="code">	KEYS * åŒ¹é…æ•°æ®åº“ä¸­æ‰€æœ‰key ã€‚</span></span><br><span class="line"><span class="code">	KEYS h?llo åŒ¹é…hello ï¼Œhallo å’Œhxllo ç­‰ã€‚</span></span><br><span class="line"><span class="code">	KEYS h*llo åŒ¹é…hllo å’Œheeeeello ç­‰ã€‚</span></span><br><span class="line"><span class="code">	KEYS h[ae]llo åŒ¹é…hello å’Œhallo ï¼Œä½†ä¸åŒ¹é…hillo ã€‚ç‰¹æ®Šç¬¦å·ç”¨ &quot;\&quot; éš”å¼€</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š ç¬¦åˆç»™å®šæ¨¡å¼çš„key åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 5.MOVE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  MOVE key db</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  å°†å½“å‰æ•°æ®åº“çš„key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“db å½“ä¸­ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š ç§»åŠ¨æˆåŠŸè¿”å›1 ï¼Œå¤±è´¥åˆ™è¿”å›0 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 6.PEXPIRE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PEXPIRE key milliseconds</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤å’ŒEXPIRE å‘½ä»¤çš„ä½œç”¨ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸åƒEXPIRE å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šè®¾ç½®æˆåŠŸï¼Œè¿”å›1  key ä¸å­˜åœ¨æˆ–è®¾ç½®å¤±è´¥ï¼Œè¿”å›0</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 7.PEXPIREAT</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PEXPIREAT key milliseconds-timestamp</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤å’ŒEXPIREAT å‘½ä»¤ç±»ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®key çš„è¿‡æœŸunix æ—¶é—´æˆ³ï¼Œè€Œä¸æ˜¯åƒEXPIREATé‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šå¦‚æœç”Ÿå­˜æ—¶é—´è®¾ç½®æˆåŠŸï¼Œè¿”å›1 ã€‚å½“key ä¸å­˜åœ¨æˆ–æ²¡åŠæ³•è®¾ç½®ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›0 ã€‚(æŸ¥çœ‹EXPIRE å‘½ä»¤è·å–æ›´å¤šä¿¡æ¯)</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 8.TTL</span></span><br><span class="line"><span class="code">- è¯­æ³• :   TTL key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :   ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®škey çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="code">	å½“key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›-2 ã€‚</span></span><br><span class="line"><span class="code">	å½“key å­˜åœ¨ä½†æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code">	å¦åˆ™ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚</span></span><br><span class="line"><span class="code">- Note : åœ¨Redis 2.8 ä»¥å‰ï¼Œå½“key ä¸å­˜åœ¨ï¼Œæˆ–è€…key æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œå‘½ä»¤éƒ½è¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 9.PTTL</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PTTL key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤ç±»ä¼¼äºTTL å‘½ä»¤ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸æ˜¯åƒTTL å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š å½“key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›-2 ã€‚å½“key å­˜åœ¨ä½†æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code">- å¦åˆ™ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œè¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚</span></span><br><span class="line"><span class="code">- æ³¨æ„ : åœ¨Redis 2.8 ä»¥å‰ï¼Œå½“key ä¸å­˜åœ¨ï¼Œæˆ–è€…key æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œå‘½ä»¤éƒ½è¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 10.RANDOMKEY</span></span><br><span class="line"><span class="code">- è¯­æ³• :  RANDOMKEY</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›(ä¸åˆ é™¤) ä¸€ä¸ªkey ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šå½“æ•°æ®åº“ä¸ä¸ºç©ºæ—¶ï¼Œè¿”å›ä¸€ä¸ªkey ã€‚å½“æ•°æ®åº“ä¸ºç©ºæ—¶ï¼Œè¿”å›nil ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 11.RENAME</span></span><br><span class="line"><span class="code">- è¯­æ³• :  RENAME key newkey</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  å°†key æ”¹åä¸ºnewkey ã€‚å½“key å’Œnewkey ç›¸åŒï¼Œæˆ–è€…key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚å½“newkey å·²ç»å­˜åœ¨æ—¶ï¼ŒRENAME å‘½ä»¤å°†è¦†ç›–æ—§å€¼ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š æ”¹åæˆåŠŸæ—¶æç¤ºOK ï¼Œå¤±è´¥æ—¶å€™è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 12.TYPE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  TYPE key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿”å›key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="code">	none (key ä¸å­˜åœ¨)</span></span><br><span class="line"><span class="code">	string (å­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="code">	list (åˆ—è¡¨)</span></span><br><span class="line"><span class="code">	set (é›†åˆ)</span></span><br><span class="line"><span class="code">	zset (æœ‰åºé›†)</span></span><br><span class="line"><span class="code">	hash (å“ˆå¸Œè¡¨)</span></span><br></pre></td></tr></table></figure>

<h3 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h3><h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨æ“ä½œå‘½ä»¤"><a href="#å¸¸ç”¨æ“ä½œå‘½ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œå‘½ä»¤"></a>å¸¸ç”¨æ“ä½œå‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>set</td>
<td>è®¾ç½®ä¸€ä¸ªkey/value</td>
</tr>
<tr>
<td>get</td>
<td>æ ¹æ®keyè·å¾—å¯¹åº”çš„value</td>
</tr>
<tr>
<td>mset</td>
<td>ä¸€æ¬¡è®¾ç½®å¤šä¸ªkey value</td>
</tr>
<tr>
<td>mget</td>
<td>ä¸€æ¬¡è·å¾—å¤šä¸ªkeyçš„value</td>
</tr>
<tr>
<td>getset</td>
<td>è·å¾—åŸå§‹keyçš„å€¼ï¼ŒåŒæ—¶è®¾ç½®æ–°å€¼</td>
</tr>
<tr>
<td>strlen</td>
<td>è·å¾—å¯¹åº”keyå­˜å‚¨valueçš„é•¿åº¦</td>
</tr>
<tr>
<td>append</td>
<td>ä¸ºå¯¹åº”keyçš„valueè¿½åŠ å†…å®¹</td>
</tr>
<tr>
<td>getrange ç´¢å¼•0å¼€å§‹</td>
<td>æˆªå–valueçš„å†…å®¹</td>
</tr>
<tr>
<td>setex</td>
<td>è®¾ç½®ä¸€ä¸ªkeyå­˜æ´»çš„æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰</td>
</tr>
<tr>
<td>psetex</td>
<td>è®¾ç½®ä¸€ä¸ªkeyå­˜æ´»çš„æœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰</td>
</tr>
<tr>
<td>setnx</td>
<td>å­˜åœ¨ä¸åšä»»ä½•æ“ä½œ,ä¸å­˜åœ¨æ·»åŠ </td>
</tr>
<tr>
<td>msetnxåŸå­æ“ä½œ(åªè¦æœ‰ä¸€ä¸ªå­˜åœ¨ä¸åšä»»ä½•æ“ä½œ)</td>
<td>å¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªkey,åªæœ‰æœ‰ä¸€ä¸ªå­˜åœ¨éƒ½ä¸ä¿å­˜</td>
</tr>
<tr>
<td>decr</td>
<td>è¿›è¡Œæ•°å€¼ç±»å‹çš„-1æ“ä½œ</td>
</tr>
<tr>
<td>decrby</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®è¿›è¡Œå‡æ³•æ“ä½œ</td>
</tr>
<tr>
<td>Incr</td>
<td>è¿›è¡Œæ•°å€¼ç±»å‹çš„+1æ“ä½œ</td>
</tr>
<tr>
<td>incrby</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®è¿›è¡ŒåŠ æ³•æ“ä½œ</td>
</tr>
<tr>
<td>Incrbyfloat</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®åŠ å…¥æµ®ç‚¹æ•°</td>
</tr>
</tbody></table>
<h3 id="Listç±»å‹"><a href="#Listç±»å‹" class="headerlink" title="Listç±»å‹"></a>Listç±»å‹</h3><p>list åˆ—è¡¨ ç›¸å½“äºjavaä¸­list é›†åˆ  ç‰¹ç‚¹  å…ƒç´ æœ‰åº  ä¸” å¯ä»¥é‡å¤</p>
<h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹-1"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹-1" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"><a href="#å¸¸ç”¨æ“ä½œæŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"></a>å¸¸ç”¨æ“ä½œæŒ‡ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>lpush</td>
<td>å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨å¤´éƒ¨</td>
</tr>
<tr>
<td>lpushx</td>
<td>åŒlpush,ä½†æ˜¯å¿…é¡»è¦ä¿è¯è¿™ä¸ªkeyå­˜åœ¨</td>
</tr>
<tr>
<td>rpush</td>
<td>å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨æœ«å°¾</td>
</tr>
<tr>
<td>rpushx</td>
<td>åŒrpush,ä½†æ˜¯å¿…é¡»è¦ä¿è¯è¿™ä¸ªkeyå­˜åœ¨</td>
</tr>
<tr>
<td>lpop</td>
<td>è¿”å›å’Œç§»é™¤åˆ—è¡¨å·¦è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>rpop</td>
<td>è¿”å›å’Œç§»é™¤åˆ—è¡¨å³è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>lrange</td>
<td>è·å–æŸä¸€ä¸ªä¸‹æ ‡åŒºé—´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>llen</td>
<td>è·å–åˆ—è¡¨å…ƒç´ ä¸ªæ•°</td>
</tr>
<tr>
<td>lset</td>
<td>è®¾ç½®æŸä¸€ä¸ªæŒ‡å®šç´¢å¼•çš„å€¼(ç´¢å¼•å¿…é¡»å­˜åœ¨)</td>
</tr>
<tr>
<td>lindex</td>
<td>è·å–æŸä¸€ä¸ªæŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ </td>
</tr>
<tr>
<td>lrem</td>
<td>åˆ é™¤é‡å¤å…ƒç´ </td>
</tr>
<tr>
<td>ltrim</td>
<td>ä¿ç•™åˆ—è¡¨ä¸­ç‰¹å®šåŒºé—´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>linsert</td>
<td>åœ¨æŸä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œä¹‹åæ’å…¥æ–°å…ƒç´ </td>
</tr>
</tbody></table>
<h3 id="Setç±»å‹"><a href="#Setç±»å‹" class="headerlink" title="Setç±»å‹"></a>Setç±»å‹</h3><p>ç‰¹ç‚¹: Setç±»å‹ Seté›†åˆ å…ƒç´ æ— åº  ä¸å¯ä»¥é‡å¤</p>
<h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹-2"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹-2" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>sadd</td>
<td>ä¸ºé›†åˆæ·»åŠ å…ƒç´ </td>
</tr>
<tr>
<td>smembers</td>
<td>æ˜¾ç¤ºé›†åˆä¸­æ‰€æœ‰å…ƒç´  æ— åº</td>
</tr>
<tr>
<td>scard</td>
<td>è¿”å›é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td>spop</td>
<td>éšæœºè¿”å›ä¸€ä¸ªå…ƒç´  å¹¶å°†å…ƒç´ åœ¨é›†åˆä¸­åˆ é™¤</td>
</tr>
<tr>
<td>smove</td>
<td>ä»ä¸€ä¸ªé›†åˆä¸­å‘å¦ä¸€ä¸ªé›†åˆç§»åŠ¨å…ƒç´   å¿…é¡»æ˜¯åŒä¸€ç§ç±»å‹</td>
</tr>
<tr>
<td>srem</td>
<td>ä»é›†åˆä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>sismember</td>
<td>åˆ¤æ–­ä¸€ä¸ªé›†åˆä¸­æ˜¯å¦å«æœ‰è¿™ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>srandmember</td>
<td>éšæœºè¿”å›å…ƒç´ </td>
</tr>
<tr>
<td>sdiff</td>
<td>å»æ‰ç¬¬ä¸€ä¸ªé›†åˆä¸­å…¶å®ƒé›†åˆå«æœ‰çš„ç›¸åŒå…ƒç´ </td>
</tr>
<tr>
<td>sinter</td>
<td>æ±‚äº¤é›†</td>
</tr>
<tr>
<td>sunion</td>
<td>æ±‚å’Œé›†</td>
</tr>
</tbody></table>
<h3 id="ZSetç±»å‹"><a href="#ZSetç±»å‹" class="headerlink" title="ZSetç±»å‹"></a>ZSetç±»å‹</h3><p>ç‰¹ç‚¹: å¯æ’åºçš„seté›†åˆ  æ’åº  ä¸å¯é‡å¤ </p>
<p>ZSET å®˜æ–¹  å¯æ’åºSET  sortSet   </p>
<h4 id="å†…å­˜æ¨¡å‹"><a href="#å†…å­˜æ¨¡å‹" class="headerlink" title="å†…å­˜æ¨¡å‹"></a>å†…å­˜æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤-1"><a href="#å¸¸ç”¨å‘½ä»¤-1" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>zadd</td>
<td>æ·»åŠ ä¸€ä¸ªæœ‰åºé›†åˆå…ƒç´ </td>
</tr>
<tr>
<td>zcard</td>
<td>è¿”å›é›†åˆçš„å…ƒç´ ä¸ªæ•°</td>
</tr>
<tr>
<td>zrange å‡åº zrevrange é™åº</td>
<td>è¿”å›ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>zrangebyscore</td>
<td>æŒ‰ç…§åˆ†æ•°æŸ¥æ‰¾ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>zrank</td>
<td>è¿”å›æ’å</td>
</tr>
<tr>
<td>zrevrank</td>
<td>å€’åºæ’å</td>
</tr>
<tr>
<td>zscore</td>
<td>æ˜¾ç¤ºæŸä¸€ä¸ªå…ƒç´ çš„åˆ†æ•°</td>
</tr>
<tr>
<td>zrem</td>
<td>ç§»é™¤æŸä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>zincrby</td>
<td>ç»™æŸä¸ªç‰¹å®šå…ƒç´ åŠ åˆ†</td>
</tr>
</tbody></table>
<h3 id="hashç±»å‹"><a href="#hashç±»å‹" class="headerlink" title="hashç±»å‹"></a>hashç±»å‹</h3><p>ç‰¹ç‚¹: value æ˜¯ä¸€ä¸ªmapç»“æ„ å­˜åœ¨key value  key æ— åºçš„  </p>
<h4 id="å†…å­˜æ¨¡å‹-1"><a href="#å†…å­˜æ¨¡å‹-1" class="headerlink" title="å†…å­˜æ¨¡å‹"></a>å†…å­˜æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤-2"><a href="#å¸¸ç”¨å‘½ä»¤-2" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>hset</td>
<td>è®¾ç½®ä¸€ä¸ªkey/valueå¯¹</td>
</tr>
<tr>
<td>hget</td>
<td>è·å¾—ä¸€ä¸ªkeyå¯¹åº”çš„value</td>
</tr>
<tr>
<td>hgetall</td>
<td>è·å¾—æ‰€æœ‰çš„key/valueå¯¹</td>
</tr>
<tr>
<td>hdel</td>
<td>åˆ é™¤æŸä¸€ä¸ªkey/valueå¯¹</td>
</tr>
<tr>
<td>hexists</td>
<td>åˆ¤æ–­ä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td>hkeys</td>
<td>è·å¾—æ‰€æœ‰çš„key</td>
</tr>
<tr>
<td>hvals</td>
<td>è·å¾—æ‰€æœ‰çš„value</td>
</tr>
<tr>
<td>hmset</td>
<td>è®¾ç½®å¤šä¸ªkey/value</td>
</tr>
<tr>
<td>hmget</td>
<td>è·å¾—å¤šä¸ªkeyçš„value</td>
</tr>
<tr>
<td>hsetnx</td>
<td>è®¾ç½®ä¸€ä¸ªä¸å­˜åœ¨çš„keyçš„å€¼</td>
</tr>
<tr>
<td>hincrby</td>
<td>ä¸ºvalueè¿›è¡ŒåŠ æ³•è¿ç®—</td>
</tr>
<tr>
<td>hincrbyfloat</td>
<td>ä¸ºvalueåŠ å…¥æµ®ç‚¹å€¼</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Shiro(ä¸€):ä»‹ç»ä¸åŸºæœ¬æ¦‚å¿µ</title>
    <url>/2021/06/09/Shiro%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h2 id="ğŸš§æƒé™ç®¡ç†"><a href="#ğŸš§æƒé™ç®¡ç†" class="headerlink" title="ğŸš§æƒé™ç®¡ç†"></a>ğŸš§æƒé™ç®¡ç†</h2><h3 id="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"><a href="#ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"></a>ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†</h3><p>åŸºæœ¬ä¸Šæ¶‰åŠåˆ°ç”¨æˆ·å‚ä¸çš„ç³»ç»Ÿéƒ½è¦è¿›è¡Œæƒé™ç®¡ç†ï¼Œæƒé™ç®¡ç†å±äºç³»ç»Ÿå®‰å…¨çš„èŒƒç•´ï¼Œæƒé™ç®¡ç†å®ç°<code>å¯¹ç”¨æˆ·è®¿é—®ç³»ç»Ÿçš„æ§åˆ¶</code>ï¼ŒæŒ‰ç…§å®‰å…¨è§„åˆ™æˆ–è€…<a href="http://baike.baidu.com/view/160028.htm">å®‰å…¨ç­–ç•¥</a>æ§åˆ¶ç”¨æˆ·å¯ä»¥è®¿é—®è€Œä¸”åªèƒ½è®¿é—®è‡ªå·±è¢«æˆæƒçš„èµ„æºã€‚</p>
<p>æƒé™ç®¡ç†åŒ…æ‹¬ç”¨æˆ·<code>èº«ä»½è®¤è¯</code>å’Œ<code>æˆæƒ</code>ä¸¤éƒ¨åˆ†ï¼Œç®€ç§°<code>è®¤è¯æˆæƒ</code>ã€‚å¯¹äºéœ€è¦è®¿é—®æ§åˆ¶çš„èµ„æºç”¨æˆ·é¦–å…ˆç»è¿‡èº«ä»½è®¤è¯ï¼Œè®¤è¯é€šè¿‡åç”¨æˆ·å…·æœ‰è¯¥èµ„æºçš„è®¿é—®æƒé™æ–¹å¯è®¿é—®ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯"><a href="#ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯" class="headerlink" title="ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯"></a>ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯</h3><p><code>èº«ä»½è®¤è¯</code>ï¼Œå°±æ˜¯åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·æ˜¯å¦ä¸ºåˆæ³•ç”¨æˆ·çš„å¤„ç†è¿‡ç¨‹ã€‚æœ€å¸¸ç”¨çš„ç®€å•èº«ä»½è®¤è¯æ–¹å¼æ˜¯ç³»ç»Ÿé€šè¿‡æ ¸å¯¹ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå£ä»¤ï¼Œçœ‹å…¶æ˜¯å¦ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå£ä»¤ä¸€è‡´ï¼Œæ¥åˆ¤æ–­ç”¨æˆ·èº«ä»½æ˜¯å¦æ­£ç¡®ã€‚å¯¹äºé‡‡ç”¨<a href="http://baike.baidu.com/view/5628.htm">æŒ‡çº¹</a>ç­‰ç³»ç»Ÿï¼Œåˆ™å‡ºç¤ºæŒ‡çº¹ï¼›å¯¹äºç¡¬ä»¶Keyç­‰åˆ·å¡ç³»ç»Ÿï¼Œåˆ™éœ€è¦åˆ·å¡ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯æˆæƒ"><a href="#ä»€ä¹ˆæ˜¯æˆæƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯æˆæƒ"></a>ä»€ä¹ˆæ˜¯æˆæƒ</h3><p><code>æˆæƒï¼Œå³è®¿é—®æ§åˆ¶</code>ï¼Œæ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºã€‚ä¸»ä½“è¿›è¡Œèº«ä»½è®¤è¯åéœ€è¦åˆ†é…æƒé™æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æºï¼Œå¯¹äºæŸäº›èµ„æºæ²¡æœ‰æƒé™æ˜¯æ— æ³•è®¿é—®çš„</p>
<hr>
<h2 id="ğŸä»€ä¹ˆæ˜¯shiro"><a href="#ğŸä»€ä¹ˆæ˜¯shiro" class="headerlink" title="ğŸä»€ä¹ˆæ˜¯shiro"></a>ğŸä»€ä¹ˆæ˜¯shiro</h2><blockquote>
<p><strong>Apache Shiroâ„¢</strong> is a powerful and easy-to-use Java security framework that performs authentication, authorization, cryptography, and session management. With Shiroâ€™s easy-to-understand API, you can quickly and easily secure any application â€“ from the smallest mobile applications to the largest web and enterprise applications.  </p>
<p>Shiro æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„Javaå®‰å…¨æ¡†æ¶ï¼Œå®ƒæ‰§è¡Œèº«ä»½éªŒè¯ã€æˆæƒã€åŠ å¯†å’Œä¼šè¯ç®¡ç†ã€‚ä½¿ç”¨Shiroæ˜“äºç†è§£çš„APIï¼Œæ‚¨å¯ä»¥å¿«é€Ÿè½»æ¾åœ°ä¿æŠ¤ä»»ä½•åº”ç”¨ç¨‹åºâ€”ä»æœ€å°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„webå’Œä¼ä¸šåº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<p><code>Shiroæ˜¯apacheæ——ä¸‹ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå®ƒå°†è½¯ä»¶ç³»ç»Ÿçš„å®‰å…¨è®¤è¯ç›¸å…³çš„åŠŸèƒ½æŠ½å–å‡ºæ¥ï¼Œå®ç°ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œæƒé™æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ï¼Œç»„æˆäº†ä¸€ä¸ªé€šç”¨çš„å®‰å…¨è®¤è¯æ¡†æ¶ã€‚</code></p>
<hr>
<h2 id="ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„"><a href="#ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„" class="headerlink" title="ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„"></a>ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„</h2><img src="/2021/06/09/Shiro%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="æ¶æ„å›¾">



<h3 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h3><p><code>Subjectå³ä¸»ä½“</code>ï¼Œå¤–éƒ¨åº”ç”¨ä¸subjectè¿›è¡Œäº¤äº’ï¼Œsubjectè®°å½•äº†å½“å‰æ“ä½œç”¨æˆ·ï¼Œå°†ç”¨æˆ·çš„æ¦‚å¿µç†è§£ä¸ºå½“å‰æ“ä½œçš„ä¸»ä½“ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé€šè¿‡æµè§ˆå™¨è¯·æ±‚çš„ç”¨æˆ·ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºã€‚    Subjectåœ¨shiroä¸­æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº†å¾ˆå¤šè®¤è¯æˆç›¸å…³çš„æ–¹æ³•ï¼Œå¤–éƒ¨ç¨‹åºé€šè¿‡subjectè¿›è¡Œè®¤è¯æˆï¼Œè€Œsubjectæ˜¯é€šè¿‡SecurityManagerå®‰å…¨ç®¡ç†å™¨è¿›è¡Œè®¤è¯æˆæƒ</p>
<h3 id="SecurityManager"><a href="#SecurityManager" class="headerlink" title="SecurityManager"></a>SecurityManager</h3><p><code>SecurityManagerå³å®‰å…¨ç®¡ç†å™¨</code>ï¼Œå¯¹å…¨éƒ¨çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ï¼Œå®ƒæ˜¯shiroçš„æ ¸å¿ƒï¼Œè´Ÿè´£å¯¹æ‰€æœ‰çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ã€‚é€šè¿‡SecurityManagerå¯ä»¥å®Œæˆsubjectçš„è®¤è¯ã€æˆæƒç­‰ï¼Œå®è´¨ä¸ŠSecurityManageræ˜¯é€šè¿‡Authenticatorè¿›è¡Œè®¤è¯ï¼Œé€šè¿‡Authorizerè¿›è¡Œæˆæƒï¼Œé€šè¿‡SessionManagerè¿›è¡Œä¼šè¯ç®¡ç†ç­‰ã€‚</p>
<p><code>SecurityManageræ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿äº†Authenticator, Authorizer, SessionManagerè¿™ä¸‰ä¸ªæ¥å£ã€‚</code></p>
<h3 id="Authenticator"><a href="#Authenticator" class="headerlink" title="Authenticator"></a>Authenticator</h3><p><code>Authenticatorå³è®¤è¯å™¨</code>ï¼Œå¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œè®¤è¯ï¼ŒAuthenticatoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œshiroæä¾›ModularRealmAuthenticatorå®ç°ç±»ï¼Œé€šè¿‡ModularRealmAuthenticatoråŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³å¤§å¤šæ•°éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¤è¯å™¨ã€‚</p>
<h3 id="Authorizer"><a href="#Authorizer" class="headerlink" title="Authorizer"></a>Authorizer</h3><p><code>Authorizerå³æˆæƒå™¨</code>ï¼Œç”¨æˆ·é€šè¿‡è®¤è¯å™¨è®¤è¯é€šè¿‡ï¼Œåœ¨è®¿é—®åŠŸèƒ½æ—¶éœ€è¦é€šè¿‡æˆæƒå™¨åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æ­¤åŠŸèƒ½çš„æ“ä½œæƒé™ã€‚</p>
<h3 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a>Realm</h3><p><code>Realmå³é¢†åŸŸ</code>ï¼Œç›¸å½“äºdatasourceæ•°æ®æºï¼ŒsecurityManagerè¿›è¡Œå®‰å…¨è®¤è¯éœ€è¦é€šè¿‡Realmè·å–ç”¨æˆ·æƒé™æ•°æ®ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·èº«ä»½æ•°æ®åœ¨æ•°æ®åº“é‚£ä¹ˆrealmå°±éœ€è¦ä»æ•°æ®åº“è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚</p>
<ul>
<li>â€‹    æ³¨æ„ï¼šä¸è¦æŠŠrealmç†è§£æˆåªæ˜¯ä»æ•°æ®æºå–æ•°æ®ï¼Œåœ¨realmä¸­è¿˜æœ‰è®¤è¯æˆæƒæ ¡éªŒçš„ç›¸å…³çš„ä»£ç ã€‚</li>
</ul>
<h3 id="SessionManager"><a href="#SessionManager" class="headerlink" title="SessionManager"></a>SessionManager</h3><p><code>sessionManagerå³ä¼šè¯ç®¡ç†</code>ï¼Œshiroæ¡†æ¶å®šä¹‰äº†ä¸€å¥—ä¼šè¯ç®¡ç†ï¼Œå®ƒä¸ä¾èµ–webå®¹å™¨çš„sessionï¼Œæ‰€ä»¥shiroå¯ä»¥ä½¿ç”¨åœ¨éwebåº”ç”¨ä¸Šï¼Œä¹Ÿå¯ä»¥å°†åˆ†å¸ƒå¼åº”ç”¨çš„ä¼šè¯é›†ä¸­åœ¨ä¸€ç‚¹ç®¡ç†ï¼Œæ­¤ç‰¹æ€§å¯ä½¿å®ƒå®ç°å•ç‚¹ç™»å½•ã€‚</p>
<h3 id="SessionDAO"><a href="#SessionDAO" class="headerlink" title="SessionDAO"></a>SessionDAO</h3><p><code>SessionDAOå³ä¼šè¯dao</code>ï¼Œæ˜¯å¯¹sessionä¼šè¯æ“ä½œçš„ä¸€å¥—æ¥å£ï¼Œæ¯”å¦‚è¦å°†sessionå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡jdbcå°†ä¼šè¯å­˜å‚¨åˆ°æ•°æ®åº“ã€‚</p>
<h3 id="CacheManager"><a href="#CacheManager" class="headerlink" title="CacheManager"></a>CacheManager</h3><p><code>CacheManagerå³ç¼“å­˜ç®¡ç†</code>ï¼Œå°†ç”¨æˆ·æƒé™æ•°æ®å­˜å‚¨åœ¨ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<h3 id="Cryptography"><a href="#Cryptography" class="headerlink" title="Cryptography"></a>Cryptography</h3><p>â€‹    <code>Cryptographyå³å¯†ç ç®¡ç†</code>ï¼Œshiroæä¾›äº†ä¸€å¥—åŠ å¯†/è§£å¯†çš„ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘ã€‚æ¯”å¦‚æä¾›å¸¸ç”¨çš„æ•£åˆ—ã€åŠ /è§£å¯†ç­‰åŠŸèƒ½ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Shiro</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring5(ä¸€)</title>
    <url>/2021/04/22/Spring5%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šåœ¨æˆ‘çœ‹æ¥ ï¼Œ æ‰€æœ‰æ¡†æ¶çš„äº§ç”Ÿéƒ½æ¥è‡ªäºå¯¹ä»£ç å¤ç”¨ç‡ä»¥åŠæé«˜å¼€å‘æ•ˆç‡å’Œå¯æ‹“å±•æ€§ä»¥åŠé«˜æ•ˆæ€§èƒ½ä¸ºè¿½æ±‚çš„ï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œå°±æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ¯•ç«Ÿæ—¶é—´å°±æ˜¯é‡‘é’±~~</p>
</blockquote>
<h1 id="ğŸ‡åˆè¯†Spring"><a href="#ğŸ‡åˆè¯†Spring" class="headerlink" title="ğŸ‡åˆè¯†Spring"></a>ğŸ‡åˆè¯†Spring</h1><p>1ã€Springæ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ , å®¹å™¨  .</p>
<p>2ã€Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ , éä¾µå…¥å¼çš„ .</p>
<p><strong>3ã€æ§åˆ¶åè½¬ IoC  , é¢å‘åˆ‡é¢ Aop</strong></p>
<p>4ã€å¯¹äº‹ç‰©çš„æ”¯æŒ , å¯¹æ¡†æ¶çš„æ”¯æŒ</p>
<p>â€¦â€¦.</p>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<p><strong>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚</strong></p>
<p>Spring æ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œç”± 7 ä¸ªå®šä¹‰è‰¯å¥½çš„æ¨¡å—ç»„æˆã€‚Spring æ¨¡å—æ„å»ºåœ¨æ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šï¼Œæ ¸å¿ƒå®¹å™¨å®šä¹‰äº†åˆ›å»ºã€é…ç½®å’Œç®¡ç† bean çš„æ–¹å¼ .</p>
<p>ç»„æˆ Spring æ¡†æ¶çš„æ¯ä¸ªæ¨¡å—ï¼ˆæˆ–ç»„ä»¶ï¼‰éƒ½å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…ä¸å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—è”åˆå®ç°ã€‚æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒå®¹å™¨</strong>ï¼šæ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨<em>æ§åˆ¶åè½¬</em>ï¼ˆIOCï¼‰ æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</li>
<li><strong>Spring ä¸Šä¸‹æ–‡</strong>ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</li>
<li><strong>Spring AOP</strong>ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½ , é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†ä»»ä½•æ”¯æŒ AOPçš„å¯¹è±¡ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ–ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</li>
<li><strong>Spring DAO</strong>ï¼šJDBC DAO æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘ JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring ORM</strong>ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº† ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ JDOã€Hibernate å’Œ iBatis SQL Mapã€‚æ‰€æœ‰è¿™äº›éƒ½éµä» Spring çš„é€šç”¨äº‹åŠ¡å’Œ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring Web æ¨¡å—</strong>ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼ŒSpring æ¡†æ¶æ”¯æŒä¸ Jakarta Struts çš„é›†æˆã€‚Web æ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚</li>
<li><strong>Spring MVC æ¡†æ¶</strong>ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚</li>
</ul>
<h1 id="ğŸŠæ§åˆ¶åè½¬-ï¼ˆIOCï¼‰"><a href="#ğŸŠæ§åˆ¶åè½¬-ï¼ˆIOCï¼‰" class="headerlink" title="ğŸŠæ§åˆ¶åè½¬ ï¼ˆIOCï¼‰"></a>ğŸŠæ§åˆ¶åè½¬ ï¼ˆIOCï¼‰</h1><p>**ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿåœ¨<code>Java</code> ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ‘ä»¬é€šå¸¸é€šè¿‡ç›´æ¥ <code>new</code> å‡ºç›¸åº”çš„å¯¹è±¡ ï¼Œè¿™éœ€è¦æˆ‘ä»¬ç›´æ¥ç¼–å†™æºä»£ç .è€Œæ§åˆ¶åè½¬å°±æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä»¥åŠåˆ›å»ºä»€ä¹ˆå¯¹è±¡åˆ¤æ–­äº¤ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸éœ€è¦æˆ‘ä»¬æ¥åˆ¤æ–­ï¼Œæˆ‘ä»¬åªéœ€è¦ä»ç¬¬ä¸‰æ–¹å–å‡ºå³å¯ï¼Œè¿™å°±æ˜¯æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œç”¨ <code>OOP</code>ï¼ˆé¢å‘å¯¹è±¡ï¼‰çš„æ€æƒ³æ¥è¯´ï¼Œå°±æ˜¯å°†å®ç°ç±»è¿›ä¸€æ­¥æŠ½è±¡åŒ–ï¼Œä½¿å®ç°ç±»æ›´å…·æœ‰å…¼å®¹æ€§. çœ‹äº†ä»¥ä¸‹çš„ä¾‹å­å†å›è¿‡å¤´çœ‹ï¼Œå°±ä¼šæ˜ç™½äº† **</p>
<p>æ–°å»ºä¸€ä¸ªç©ºç™½çš„mavené¡¹ç›®</p>
<blockquote>
<p>åˆ†æå®ç°</p>
</blockquote>
<p>æˆ‘ä»¬å…ˆç”¨æˆ‘ä»¬åŸæ¥çš„æ–¹å¼å†™ä¸€æ®µä»£ç  .</p>
<p>1ã€å…ˆå†™ä¸€ä¸ªUserDaoæ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å†å»å†™Daoçš„å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ç„¶åå»å†™UserServiceçš„æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€æœ€åå†™Serviceçš„å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   UserService service = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">   service.getUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯æˆ‘ä»¬åŸæ¥çš„æ–¹å¼ , å¼€å§‹å¤§å®¶ä¹Ÿéƒ½æ˜¯è¿™ä¹ˆå»å†™çš„å¯¹å§ . é‚£æˆ‘ä»¬ç°åœ¨ä¿®æ”¹ä¸€ä¸‹ .</p>
<p>æŠŠUserdaoçš„å®ç°ç±»å¢åŠ ä¸€ä¸ª .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoMySqlImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;MySqlè·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç´§æ¥ç€æˆ‘ä»¬è¦å»ä½¿ç”¨MySqlçš„è¯ , æˆ‘ä»¬å°±éœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoMySqlImpl();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å‡è®¾, æˆ‘ä»¬å†å¢åŠ ä¸€ä¸ªUserdaoçš„å®ç°ç±» .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoOracleImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;Oracleè·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨Oracle , åˆéœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç° . å‡è®¾æˆ‘ä»¬çš„è¿™ç§éœ€æ±‚éå¸¸å¤§ , è¿™ç§æ–¹å¼å°±æ ¹æœ¬ä¸é€‚ç”¨äº†, ç”šè‡³åäººç±»å¯¹å§ , æ¯æ¬¡å˜åŠ¨ , éƒ½éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç  . è¿™ç§è®¾è®¡çš„è€¦åˆæ€§å¤ªé«˜äº†, ç‰µä¸€å‘è€ŒåŠ¨å…¨èº« .</p>
<p><strong>é‚£æˆ‘ä»¬å¦‚ä½•å»è§£å†³å‘¢ ?</strong> </p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°ä»–çš„åœ°æ–¹ , ä¸å»å®ç°å®ƒ , è€Œæ˜¯ç•™å‡ºä¸€ä¸ªæ¥å£ , åˆ©ç”¨set , æˆ‘ä»¬å»ä»£ç é‡Œä¿®æ”¹ä¸‹ .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="comment">// åˆ©ç”¨setå®ç°</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å»æˆ‘ä»¬çš„æµ‹è¯•ç±»é‡Œ , è¿›è¡Œæµ‹è¯• ;</p>
<p>ä½¿ç”¨ <code>Spring</code> è¿‡åï¼Œä¹Ÿä¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   UserServiceImpl service = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">   service.setUserDao( <span class="keyword">new</span> UserDaoMySqlImpl() );</span><br><span class="line">   service.getUser();</span><br><span class="line">   <span class="comment">//é‚£æˆ‘ä»¬ç°åœ¨åˆæƒ³ç”¨Oracleå»å®ç°å‘¢</span></span><br><span class="line">   service.setUserDao( <span class="keyword">new</span> UserDaoOracleImpl() );</span><br><span class="line">   service.getUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤§å®¶å‘ç°äº†åŒºåˆ«æ²¡æœ‰ ? å¯èƒ½å¾ˆå¤šäººè¯´æ²¡å•¥åŒºåˆ« . ä»–ä»¬å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜åŒ– , å¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¸€æ ·äº† . ä»”ç»†å»æ€è€ƒä¸€ä¸‹ , ä»¥å‰æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç”±ç¨‹åºå»è¿›è¡Œæ§åˆ¶åˆ›å»º , è€Œç°åœ¨æ˜¯ç”±æˆ‘ä»¬è‡ªè¡Œæ§åˆ¶åˆ›å»ºå¯¹è±¡ , æŠŠä¸»åŠ¨æƒäº¤ç»™äº†è°ƒç”¨è€… . ç¨‹åºä¸ç”¨å»ç®¡æ€ä¹ˆåˆ›å»º,æ€ä¹ˆå®ç°äº† . å®ƒåªè´Ÿè´£æä¾›ä¸€ä¸ªæ¥å£ .</p>
<p>è¿™ç§æ€æƒ³ , ä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ , æˆ‘ä»¬ç¨‹åºå‘˜ä¸å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº† , æ›´å¤šçš„å»å…³æ³¨ä¸šåŠ¡çš„å®ç° . è€¦åˆæ€§å¤§å¤§é™ä½ . è¿™ä¹Ÿå°±æ˜¯IOCçš„åŸå‹ !</p>
<h1 id="ğŸSpringä¹‹é…ç½®æ–‡ä»¶"><a href="#ğŸSpringä¹‹é…ç½®æ–‡ä»¶" class="headerlink" title="ğŸSpringä¹‹é…ç½®æ–‡ä»¶"></a>ğŸSpringä¹‹é…ç½®æ–‡ä»¶</h1><p>åˆ›å»ºä¸€ä¸ª <code>maven</code> é¡¹ç›® ï¼Œ å¯¼å…¥ <code>Spring</code>çš„ä¾èµ–åŒ… ï¼Œ è¿™é‡Œé€‰æ‹©å¯¼å…¥ä¸€ä¸ªä¾èµ– <code>Spring</code>çš„åŒ…ï¼Œå› ä¸º <code>Spring</code>çš„ä¾èµ–åŒ…æ¯”è¾ƒå¤šï¼Œè¿™æ ·å¯¼å…¥æ¯”è¾ƒæ–¹ä¾¿,ä¸‹é¢ç»™å‡ºä¾èµ–åæ ‡ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™ä¸€ä¸ªå®ä½“ç±» <code>User</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œè¿ç”¨äº†lombokç®€åŒ–å¼€å‘é¡ºå¸¦ç»™å‡ºç›¸å…³ä¾èµ–</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">		&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;1.18.4&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String , Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> Product product;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> Properties properties;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String pname;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™ <code>applicationContext.xml</code> æ–‡æœ¬ä¹Ÿå°±æ˜¯<code>Spring</code>æ–‡ä»¶ ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å‘½åï¼Œåœ¨<code>idea</code>ä¸­éœ€è¦è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š</li>
</ul>
<img src="/2021/04/22/Spring5%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="å›¾ç‰‡">

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--beanå°±æ˜¯javaå¯¹è±¡,ç”±Springåˆ›å»ºå’Œç®¡ç†--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   id æ˜¯beançš„æ ‡è¯†ç¬¦,è¦å”¯ä¸€,å¦‚æœæ²¡æœ‰é…ç½®id,nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">   å¦‚æœé…ç½®id,åˆé…ç½®äº†name,é‚£ä¹ˆnameæ˜¯åˆ«å</span></span><br><span class="line"><span class="comment">   nameå¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å,å¯ä»¥ç”¨é€—å·,åˆ†å·,ç©ºæ ¼éš”å¼€</span></span><br><span class="line"><span class="comment">   å¦‚æœä¸é…ç½®idå’Œname,å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·å–å¯¹è±¡;</span></span><br><span class="line"><span class="comment">   classæ˜¯beançš„å…¨é™å®šå=åŒ…å+ç±»å</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--å¯ä»¥å–åˆ«åï¼Œåœ¨æµ‹è¯•ç¨‹åºä¸­å¯ä»¥é€šè¿‡åˆ«åæ¥è·å–å¯¹è±¡--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--name ä¹Ÿç›¸å½“äºæ˜¯å–åˆ«å å¯ä»¥å–å¤šä¸ª å¯ä»¥ç”¨å¾ˆå¤šç¬¦å·è¿›è¡Œåˆ†éš” å¦‚ç©ºæ ¼ é€—å·  åˆ†å·ç­‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--classç”¨äºè¿æ¥å®ä½“ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--å¯¹å±æ€§è¿›è¡Œèµ‹å€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;éš”å£è€ç‹&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Mapå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;First&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•1ing&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;Second&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•2ing&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        æ•°ç»„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        List--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>23333<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>66666<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        set--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Product å¯¹å®ä½“ç±»è¿›è¡Œåˆå§‹åŒ–èµ‹å€¼--&gt;</span></span><br><span class="line">        			<span class="comment">&lt;!--refæŒ‡å‘ä¸€ä¸ªbeanï¼ˆå¯¹è±¡ï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;product&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;addr&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--Propertieså±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span>å¼ ä¸‰<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å¹´é¾„&quot;</span>&gt;</span>18<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Product&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¹¦&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¿›è¡Œæµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        User user = (User) context.getBean(<span class="string">&quot;user2&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>è¾“å‡º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User(</span><br><span class="line">    name=éš”å£è€ç‹, age=<span class="number">18</span>, </span><br><span class="line">    map=&#123;First=æµ‹è¯•1ing, Second=æµ‹è¯•2ing&#125;, </span><br><span class="line">    product=Product(pname=ä¹¦, price=<span class="number">100</span>, num=<span class="number">100</span>), </span><br><span class="line">    list=[<span class="number">23333</span>, <span class="number">66666</span>], </span><br><span class="line">    set=[LOL], </span><br><span class="line">    books=[è¥¿æ¸¸è®°, çº¢æ¥¼æ¢¦],</span><br><span class="line">    properties=&#123;å§“å=å¼ ä¸‰, å¹´é¾„=<span class="number">18</span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>è‹¥æœå«æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨<code>importå¯¼å…¥</code>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;è·¯å¾„&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring5</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootï¼ˆä¸€ï¼‰:Hello World</title>
    <url>/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ"><a href="#ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ" class="headerlink" title="ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ"></a>ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ</h1><blockquote>
<p>å‰è¨€ï¼šåœ¨å­¦å®Œ Spring + SpringMVC + Mybatis ä¹‹åè¿›è¡Œäº† SSMæ•´åˆé¡¹ç›®çš„æ­å»ºï¼Œæ­å»ºé¡¹ç›®æœ€èŠ±è´¹æ—¶é—´çš„å…¶å®æ˜¯åœ¨å„ç§çš„é…ç½®æ–‡ä»¶ä¸Šï¼Œæ¯”å¦‚mybatis-config.xml å’Œ Springä¸­çš„applicationContext.xml ä»¥åŠ SpringMVCä¸­ Web.xml éƒ½æœ‰å›ºå®šçš„æ–‡ä»¶å¤´ç­‰ç­‰å†…å®¹ï¼Œæ¯æ¬¡å†™éƒ½è¿˜è¦å»åˆ«å¤„å¤åˆ¶ç²˜è´´ï¼Œéš¾æã€‚å…‰æ˜¯å»ºä¸ªæ–‡ä»¶ä¹‹åçš„å¤åˆ¶ç²˜è´´å°±å·²ç»è®©æˆ‘å¤´å¤§äº†ï¼Œæœ€éš¾æçš„è¿˜æ˜¯Springä¸­æ–‡ä»¶é…ç½®æ–‡ä»¶ä¸­ä¸€äº›å°ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šSqlsessionFactory ä»¥åŠ dao å±‚è‡ªåŠ¨æ¥å£æ‰«æå™¨ï¼Œå®Œå…¨å¯ä»¥è¯´æ˜¯å›ºå®šå†™æ³•ï¼ŒSpringMVCçš„é…ç½®ä¸­éœ€è¦é…ç½®è§†å›¾è§£æå™¨ï¼Œä»¥åŠäº‹ç‰©å¤„ç†å™¨ï¼Œweb.xmlä¸­éœ€è¦é…ç½®è¯·æ±‚è½¬å‘å™¨å’Œèµ„æºè¿‡æ»¤ï¼Œé…ç½®è¿‡ç¨‹å‡ ä¹å®Œå…¨é¢å‘å¤åˆ¶ç²˜è´´ï¼Œç¹çä¸”å†—æ‚ï¼Œä¹Ÿéå¸¸å®¹æ˜“å‡ºé”™ï¼Œæˆ‘æ•´åˆçš„SSMçš„é¡¹ç›®è‡³ä»Šæ²¡æœ‰è·‘èµ·æ¥ï¼ŒDebugäº†ä¸€ä¸ªå¤šæ˜ŸæœŸæ— æœï¼Œä»Giteeä¸Šæ‰’ä¸‹æ¥åˆ«äººçš„é¡¹ç›®è·‘ï¼Œèƒ½è·‘ï¼Œæˆ‘çš„å°±æ˜¯è·‘ä¸èµ·æ¥ï¼Œé‚£å‡ å¤©æˆ‘çœŸæ˜¯åšæ¢¦éƒ½åœ¨æƒ³é…ç½®æ–‡ä»¶å“ªé‡Œå‡ºé”™äº†QAQ</p>
</blockquote>
<p>æ¥ä¸‹ï¼Œè¿›å…¥æ­£é¢˜ï¼š</p>
<p>â€‹        SpringBootçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒæŠŠé…ç½®ç®€åŒ–åˆ°å‡ ä¹æ²¡æœ‰ï¼Œå°±è¿Tomcatéƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å»é…ç½®äº†ï¼Œä¸å¾—ä¸è¯´ï¼ŒSpringBootæ°¸è¿œæ»´ç¥.æ¥ä¸‹æ¥æˆ‘å°†æ¼”ç¤ºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpringBooté¡¹ç›®åˆ°å¯åŠ¨çš„å…¨è¿‡ç¨‹.</p>
<p><strong>åœ¨æ­¤ä¹‹å‰ï¼Œä»‹ç»ä¸€ä¸‹SpringBootçš„ç›¸å…³ç‰¹ç‚¹ï¼š</strong></p>
<p>   1.<strong>åˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ç¨‹åº</strong></p>
<ol start="2">
<li><p><strong>åµŒå…¥çš„Tomcatï¼Œæ— éœ€éƒ¨ç½²WARæ–‡ä»¶</strong></p>
</li>
<li><p><strong>ç®€åŒ–Mavené…ç½®</strong></p>
</li>
<li><p><strong>è‡ªåŠ¨é…ç½®Spring</strong></p>
</li>
<li><p><strong>æä¾›ç”Ÿäº§å°±ç»ªå‹åŠŸèƒ½ï¼Œå¦‚æŒ‡æ ‡ï¼Œå¥åº·æ£€æŸ¥å’Œå¤–éƒ¨é…ç½®</strong></p>
</li>
<li><p>**ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆå¹¶ä¸”å¯¹XMLä¹Ÿæ²¡æœ‰é…ç½®è¦æ±‚ **</p>
</li>
</ol>
<hr>
<p>æ¥ä¸‹æ¥ä½“éªŒä¸€ä¸‹å’¯ï¼š</p>
<ul>
<li>é€šè¿‡IDEAåˆ›å»ºé¡¹ç›®</li>
</ul>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="creat">



<p>ç‚¹å‡»**<code>Next</code>**ï¼Œä¸‹ä¸€æ­¥</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="create">



<p>ç‚¹å‡» <strong><code>Next</code></strong> ï¼Œä¸‹ä¸€æ­¥</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="creat">





<p>ç‚¹å‡» <strong><code>Next</code></strong> ï¼Œä¸‹ä¸€æ­¥ï¼Œåé¢å°±æ˜¯å¡«å†™é¡¹ç›®åç§°ï¼Œè¿™é‡Œå°±ç•¥è¿‡äº†ï¼Œå¿«è¿›åˆ°åˆ›å»ºå</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="create">



<ul>
<li>æ¥ä¸‹æ¥ç¼–å†™ <code>Controller</code> å±‚ï¼Œæ³¨æ„ï¼Œè¦åœ¨DemoApplication.javaçš„åŒç›®å½•ä¸‹åˆ›å»ºåŒ…ä¸‹çš„javaæ–‡ä»¶æˆ–è€…javaæ–‡ä»¶æ‰èƒ½è¢«æ‰«æåˆ°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºä¸ä¼šè·³è½¬JSPã€HTML è€Œæ˜¯ç›´æ¥å°†è¿”å›çš„å†…å®¹å†™å…¥ Httpå“åº”åŒ…ä¸­çš„å“åº”ä½“ä¸­,ç›´æ¥å°†å†…å®¹å‘ˆç°åœ¨é¡µé¢ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="comment">//@Controller</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloSpringBoot</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨äºå»ºç«‹è¯·æ±‚URLå’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå°†è¯¥æ–¹æ³•æ˜ å°„åˆ°è¿™ä¸ªurlè·¯å¾„ä¸Š</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello SpringBoot !&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥å¯åŠ¨é¡¹ç›®äº†ï¼ŒSpringBootä¸ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¾“å…¥URL.</p>
<p>æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/hello</code></p>
</li>
</ul>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="create">



<p>ä¼šå‘ç°ï¼Œä»æ¥åˆ°å°¾æˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™éœ€è¦è¿›è¡Œé…ç½®ï¼Œåˆ›å»ºå¥½ååªéœ€è¦ç¼–å†™ä¸šåŠ¡é€»è¾‘å³å¯è¿è¡Œ.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(ä¸ƒ):è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£</title>
    <url>/2021/06/23/SpringBoot%EF%BC%88%E4%B8%83%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†"><a href="#ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†" class="headerlink" title="ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†"></a>ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†</h1><p><code>SpringBoot</code>ä¸­çš„ä¸€å¤§ç‰¹è‰²ä¸ºè‡ªåŠ¨é…ç½®(åŒ…æ‹¬åŠ¨æ€é…ç½®)ï¼Œå…¶åº•å±‚å®ç°åŸç†ä¾æ‰˜äº<code>springFramework</code>ä¸­çš„<code>condition</code>æ¥å£ç±»ï¼Œåœ¨<code>SpringBoot</code>çš„æºç ä¸­ï¼Œéšå¤„å¯è§ç±»ä¼¼äº<code>@ConditionalOnBean</code>è¿™æ ·ç±»ä¼¼çš„æ³¨è§£ï¼Œå…¶ä¾èµ–çš„æ¡ä»¶ç±»ä¸º<code>OnBeanCondition</code>.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨åœ¨ç±»ä¸Š å’Œ æ–¹æ³•ä¸Š</span></span><br><span class="line"><span class="meta">@Target(&#123; ElementType.TYPE, ElementType.METHOD &#125;)</span></span><br><span class="line">/è¿è¡Œæ—¶æœ‰æ•ˆ</span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">//ä¸javadocæ–‡æ¡£æœ‰å…³</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">//å½“OnBeanConditionåˆ¤æ–­æœ‰æ•ˆ(è¿”å›true)æ—¶å¯ç”¨</span></span><br><span class="line"><span class="meta">@Conditional(OnBeanCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ConditionalOnBean &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç±»ä¼¼çš„è¿˜æœ‰ä»¥ä¸‹æ³¨è§£:</p>
<table>
<thead>
<tr>
<th align="center">åºå·</th>
<th align="center">æ³¨è§£</th>
<th align="center">æ¡ä»¶ç±»</th>
<th align="center">è¿”å›trueçš„æ¡ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">@ConditionalOnBean</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æœ‰æŒ‡å®šbeançš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">@ConditionalOnMissingBean</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æ²¡æœ‰æŒ‡å®šbeançš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">@ConditionalOnSingleCandidate</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æŒ‡å®šçš„beanåªæœ‰ä¸€ä¸ªæ—¶ä¸ºtrue</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">@ConditionalOnClass</td>
<td align="center">OnClassCondition</td>
<td align="center">å½“ç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šç±»çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">@ConditionalOnMissingClass</td>
<td align="center">OnClassCondition</td>
<td align="center">å½“ç±»è·¯å¾„ä¸‹æ²¡æœ‰æŒ‡å®šç±»çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">@ConditionalOnProperty</td>
<td align="center">OnPropertyCondition</td>
<td align="center">å½“æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">@ConditionalOnResource</td>
<td align="center">OnResourceCondition</td>
<td align="center">ç±»è·¯å¾„æœ‰æŒ‡å®šçš„å€¼çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">@ConditionalOnExpression</td>
<td align="center">OnExpressionCondition</td>
<td align="center">åŸºäºspringELè¡¨è¾¾å¼åˆ¤æ–­æ˜¯å¦ä¸ºtrue</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">@ConditionalOnJava</td>
<td align="center">OnJavaCondition</td>
<td align="center">åŸºäºJavaç‰ˆæœ¬è¿›è¡Œåˆ¤æ–­ï¼Œæ»¡è¶³ç‰ˆæœ¬è¦æ±‚ä¸ºtrue</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">@ConditionalOnNotWebApplication</td>
<td align="center">OnWebApplicationCondition</td>
<td align="center">å½“é¡¹ç›®ä¸æ˜¯webé¡¹ç›®çš„æ¡ä»¶ä¸‹ä¸ºtrue</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">@ConditionalOnWebApplication</td>
<td align="center">OnWebApplicationCondition</td>
<td align="center">å½“é¡¹ç›®æ—¶webé¡¹ç›®çš„æ¡ä»¶ä¸‹ä¸ºtrue</td>
</tr>
</tbody></table>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨<code>application.properties</code>ä¸­è¿›è¡Œä¸€äº›é…ç½®ï¼Œé‚£ä¹ˆè¿™æ˜¯å¦‚ä½•è¿›è¡ŒåŠ¨æ€è¯»å–é…ç½®çš„å‘¢ï¼Ÿ</p>
<p>é‚£å°±è¦ä½¿ç”¨åˆ°<code>@ConditionalOnProperty ã€@ConfigurationProperties</code> ç­‰ï¼Œåœ¨å¯åŠ¨<code>SpringBoot</code>çš„æ—¶å€™ä¼šå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œæ‰«æï¼Œå¦‚æœæ‰«æåˆ°å¯¹åº”çš„é…ç½®ï¼Œåˆ™å¯¹è¿™äº›é…ç½®è¿›è¡ŒåŠ è½½ï¼Œå½“ç„¶ï¼Œè¿™äº›é…ç½®ä¹Ÿæœ‰éƒ¨åˆ†ä¹Ÿæœ‰éœ€è¦å­˜åœ¨é»˜è®¤å€¼ï¼Œå“ªæ€•ä¸è¿›è¡Œæ˜¾ç¤ºçš„é…ç½®ï¼Œä¹Ÿå¯ä»¥è¿›è¡ŒåŠ è½½é…ç½®.</p>
<h1 id="ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»"><a href="#ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»" class="headerlink" title="ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»"></a>ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»</h1><p>ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰æ¡ä»¶ç±»ï¼Ÿä¸€æ¥ï¼Œå¯ä»¥åŠ æ·±å¯¹<code>SpringBoot</code>è‡ªåŠ¨é…ç½®åŸç†.äºŒæ¥ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡éœ€æ±‚ä¸­è‡ªå·±å®šåˆ¶åŒ–é…ç½®ï¼ŒåŠ å¿«å¼€å‘æ•ˆç‡.æ€»ä¹‹ï¼Œä¸ç®¡æ€ä¹ˆæ ·ï¼Œå°è¯•è‡ªå·±å®ç°ä¸€éå…¶å®ä¹ŸæŒºæœ‰æ„æ€çš„hhh.</p>
<ul>
<li>è‡ªå®šä¹‰æ¥å£ç±»(æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è¿›è¡Œç±»æŠ½è±¡ï¼Œä¾¿äºåˆ¤æ–­)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MessagePrint</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMessage</span> <span class="keyword">implements</span> <span class="title">MessagePrint</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶å­˜åœ¨ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YourMessage</span> <span class="keyword">implements</span> <span class="title">MessagePrint</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conditionæ¡ä»¶ç±»å®ç°conditionæ¥å£(ç”¨äºè¿›è¡Œæ¡ä»¶åˆ¤æ–­)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext conditionContext, </span></span></span><br><span class="line"><span class="function"><span class="params">                           AnnotatedTypeMetadata annotatedTypeMetadata)</span> </span>&#123;</span><br><span class="line">        		<span class="comment">//ä¸Šä¸‹æ–‡.èµ„æºåŠ è½½å™¨.è·å–èµ„æº(&quot;èµ„æºå&quot;).æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">return</span> conditionContext.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YourCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext conditionContext,</span></span></span><br><span class="line"><span class="function"><span class="params">                           AnnotatedTypeMetadata annotatedTypeMetadata)</span> </span>&#123;</span><br><span class="line">        		<span class="comment">//ä¸Šä¸‹æ–‡.èµ„æºåŠ è½½å™¨.è·å–èµ„æº(&quot;èµ„æºå&quot;).æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">return</span> !conditionContext.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è‡ªåŠ¨æ³¨å…¥é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®ç±»ï¼Œè¡¨ç¤ºæ³¨å…¥iocå®¹å™¨ä¸­ï¼Œå­˜åœ¨äºé…ç½®æ–‡ä»¶çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//å½“MyCondition åˆ¤æ–­ä¸º true çš„æ—¶å€™ å‘å®¹å™¨ä¸­æ³¨å…¥ MyMessage</span></span><br><span class="line">    <span class="meta">@Conditional(MyCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MessagePrint <span class="title">myMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//å½“YourCondition åˆ¤æ–­ä¸º true çš„æ—¶å€™ å‘å®¹å™¨ä¸­æ³¨å…¥ YourMessage</span></span><br><span class="line">    <span class="meta">@Conditional(YourCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MessagePrint <span class="title">yourMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> YourMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//è·å–æ³¨è§£é…ç½®ä¸Šä¸‹æ–‡</span></span><br><span class="line">      AnnotationConfigApplicationContext context;</span><br><span class="line">      <span class="comment">//è·å–æ¡ä»¶é…ç½®ç±»</span></span><br><span class="line">      context = <span class="keyword">new</span> AnnotationConfigApplicationContext(ConditionConfig.class);</span><br><span class="line">      <span class="comment">//è·å–æ¥å£ç±»(è¿™å°±æ˜¯å†™æ¥å£çš„å¥½å¤„,ä¸éœ€è¦çŸ¥é“è‡ªå®šä¹‰ç±»åæ˜¯ä»€ä¹ˆ,åªéœ€è¦è¯†åˆ«çˆ¶ç±»)</span></span><br><span class="line">      MessagePrint bean = context.getBean(MessagePrint.class);</span><br><span class="line">      System.out.println(bean.showMessage());</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(ä¹):æ—¥å¿—è®°å½•</title>
    <url>/2021/07/27/SpringBoot%EF%BC%88%E4%B9%9D%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Logback"><a href="#Logback" class="headerlink" title="Logback"></a>Logback</h1><p><code>logback</code> ä¸åŒç±»çš„æ—¥å¿—æ¡†æ¶ç›¸æ¯”æ•ˆç‡ä¼¼ä¹é«˜å°†è¿‘ <code>10</code> å€ï¼Œæœ‰ä¸€è¯´ä¸€ï¼Œä¸ç®¡æ˜¯å¦æ˜¯ï¼Œä½œä¸º<code>SpringBoot</code>çš„å¾¡ç”¨æ—¥å¿—æ¡†æ¶ï¼Œèµ·ç ç»™äºˆäº†<code>logback</code>æ€§èƒ½ä¸€å®šçš„è‚¯å®šçš„ï¼Œåç»­ä¹Ÿè¿˜ä¼šå¯¹å…¶å®ƒå¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶è¿›è¡Œä¸€å®šçš„äº†è§£.</p>
<ul>
<li><code>xml</code>é…ç½®</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrue --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ï¼›å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- de<span class="doctag">bug:</span>å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚ --&gt;</span></span><br><span class="line">&lt;configuration</span><br><span class="line">        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">        xsi:noNamespaceSchemaLocation=&quot;http://www.padual.com/java/logback.xsd&quot;</span><br><span class="line">        debug=&quot;false&quot; scan=&quot;true&quot; scanPeriod=&quot;10 second&quot;&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ—¥å¿—è¾“å‡ºç›®å½•æ–‡ä»¶å¤¹ä»¥åŠè¿›è¡Œé‡å‘½å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ROOT&quot;</span> <span class="attr">value</span>=<span class="string">&quot;logs/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ—¥å¿—æ–‡ä»¶å¤§å° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;FILESIZE&quot;</span> <span class="attr">value</span>=<span class="string">&quot;50MB&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®æ—¥å¿—ä¿ç•™çš„æ—¶é—´ï¼Œå•ä½ä¸ºå¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;MAXHISTORY&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ¼å¼åŒ–è¾“å‡ºæ—¥æœŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timestamp</span> <span class="attr">key</span>=<span class="string">&quot;DATETIME&quot;</span> <span class="attr">datePattern</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶å°æ‰“å° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ ¼å¼åŒ–æ—¥å¿—è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">             %-5levelè¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%mè¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦</span></span><br><span class="line"><span class="comment">             %logger&#123;36&#125;è¡¨ç¤ºloggeræ˜¯classçš„å…¨åï¼Œ36è¡¨ç¤ºé™åˆ¶æœ€é•¿å­—ç¬¦</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ERRORæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®å½“å‰æ—¥å¿—æ–‡æ¡£è¾“å‡ºçš„çº§åˆ«ï¼Œåªè®°å½•ERRORçº§åˆ«çš„æ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸå’Œå¤§å°è®°å½•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;ROOT&#125;%d/error.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;MAXHISTORY&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            &lt;timeBasedFileNamingAndTriggeringPolicy</span><br><span class="line">                    class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;FILESIZE&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- WARNæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>WARN<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;ROOT&#125;%d/warn.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;MAXHISTORY&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;FILESIZE&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- INFOæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;ROOT&#125;%d/info.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;MAXHISTORY&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;FILESIZE&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- DEBUGæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;ROOT&#125;%d/debug.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;MAXHISTORY&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            &lt;timeBasedFileNamingAndTriggeringPolicy</span><br><span class="line">                    class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;FILESIZE&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- TRACEæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%-5level] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %logger&#123;36&#125; - %m%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>TRACE<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        &lt;rollingPolicy</span><br><span class="line">                class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;ROOT&#125;%d/trace.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;MAXHISTORY&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            &lt;timeBasedFileNamingAndTriggeringPolicy</span><br><span class="line">                    class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;FILESIZE&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¾“å‡ºsqlç›¸å…³æ—¥å¿—ï¼Œä¸éœ€è¦å¯åˆ é™¤ï¼›additivityï¼šæ˜¯å¦å‘ä¸Šçº§logerä¼ é€’æ‰“å°ä¿¡æ¯ï¼Œé»˜è®¤æ˜¯true--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.spring&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.github.miemiedev.mybatis.paginator&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- loggerè®¾ç½®è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œè¾“å‡ºçº§åˆ«ä¸ºinfo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;TRACE&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å…¨å±€é…ç½®æ–‡ä»¶é…ç½®</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">classpath:logback.xml</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(ä¸‰):æ•°æ®åº“è¿æ¥æ± </title>
    <url>/2021/05/08/SpringBoot%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ"><a href="#ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ"></a>ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ± ï¼Ÿ</strong></p>
<p>â€‹        æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç”¨äºç®¡ç†å¯¹æ•°æ®åº“çš„è¿æ¥ï¼Œç”¨äºå­˜æ”¾å’Œç®¡ç†è¿™äº›è¿æ¥ï¼Œå½“ä½¿ç”¨å®Œè¿™äº›è¿æ¥ä¹‹åä¼šå°†è¿æ¥è¿˜å›æ± ä¸­è€Œä¸æ˜¯ç›´æ¥å…³é—­æ‰ï¼Œå¯ä»¥ç­‰å¾…ä¸‹æ¬¡è¿›è¡Œè¿æ¥å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“è¿æ¥æ± ?</strong></p>
<p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œä¼šå­˜åœ¨å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå¦‚æœæ¯æ¬¡æ“ä½œéƒ½è¦è¿›è¡Œä¸€æ¬¡æ•°æ®åº“è¿æ¥ï¼Œé‚£ä¹ˆæ¶ˆè€—çš„å†…å­˜å’Œèµ„æºååˆ†å·¨å¤§ï¼Œå†åŠ ä¸Šé«˜å¹¶å‘é‡ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œé€ æˆæ— æ³•ä¼°è®¡çš„æŸå¤±.æœ‰äº†æ•°æ®åº“è¿æ¥æ± ä¹‹åï¼Œå¯ä»¥åŠ¨æ€çš„åˆ†é…å·²ç»æœ‰çš„è¿æ¥ï¼Œå¯ä»¥åŠ¨æ€æ§åˆ¶è¿æ¥æ•°é‡ï¼Œåˆç†çš„åˆ†é…è¿æ¥ï¼Œå¤§å¤§æé«˜äº†ä½¿ç”¨ç‡å’Œè¿è¡Œæ•ˆç‡.</p>
</li>
<li><p><strong>æ•°æ®åº“è¿æ¥æ± çš„åº•å±‚åŸç†ï¼Ÿ</strong></p>
<p>â€‹        æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç”¨ <code>Java</code> ä¸­çš„é›†åˆå¯¹è±¡æ¥å®ç° ï¼Œ æ¯”å¦‚ <code>LinkedList</code> ï¼Œåˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ•°ä¸º10ä¸ªï¼Œä¾æ¬¡åŠ å…¥ <code>LinkedList</code>  å½“éœ€è¦æ‰§è¡Œ <code>SQL</code> è¯­å¥çš„æ—¶å€™ï¼Œè¯·æ±‚ä»é›†åˆä¸­è·å¾—è¿æ¥ï¼Œå…ˆè¦åˆ¤æ–­ç›®å‰æ˜¯å¦æœ‰é—²ç½®çš„è¿æ¥ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ç»™è¯·æ±‚å¯¹è±¡ï¼Œæœ¬è´¨å°±æ˜¯å°†è¿æ¥ä»é›†åˆä¸­ç§»é™¤ï¼Œä½¿ç”¨å®Œæ¯•åé‡æ–°åŠ å…¥é›†åˆç­‰å¾…è¯·æ±‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„é—²ç½®çŠ¶æ€ï¼Œå¦‚æœè¯·æ±‚æ—¶æ°å¥½æ²¡æœ‰é—²ç½®çš„è¿æ¥ï¼Œåˆ™è¿›å…¥ç­‰å¾…ï¼Œè¶…è¿‡ç­‰å¾…æ—¶é—´åï¼ŒæŠ›å‡ºå¼‚å¸¸ç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚.</p>
</li>
</ul>
<h1 id="ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± "><a href="#ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± "></a>ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± </h1><p>å¸¸ç”¨çš„æ•°æ®åº“è¿æ¥æ± æœ‰å¦‚ä¸‹å››ç§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">DBCP</th>
<th align="center">Tomcatå†…éƒ¨é›†æˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>C3P0</strong></td>
<td align="center"><strong>æ€§èƒ½è¾ƒå·®æ¶æ„å¤æ‚</strong></td>
</tr>
<tr>
<td align="center"><strong>Druid</strong></td>
<td align="center"><strong>SQLç›‘æ§é»‘åå•æ‹¦æˆªæ€§èƒ½å“è¶Š</strong></td>
</tr>
<tr>
<td align="center"><strong>HikariCP</strong></td>
<td align="center"><strong>æ€§èƒ½æœ€å¼ºç¨³å®šæ€§è¾ƒå¥½screwå†…ç½®ä½¿ç”¨</strong></td>
</tr>
</tbody></table>
<p>â€‹        <code>SpringBoot</code>é»˜è®¤å°†<code>HikariCP</code>ä½œä¸ºé»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± .<code>Java</code> å¸¸ç”¨äºæ„å»ºå¤§å‹çš„ <code>Web</code> é¡¹ç›®ï¼Œåœ¨å­˜åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¿…ç„¶è¦æŒ‘é€‰ä¸€ä¸ªæ€§èƒ½æå¼ºçš„æ•°æ®åº“è¿æ¥æ± è€Œ<code>HikariCP</code>å½“ä¹‹æ— æ„§ä¸ºæ€§èƒ½ä¹‹ç‹.</p>
<h1 id="âœ¨SpringBootä¸­HikariCPé…ç½®"><a href="#âœ¨SpringBootä¸­HikariCPé…ç½®" class="headerlink" title="âœ¨SpringBootä¸­HikariCPé…ç½®"></a>âœ¨SpringBootä¸­HikariCPé…ç½®</h1><p>1.<code>autoCommit</code><br>        è‡ªåŠ¨æäº¤ä»æ± ä¸­è¿”å›çš„è¿æ¥ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚</p>
<p>2.<code>connectionTimeout</code><br>        ç­‰å¾…æ¥è‡ªæ± çš„è¿æ¥çš„æœ€å¤§æ¯«ç§’æ•°ï¼Œé»˜è®¤ä¸º30000ï¼Œå¦‚æœå°äº250æ¯«ç§’ï¼Œåˆ™è¢«é‡ç½®å›30ç§’ã€‚</p>
<p>3.<code>idleTimeout</code><br>        è¿æ¥å…è®¸åœ¨æ± ä¸­é—²ç½®çš„æœ€é•¿æ—¶é—´ï¼Œé»˜è®¤ä¸º600000ï¼Œå³10åˆ†é’Ÿã€‚å¦‚æœ<code>idleTimeout</code>+1ç§’&gt;<code>maxLifetime</code> ä¸” <code>maxLifetime</code>&gt;0ï¼Œåˆ™ä¼šè¢«é‡ç½®ä¸º0ï¼ˆä»£è¡¨æ°¸è¿œä¸ä¼šé€€å‡ºï¼‰ï¼›å¦‚æœ<code>idleTimeout</code>!=0ä¸”å°äº10ç§’ï¼Œåˆ™ä¼šè¢«é‡ç½®ä¸º10ç§’ã€‚åªæœ‰å½“<code>minimumIdle</code>å°äº<code>maximumPoolSize</code>æ—¶ï¼Œè¿™ä¸ªå‚æ•°æ‰ç”Ÿæ•ˆï¼Œå½“ç©ºé—²è¿æ¥æ•°è¶…è¿‡<code>minimumIdle</code>ï¼Œè€Œä¸”ç©ºé—²æ—¶é—´è¶…è¿‡<code>idleTimeout</code>ï¼Œåˆ™ä¼šè¢«ç§»é™¤ã€‚</p>
<p>4.<code>maxLifetime</code><br>        æ± ä¸­è¿æ¥æœ€é•¿ç”Ÿå‘½å‘¨æœŸã€‚é»˜è®¤ä¸º1800000ï¼Œå¦‚æœä¸ç­‰äº0ä¸”å°äº30ç§’åˆ™ä¼šè¢«é‡ç½®å›30åˆ†é’Ÿã€‚</p>
<p>5.<code>minimumIdle</code><br>        æ§åˆ¶è¿æ¥æ± ç©ºé—²è¿æ¥çš„æœ€å°æ•°é‡ï¼Œå½“è¿æ¥æ± ç©ºé—²è¿æ¥å°‘äº<code>minimumIdle</code>ï¼Œè€Œä¸”æ€»å…±è¿æ¥æ•°ä¸å¤§äº<code>maximumPoolSize</code>æ—¶ï¼Œ<code>HikariCP</code>ä¼šå°½åŠ›è¡¥å……æ–°çš„è¿æ¥ã€‚ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œä¸å»ºè®®è®¾ç½®æ­¤å€¼ï¼Œè€Œæ˜¯è®©<code>HikariCP</code>æŠŠè¿æ¥æ± å½“åšå›ºå®šå¤§å°çš„å¤„ç†ï¼Œé»˜è®¤<code>minimumIdle</code>ä¸<code>maximumPoolSize</code>ä¸€æ ·ã€‚å½“<code>minIdle</code>&lt;0æˆ–è€…<code>minIdle</code>&gt;<code>maxPoolSize</code>,åˆ™è¢«é‡ç½®ä¸º<code>maxPoolSize</code>ï¼Œè¯¥å€¼é»˜è®¤ä¸º10ã€‚</p>
<p>6.<code>maximumPoolSize</code><br>        æ± ä¸­æœ€å¤§è¿æ¥æ•°ï¼ŒåŒ…æ‹¬é—²ç½®å’Œä½¿ç”¨ä¸­çš„è¿æ¥ã€‚é»˜è®¤ä¸º10ã€‚å¦‚æœ<code>maxPoolSize</code>å°äº1ï¼Œåˆ™ä¼šè¢«é‡ç½®ã€‚å½“<code>minIdle</code>&lt;=0è¢«é‡ç½®ä¸º<code>DEFAULT_POOL_SIZE</code>åˆ™ä¸º10;å¦‚æœ<code>minIdle</code>&gt;0åˆ™é‡ç½®ä¸º<code>minIdle</code>çš„å€¼ã€‚</p>
<p>7.<code>poolName</code><br>è¿æ¥æ± çš„ç”¨æˆ·å®šä¹‰åç§°ï¼Œä¸»è¦å‡ºç°åœ¨æ—¥å¿—è®°å½•å’ŒJMXç®¡ç†æ§åˆ¶å°ä¸­ä»¥è¯†åˆ«æ± å’Œæ± é…ç½®ã€‚é»˜è®¤ä¸º<code>HikariPool-1</code>ã€‚</p>
<p>8.<code>readOnly</code><br>ä»æ± ä¸­è·å–çš„è¿æ¥æ˜¯å¦é»˜è®¤å¤„äºåªè¯»æ¨¡å¼ã€‚é»˜è®¤ä¸º<code>false</code>ã€‚</p>
<p>9.<code>connection-test-query</code><br>å¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºæ”¯æŒ<code>JDBC4</code>ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ä¸è¦è®¾ç½®æ­¤å±æ€§ã€‚è¿™æ˜¯é’ˆå¯¹ä¸æ”¯æŒ<code>JDBC4</code>çš„â€œä¼ ç»Ÿâ€é©±åŠ¨ç¨‹åº<code>Connection.isValid() API</code>ã€‚è¿™æ˜¯åœ¨è¿æ¥ä»æ± ä¸­è·å¾—è¿æ¥ä»¥ç¡®è®¤ä¸æ•°æ®åº“çš„è¿æ¥ä»ç„¶å­˜åœ¨ä¹‹å‰å°†è¦æ‰§è¡Œçš„æŸ¥è¯¢ã€‚å†ä¸€æ¬¡ï¼Œå°è¯•è¿è¡Œæ²¡æœ‰æ­¤å±æ€§çš„æ± ï¼Œå¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºä¸ç¬¦åˆ<code>JDBC4</code>çš„è¦æ±‚ï¼Œ<code>HikariCP</code>å°†è®°å½•ä¸€ä¸ªé”™è¯¯ä»¥å‘ŠçŸ¥æ‚¨ã€‚ é»˜è®¤å€¼ï¼šæ— </p>
<h1 id="ğŸŠSpringBootä¸­Druidé…ç½®"><a href="#ğŸŠSpringBootä¸­Druidé…ç½®" class="headerlink" title="ğŸŠSpringBootä¸­Druidé…ç½®"></a>ğŸŠSpringBootä¸­Druidé…ç½®</h1><p>1.çº¯é…ç½®æ–‡ä»¶é…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># æ•°æ®æºé…ç½®</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment"># è¿æ¥æ± é…ç½®</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="comment"># åˆå§‹åŒ–å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ¯«ç§’</span></span><br><span class="line">      <span class="attr">time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜æ—¶é—´</span></span><br><span class="line">      <span class="attr">min-evictable-idle-time-millis:</span> <span class="number">300000</span></span><br><span class="line">      <span class="attr">validation-query:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">sys_user</span></span><br><span class="line">      <span class="attr">test-while-idle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-borrow:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># æ‰“å¼€ PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿æ¥ä¸Š PSCache çš„å¤§å°</span></span><br><span class="line">      <span class="attr">pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„ Filterï¼Œå»æ‰åç›‘æ§ç•Œé¢ SQL æ— æ³•ç»Ÿè®¡ï¼Œwall ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">      <span class="comment"># é€šè¿‡ connection-properties å±æ€§æ‰“å¼€ mergeSql åŠŸèƒ½ï¼›æ…¢ SQL è®°å½•</span></span><br><span class="line">      <span class="attr">connection-properties:</span> <span class="string">druid.stat.mergeSql\=true;druid.stat.slowSqlMillis\=5000</span></span><br><span class="line">      <span class="comment"># é…ç½® DruidStatFilter</span></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">.js,*.gif,*.jpg,*.bmp,*.png,*.css,*.ico,/druid/*</span></span><br><span class="line">      <span class="comment"># é…ç½® DruidStatViewServlet</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="comment"># IP ç™½åå•ï¼Œæ²¡æœ‰é…ç½®æˆ–è€…ä¸ºç©ºï¼Œåˆ™å…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        <span class="attr">allow:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">        <span class="comment"># IP é»‘åå•ï¼Œè‹¥ç™½åå•ä¹Ÿå­˜åœ¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨</span></span><br><span class="line">        <span class="attr">deny:</span> <span class="number">192.168</span><span class="number">.31</span><span class="number">.253</span></span><br><span class="line">        <span class="comment"># ç¦ç”¨ HTML ä¸­ Reset All æŒ‰é’®</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment"># ç™»å½•ç”¨æˆ·å/å¯†ç </span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="number">123</span></span><br></pre></td></tr></table></figure>



<p>2.é…ç½®ç±»ç‰ˆæœ¬ï¼š</p>
<p>â€‹    é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="comment"># æ•°æ®æºçš„å…¶ä»–é…ç½®</span></span><br><span class="line">        <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">        <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">        <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">        <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">        <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„ filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢ sql æ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">        <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">        <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>

<p>â€‹    é…ç½®ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.StatViewServlet;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.WebStatFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰å‰ç¼€ä¸ºspring.datasourceä¸‹çš„é…ç½®é¡¹éƒ½åŠ è½½DataSourceä¸­</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean&lt;Servlet&gt; <span class="title">druidServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿›è¡Œ druid ç›‘æ§çš„é…ç½®å¤„ç†</span></span><br><span class="line">        ServletRegistrationBean&lt;Servlet&gt; srb = <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;(<span class="keyword">new</span> StatViewServlet(), <span class="string">&quot;/druid/**&quot;</span>);</span><br><span class="line">        <span class="comment">// ç™½åå•</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;allow&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="comment">// é»‘åå•</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;deny&quot;</span>, <span class="string">&quot;192.168.31.253&quot;</span>);</span><br><span class="line">        <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;loginUsername&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯†ç </span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;loginPassword&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// æ˜¯å¦å¯ä»¥é‡ç½®æ•°æ®æº</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;resetEnable&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> srb;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean&lt;Filter&gt; <span class="title">filterRegistrationBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean&lt;Filter&gt; frb = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;();</span><br><span class="line">        frb.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚è¿›è¡Œç›‘æ§å¤„ç†</span></span><br><span class="line">        frb.addUrlPatterns(<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">        <span class="comment">// æ’é™¤åå•</span></span><br><span class="line">        frb.addInitParameter(<span class="string">&quot;exclusions&quot;</span>, <span class="string">&quot;*.js,*.gif,*.jpg,*.css,/druid/*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> frb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨<code>SpringBoot</code>åå¯åœ¨ <code> http://localhost:8080/druid/login.html</code> ä¸­æŸ¥çœ‹ç›‘æ§ä¿¡æ¯.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(äºŒ):æ•´åˆMybatis</title>
    <url>/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰SpringBoot-Mybatisæ•´åˆ"><a href="#ğŸ‰SpringBoot-Mybatisæ•´åˆ" class="headerlink" title="ğŸ‰SpringBoot-Mybatisæ•´åˆ"></a>ğŸ‰SpringBoot-Mybatisæ•´åˆ</h1><blockquote>
<p>å‰è¨€ï¼šç§‰æŒç€å­¦æŠ€æœ¯å…ˆå­¦ä¼šä½¿ç”¨çš„å†æ·±å…¥å…¶åº•å±‚åŸç†çš„ç†å¿µï¼Œæ¥ç€ä¸Šä¸€ç¯‡æ–‡ç« çš„åˆä½“éªŒï¼Œæƒ³å¿…å·²ç»èƒ½å¤Ÿä½“ä¼šSpringBootçš„å¼ºå¤§äº†ï¼Œæ¥ä¸‹æ¥å°†æ¥ç€ç»§ç»­ä½“éªŒäº†.</p>
</blockquote>
<p>â€‹        å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>SpringBoot</code> çš„å¼ºå¤§ä¹Ÿåœ¨äºå¯ä»¥è·Ÿå„ç§æ¡†æ¶æˆ–è€…æ’ä»¶æ•´åˆï¼Œååˆ†æ–¹ä¾¿ï¼Œå¤§å¤šåªéœ€è¦åœ¨ <code>pom.xml</code> ä¸­å¼•å…¥åæ ‡å³å¯.å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ˜¯å› ä¸º <code>Java</code> çš„ç”Ÿæ€å¤ªä¸°å¯Œäº†ï¼Œä»€ä¹ˆæ ·çš„å·¥å…·éƒ½æœ‰ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œ<code>Java</code> ç¨‹åºå‘˜æˆé•¿ä¸å®¹æ˜“å•Šï¼Œé“é˜»ä¸”é•¿.</p>
<p>æ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜ï¼š</p>
<ul>
<li>åˆ›å»ºé¡¹ç›®ï¼Œç›´æ¥å¿«è¿›åˆ°å¯¹åˆ›å»ºåœºæ™¯çš„é€‰æ‹©</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="create">



<ul>
<li><p>åˆ›å»ºå®Œæ¯•åï¼Œä¸å¦¨æ¥çœ‹ä¸€ä¸‹ <code>pom.xml</code> ä¸­å¢åŠ äº†å“ªé‡Œä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JDBC--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Mybatis-SpringBootæ•´åˆåŒ…ï¼Œå…¶ä¸­åŒ…å«äº†Mybatisæ‰€éœ€è¦çš„åŒ…--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="comment">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="comment">&lt;!--æ•°æ®åº“é©±åŠ¨--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ¥ä¸‹æ¥è§„åˆ’é¡¹ç›®ç›®å½•</p>
</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class title="create">



<ul>
<li>æ¥ä¸‹æ¥å…ˆé…ç½®å¥½æ•°æ®åº“ï¼Œå…ˆå°† <code>IDEA</code> ä¸æ•°æ®åº“è¿æ¥ä¸€ä¸‹ï¼Œæ–¹ä¾¿ç­‰ç­‰å†™å®ä½“ç±»</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class title="create">



<ul>
<li>é…ç½®æ•°æ®åº“ä¿¡æ¯</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/4.png" class title="create">



<ul>
<li>åœ¨ <code>application.yml</code> ä¸­é…ç½®æ•°æ®åº“ä¿¡æ¯</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/bjpowernode?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwe123456</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#ä»¥ä¸‹å†…å®¹å¯ä»¥ä¸é…ï¼Œå°±ä½¿ç”¨é»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†é¡ºå¸¦å·©å›ºä¸€ä¸‹druidçš„ç›¸å…³é…ç½®ï¼Œä»¥åä¼šä¸“é—¨å†™æ–‡ç« æ¥è®°å½•å…¶é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="comment">#2.è¿æ¥æ± é…ç½®</span></span><br><span class="line">      <span class="comment">#åˆå§‹åŒ–è¿æ¥æ± çš„è¿æ¥æ•°é‡ å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment">#é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment">#é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">min-evictable-idle-time-millis:</span> <span class="number">30000</span></span><br><span class="line">      <span class="attr">validation-query:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">      <span class="attr">test-while-idle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-borrow:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCache  å®˜æ–¹å»ºè®®MySQLä¸‹å»ºè®®å…³é—­   ä¸ªäººå»ºè®®å¦‚æœæƒ³ç”¨SQLé˜²ç«å¢™ å»ºè®®æ‰“å¼€</span></span><br><span class="line">      <span class="attr">pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">merge-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">5000</span></span><br><span class="line">      <span class="comment">#3.åŸºç¡€ç›‘æ§é…ç½®</span></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="comment">#è®¾ç½®ä¸ç»Ÿè®¡å“ªäº›URL</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span></span><br><span class="line">        <span class="attr">session-stat-enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">session-stat-max-count:</span> <span class="number">100</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment">#è®¾ç½®ç›‘æ§é¡µé¢çš„ç™»å½•åå’Œå¯†ç </span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">qwe123456</span></span><br><span class="line">        <span class="comment">#deny: 192.168.1.100</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><p>å°Tipså¿«é€Ÿç”Ÿæˆå®ä½“ç±»</p>
<ul>
<li><p>é€‰æ‹©éœ€è¦åˆ›å»ºå®ä½“ç±»å¯¹åº”çš„è¡¨è¿›è¡Œåˆ›å»º</p>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/5.png" class title="create"></li>
</ul>
</li>
<li><p>åˆ›å»ºå¥½å®ä½“ç±»åï¼Œæ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ <code>dao</code> å±‚</p>
</li>
</ul>
<p>è¿™é‡Œç›´æ¥ä½¿ç”¨äº†æ³¨è§£çš„æ–¹å¼ï¼Œä¸»è¦æ˜¯å› ä¸º <code>SQL</code> è¯­å¥æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰å¤æ‚æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿˜æ˜¯å»ºè®®é…ç½®æ–‡ä»¶ä¸æ³¨è§£ç›¸ç»“åˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.soucat.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.soucat.pojo.Users;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œå¦‚æœå†™@Repositoryåˆ™è¿˜è¦è‡ªå·±å®ç°è¿™ä¸ªæ¥å£</span></span><br><span class="line"><span class="comment">//@Repository</span></span><br><span class="line"><span class="comment">//è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œå¯¹è±¡æ¥å£ç±»æ•ˆæœç­‰ä»·äºå†™å®ç°ç±»</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from users&quot;)</span></span><br><span class="line">    <span class="function">List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from users where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="function">Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update users set name = #&#123;name&#125; , pwd = #&#123;pwd&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">updateUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from users where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into users ( id , name , pwd ) values (#&#123;id&#125; , #&#123;name&#125; , #&#123;pwd&#125; )&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">insertUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆ <code>dao</code> å±‚åˆ°æ­¤ç¼–å†™å®Œæ¯•.</p>
<ul>
<li><p>æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ <code>Service </code> å±‚</p>
<p><code>sevice</code> æ¥å£</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">updateUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">insertUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>    sevice</code> æ¥å£å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UsersService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersMapper usersMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.getUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">updateUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.updateUsers(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.deleteUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insertUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.insertUsers(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>æ¥ä¸‹æ¥ç¼–å†™ <code>controller</code> å±‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersService usersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Users&gt; list = usersService.getUserList();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getUserByid</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersService.getUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateUsers</span><span class="params">(Users users)</span></span>&#123;</span><br><span class="line">        usersService.updateUsers(users);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Update Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        usersService.deleteUsersByID(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Delete Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insertUser</span><span class="params">(Users users)</span></span>&#123;</span><br><span class="line">        usersService.insertUsers(users);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Insert Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åˆ°æ­¤å°±æ•´åˆå®Œæ¯•å’¯ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œæµ‹è¯•äº†ï¼Œå½“ç„¶äº†æ­£å¸¸å¼€å‘ä¸­è¿˜æ˜¯å¾—å†™ä¸€ç‚¹æµ‹è¯•ä¸€ç‚¹ï¼Œå…å¾—å†™å®Œä¹‹åå¾ˆéš¾ <code>debug</code>.</p>
<p>ç»è¿‡æµ‹è¯•ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œå…¨éƒ¨æ­£å¸¸è¿è¡Œï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†hhh~~</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(äº”):å®ç°é‚®ç®±éªŒè¯</title>
    <url>/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šå½“ä¸‹çš„ä¸šåŠ¡èƒŒæ™¯ä¸­ï¼Œå­˜åœ¨è®¸å¤šéœ€è¦ä¿è¯ç”¨æˆ·æ•°æ®å®‰å…¨çš„åœºæ™¯ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨é‚®ç®±éªŒè¯/æ‰‹æœºçŸ­ä¿¡éªŒè¯çš„æ–¹å¼å¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œå®¡æ ¸ï¼Œè¿™å¤§å¤§æé«˜äº†ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§.åœ¨æ³¨å†Œåœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨è¿™æ ·çš„æ‰‹æ®µæ¥é˜»æ­¢æ¶æ„æ³¨å†Œ.</p>
</blockquote>
<h1 id="ğŸƒå‡†å¤‡å·¥ä½œ"><a href="#ğŸƒå‡†å¤‡å·¥ä½œ" class="headerlink" title="ğŸƒå‡†å¤‡å·¥ä½œ"></a>ğŸƒå‡†å¤‡å·¥ä½œ</h1><p>å†ä½¿ç”¨ä»£ç è¿›è¡Œå‘é€é‚®ç®±ä¹‹å‰éœ€è¦è¿›è¡Œä¸€äº›å‡†å¤‡å·¥ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<h2 id="å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡"><a href="#å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡" class="headerlink" title="å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡"></a>å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡</h2><p>è¿™é‡Œä»¥QQé‚®ç®±ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯<code>POP3/SMTP</code>æœåŠ¡ã€ä»¥åŠ<code>IMAP/SMTP</code>æœåŠ¡.</p>
<img src="/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/1.png" class title="å›¾ç‰‡">

<img src="/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/2.png" class title="å›¾ç‰‡">

<p>å¼€å¯è¿‡åï¼Œä¼šå‘Šè¯‰æˆ‘ä»¬<strong>æˆæƒç </strong>ï¼Œå‘é€é‚®ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ä¸ªæˆæƒç å¾—åˆ°æƒé™ï¼Œä»è€Œå‘é€é‚®ä»¶ï¼Œä¿è¯é‚®ç®±çš„ä½¿ç”¨ä¸è¢«æ»¥ç”¨ä¾µçŠ¯ï¼Œè¿™ä¸ªæˆæƒç è¦ç•™ç€ï¼Œç­‰å¾…åç»­ä½¿ç”¨.</p>
<h2 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h2><p>ç”±äºéœ€è¦å­˜å‚¨éªŒè¯ç ï¼Œå¹¶ä¸”éªŒè¯ç å­˜åœ¨æ—¶æ•ˆæ€§ï¼Œäºæ˜¯è¿™é‡Œä½¿ç”¨äº†<code>Redis</code>æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œäºæ˜¯ä¹Ÿéœ€è¦å¯¼å…¥<code>Redis</code>çš„ä¾èµ–.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é‚®ç®±--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  é…ç½®redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span> <span class="comment">#é€‰æ‹©ç¬¬ä¸€ä¸ªæ•°æ®åº“</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">xxxxxx</span> <span class="comment">#redis æœåŠ¡å™¨ ip å¦‚æœåœ¨æœ¬åœ°å°±å¡« localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span> <span class="comment">#redisæœåŠ¡ç«¯å£å·é»˜è®¤ 6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxx</span> <span class="comment">#redisç™»å½•å¯†ç </span></span><br><span class="line"><span class="comment"># é…ç½®é‚®ç®±</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.qq.com</span>  <span class="comment">#ä½¿ç”¨å“ªä¸€ä¸ªç±»å‹çš„é‚®ç®±çš„æ ‡è¯†</span></span><br><span class="line">    <span class="attr">username:</span> <span class="number">3164297994</span><span class="string">@qq.com</span> <span class="comment">#å‘é€è€…çš„é‚®ç®±</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxxxxxxxx</span> <span class="comment">#POP3æœåŠ¡çš„æˆæƒç </span></span><br><span class="line">    <span class="attr">default-encoding:</span> <span class="string">utf-8</span> <span class="comment">#æ–‡æœ¬è§£ææ ¼å¼</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸš˜ä»£ç å®ç°"><a href="#ğŸš˜ä»£ç å®ç°" class="headerlink" title="ğŸš˜ä»£ç å®ç°"></a>ğŸš˜ä»£ç å®ç°</h1><ul>
<li>å‘é€é‚®ç®±éªŒè¯ç çš„æœåŠ¡ç±»ç¼–å†™</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å‘ä»¶äºº</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">   	<span class="keyword">private</span> String from;</span><br><span class="line">    <span class="comment">//è‡ªåŠ¨æ³¨å…¥Javaé‚®ä»¶å‘é€å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender sender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€é‚®ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> to æ”¶ä¿¡äººé‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> title ä¿¡ä»¶æ ‡é¢˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code éªŒè¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendEmail</span><span class="params">(String to , String title , String code)</span></span>&#123;</span><br><span class="line">		SimpleMailMessage message = <span class="keyword">new</span> SimpleMailMessage();</span><br><span class="line">        message.setFrom(from); <span class="comment">//å‘ä»¶äººé‚®ç®±</span></span><br><span class="line">        message.setTo(to); <span class="comment">//æ”¶ä»¶äººé‚®ç®±</span></span><br><span class="line">        message.setSubject(title); <span class="comment">//é‚®ä»¶æ ‡é¢˜</span></span><br><span class="line">        message.setText(code);  <span class="comment">//é‚®ä»¶å†…å®¹</span></span><br><span class="line">        sender.send(message);<span class="comment">//å‘é€é‚®ä»¶</span></span><br><span class="line">        System.out.println(<span class="string">&quot;é‚®ä»¶å‘é€æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é‚®ä»¶å‘é€çš„æ¥å£ç¼–å†™</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmailService emailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/email&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">emailVertCode</span><span class="params">(<span class="meta">@RequestBody</span> JSONObject requestbody)</span></span>&#123;</span><br><span class="line">        JSONObject response = <span class="keyword">new</span> JSONObject(<span class="keyword">true</span>);</span><br><span class="line">        String username = requestbody.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String email = requestbody.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰çš„ç”Ÿæˆ 6 ä½éªŒè¯ç çš„å·¥å…·ç±»</span></span><br><span class="line">        String code = VerificationCode.getCode();</span><br><span class="line">        emailService.sendSimple(email,<span class="string">&quot;éªŒè¯ç æµ‹è¯•&quot;</span>,code);</span><br><span class="line">        <span class="comment">//å°†éªŒè¯ç å­˜å…¥redis</span></span><br><span class="line">        stringRedisTemplate.opsForHash().put( username , username ,code);</span><br><span class="line">        <span class="comment">//è®¾ç½®éªŒè¯ç çš„è¿‡æœŸæ—¶é—´ä¸º 5 åˆ†é’Ÿ</span></span><br><span class="line">        stringRedisTemplate.expire(username , <span class="number">5</span> ,TimeUnit.MINUTES);</span><br><span class="line">        response.put(<span class="string">&quot;code&quot;</span>,<span class="number">200</span>);</span><br><span class="line">        response.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å‘é€é‚®ä»¶æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> response.toJSONString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é™„ä¸Šè‡ªå·±å†™çš„éªŒè¯ç ç”Ÿæˆå·¥å…·</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VerificationCode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> counts = <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> resCode = <span class="number">0</span>;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random(System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">while</span> (counts-- != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = random.nextInt(<span class="number">10</span>);</span><br><span class="line">            <span class="keyword">while</span> (i == <span class="number">0</span> &amp;&amp; counts == <span class="number">5</span>) &#123;</span><br><span class="line">                i = random.nextInt(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) resCode *= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">else</span> resCode += (<span class="keyword">int</span>) (i * Math.pow(<span class="number">10</span>, <span class="number">5</span> - counts));</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> String.valueOf(resCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å…«):è‡ªå®šä¹‰starter</title>
    <url>/2021/06/24/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš€SpringBoot-starteræœºåˆ¶"><a href="#ğŸš€SpringBoot-starteræœºåˆ¶" class="headerlink" title="ğŸš€SpringBoot starteræœºåˆ¶"></a>ğŸš€SpringBoot starteræœºåˆ¶</h1><p><code>SpringBoot</code>ä¸­æä¾›äº†å¤§é‡å¼€ç®±å³ç”¨çš„<code>starter</code>ï¼Œ<code>starter</code>ä¸­é…ç½®äº†ä¸€å®šä¸šåŠ¡åœºæ™¯ä¸­æ‰€éœ€è¦çš„ä¾èµ–ä»¥åŠå„ç§æœåŠ¡ï¼Œè®©å¼€å‘è€…æ‘†è„±äº†å¤§é‡é…ç½®å’Œä¾èµ–æ–‡ä»¶ï¼Œè®©å·¥ç¨‹çš„æ•´ä½“ç»“æ„æ›´åŠ ä¼˜ç¾è€Œä¸è‡ƒè‚¿ï¼Œå…¶å…·ä½“å®ç°ä¾æ‰˜äº<code>SpringBoot</code>ä¸­è‡ªåŠ¨é…ç½®åŸç†ï¼Œè‡ªåŠ¨è¿›è¡ŒåŒ…æ‰«æï¼Œæ—¢å¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½®.</p>
<h1 id="ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™"><a href="#ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™" class="headerlink" title="ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™"></a>ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™</h1><p><code>SpringBoot</code>æä¾›çš„<code>starter</code>ä»¥<code>spring-boot-starter-xxx</code>çš„æ–¹å¼å‘½åçš„ã€‚å®˜æ–¹å»ºè®®è‡ªå®šä¹‰çš„<code>starter</code>ä½¿ç”¨<code>xxx-spring-boot-starter</code>å‘½åè§„åˆ™ã€‚ä»¥åŒºåˆ†<code>SpringBoot</code>ç”Ÿæ€æä¾›çš„<code>starter</code></p>
<h1 id="ğŸ¡è‡ªå®šä¹‰starter"><a href="#ğŸ¡è‡ªå®šä¹‰starter" class="headerlink" title="ğŸ¡è‡ªå®šä¹‰starter"></a>ğŸ¡è‡ªå®šä¹‰starter</h1><ul>
<li><p>åˆ›å»ºä¸€ä¸ª<code>SpringBoot</code>é¡¹ç›®</p>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œåˆ é™¤<code>SpringBoot</code>å¯åŠ¨ç±»ä»¥åŠé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©æ€§åˆ æ‰<code>test</code>ç›®å½•ï¼Œå†åˆ é™¤<code>pom.xml</code>ä¸­<code>plugins</code>ï¼Œä¸ç„¶æ‰“åŒ…ä¼šæŠ¥é”™.</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/2.png" alt="img"></p>
</li>
<li><p>å¼•å…¥ç›¸å…³ä¾èµ–</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ‹“å±•é…ç½®æ–‡ä»¶çš„æ ¼å¼--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!--å¿…éœ€--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™æ•°æ®æ˜ å°„å®ä½“ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥æŠŠ.propertiesä¸­è·å–.yamlä¸­ç¬¦å·ä»¥ä¸‹å‰ç¼€çš„æ•°æ®æ˜ å°„åˆ°æœ¬ç±»ä¸­</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;com.anthony.starter&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String msg = <span class="string">&quot;é»˜è®¤å€¼&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™serviceç±»: ç”¨äºå¯¹å¤–æä¾›æœåŠ¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‘IOCå®¹å™¨ä¸­æ³¨å†Œè¯¥ç±»</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//å…è®¸è¯¥ç±»è¿›è¡Œæ•°æ®æ˜ å°„</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(MyProperties.class)</span></span><br><span class="line"><span class="comment">//å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨è¯¥ç±»æ—¶å†å¾€IOCå®¹å™¨ä¸­è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(MyService.class)</span></span><br><span class="line"><span class="comment">//å½“é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨è¿™äº›é…ç½®æ—¶ï¼Œå¯ä»¥æ³¨å…¥ï¼Œå¦‚æœæœªåŒ¹é…åˆ°ä¹Ÿå¯ä»¥æ³¨å…¥ï¼Œæ‰€ä»¥è¿™ä¸€æ¡å†™ä¸å†™éƒ½è¡Œ</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;com.anthony.starter&quot; , value = &quot;enabled&quot; , matchIfMissing = true )</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyProperties myProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyService <span class="title">myService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyService myService = <span class="keyword">new</span> MyService()</span><br><span class="line">                .setMsg(myProperties.getMsg())</span><br><span class="line">                .setPassword(myProperties.getPassword())</span><br><span class="line">                .setUsername(myProperties.getUsername());</span><br><span class="line">        <span class="keyword">return</span> myService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰“åŒ…å‘å¸ƒå®‰è£…åˆ°æœ¬åœ°ä»“åº“</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/1.png" alt="img"></p>
<ul>
<li>å¼•ç”¨æ—¶åªéœ€è¦åƒæ™®é€šä¾èµ–ä¸€æ ·å¼•å…¥å°±å¯ä»¥äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶å½“å‰é¡¹ç›®ä¸­çš„é¡¹ç›®åæ ‡</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å…­):è§£å†³å‰åç«¯åˆ†ç¦»è·¨åŸŸ</title>
    <url>/2021/06/18/SpringBoot%EF%BC%88%E5%85%AD%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"><a href="#ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ" class="headerlink" title="ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"></a>ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ</h1><ul>
<li><strong>urlçš„ä¸€èˆ¬æ ¼å¼</strong>ï¼š</li>
</ul>
<p><font color="skyblue">åè®® + åŸŸåï¼ˆå­åŸŸå + ä¸»åŸŸåï¼‰ + ç«¯å£å· + èµ„æºåœ°å€</font></p>
<ul>
<li><strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<p><a href="https://www.dustyblog.cn:8080/say/Hello">https://www.dustyblog.cn:8080/say/Hello</a> æ˜¯ç”±</p>
<p>https + www + dustyblog.cn + 8080 + say/Helloç»„æˆã€‚</p>
<blockquote>
<p>åªè¦<font color="red">åè®®ï¼Œå­åŸŸåï¼Œä¸»åŸŸåï¼Œç«¯å£å·è¿™å››é¡¹ç»„æˆéƒ¨åˆ†ä¸­æœ‰ä¸€é¡¹ä¸åŒ</font>å°±å¯ä»¥è®¤ä¸ºæ˜¯ä¸åŒçš„åŸŸï¼Œä¸åŒçš„åŸŸä¹‹é—´äº’ç›¸è®¿é—®èµ„æºï¼Œå°±è¢«ç§°ä¹‹ä¸ºè·¨åŸŸã€‚</p>
</blockquote>
<p>å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œå‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®åˆ†åˆ«å ç”¨ä¸åŒçš„ç«¯å£å·(è¿™é‡Œåªæ˜¯é’ˆå¯¹ä¸ªäººå¼€å‘è€Œè¨€ï¼Œå®é™…ä¸šåŠ¡ä¸­ä¸ä¸€å®š)ä»è€Œå¯¼è‡´äº†è·¨åŸŸé—®é¢˜</p>
<h1 id="ğŸš‘è§£å†³æ–¹æ¡ˆ"><a href="#ğŸš‘è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ğŸš‘è§£å†³æ–¹æ¡ˆ"></a>ğŸš‘è§£å†³æ–¹æ¡ˆ</h1><p><strong>æ³¨æ„</strong>ï¼šè§£å†³æ–¹æ¡ˆæ—¢å¯ä»¥åœ¨å‰ç«¯è§£å†³ä¹Ÿå¯ä»¥åœ¨åç«¯è§£å†³ï¼Œè¿™é‡Œåªè®¨è®ºåç«¯çš„è§£å†³æ–¹æ¡ˆ.</p>
<h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><blockquote>
<p>è§£å†³è·¨åŸŸé—®é¢˜æœ‰å¤šç§å…¨å±€é…ç½®çš„æ–¹æ¡ˆï¼Œæ¥ä¸‹æ¥ä¸€ä¸€åˆ—ä¸¾</p>
</blockquote>
<h3 id="é…ç½®æ–¹æ¡ˆä¸€"><a href="#é…ç½®æ–¹æ¡ˆä¸€" class="headerlink" title="é…ç½®æ–¹æ¡ˆä¸€"></a>é…ç½®æ–¹æ¡ˆä¸€</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsConfiguration <span class="title">corsConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CorsConfiguration corsConfiguration = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        <span class="comment">//å®é™…è¯·æ±‚ä¸­å…è®¸æºå¸¦çš„é¦–éƒ¨å­—æ®µ</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">//å…è®¸é‚£äº›åŸŸè·¨åŸŸè®¿é—®</span></span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">//å…è®¸é‚£äº›è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> corsConfiguration;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsFilter <span class="title">corsFilter</span><span class="params">(CorsConfiguration corsConfiguration)</span> </span>&#123;</span><br><span class="line">        UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration); <span class="comment">// 4</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CorsFilter(source);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="é…ç½®æ–¹æ¡ˆäºŒ"><a href="#é…ç½®æ–¹æ¡ˆäºŒ" class="headerlink" title="é…ç½®æ–¹æ¡ˆäºŒ"></a>é…ç½®æ–¹æ¡ˆäºŒ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebAllowConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ·»åŠ è®¿é—®ä»€ä¹ˆè·¯å¾„æ—¶éœ€è¦é…ç½®è·¨åŸŸ</span></span><br><span class="line">        <span class="comment">//æ­¤å¤„é…ç½®æ‰€æœ‰è·¯å¾„</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>) <span class="comment">//å…è®¸è°è·¨åŸŸ,vueå¼€å¯æœåŠ¡é»˜è®¤è·‘åœ¨8080</span></span><br><span class="line">                .allowedOrigins(<span class="string">&quot;http://localhost:8080&quot;</span>, <span class="string">&quot;null&quot;</span>)  <span class="comment">//å…è®¸è°è·¨åŸŸ,vueå¼€å¯æœåŠ¡é»˜è®¤è·‘åœ¨8080</span></span><br><span class="line">                .allowedMethods(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;GET&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;OPTIONS&quot;</span>, <span class="string">&quot;DELETE&quot;</span>) <span class="comment">//è®¾ç½®éœ€è¦è¿›è¡Œé…ç½®çš„httpè¯·æ±‚æ–¹æ³•</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>) <span class="comment">//è®¾ç½®æœ€å¤§ç›¸åº”æ—¶é—´</span></span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h2><p><code>@CrossOrigin</code> ç”¨äº<code>controller</code>ç±»ä¸Šï¼Œä½¿ç”¨ç›¸å¯¹è¾ƒä¸ºç®€å•.</p>
<p>ä½†æ˜¯æœ‰å‘ï¼š<code>CROS</code>å¤æ‚è¯·æ±‚æ—¶ä¼šé¦–å…ˆå‘é€ä¸€ä¸ª<code>OPTIONS</code>è¯·æ±‚åšå—…æ¢ï¼Œæ¥æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦æ”¯æŒæœ¬æ¬¡è¯·æ±‚ï¼Œè¯·æ±‚æˆåŠŸåæ‰ä¼šå‘é€çœŸå®çš„è¯·æ±‚ï¼›è€Œ<code>OPTIONS</code>è¯·æ±‚ä¸ä¼šæºå¸¦ä»»ä½•æ•°æ®ï¼Œå¯¼è‡´è¿™ä¸ªè¯·æ±‚ä¸ç¬¦åˆæˆ‘ä»¬æ‹¦æˆªå™¨çš„æ ¡éªŒè§„åˆ™è¢«æ‹¦æˆªäº†ï¼Œç›´æ¥è¿”å›äº†çŠ¶æ€ç ï¼Œå“åº”å¤´ä¸­ä¹Ÿæ²¡æºå¸¦è§£å†³è·¨åŸŸéœ€è¦çš„å¤´éƒ¨ä¿¡æ¯ï¼Œè¿›è€Œå‡ºç°äº†è·¨åŸŸé—®é¢˜.</p>
<p>åªéœ€è¦é‡å†™<code>handler</code>ä¸­<code>preHandlr</code>å¹¶ä¸”åŠ ä¸Šä¸‹æ–¹ä»£ç å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">&quot;OPTIONS&quot;</span>.equals(request.getMethod().toUpperCase())) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Method:OPTIONS&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å):æ•´åˆJWT</title>
    <url>/2021/08/09/SpringBoot%EF%BC%88%E5%8D%81%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šæ–­æ›´äº†å¥½å‡ å¤©ï¼Œè¿™å‡ å¤©åœ¨å¿™ç€æ­å»ºåšå®¢ï¼Œè¿™å‡ å¤©ä¹Ÿååˆ†éš¾å—ï¼Œé‡åˆ°äº†å„ç§é—®é¢˜ï¼Œä¸è¿‡éƒ½è¿˜æ˜¯ä¸€ä¸€è§£å†³äº†ï¼Œåšå®¢å¼€å‘è¿›åº¦åˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹äº†ï¼ŒåŸºæœ¬è½®å»“å·²ç»å·®ä¸å¤šäº†ï¼Œäºæ˜¯ä»Šå¤©æ‰“ç®—é‡æ–°å¼€å§‹æ›´æ–°äº†.  JWT æ˜¯ä¸ªæ— çŠ¶æ€çš„è®¤è¯å·¥å…·ï¼Œæ‰€è°“æ— çŠ¶æ€å°±æ˜¯æ— éœ€ä½¿ç”¨<code>session</code> åœ¨æœåŠ¡ç«¯è¿›è¡Œå­˜å‚¨è®¤è¯ä¿¡æ¯è¿›è¡Œè®¤è¯ï¼ŒJWTå…¶å®å¾ˆæ—©å°±æ¥è§¦äº†ï¼Œä¸€ç›´æ²¡æœ‰å†™ï¼Œä¹Ÿç”¨çš„å°‘ï¼Œè¿™æ¬¡å†™åšå®¢æ‰“ç®—ç”¨ä¸€ä¸‹ï¼Œäºæ˜¯æ‰“ç®—è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹.</p>
</blockquote>
<h1 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h1><p>èµ·åˆåšå®¢çš„å®‰å…¨æ¶æ„æ‰“ç®—æ˜¯ä½¿ç”¨<code>SpringSecurity</code> ä»¥åŠ <code>Oauth2</code> æ¥è¿›è¡Œè®¤è¯å’Œé‰´æƒï¼Œä½†æ˜¯<code>SpringSecurity</code> çš„æ•™ç¨‹å‚å·®ä¸é½ï¼Œå®˜æ–¹æ–‡æ¡£å±å®åŠé€€ï¼Œä¸»è¦æ˜¯æˆ‘æƒ³è¦å®šåˆ¶åŒ–ä¸€äº›è‡ªå·±çš„ä¸œè¥¿å¾ˆéš¾å»å®ç°ï¼Œåˆæ˜¯é€€è€Œæ±‚å…¶æ¬¡ï¼Œæ‰“ç®—å…ˆä½¿ç”¨<code>jwt</code>è¿›è¡Œè®¤è¯ç®¡ç†ï¼ŒåæœŸæ‰“ç®—è‡ªå·±æ‰‹æ’¸ä¸€ä¸ªæƒé™ç®¡ç†çš„æ¡†æ¶ï¼Œå°è¯•è‡ªå·±å†™ä¸€ä¸ªæ¡†æ¶.</p>
<h1 id="ä¸ºä½•ä½¿ç”¨JWT"><a href="#ä¸ºä½•ä½¿ç”¨JWT" class="headerlink" title="ä¸ºä½•ä½¿ç”¨JWT"></a>ä¸ºä½•ä½¿ç”¨<code>JWT</code></h1><h2 id="åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯"><a href="#åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯" class="headerlink" title="åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯"></a>åŸºäºä¼ ç»Ÿçš„Sessionè®¤è¯</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.è®¤è¯æ–¹å¼</span></span><br><span class="line"><span class="bullet">-</span> httpåè®®æœ¬èº«æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè€Œè¿™å°±æ„å‘³ç€å¦‚æœç”¨æˆ·å‘æˆ‘ä»¬çš„åº”ç”¨æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œç”¨æˆ·è¿˜è¦å†ä¸€æ¬¡è¿›è¡Œç”¨æˆ·è®¤è¯æ‰è¡Œï¼Œå› ä¸ºæ ¹æ®httpåè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½è¯†åˆ«æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœåŠ¡å™¨å­˜å‚¨ä¸€ä»½ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼Œè¿™ä»½ç™»å½•ä¿¡æ¯ä¼šåœ¨å“åº”æ—¶ä¼ é€’ç»™æµè§ˆå™¨ï¼Œå‘Šè¯‰å…¶ä¿å­˜ä¸ºcookie,ä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶å‘é€ç»™æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å°±èƒ½è¯†åˆ«è¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·äº†,è¿™å°±æ˜¯ä¼ ç»Ÿçš„åŸºäºsessionè®¤è¯ã€‚</span><br><span class="line"><span class="section"># 2.è®¤è¯æµç¨‹</span></span><br></pre></td></tr></table></figure>

<img src="/2021/08/09/SpringBoot%EF%BC%88%E5%8D%81%EF%BC%89/1.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.æš´éœ²é—®é¢˜</span></span><br><span class="line"><span class="bullet">-</span> 1.æ¯ä¸ªç”¨æˆ·ç»è¿‡åº”ç”¨è®¤è¯ä¹‹åï¼Œåº”ç”¨éƒ½è¦åœ¨æœåŠ¡ç«¯åšä¸€æ¬¡è®°å½•ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚çš„é‰´åˆ«ï¼Œé€šå¸¸è€Œè¨€sessionéƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œéšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 2.ç”¨æˆ·è®¤è¯ä¹‹åï¼ŒæœåŠ¡ç«¯åšè®¤è¯è®°å½•ï¼Œå¦‚æœè®¤è¯çš„è®°å½•è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„è¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚è¿˜å¿…é¡»è¦è¯·æ±‚åœ¨è¿™å°æœåŠ¡å™¨ä¸Š,è¿™æ ·æ‰èƒ½æ‹¿åˆ°æˆæƒçš„èµ„æºï¼Œè¿™æ ·åœ¨åˆ†å¸ƒå¼çš„åº”ç”¨ä¸Šï¼Œç›¸åº”çš„é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿæ„å‘³ç€é™åˆ¶äº†åº”ç”¨çš„æ‰©å±•èƒ½åŠ›ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 3.å› ä¸ºæ˜¯åŸºäºcookieæ¥è¿›è¡Œç”¨æˆ·è¯†åˆ«çš„, cookieå¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 4.åœ¨å‰åç«¯åˆ†ç¦»ç³»ç»Ÿä¸­å°±æ›´åŠ ç—›è‹¦:å¦‚ä¸‹å›¾æ‰€ç¤º</span><br><span class="line"><span class="code">	ä¹Ÿå°±æ˜¯è¯´å‰åç«¯åˆ†ç¦»åœ¨åº”ç”¨è§£è€¦åå¢åŠ äº†éƒ¨ç½²çš„å¤æ‚æ€§ã€‚é€šå¸¸ç”¨æˆ·ä¸€æ¬¡è¯·æ±‚å°±è¦è½¬å‘å¤šæ¬¡ã€‚å¦‚æœç”¨session æ¯æ¬¡æºå¸¦sessionid åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿˜è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚åŒæ—¶å¦‚æœç”¨æˆ·å¾ˆå¤šã€‚è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œç»™æœåŠ¡å™¨å¢åŠ è´Ÿæ‹…ã€‚è¿˜æœ‰å°±æ˜¯CSRFï¼ˆè·¨ç«™ä¼ªé€ è¯·æ±‚æ”»	å‡»ï¼‰æ”»å‡»ï¼Œsessionæ˜¯åŸºäºcookieè¿›è¡Œç”¨æˆ·è¯†åˆ«çš„, cookieå¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚è¿˜æœ‰å°±æ˜¯sessionidå°±æ˜¯ä¸€ä¸ªç‰¹å¾å€¼ï¼Œè¡¨è¾¾çš„ä¿¡æ¯ä¸å¤Ÿä¸°å¯Œã€‚ä¸å®¹æ˜“æ‰©å±•ã€‚è€Œä¸”å¦‚æœä½ åç«¯åº”ç”¨æ˜¯å¤šèŠ‚ç‚¹éƒ¨ç½²ã€‚é‚£ä¹ˆå°±éœ€è¦å®ç°sessionå…±äº«æœºåˆ¶ã€‚ä¸æ–¹ä¾¿é›†ç¾¤åº”ç”¨ã€‚</span></span><br></pre></td></tr></table></figure>

<img src="/2021/08/09/SpringBoot%EF%BC%88%E5%8D%81%EF%BC%89/2.png" class>

<h2 id="åŸºäºJWTè®¤è¯"><a href="#åŸºäºJWTè®¤è¯" class="headerlink" title="åŸºäºJWTè®¤è¯"></a>åŸºäºJWTè®¤è¯</h2><img src="/2021/08/09/SpringBoot%EF%BC%88%E5%8D%81%EF%BC%89/3.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.è®¤è¯æµç¨‹</span></span><br><span class="line"><span class="bullet">-</span> é¦–å…ˆï¼Œå‰ç«¯é€šè¿‡Webè¡¨å•å°†è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç å‘é€åˆ°åç«¯çš„æ¥å£ã€‚è¿™ä¸€è¿‡ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸ªHTTP POSTè¯·æ±‚ã€‚å»ºè®®çš„æ–¹å¼æ˜¯é€šè¿‡SSLåŠ å¯†çš„ä¼ è¾“ï¼ˆhttpsåè®®ï¼‰ï¼Œä»è€Œé¿å…æ•æ„Ÿä¿¡æ¯è¢«å—…æ¢ã€‚</span><br><span class="line"><span class="bullet">-</span> åç«¯æ ¸å¯¹ç”¨æˆ·åå’Œå¯†ç æˆåŠŸåï¼Œå°†ç”¨æˆ·çš„idç­‰å…¶ä»–ä¿¡æ¯ä½œä¸ºJWT Payloadï¼ˆè´Ÿè½½ï¼‰ï¼Œå°†å…¶ä¸å¤´éƒ¨åˆ†åˆ«è¿›è¡ŒBase64ç¼–ç æ‹¼æ¥åç­¾åï¼Œå½¢æˆä¸€ä¸ªJWT(Token)ã€‚å½¢æˆçš„JWTå°±æ˜¯ä¸€ä¸ªå½¢åŒlll.zzz.xxxçš„å­—ç¬¦ä¸²ã€‚ token head.payload.singurater</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> åç«¯å°†JWTå­—ç¬¦ä¸²ä½œä¸ºç™»å½•æˆåŠŸçš„è¿”å›ç»“æœè¿”å›ç»™å‰ç«¯ã€‚å‰ç«¯å¯ä»¥å°†è¿”å›çš„ç»“æœä¿å­˜åœ¨localStorageæˆ–sessionStorageä¸Šï¼Œé€€å‡ºç™»å½•æ—¶å‰ç«¯åˆ é™¤ä¿å­˜çš„JWTå³å¯ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> å‰ç«¯åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†JWTæ”¾å…¥HTTP Headerä¸­çš„Authorizationä½ã€‚(è§£å†³XSSå’ŒXSRFé—®é¢˜) HEADER</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> åç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼Œå¦‚å­˜åœ¨éªŒè¯JWTçš„æœ‰æ•ˆæ€§ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ç­¾åæ˜¯å¦æ­£ç¡®ï¼›æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸï¼›æ£€æŸ¥Tokençš„æ¥æ”¶æ–¹æ˜¯å¦æ˜¯è‡ªå·±ï¼ˆå¯é€‰ï¼‰ã€‚</span><br><span class="line"><span class="bullet">-</span> éªŒè¯é€šè¿‡ååç«¯ä½¿ç”¨JWTä¸­åŒ…å«çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå…¶ä»–é€»è¾‘æ“ä½œï¼Œè¿”å›ç›¸åº”ç»“æœã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 2.jwtä¼˜åŠ¿</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> ç®€æ´(Compact): å¯ä»¥é€šè¿‡URLï¼ŒPOSTå‚æ•°æˆ–è€…åœ¨HTTP headerå‘é€ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œä¼ è¾“é€Ÿåº¦ä¹Ÿå¾ˆå¿«</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> è‡ªåŒ…å«(Self-contained)ï¼šè´Ÿè½½ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> å› ä¸ºTokenæ˜¯ä»¥JSONåŠ å¯†çš„å½¢å¼ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ï¼Œæ‰€ä»¥JWTæ˜¯è·¨è¯­è¨€çš„ï¼ŒåŸåˆ™ä¸Šä»»ä½•webå½¢å¼éƒ½æ”¯æŒã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> ä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼å¾®æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<h1 id="JWTçš„ç»“æ„"><a href="#JWTçš„ç»“æ„" class="headerlink" title="JWTçš„ç»“æ„"></a>JWTçš„ç»“æ„</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">token   string  ====&gt;  header.payload.singnature   token   </span><br><span class="line"></span><br><span class="line"><span class="section"># 1.ä»¤ç‰Œç»„æˆ</span></span><br><span class="line"><span class="bullet">-</span> 1.æ ‡å¤´(Header)</span><br><span class="line"><span class="bullet">-</span> 2.æœ‰æ•ˆè½½è·(Payload)</span><br><span class="line"><span class="bullet">-</span> 3.ç­¾å(Signature)</span><br><span class="line"><span class="bullet">-</span> å› æ­¤ï¼ŒJWTé€šå¸¸å¦‚ä¸‹æ‰€ç¤º:xxxxx.yyyyy.zzzzz   Header.Payload.Signature</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 2.Header</span></span><br><span class="line"><span class="bullet">-</span> æ ‡å¤´é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹ï¼ˆå³JWTï¼‰å’Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ï¼Œä¾‹å¦‚HMAC SHA256æˆ–RSAã€‚å®ƒä¼šä½¿ç”¨ Base64 ç¼–ç ç»„æˆ JWT ç»“æ„çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> æ³¨æ„:Base64æ˜¯ä¸€ç§ç¼–ç ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯å¯ä»¥è¢«ç¿»è¯‘å›åŸæ¥çš„æ ·å­æ¥çš„ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ç§åŠ å¯†è¿‡ç¨‹ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.Payload</span></span><br><span class="line"><span class="bullet">-</span> ä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†æ˜¯æœ‰æ•ˆè´Ÿè½½ï¼Œå…¶ä¸­åŒ…å«å£°æ˜ã€‚å£°æ˜æ˜¯æœ‰å…³å®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ã€‚åŒæ ·çš„ï¼Œå®ƒä¼šä½¿ç”¨ Base64 ç¼–ç ç»„æˆ JWT ç»“æ„çš„ç¬¬äºŒéƒ¨åˆ†</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;sub&quot;</span>: <span class="string">&quot;1234567890&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;admin&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 4.Signature</span></span><br><span class="line"><span class="bullet">-</span> å‰é¢ä¸¤éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨ Base64 è¿›è¡Œç¼–ç çš„ï¼Œå³å‰ç«¯å¯ä»¥è§£å¼€çŸ¥é“é‡Œé¢çš„ä¿¡æ¯ã€‚Signature éœ€è¦ä½¿ç”¨ç¼–ç åçš„ header å’Œ payload ä»¥åŠæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå¯†é’¥ï¼Œç„¶åä½¿ç”¨ header ä¸­æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆHS256ï¼‰è¿›è¡Œç­¾åã€‚ç­¾åçš„ä½œç”¨æ˜¯ä¿è¯ JWT æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡</span><br><span class="line"><span class="bullet">-</span> å¦‚:</span><br><span class="line"><span class="code">	HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload),secret);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># ç­¾åç›®çš„</span></span><br><span class="line"><span class="code">- æœ€åä¸€æ­¥ç­¾åçš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šæ˜¯å¯¹å¤´éƒ¨ä»¥åŠè´Ÿè½½å†…å®¹è¿›è¡Œç­¾åï¼Œé˜²æ­¢å†…å®¹è¢«çªœæ”¹ã€‚å¦‚æœæœ‰äººå¯¹å¤´éƒ¨ä»¥åŠè´Ÿè½½çš„å†…å®¹è§£ç ä¹‹åè¿›è¡Œä¿®æ”¹ï¼Œå†è¿›è¡Œç¼–ç ï¼Œæœ€ååŠ ä¸Šä¹‹å‰çš„ç­¾åç»„åˆå½¢æˆæ–°çš„JWTçš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯ä¼šåˆ¤æ–­å‡ºæ–°çš„å¤´éƒ¨å’Œè´Ÿè½½å½¢æˆçš„ç­¾åå’ŒJWTé™„å¸¦ä¸Šçš„ç­¾åæ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æœè¦å¯¹æ–°çš„å¤´éƒ¨å’Œè´Ÿè½½è¿›è¡Œç­¾åï¼Œåœ¨ä¸çŸ¥é“æœåŠ¡å™¨åŠ å¯†æ—¶ç”¨çš„å¯†é’¥çš„è¯ï¼Œå¾—å‡ºæ¥çš„ç­¾åä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># ä¿¡æ¯å®‰å…¨é—®é¢˜</span></span><br><span class="line"><span class="code">- åœ¨è¿™é‡Œå¤§å®¶ä¸€å®šä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼šBase64æ˜¯ä¸€ç§ç¼–ç ï¼Œæ˜¯å¯é€†çš„ï¼Œé‚£ä¹ˆæˆ‘çš„ä¿¡æ¯ä¸å°±è¢«æš´éœ²äº†å—ï¼Ÿ</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">- æ˜¯çš„ã€‚æ‰€ä»¥ï¼Œåœ¨JWTä¸­ï¼Œä¸åº”è¯¥åœ¨è´Ÿè½½é‡Œé¢åŠ å…¥ä»»ä½•æ•æ„Ÿçš„æ•°æ®ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼ è¾“çš„æ˜¯ç”¨æˆ·çš„User IDã€‚è¿™ä¸ªå€¼å®é™…ä¸Šä¸æ˜¯ä»€ä¹ˆæ•	æ„Ÿå†…å®¹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¢«çŸ¥é“ä¹Ÿæ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯åƒå¯†ç è¿™æ ·çš„å†…å®¹å°±ä¸èƒ½è¢«æ”¾åœ¨JWTä¸­äº†ã€‚å¦‚æœå°†ç”¨æˆ·çš„å¯†ç æ”¾åœ¨äº†JWTä¸­ï¼Œé‚£ä¹ˆæ€€æœ‰æ¶æ„çš„ç¬¬	ä¸‰æ–¹é€šè¿‡Base64è§£ç å°±èƒ½å¾ˆå¿«åœ°çŸ¥é“ä½ çš„å¯†ç äº†ã€‚å› æ­¤JWTé€‚åˆç”¨äºå‘Webåº”ç”¨ä¼ é€’ä¸€äº›éæ•æ„Ÿä¿¡æ¯ã€‚JWTè¿˜ç»å¸¸ç”¨äºè®¾è®¡ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»	ç»Ÿï¼Œç”šè‡³å®ç°Webåº”ç”¨çš„å•ç‚¹ç™»å½•ã€‚</span></span><br></pre></td></tr></table></figure>

<img src="/2021/08/09/SpringBoot%EF%BC%88%E5%8D%81%EF%BC%89/4.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 5.æ”¾åœ¨ä¸€èµ·</span></span><br><span class="line"><span class="bullet">-</span> è¾“å‡ºæ˜¯ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„Base64-URLå­—ç¬¦ä¸²ï¼Œå¯ä»¥åœ¨HTMLå’ŒHTTPç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ï¼Œä¸åŸºäºXMLçš„æ ‡å‡†ï¼ˆä¾‹å¦‚SAMLï¼‰ç›¸æ¯”ï¼Œå®ƒæ›´ç´§å‡‘ã€‚</span><br><span class="line"><span class="bullet">-</span> ç®€æ´(Compact)</span><br><span class="line"><span class="code">	å¯ä»¥é€šè¿‡URL, POST å‚æ•°æˆ–è€…åœ¨ HTTP header å‘é€ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œä¼ è¾“é€Ÿåº¦å¿«</span></span><br><span class="line"><span class="code">- è‡ªåŒ…å«(Self-contained)</span></span><br><span class="line"><span class="code">	è´Ÿè½½ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“</span></span><br></pre></td></tr></table></figure>



<h1 id="SpringBootæ•´åˆJWT"><a href="#SpringBootæ•´åˆJWT" class="headerlink" title="SpringBootæ•´åˆJWT"></a>SpringBootæ•´åˆJWT</h1><ul>
<li>å¼•å…¥ä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥jwt--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.auth0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-jwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.16.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™å·¥å…·ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String TOKEN = <span class="string">&quot;xxxxxx&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜²æ­¢å®ä¾‹åŒ–å·¥å…·ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">JwtUtils</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆtoken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map  ä¼ å…¥payload</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createToken</span><span class="params">(Map&lt;String,String&gt; map)</span></span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºJWTç”Ÿæˆç±»</span></span><br><span class="line">        JWTCreator.Builder builder = JWT.create();</span><br><span class="line">        <span class="comment">//æ·»åŠ payloadç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        map.forEach((k,v)-&gt;&#123;</span><br><span class="line">            builder.withClaim(k,v);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        Calendar instance = Calendar.getInstance();</span><br><span class="line">        instance.add(Calendar.MINUTE,<span class="number">60</span>);</span><br><span class="line">        builder.withExpiresAt(instance.getTime());</span><br><span class="line">        <span class="comment">//ç”Ÿæˆtoken</span></span><br><span class="line">        <span class="keyword">return</span> builder.sign(Algorithm.HMAC256(TOKEN)).toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯tokenå¹¶è·å–ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›æºå¸¦çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DecodedJWT <span class="title">verify</span><span class="params">(String token)</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å–è§£ç åçš„JWTå¹¶è¿”å›å¯ä»¥è·å–payloadçš„å¯¹è±¡</span></span><br><span class="line">        DecodedJWT verify = JWT.require(Algorithm.HMAC256(TOKEN)).build().verify(token);</span><br><span class="line">        <span class="keyword">return</span> verify;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–JWT tokenä¸­Stringä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> verify è·å–ä¿¡æ¯çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param ç”¨æˆ·ä¿¡æ¯keyå€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·ä¿¡æ¯valueå€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getTokenStrMsg</span><span class="params">(DecodedJWT verify , String param)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> verify.getClaim(param).asString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–JWT tokenä¸­intä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> verify è·å–ä¿¡æ¯çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param ç”¨æˆ·ä¿¡æ¯keyå€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç”¨æˆ·ä¿¡æ¯valueå€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTokenIntMsg</span><span class="params">(DecodedJWT verify,String param)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> verify.getClaim(param).asInt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ æ‹¦æˆªå™¨(ç”¨äºå¯¹<code>token</code>è¿›è¡ŒéªŒè¯)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtInterceptor</span> <span class="keyword">extends</span> <span class="title">WebContentInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;OPTIONS&quot;</span>.equals(request.getMethod().toUpperCase())) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Method:OPTIONS&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String token = request.getHeader(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;è·å–åˆ°çš„ tokenä¸º: &#123;&#125;&quot;</span> , token);</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.verify(token);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (TokenExpiredException e) &#123;</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç™»å½•è®¤è¯å·²ç»è¿‡æœŸï¼&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SignatureVerificationException e)&#123;</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç­¾åé”™è¯¯!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AlgorithmMismatchException e)&#123;</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;åŠ å¯†ç®—æ³•ä¸åŒ¹é…!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;æ— æ•ˆè®¤è¯æƒé™!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(<span class="string">&quot;code&quot;</span>, <span class="number">500</span>);</span><br><span class="line">        map.put(<span class="string">&quot;state&quot;</span>, <span class="keyword">false</span>);</span><br><span class="line">        String json = <span class="keyword">new</span> ObjectMapper().writeValueAsString(map);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().println(json);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨å†Œè¯¥æ‹¦æˆªå™¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> JwtInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/util/**&quot;</span>,</span><br><span class="line">                                     <span class="string">&quot;/upload/image&quot;</span>,</span><br><span class="line">                                     <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">                                     <span class="string">&quot;/user/login&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="å‰ç«¯è®¾ç½®é»˜è®¤è¯·æ±‚å¤´"><a href="#å‰ç«¯è®¾ç½®é»˜è®¤è¯·æ±‚å¤´" class="headerlink" title="å‰ç«¯è®¾ç½®é»˜è®¤è¯·æ±‚å¤´"></a>å‰ç«¯è®¾ç½®é»˜è®¤è¯·æ±‚å¤´</h1><ul>
<li>è®¾ç½®é»˜è®¤è¯·æ±‚å¤´(å¯¹åº”åç«¯ä»è¯·æ±‚å¤´ä¸­æ‹¿å‡ºtoken)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°è£…axios</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> http = axios.create(&#123;</span><br><span class="line">  <span class="comment">//è¯·æ±‚url</span></span><br><span class="line">  baseURL: API.BASE_URL,</span><br><span class="line">  <span class="comment">//è¶…æ—¶å¤„ç†</span></span><br><span class="line">  timeout: <span class="number">3000</span>,</span><br><span class="line">  <span class="comment">// é»˜è®¤è¯·æ±‚å¤´</span></span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span> : <span class="built_in">localStorage</span>.getItem(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å››):æ³¨è§£å¼€å‘</title>
    <url>/2021/06/15/SpringBoot%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å¯ä»¥è¯´æ³¨è§£æ˜¯SpringBootçš„ç²¾é«“ï¼Œæœ‰ç€éå¸¸éå¸¸å¤šçš„æ³¨è§£ï¼Œè¿™ç¯‡åšå®¢å°†æŒç»­æ›´æ–°æˆ‘å¹³æ—¶æ‰€ç”¨åˆ°çš„æ³¨è§£~~</p>
<p>å½“ç„¶äº†ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦æ˜¯ä¸ºäº†ä½œä¸ºä¸€ä»½å¤‡å¿˜å½•ï¼Œå…·ä½“çš„åº•å±‚è§£æï¼Œä¼šå¦å¤–å†™åšå®¢è¿›è¡Œåˆ†æ~</p>
</blockquote>
<h1 id="ğŸç±»æ³¨è§£"><a href="#ğŸç±»æ³¨è§£" class="headerlink" title="ğŸç±»æ³¨è§£"></a>ğŸç±»æ³¨è§£</h1><ul>
<li><code>@Component</code> ï¼šå½“ä¸æ˜ç¡®ç±»å±äºå“ªä¸€å±‚æ¶æ„æ—¶ï¼Œç”¨äºæ³¨å†Œ<code>Spring</code>ç»„ä»¶.</li>
<li><code>@Repository</code> ï¼šå¯¹åº”æŒä¹…å±‚å³<code>Dao</code>å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œ.</li>
<li><code>@Service</code> ï¼šå¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° <code>Dao </code>å±‚.</li>
<li><code>@Controller</code> ï¼šå¯¹åº”MVC æ§åˆ¶å±‚ï¼Œç”¨æˆ·æ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ <code>Service </code>å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢.</li>
<li><code>@RestController</code>ï¼šç›¸è¾ƒäº<code>@Controller</code> è€Œè¨€ï¼Œé™åˆ¶äº†æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•è¿”å›å€¼åªèƒ½ä¸º<code>return</code>ä¸­å†…å®¹æœ¬èº«</li>
<li><code>@SpringBootAplication</code>ï¼šç”¨äºæ ‡æ³¨SpringBootå¯åŠ¨ç±»ï¼Œä¹Ÿæ˜¯å¯åŠ¨è‡ªåŠ¨é…ç½®æ‰«æçš„æ³¨è§£</li>
<li><code>@SpringBootTest</code>ï¼šç”¨äºè¿›è¡Œå•å…ƒæµ‹è¯•</li>
<li><code>@Configuration</code>ï¼šç”¨äºå£°æ˜æŸä¸ªç±»ä¸ºé…ç½®ç±»ï¼Œå¤šç”¨äº<code>Spring</code>åº”ç”¨ä¸­ï¼Œç›¸å½“äºåœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³é…ç½®</li>
<li><code>@SpringBootConfiguration</code>ï¼šæ›´å¤šçš„ç”¨äº<code>SpringBoot</code>åº”ç”¨ä¸­ï¼Œæ•ˆæœåŒ<code>@Configuration</code></li>
<li><code>@ComponentScan</code>ï¼šä½¿<code>SpringBoot</code>åº”ç”¨è‡ªåŠ¨æ‰«æ<code>@SpringBootApplication</code>æ‰€åœ¨ç±»çš„åŒçº§åŒ…ä»¥åŠå®ƒçš„å­åŒ…ä¸­çš„é…ç½®</li>
<li><code>@EnableAutoConfiguration</code>ï¼šä½¿<code>SpringBoot</code>æ ¹æ®å½“å‰åº”ç”¨é¡¹ç›®çš„ä¾èµ–è¿›è¡Œç›¸å…³çš„é…ç½®</li>
<li><code>@ConfigurationProperties(prefix = &quot;xxxx&quot;)</code>ï¼šç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</li>
<li><code>@PropertySource</code>ï¼šå¯ä»¥æŒ‡å®šéœ€è¦åŠ è½½çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¸€ä¸ªä¹Ÿå¯ä»¥å¤šä¸ª(å¤šä¸ªä½¿ç”¨{}æ‹¬èµ·æ¥å³å¯)ï¼Œè¯»å–æ•°æ®éœ€è¦ä½¿ç”¨<code>@Value</code></li>
</ul>
<h1 id="ğŸ«æ–¹æ³•æ³¨è§£"><a href="#ğŸ«æ–¹æ³•æ³¨è§£" class="headerlink" title="ğŸ«æ–¹æ³•æ³¨è§£"></a>ğŸ«æ–¹æ³•æ³¨è§£</h1><ul>
<li><code>@RequestMapping</code>ï¼šè¯·æ±‚æ˜ å°„è·¯å¾„</li>
<li><code>@GetMapping</code>ï¼š<code>get</code>è¯·æ±‚æ˜ å°„è·¯å¾„ï¼Œåªæ¥å—<code>get</code>è¯·æ±‚</li>
<li><code>@PostMapping</code>: <code>post</code>è¯·æ±‚æ˜ å°„è·¯å¾„ï¼Œåªæ¥å—<code>post</code>è¯·æ±‚</li>
<li><code>@ResponseBody</code>: å½“ä½¿ç”¨<code>@controller</code>çš„æ—¶å€™ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ æ¬¡æ³¨è§£ç­‰ä»·äºä½¿ç”¨<code>@RestController</code></li>
<li><code>@Test</code>ï¼šæ ‡æ³¨æµ‹è¯•æ–¹æ³•ï¼Œè®©æ–¹æ³•å¯ä»¥ç‹¬ç«‹è¿è¡Œ</li>
</ul>
<h1 id="ğŸ¨å±æ€§æ³¨è§£"><a href="#ğŸ¨å±æ€§æ³¨è§£" class="headerlink" title="ğŸ¨å±æ€§æ³¨è§£"></a>ğŸ¨å±æ€§æ³¨è§£</h1><ul>
<li><code>@Value</code> : ç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­å€¼</li>
<li><code>@Autowired</code>ï¼šç”¨äºè‡ªåŠ¨æ³¨å…¥<code>Spring IOC</code> å®¹å™¨ä¸­çš„å¯¹è±¡</li>
<li><code>@RequestBody</code>ï¼šåªèƒ½ç”¨äºè·å–<code>Post</code>è¯·æ±‚ä¸­çš„è¯·æ±‚ä½“</li>
<li><code>@PathVarible</code>ï¼šç”¨äºè·å–<code>RESTful</code>é£æ ¼çš„<code>get</code>è¯·æ±‚å‚æ•°</li>
<li><code>@RequestParam</code>ï¼šç”¨äºè·å–<code>post/get</code>è¯·æ±‚æ–¹å¼çš„è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œå¦‚æœå˜é‡åä¸ä¸€è‡´ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud(ä¸€):æ ¸å¿ƒæ¦‚å¿µåŠå…¶æ¶æ„</title>
    <url>/2021/07/29/SpringCloud%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ä½•ä¸ºå¾®æœåŠ¡"><a href="#ä½•ä¸ºå¾®æœåŠ¡" class="headerlink" title="ä½•ä¸ºå¾®æœåŠ¡"></a>ä½•ä¸ºå¾®æœåŠ¡</h1><ul>
<li><a href="https://www.martinfowler.com/articles/microservices.html">å®˜ç½‘</a></li>
</ul>
<p>In short, the microservice architectural(æ¶æ„) style is an approach to developing a single application as <code>a suite(ç³»åˆ—) of small services</code>, each <code>running in its own process(è¿›ç¨‹)</code> and communicating with lightweight mechanisms, often an HTTP resource API. These services are <code>built around business(ä¸šåŠ¡) capabilities(å•å…ƒ)</code> and <code>independently(ç‹¬ç«‹) deployable(éƒ¨ç½²)</code> by fully automated deployment machinery. <code>There is a bare(åŸºäº) minimum of centralized(åˆ†å¸ƒå¼) management(ç®¡ç†) of these services</code>, which may be written in different programming languages and use different data storage technologies.                        â€”â€“[æ‘˜è‡ªå®˜ç½‘]</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> a suite of small services                      				--ä¸€ç³»åˆ—å¾®å°æœåŠ¡</span><br><span class="line"><span class="bullet">-</span> running in its own process                                    --è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹é‡Œ</span><br><span class="line"><span class="bullet">-</span> built around business capabilities                            --å›´ç»•è‡ªå·±çš„ä¸šåŠ¡å¼€å‘</span><br><span class="line"><span class="bullet">-</span> independently deployable                                      --ç‹¬ç«‹éƒ¨ç½²</span><br><span class="line"><span class="bullet">-</span> bare minimum of centralized management of these services      --åŸºäºåˆ†å¸ƒå¼ç®¡ç†</span><br></pre></td></tr></table></figure>

<ul>
<li>å®˜æ–¹å®šä¹‰:<strong>å¾®æœåŠ¡å°±æ˜¯ç”±ä¸€ç³»åˆ—å›´ç»•è‡ªå·±ä¸šåŠ¡å¼€å‘çš„å¾®å°æœåŠ¡æ„æˆ,ä»–ä»¬ç‹¬ç«‹éƒ¨ç½²è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹é‡Œ,åŸºäºåˆ†å¸ƒå¼çš„ç®¡ç†</strong></li>
<li>é€šä¿—å®šä¹‰:<strong>å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„ï¼Œè¿™ç§æ¶æ„æ˜¯å°†å•ä¸ªçš„æ•´ä½“åº”ç”¨ç¨‹åºåˆ†å‰²æˆæ›´å°çš„é¡¹ç›®å…³è”çš„ç‹¬ç«‹çš„æœåŠ¡ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸å®ç°ä¸€ç»„ç‹¬ç«‹çš„ç‰¹æ€§æˆ–åŠŸèƒ½ï¼ŒåŒ…å«è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å’Œé€‚é…å™¨ã€‚å„ä¸ªå¾®æœåŠ¡ä¹‹é—´çš„å…³è”é€šè¿‡æš´éœ²apiæ¥å®ç°ã€‚è¿™äº›ç‹¬ç«‹çš„å¾®æœåŠ¡ä¸éœ€è¦éƒ¨ç½²åœ¨åŒä¸€ä¸ªè™šæ‹Ÿæœºï¼ŒåŒä¸€ä¸ªç³»ç»Ÿå’ŒåŒä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ä¸­ã€‚</strong></li>
</ul>
<h1 id="å¾®æœåŠ¡çš„è§£å†³æ–¹æ¡ˆ"><a href="#å¾®æœåŠ¡çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¾®æœåŠ¡çš„è§£å†³æ–¹æ¡ˆ"></a>å¾®æœåŠ¡çš„è§£å†³æ–¹æ¡ˆ</h1><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.Dubbo (é˜¿é‡Œç³»)</span></span><br><span class="line"><span class="bullet">-</span> åˆå‡ºèŒ…åº:2011å¹´æœ«ï¼Œé˜¿é‡Œå·´å·´åœ¨GitHubä¸Šå¼€æºäº†åŸºäºJavaçš„åˆ†å¸ƒå¼æœåŠ¡æ²»ç†æ¡†æ¶Dubboï¼Œä¹‹åå®ƒæˆä¸ºäº†å›½å†…è¯¥ç±»å¼€æºé¡¹ç›®çš„ä½¼ä½¼è€…ï¼Œè®¸å¤šå¼€å‘è€…å¯¹å…¶è¡¨ç¤ºé’çã€‚åŒæ—¶ï¼Œå…ˆåæœ‰ä¸å°‘å…¬å¸åœ¨å®è·µä¸­åŸºäºDubboè¿›è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ï¼Œç›®å‰åœ¨GitHubä¸Šï¼Œå®ƒçš„forkã€staræ•°å‡å·²ç ´ä¸‡ã€‚Dubboè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆï¼Œä½¿å¾—åº”ç”¨å¯é€šè¿‡é«˜æ€§èƒ½RPCå®ç°æœåŠ¡çš„è¾“å‡ºã€è¾“å…¥åŠŸèƒ½å’ŒSpringæ¡†æ¶æ— ç¼é›†æˆã€‚DubboåŒ…å«è¿œç¨‹é€šè®¯ã€é›†ç¾¤å®¹é”™å’Œè‡ªåŠ¨å‘ç°ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> åœæ­¢ç»´æŠ¤:ä»2012å¹´10æœˆ23æ—¥Dubbo 2.5.3å‘å¸ƒåï¼Œåœ¨Dubboå¼€æºå°†æ»¡ä¸€å‘¨å¹´ä¹‹é™…ï¼Œé˜¿é‡ŒåŸºæœ¬åœæ­¢äº†å¯¹Dubboçš„ä¸»è¦å‡çº§ã€‚åªåœ¨ä¹‹åçš„2013å¹´å’Œ2014å¹´æ›´æ–°è¿‡2æ¬¡å¯¹Dubbo 2.4çš„ç»´æŠ¤ç‰ˆæœ¬ï¼Œç„¶ååœæ­¢äº†æ‰€æœ‰ç»´æŠ¤å·¥ä½œã€‚Dubboå¯¹Srpingçš„æ”¯æŒä¹Ÿåœç•™åœ¨äº†Spring 2.5.6ç‰ˆæœ¬ä¸Šã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> æ­»è€Œå¤ç”Ÿ:å¤šå¹´æ¼«é•¿çš„ç­‰å¾…ï¼Œéšç€å¾®æœåŠ¡çš„ç«çƒ­å…´èµ·ï¼Œåœ¨å›½å†…å¤–å¼€å‘è€…å¯¹é˜¿é‡Œä¸å†å‡çº§ç»´æŠ¤Dubboçš„åæ§½å£°ä¸­ï¼Œé˜¿é‡Œç»ˆäºå¼€å§‹é‡æ–°å¯¹Dubboçš„å‡çº§å’Œç»´æŠ¤å·¥ä½œã€‚åœ¨2017å¹´9æœˆ7æ—¥ï¼Œé˜¿é‡Œå‘å¸ƒäº†Dubboçš„2.5.4ç‰ˆæœ¬ï¼Œè·ç¦»ä¸Šä¸€ä¸ªç‰ˆæœ¬2.5.3å‘å¸ƒå·²ç»æ¥è¿‘å¿«5å¹´æ—¶é—´äº†ã€‚åœ¨éšåçš„å‡ ä¸ªæœˆä¸­ï¼Œé˜¿é‡ŒDubboå¼€å‘å›¢é˜Ÿä»¥å·®ä¸å¤šæ¯æœˆä¸€ç‰ˆæœ¬çš„é€Ÿåº¦å¼€å§‹å¿«é€Ÿå‡çº§è¿­ä»£ï¼Œä¿®è¡¥äº†Dubboè€ç‰ˆæœ¬å¤šå¹´æ¥å­˜åœ¨çš„è¯¸å¤šbugï¼Œå¹¶å¯¹Springç­‰ç»„ä»¶çš„æ”¯æŒè¿›è¡Œäº†å…¨é¢å‡çº§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 2018å¹´1æœˆ8æ—¥ï¼ŒDubboåˆ›å§‹äººä¹‹ä¸€æ¢é£åœ¨Dubboäº¤æµç¾¤é‡Œé€éœ²äº†Dubbo 3.0æ­£åœ¨åŠ¨å·¥çš„æ¶ˆæ¯ã€‚Dubbo 3.0å†…æ ¸ä¸Dubbo 2.0å®Œå…¨ä¸åŒï¼Œä½†å…¼å®¹Dubbo 2.0ã€‚Dubbo 3.0å°†ä»¥Streamingä¸ºå†…æ ¸ï¼Œä¸å†æ˜¯Dubbo æ—¶ä»£çš„RPCï¼Œä½†æ˜¯RPCä¼šåœ¨Dubbo 3.0ä¸­å˜æˆè¿œç¨‹Streamingå¯¹æ¥çš„ä¸€ç§å¯é€‰å½¢æ€ã€‚ä»Dubboæ–°ç‰ˆæœ¬çš„è·¯çº¿è§„åˆ’ä¸Šå¯ä»¥çœ‹å‡ºï¼Œæ–°ç‰ˆæœ¬çš„Dubboåœ¨åŸæœ‰æœåŠ¡æ²»ç†çš„åŠŸèƒ½åŸºç¡€ä¸Šï¼Œå°†å…¨é¢æ‹¥æŠ±å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> ç»“è®º:å½“å‰ç”±äºRPCåè®®ã€æ³¨å†Œä¸­å¿ƒå…ƒæ•°æ®ä¸åŒ¹é…ç­‰é—®é¢˜ï¼Œåœ¨é¢ä¸´å¾®æœåŠ¡åŸºç¡€æ¡†æ¶é€‰å‹æ—¶Dubboä¸Spring Cloudæ˜¯åªèƒ½äºŒé€‰ä¸€ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¤§å®¶æ€»æ˜¯æ‹¿Dubboå’ŒSpring Cloudåšå¯¹æ¯”çš„åŸå› ä¹‹ä¸€ã€‚Dubboä¹‹åä¼šç§¯æå¯»æ±‚é€‚é…åˆ°Spring Cloudç”Ÿæ€ï¼Œæ¯”å¦‚ä½œä¸ºSpring Cloudçš„äºŒè¿›åˆ¶é€šä¿¡æ–¹æ¡ˆæ¥å‘æŒ¥Dubboçš„æ€§èƒ½ä¼˜åŠ¿ï¼Œæˆ–è€…Dubboé€šè¿‡æ¨¡å—åŒ–ä»¥åŠå¯¹httpçš„æ”¯æŒé€‚é…åˆ°Spring Cloudã€‚</span><br></pre></td></tr></table></figure>

<img src="/2021/07/29/SpringCloud%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># Spring Cloud:</span></span><br><span class="line"><span class="bullet">-</span> Spring Cloud NetFlix  </span><br><span class="line"><span class="code">	åŸºäºç¾å›½Netflixå…¬å¸å¼€æºçš„ç»„ä»¶è¿›è¡Œå°è£…,æä¾›äº†å¾®æœåŠ¡ä¸€æ ˆå¼çš„è§£å†³æ–¹æ¡ˆã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">- Spring Cloud alibaba</span></span><br><span class="line"><span class="code">	åœ¨Spring cloud netflixåŸºç¡€ä¸Šå°è£…äº†é˜¿é‡Œå·´å·´çš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆã€‚</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">- Spring Cloud Spring</span></span><br><span class="line"><span class="code">	ç›®å‰springå®˜æ–¹è¶‹åŠ¿æ­£åœ¨é€æ¸å¸æ”¶Netflixç»„ä»¶çš„ç²¾å,å¹¶åœ¨æ­¤åŸºç¡€è¿›è¡ŒäºŒæ¬¡å°è£…ä¼˜åŒ–,æ‰“é€ springä¸“æœ‰çš„è§£å†³æ–¹æ¡ˆ</span></span><br></pre></td></tr></table></figure>

<h1 id="ä½•ä¸ºSpringCloud"><a href="#ä½•ä¸ºSpringCloud" class="headerlink" title="ä½•ä¸ºSpringCloud"></a>ä½•ä¸ºSpringCloud</h1><h2 id="å®˜æ–¹å®šä¹‰"><a href="#å®˜æ–¹å®šä¹‰" class="headerlink" title="å®˜æ–¹å®šä¹‰"></a>å®˜æ–¹å®šä¹‰</h2><ul>
<li>å®˜æ–¹ç½‘å€: <a href="https://cloud.spring.io/spring-cloud-static/Hoxton.SR5/reference/html/">https://cloud.spring.io/spring-cloud-static/Hoxton.SR5/reference/html/</a></li>
</ul>
<p><strong>Spring Cloud provides tools for developers to quickly build some of the common patterns in distributed systems</strong> (e.g. <code>configuration management</code>,<code> service discovery</code>, <code>circuit breakers, intelligent routing, micro-proxy, control bus</code>). Coordination of distributed systems leads to boiler plate patterns, and using Spring Cloud developers can quickly stand up services and applications that implement those patterns.  â€”â€”-[æ‘˜è‡ªå®˜ç½‘]</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ç¿»è¯‘</span></span><br><span class="line"><span class="bullet">-</span> springcloudä¸ºå¼€å‘äººå‘˜æä¾›äº†åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¿«é€Ÿæ„å»ºä¸€äº›é€šç”¨æ¨¡å¼çš„å·¥å…·ï¼ˆä¾‹å¦‚é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€æ™ºèƒ½è·¯ç”±ã€å¾®ä»£ç†ã€æ§åˆ¶æ€»çº¿ï¼‰ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„åè°ƒå¯¼è‡´äº†é”…ç‚‰æ¿æ¨¡å¼ï¼Œä½¿ç”¨springcloudå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿåœ°å»ºç«‹å®ç°è¿™äº›æ¨¡å¼çš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 2.é€šä¿—ç†è§£</span></span><br><span class="line"><span class="bullet">-</span> springcloudæ˜¯ä¸€ä¸ªå«æ¦‚å¤šä¸ªå­é¡¹ç›®çš„å¼€å‘å·¥å…·é›†,é›†åˆäº†ä¼—å¤šçš„å¼€æºæ¡†æ¶,ä»–åˆ©ç”¨äº†Spring Bootå¼€å‘çš„ä¾¿åˆ©æ€§å®ç°äº†å¾ˆå¤šåŠŸèƒ½,å¦‚æœåŠ¡æ³¨å†Œ,æœåŠ¡æ³¨å†Œå‘ç°,è´Ÿè½½å‡è¡¡ç­‰.SpringCloudåœ¨æ•´åˆè¿‡ç¨‹ä¸­ä¸»è¦æ˜¯é’ˆå¯¹Netflix(è€é)å¼€æºç»„ä»¶çš„å°è£….SpringCloudçš„å‡ºç°çœŸæ­£çš„ç®€åŒ–äº†åˆ†å¸ƒå¼æ¶æ„çš„å¼€å‘ã€‚NetFlix æ˜¯ç¾å›½çš„ä¸€ä¸ªåœ¨çº¿è§†é¢‘ç½‘ç«™,å¾®æœåŠ¡ä¸šçš„ç¿˜æ¥š,ä»–æ˜¯å…¬è®¤çš„å¤§è§„æ¨¡ç”Ÿäº§çº§å¾®æœåŠ¡çš„æ°å‡ºå®è·µè€…,NetFlixçš„å¼€æºç»„ä»¶å·²ç»åœ¨ä»–å¤§è§„æ¨¡åˆ†å¸ƒå¼å¾®æœåŠ¡ç¯å¢ƒä¸­ç»è¿‡å¤šå¹´çš„ç”Ÿäº§å®æˆ˜éªŒè¯,å› æ­¤Spring Cloudä¸­å¾ˆå¤šç»„ä»¶éƒ½æ˜¯åŸºäºNetFlix</span><br><span class="line">spring netflix ç»´æŠ¤  é—­æº</span><br></pre></td></tr></table></figure>

<h2 id="æ ¸å¿ƒæ¶æ„åŠå…¶ç»„ä»¶"><a href="#æ ¸å¿ƒæ¶æ„åŠå…¶ç»„ä»¶" class="headerlink" title="æ ¸å¿ƒæ¶æ„åŠå…¶ç»„ä»¶"></a>æ ¸å¿ƒæ¶æ„åŠå…¶ç»„ä»¶</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æ ¸å¿ƒç»„ä»¶è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> eurekaserverã€consulã€nacos  	 æœåŠ¡æ³¨å†Œä¸­å¿ƒç»„ä»¶</span><br><span class="line"><span class="bullet">-</span> rabbion &amp; openfeign  			  æœåŠ¡è´Ÿè½½å‡è¡¡ å’Œ æœåŠ¡è°ƒç”¨ç»„ä»¶</span><br><span class="line"><span class="bullet">-</span> hystrix &amp; hystrix dashboard     æœåŠ¡æ–­è·¯å™¨  å’Œ  æœåŠ¡ç›‘æ§ç»„ä»¶</span><br><span class="line"><span class="bullet">-</span> zuulã€gateway 					 æœåŠ¡ç½‘å…³ç»„ä»¶</span><br><span class="line"><span class="bullet">-</span> config 						  ç»Ÿä¸€é…ç½®ä¸­å¿ƒç»„ä»¶</span><br><span class="line"><span class="bullet">-</span> bus                             æ¶ˆæ¯æ€»çº¿ç»„ä»¶</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<img src="/2021/07/29/SpringCloud%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class>

<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><h2 id="ç‰ˆæœ¬å‘½å"><a href="#ç‰ˆæœ¬å‘½å" class="headerlink" title="ç‰ˆæœ¬å‘½å"></a>ç‰ˆæœ¬å‘½å</h2><ul>
<li>å®˜ç½‘åœ°å€:<a href="https://spring.io/projects/spring-cloud">https://spring.io/projects/spring-cloud</a></li>
</ul>
<p>Spring Cloud is an umbrella(ä¼) project consisting of independent projects with, in principle, different release cadences. To manage the portfolio a BOM (Bill of Materials) is published with a curated set of dependencies on the individual project (see below). The release trains have names, not versions, to avoid confusion with the sub-projects. The names are an alphabetic sequence (so you can sort them chronologically) with names of London Tube stations (â€œAngelâ€ is the first release, â€œBrixtonâ€ is the second). When point releases of the individual projects accumulate to a critical mass, or if there is a critical bug in one of them that needs to be available to everyone, the release train will push out â€œservice releasesâ€ with names ending â€œ.SRXâ€, where â€œXâ€ is a number.     â€”[æ‘˜è‡ªå®˜ç½‘]</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ç¿»è¯‘</span></span><br><span class="line"><span class="bullet">-</span> springcloudæ˜¯ä¸€ä¸ªç”±ä¼—å¤šç‹¬ç«‹å­é¡¹ç›®ç»„æˆçš„å¤§å‹ç»¼åˆé¡¹ç›®ï¼ŒåŸåˆ™æ¯ä¸ªå­é¡¹ç›®ä¸Šæœ‰ä¸åŒçš„å‘å¸ƒèŠ‚å¥,éƒ½ç»´æŠ¤è‡ªå·±å‘å¸ƒç‰ˆæœ¬å·ã€‚ä¸ºäº†æ›´å¥½çš„ç®¡ç†springcloudçš„ç‰ˆæœ¬,é€šè¿‡ä¸€ä¸ªèµ„æºæ¸…å•BOM(Bill of Materials),ä¸ºé¿å…ä¸å­é¡¹ç›®çš„å‘å¸ƒå·æ··æ·†ï¼Œæ‰€ä»¥æ²¡æœ‰é‡‡ç”¨ç‰ˆæœ¬å·çš„æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡å‘½åçš„æ–¹å¼ã€‚è¿™äº›åå­—æ˜¯æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„ã€‚å¦‚ä¼¦æ•¦åœ°é“ç«™çš„åç§°ï¼ˆâ€œå¤©ä½¿â€æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œâ€œå¸ƒé‡Œæ–¯é¡¿â€æ˜¯ç¬¬äºŒä¸ªç‰ˆæœ¬,&quot;å¡å§†ç™»&quot;æ˜¯ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼‰ã€‚å½“å•ä¸ªé¡¹ç›®çš„ç‚¹å‘å¸ƒç´¯ç§¯åˆ°ä¸€ä¸ªä¸´ç•Œé‡ï¼Œæˆ–è€…å…¶ä¸­ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå…³é”®ç¼ºé™·éœ€è¦æ¯ä¸ªäººéƒ½å¯ä»¥ä½¿ç”¨æ—¶ï¼Œå‘å¸ƒåºåˆ—å°†æ¨å‡ºåç§°ä»¥â€œ.SRXâ€ç»“å°¾çš„â€œæœåŠ¡å‘å¸ƒâ€ï¼Œå…¶ä¸­â€œXâ€æ˜¯ä¸€ä¸ªæ•°å­—ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 2.ä¼¦æ•¦åœ°é“ç«™åç§° </span></span><br><span class="line"><span class="bullet">-</span> Angelã€Brixtonã€Camdenã€Dalstonã€Edgwareã€Finchleyã€Greenwichã€Hoxton</span><br></pre></td></tr></table></figure>

<h2 id="ç‰ˆæœ¬é€‰æ‹©"><a href="#ç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç‰ˆæœ¬é€‰æ‹©"></a>ç‰ˆæœ¬é€‰æ‹©</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ç‰ˆæœ¬é€‰æ‹©å®˜æ–¹å»ºè®® https://spring.io/projects/spring-cloud</span></span><br><span class="line"><span class="bullet">-</span> Angel 										ç‰ˆæœ¬åŸºäºspringboot1.2.xç‰ˆæœ¬æ„å»ºä¸1.3ç‰ˆæœ¬ä¸å…¼å®¹</span><br><span class="line"><span class="bullet">-</span> Brixton										ç‰ˆæœ¬åŸºäºspringboot1.3.xç‰ˆæœ¬æ„å»ºä¸1.2ç‰ˆæœ¬ä¸å…¼å®¹</span><br><span class="line"><span class="code">	`2017å¹´Brixton and Angel releaseå®˜æ–¹å®£å¸ƒæŠ¥åºŸ</span></span><br><span class="line"><span class="code">- Camden      							ç‰ˆæœ¬åŸºäºspringboot1.4.xç‰ˆæœ¬æ„å»ºå¹¶åœ¨1.5ç‰ˆæœ¬é€šè¿‡æµ‹è¯•</span></span><br><span class="line"><span class="code">	`2018å¹´Camden releaseå®˜æ–¹å®£å¸ƒæŠ¥åºŸ</span></span><br><span class="line"><span class="code">- Dalstonã€Edgware 				 ç‰ˆæœ¬åŸºäºspringboot1.5.xç‰ˆæœ¬æ„å»ºç›®å‰ä¸èƒ½å†springboot2.0.xç‰ˆæœ¬ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="code">	`Dalston(è¾¾å°”æ–¯é¡¿)å°†äº2018å¹´12æœˆå®˜æ–¹å®£å¸ƒæŠ¥åºŸã€‚Edgwareå°†éµå¾ªSpring Boot 1.5.xçš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚</span></span><br><span class="line"><span class="code">- Finchley 									ç‰ˆæœ¬åŸºäºspringboot2.0.xç‰ˆæœ¬è¿›è¡Œæ„å»º,ä¸èƒ½å…¼å®¹1.xç‰ˆæœ¬</span></span><br><span class="line"><span class="code">- Greenwich									ç‰ˆæœ¬åŸºäºspringboot2.1.xç‰ˆæœ¬è¿›è¡Œæ„å»º,ä¸èƒ½å…¼å®¹1.xç‰ˆæœ¬</span></span><br><span class="line"><span class="code">- Hoxton									ç‰ˆæœ¬åŸºäºspringboot2.2.xç‰ˆæœ¬è¿›è¡Œæ„å»º</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">Spring Cloud Dalston, Edgware, Finchley, and Greenwich have all reached end of life status and are no longer supported.</span></span><br></pre></td></tr></table></figure>

<img src="/2021/07/29/SpringCloud%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud(äºŒ):æœåŠ¡æ³¨å†Œä¸­å¿ƒ</title>
    <url>/2021/08/02/SpringCloud%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h1><p>æ‰€è°“æœåŠ¡æ³¨å†Œä¸­å¿ƒå°±æ˜¯åœ¨æ•´ä¸ªçš„å¾®æœåŠ¡æ¶æ„ä¸­å•ç‹¬æå‡ºä¸€ä¸ªæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä¸å®Œæˆç³»ç»Ÿçš„ä»»ä½•çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œä»…ä»…ç”¨æ¥å®Œæˆå¯¹æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿçš„æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°ï¼Œä»¥åŠå¯¹æœåŠ¡å¥åº·çŠ¶æ€çš„ç›‘æ§å’Œç®¡ç†åŠŸèƒ½ã€‚</p>
<img src="/2021/08/02/SpringCloud%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="bullet">-</span> å¯ä»¥å¯¹æ‰€æœ‰çš„å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œå­˜å‚¨ï¼Œå¦‚å¾®æœåŠ¡çš„åç§°ã€IPã€ç«¯å£ç­‰</span><br><span class="line"><span class="bullet">-</span> å¯ä»¥åœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨æ—¶é€šè¿‡æœåŠ¡å‘ç°æŸ¥è¯¢å¯ç”¨çš„å¾®æœåŠ¡åˆ—è¡¨åŠç½‘ç»œåœ°å€è¿›è¡ŒæœåŠ¡è°ƒç”¨</span><br><span class="line"><span class="bullet">-</span> å¯ä»¥å¯¹æ‰€æœ‰çš„å¾®æœåŠ¡è¿›è¡Œå¿ƒè·³æ£€æµ‹ï¼Œå¦‚å‘ç°æŸå®ä¾‹é•¿æ—¶é—´æ— æ³•è®¿é—®ï¼Œå°±ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ç§»é™¤è¯¥å®ä¾‹ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒ"><a href="#å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒ"></a>å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒ</h2><p>springcloudæ”¯æŒçš„å¤šç§æ³¨å†Œä¸­å¿ƒEurekaã€Consulã€Zookeeperã€ä»¥åŠé˜¿é‡Œå·´å·´æ¨å‡ºNacosã€‚è¿™äº›æ³¨å†Œä¸­å¿ƒåœ¨æœ¬è´¨ä¸Šéƒ½æ˜¯ç”¨æ¥ç®¡ç†æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ä»¥åŠæœåŠ¡çŠ¶æ€çš„æ£€æŸ¥çš„ã€‚</p>
<h2 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h2><h3 id="æœåŠ¡ç«¯æ­å»º"><a href="#æœåŠ¡ç«¯æ­å»º" class="headerlink" title="æœåŠ¡ç«¯æ­å»º"></a>æœåŠ¡ç«¯æ­å»º</h3><ul>
<li><strong>åˆ©ç”¨çˆ¶é¡¹ç›®è¿›è¡Œä¾èµ–ç‰ˆæœ¬ç®¡ç†</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringCloud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç»§æ‰¿springBootçˆ¶é¡¹ç›®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ§åˆ¶ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.cloud-version</span>&gt;</span>2020.0.3<span class="tag">&lt;/<span class="name">spring.cloud-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨çˆ¶é¡¹ç›®æ¥çº¦æŸç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--springCloud--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.cloud-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span> <span class="comment">&lt;!--ç”¨äºæ ‡è¯† springCloudä¸­æ‰€ç”¨å·¥å…·çš„ç‰ˆæœ¬--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å­æ¨¡å—å¼•å…¥ä¾èµ–</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥æœåŠ¡æ³¨å†Œä¸­å¿ƒ æœåŠ¡ç«¯ä¾èµ– EurekaServer--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å…¨å±€é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®</strong></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒé»˜è®¤ç«¯å£å·</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8761</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="comment">#æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ </span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone :</span> <span class="string">http://localhost:8761/eureka</span></span><br><span class="line">    <span class="comment"># è¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œä¸ç”¨æ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># è¡¨ç¤ºè‡ªå·±å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œä¸ç”¨å»æ³¨å†Œä¸­å¿ƒè·å–å…¶ä»–æœåŠ¡çš„åœ°å€,æ­å»ºæ³¨å†Œä¸­å¿ƒé›†ç¾¤æ—¶éœ€è¦ä¸º true</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡åä¸åŒºåˆ†å¤§å°å†™ ä¸èƒ½ç”¨ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Eureka-Server-01</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¼€å¯<code>Eureka</code>æœåŠ¡ç«¯æœåŠ¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//å¼€å¯å½“å‰æœåŠ¡ä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ç«¯</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaServerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="å®¢æˆ·ç«¯æ­å»º"><a href="#å®¢æˆ·ç«¯æ­å»º" class="headerlink" title="å®¢æˆ·ç«¯æ­å»º"></a>å®¢æˆ·ç«¯æ­å»º</h3><p>**æç¤º:**é…ç½®å¤§å¤šéƒ½ç›¸åŒï¼Œä»¥ä¸‹åªåˆ—ä¸¾ä¸ä¸€æ ·çš„</p>
<ul>
<li>ä¾èµ–å¼•å…¥</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Eureka å®¢æˆ·ç«¯ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>é…ç½®æ–‡ä»¶ä¸­åªéœ€è¦å°† <code>service-urlä¸­defaultZone</code>æ”¹ä¸ºå¯¹åº”çš„æœåŠ¡ç«¯åœ°å€å³å¯ï¼Œå¦‚æœæ˜¯é›†ç¾¤ï¼Œä½¿ç”¨ <code>,</code> åˆ†éš”å†™å¤šä¸ªåœ°å€å³å¯</p>
</li>
<li><p>å¼€å¯<code>Eureka</code>å®¢æˆ·ç«¯æœåŠ¡</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaClientApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="æœåŠ¡ç«¯é›†ç¾¤æ­å»º"><a href="#æœåŠ¡ç«¯é›†ç¾¤æ­å»º" class="headerlink" title="æœåŠ¡ç«¯é›†ç¾¤æ­å»º"></a>æœåŠ¡ç«¯é›†ç¾¤æ­å»º</h3><p>å‡å¦‚å­˜åœ¨ä¸‰ä¸ªæœåŠ¡ç«¯ï¼Œåˆ™éœ€è¦å°†å…¶ä¸­ä»»ä½•ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡åœ°å€æ³¨å†Œåˆ°å…¶å®ƒæœåŠ¡ä¸­å¿ƒä¸Šå³å¯ï¼Œå®¢æˆ·ç«¯è‹¥éœ€è¦ä½¿ç”¨ï¼Œåˆ™éœ€è¦å°†æ‰€æœ‰æ³¨å†Œä¸­å¿ƒçš„åœ°å€éƒ½è¿›è¡Œæ³¨å†Œ.</p>
<h2 id="Consul"><a href="#Consul" class="headerlink" title="Consul"></a>Consul</h2><h3 id="å®‰è£…ä¸‹è½½"><a href="#å®‰è£…ä¸‹è½½" class="headerlink" title="å®‰è£…ä¸‹è½½"></a>å®‰è£…ä¸‹è½½</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¼€å‘æ¨¡å¼å¯åŠ¨æœåŠ¡</span></span><br><span class="line">$ consul agent -dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ•°æ®ä¸­å¿ƒå¯åŠ¨</span></span><br><span class="line">$ consul agent -dev -datacenter=consul</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯è¿‡å localhost:8500 è®¿é—®å…¶uiç•Œé¢</span></span><br><span class="line"><span class="comment"># å¯åŠ¨åé»˜è®¤ä¼šå°†æœåŠ¡æœ¬èº«è¿›è¡Œæ³¨å†Œ</span></span><br></pre></td></tr></table></figure>



<h3 id="å®¢æˆ·ç«¯ç¼–å†™"><a href="#å®¢æˆ·ç«¯ç¼–å†™" class="headerlink" title="å®¢æˆ·ç«¯ç¼–å†™"></a>å®¢æˆ·ç«¯ç¼–å†™</h3><ul>
<li>å¼•å…¥ä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Consul--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ£€æµ‹å¿ƒè·³æ‰€éœ€ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å…¨å±€å±æ€§é…ç½®</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8082</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæ³¨å†Œä¸­å¿ƒip</span></span><br><span class="line"><span class="meta">spring.cloud.consul.host</span>=<span class="string">localhost</span></span><br><span class="line"><span class="comment">#æŒ‡å®šç«¯å£å·</span></span><br><span class="line"><span class="meta">spring.cloud.consul.port</span>=<span class="string">8500</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæœåŠ¡æ³¨å†Œæ—¶çš„åå­—</span></span><br><span class="line"><span class="meta">spring.cloud.consul.discovery.service-name</span>=<span class="string">consul-client-01</span></span><br><span class="line"><span class="comment">#å¥åº·æ£€æŸ¥</span></span><br><span class="line"><span class="meta">spring.cloud.consul.discovery.register-health-check</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#é¡¹ç›®åå­—</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">consul_client</span></span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®å¯åŠ¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//å¼€å¯æ³¨å†ŒæœåŠ¡ä¸­å¿ƒæœåŠ¡ ï¼Œ é€šç”¨æ³¨è§£</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringCloudConsulClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringCloud05ConsulClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="å¾®æœåŠ¡é—´é€šä¿¡"><a href="#å¾®æœåŠ¡é—´é€šä¿¡" class="headerlink" title="å¾®æœåŠ¡é—´é€šä¿¡"></a>å¾®æœåŠ¡é—´é€šä¿¡</h3><h4 id="ä½¿ç”¨RestTemplate"><a href="#ä½¿ç”¨RestTemplate" class="headerlink" title="ä½¿ç”¨RestTemplate"></a><strong>ä½¿ç”¨<code>RestTemplate</code></strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/demo&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">product</span><span class="params">()</span></span>&#123;</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">        String res = restTemplate.getForObject(<span class="string">&quot;http://localhost:8082/demo&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">&quot;User Serviceè°ƒç”¨ Product Service ç»“æœä¸º:&quot;</span> + res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é—®é¢˜</strong>ï¼š</p>
<ol>
<li>åœ°å€å†™æ­»ï¼Œæ— æ³•é€‚é…é›†ç¾¤æœåŠ¡ï¼Œæ— æ³•å®ç°è´Ÿè½½å‡è¡¡</li>
<li>å¦‚æœæœåŠ¡ç«¯åœ°å€æ›´æ”¹ï¼Œå®¢æˆ·ç«¯ä¹Ÿéœ€è¦æ›´æ”¹ï¼Œæ— æ³•åŠ¨æ€è·å–ä¿æŒä¸€è‡´</li>
</ol>
<h4 id="RestTemplateè´Ÿè½½å‡è¡¡"><a href="#RestTemplateè´Ÿè½½å‡è¡¡" class="headerlink" title="RestTemplateè´Ÿè½½å‡è¡¡"></a><strong><code>RestTemplate</code>è´Ÿè½½å‡è¡¡</strong></h4><h5 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h5><ul>
<li><strong>ä½¿ç”¨ <code>Ribbon</code> è¿›è¡Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</strong></li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># ä½¿ç”¨restTemplate + ribbonè¿›è¡ŒæœåŠ¡è°ƒç”¨</span></span><br><span class="line"><span class="bullet">-</span> ä½¿ç”¨discovery client  è¿›è¡Œå®¢æˆ·ç«¯è°ƒç”¨</span><br><span class="line"><span class="bullet">-</span> ä½¿ç”¨loadBalanceClient è¿›è¡Œå®¢æˆ·ç«¯è°ƒç”¨</span><br><span class="line"><span class="bullet">-</span> ä½¿ç”¨@loadBalanced     è¿›è¡Œå®¢æˆ·ç«¯è°ƒç”¨</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.1 ä½¿ç”¨discovery Clientå½¢å¼è°ƒç”¨</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æœåŠ¡åˆ—è¡¨</span></span><br><span class="line">List&lt;ServiceInstance&gt; products = discoveryClient.getInstances(<span class="string">&quot;æœåŠ¡ID&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (ServiceInstance product : products) &#123;</span><br><span class="line">  log.info(<span class="string">&quot;æœåŠ¡ä¸»æœº:[&#123;&#125;]&quot;</span>,product.getHost());</span><br><span class="line">  log.info(<span class="string">&quot;æœåŠ¡ç«¯å£:[&#123;&#125;]&quot;</span>,product.getPort());</span><br><span class="line">  log.info(<span class="string">&quot;æœåŠ¡åœ°å€:[&#123;&#125;]&quot;</span>,product.getUri());</span><br><span class="line">  log.info(<span class="string">&quot;====================================&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.2 ä½¿ç”¨loadBalance Clientå½¢å¼è°ƒç”¨</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> LoadBalancerClient loadBalancerClient;</span><br><span class="line"><span class="comment">//æ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰å–æŸä¸€ä¸ªæœåŠ¡è°ƒç”¨</span></span><br><span class="line">ServiceInstance product = loadBalancerClient.choose(<span class="string">&quot;æœåŠ¡ID&quot;</span>);</span><br><span class="line">log.info(<span class="string">&quot;æœåŠ¡ä¸»æœº:[&#123;&#125;]&quot;</span>,product.getHost());</span><br><span class="line">log.info(<span class="string">&quot;æœåŠ¡ç«¯å£:[&#123;&#125;]&quot;</span>,product.getPort());</span><br><span class="line">log.info(<span class="string">&quot;æœåŠ¡åœ°å€:[&#123;&#125;]&quot;</span>,product.getUri());</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.3 ä½¿ç”¨@loadBalanced</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.æ•´åˆrestTemplate + ribbon</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@LoadBalanced</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestTemplate <span class="title">getRestTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.è°ƒç”¨æœåŠ¡ä½ç½®æ³¨å…¥RestTemplate</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"><span class="comment">//3.è°ƒç”¨</span></span><br><span class="line">String forObject = restTemplate.getForObject(<span class="string">&quot;http://æœåŠ¡ID/hello/hello?name=&quot;</span> + name, String.class);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥</strong></li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ribbonè´Ÿè½½å‡è¡¡ç®—æ³•</span></span><br><span class="line"><span class="bullet">-</span> RoundRobinRule         		è½®è®­ç­–ç•¥	æŒ‰é¡ºåºå¾ªç¯é€‰æ‹© Server</span><br><span class="line"><span class="bullet">-</span> RandomRule             		éšæœºç­–ç•¥	éšæœºé€‰æ‹© Server</span><br><span class="line"><span class="bullet">-</span> AvailabilityFilteringRule å¯ç”¨è¿‡æ»¤ç­–ç•¥</span><br><span class="line"> 	`ä¼šå…ˆè¿‡æ»¤ç”±äºå¤šæ¬¡è®¿é—®æ•…éšœè€Œå¤„äºæ–­è·¯å™¨è·³é—¸çŠ¶æ€çš„æœåŠ¡ï¼Œè¿˜æœ‰å¹¶å‘çš„è¿æ¥æ•°é‡è¶…è¿‡é˜ˆå€¼çš„æœåŠ¡ï¼Œç„¶åå¯¹å‰©ä½™çš„æœåŠ¡åˆ—è¡¨æŒ‰ç…§è½®è¯¢ç­–ç•¥è¿›è¡Œè®¿é—®</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> WeightedResponseTimeRule  å“åº”æ—¶é—´åŠ æƒç­–ç•¥   </span><br><span class="line"><span class="code">	`æ ¹æ®å¹³å‡å“åº”çš„æ—¶é—´è®¡ç®—æ‰€æœ‰æœåŠ¡çš„æƒé‡ï¼Œå“åº”æ—¶é—´è¶Šå¿«æœåŠ¡æƒé‡è¶Šå¤§è¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šé«˜ï¼Œåˆšå¯åŠ¨æ—¶å¦‚æœç»Ÿè®¡ä¿¡æ¯ä¸è¶³ï¼Œåˆ™ä½¿ç”¨		</span></span><br><span class="line"><span class="code">		RoundRobinRuleç­–ç•¥ï¼Œç­‰ç»Ÿè®¡ä¿¡æ¯è¶³å¤Ÿä¼šåˆ‡æ¢åˆ°</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">- RetryRule                 é‡è¯•ç­–ç•¥          </span></span><br><span class="line"><span class="code">	`å…ˆæŒ‰ç…§RoundRobinRuleçš„ç­–ç•¥è·å–æœåŠ¡ï¼Œå¦‚æœè·å–å¤±è´¥åˆ™åœ¨åˆ¶å®šæ—¶é—´å†…è¿›è¡Œé‡è¯•ï¼Œè·å–å¯ç”¨çš„æœåŠ¡ã€‚</span></span><br><span class="line"><span class="code">	</span></span><br><span class="line"><span class="code">- BestAviableRule           æœ€ä½å¹¶å‘ç­–ç•¥     </span></span><br><span class="line"><span class="code">	`ä¼šå…ˆè¿‡æ»¤æ‰ç”±äºå¤šæ¬¡è®¿é—®æ•…éšœè€Œå¤„äºæ–­è·¯å™¨è·³é—¸çŠ¶æ€çš„æœåŠ¡ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªå¹¶å‘é‡æœ€å°çš„æœåŠ¡  </span></span><br></pre></td></tr></table></figure>

<img src="/2021/08/02/SpringCloud%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class>

<ul>
<li><strong>ä¿®æ”¹æœåŠ¡çš„é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥</strong></li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ä¿®æ”¹æœåŠ¡é»˜è®¤éšæœºç­–ç•¥</span></span><br><span class="line"><span class="bullet">-</span> æœåŠ¡id.ribbon.NFLoadBalancerRuleClassName=com.netflix.loadbalancer.RandomRule</span><br><span class="line"><span class="code">	`ä¸‹é¢çš„productsä¸ºæœåŠ¡çš„å”¯ä¸€æ ‡è¯†</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">products.ribbon.NFLoadBalancerRuleClassName</span>=<span class="string">com.netflix.loadbalancer.RandomRule</span></span><br></pre></td></tr></table></figure>

<img src="/2021/08/02/SpringCloud%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class>



<h4 id="ä½¿ç”¨OpenFeign"><a href="#ä½¿ç”¨OpenFeign" class="headerlink" title="ä½¿ç”¨OpenFeign"></a>ä½¿ç”¨OpenFeign</h4><ul>
<li>æ€è€ƒ: ä½¿ç”¨RestTemplate+ribbonå·²ç»å¯ä»¥å®Œæˆå¯¹ç«¯çš„è°ƒç”¨ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨feignï¼Ÿ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String restTemplateForObject = restTemplate.getForObject(<span class="string">&quot;http://æœåŠ¡å/url?å‚æ•°&quot;</span> + name, String.class);</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å­˜åœ¨é—®é¢˜:</span></span><br><span class="line"><span class="bullet">-</span> 1.æ¯æ¬¡è°ƒç”¨æœåŠ¡éƒ½éœ€è¦å†™è¿™äº›ä»£ç ,å­˜åœ¨å¤§é‡çš„ä»£ç å†—ä½™</span><br><span class="line"><span class="bullet">-</span> 2.æœåŠ¡åœ°å€å¦‚æœä¿®æ”¹,ç»´æŠ¤æˆæœ¬å¢é«˜</span><br><span class="line"><span class="bullet">-</span> 3.ä½¿ç”¨æ—¶ä¸å¤Ÿçµæ´»</span><br></pre></td></tr></table></figure>

<h3 id="OpenFeign-ç»„ä»¶"><a href="#OpenFeign-ç»„ä»¶" class="headerlink" title="OpenFeign ç»„ä»¶"></a>OpenFeign ç»„ä»¶</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 0.è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> https://cloud.spring.io/spring-cloud-openfeign/reference/html/</span><br><span class="line"><span class="bullet">-</span> Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ªHttpå®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—å†™Httpå®¢æˆ·ç«¯å˜å¾—æ›´ç®€å•ã€‚ä½¿ç”¨Feignï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ã€‚å®ƒå…·æœ‰å¯æ’æ‹”çš„æ³¨è§£ç‰¹æ€§(å¯ä»¥ä½¿ç”¨springmvcçš„æ³¨è§£)ï¼Œå¯ä½¿ç”¨Feign æ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignæ”¯æŒå¯æ’æ‹”çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Feigné»˜è®¤é›†æˆäº†Ribbonï¼Œé»˜è®¤å®ç°äº†è´Ÿè½½å‡è¡¡çš„æ•ˆæœå¹¶ä¸”springcloudä¸ºfeignæ·»åŠ äº†springmvcæ³¨è§£çš„æ”¯æŒã€‚</span><br></pre></td></tr></table></figure>

<h4 id="openFeign-æœåŠ¡è°ƒç”¨"><a href="#openFeign-æœåŠ¡è°ƒç”¨" class="headerlink" title="openFeign æœåŠ¡è°ƒç”¨"></a>openFeign æœåŠ¡è°ƒç”¨</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æœåŠ¡è°ƒç”¨æ–¹ å¼•å…¥ä¾èµ–OpenFeignä¾èµ–</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Open Feignä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 2.å…¥å£ç±»åŠ å…¥æ³¨è§£å¼€å¯OpenFeignæ”¯æŒ</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TagsApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TagsApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 3.åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯è°ƒç”¨æ¥å£</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//valueå±æ€§ç”¨æ¥æŒ‡å®š:è°ƒç”¨æœåŠ¡åç§°</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;CategoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/category&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">category</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 4. ç›¸åº”çš„æœåŠ¡æä¾›ç«¯éœ€è¦å­˜åœ¨ç›¸åº”æ¥å£</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/category&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">category</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·æ±‚ä»¥æ¥å…¥~~&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;CategoryService Starter !&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/category1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findCategoryById</span><span class="params">(<span class="meta">@RequestParam</span> Integer id)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;id:&#123;&#125;&quot;</span> , id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;findCategoryById :&quot;</span> + id + <span class="string">&quot; æä¾›æœåŠ¡ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/category&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findCategory</span><span class="params">(<span class="meta">@RequestBody</span> JSONObject request)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;JSONObject &#123;&#125;&quot;</span> , request);</span><br><span class="line">        JSONObject response = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        response.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line">        response.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;è·å–ç±»åˆ«æ¶ˆæ¯æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/category1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findCategoryByBean</span><span class="params">(<span class="meta">@RequestBody</span> Category category)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;Category &#123;&#125;&quot;</span> , category.toString());</span><br><span class="line">        JSONObject response = <span class="keyword">new</span> JSONObject();</span><br><span class="line"></span><br><span class="line">        response.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line">        response.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;è·å–ç±»åˆ«æ¶ˆæ¯æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Getè¯·æ±‚"><a href="#Getè¯·æ±‚" class="headerlink" title="Getè¯·æ±‚"></a>Getè¯·æ±‚</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æºå¸¦å‚æ•°ï¼ˆæ³¨æ„ è·¯å¾„ä¼ å‚ å’Œ é—®å·åä¼ å‚ å‡éœ€è¦åŠ ä¸Šæ³¨è§£ï¼ï¼‰</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;CategoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/category1&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">category1</span><span class="params">(<span class="meta">@RequestParam</span> Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/categoryList/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">categoryList</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Postè¯·æ±‚"><a href="#Postè¯·æ±‚" class="headerlink" title="Postè¯·æ±‚"></a>Postè¯·æ±‚</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.æºå¸¦å‚æ•°( éœ€è¦åŠ ä¸Š@RequestBody )</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;CategoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/category&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">category2</span><span class="params">(<span class="meta">@RequestBody</span> JSONObject request)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/category1&quot;)</span></span><br><span class="line">    <span class="function">String <span class="title">category3</span><span class="params">(<span class="meta">@RequestBody</span> Category category)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="OpenFeignè¶…æ—¶è®¾ç½®"><a href="#OpenFeignè¶…æ—¶è®¾ç½®" class="headerlink" title="OpenFeignè¶…æ—¶è®¾ç½®"></a>OpenFeignè¶…æ—¶è®¾ç½®</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 0.è¶…æ—¶è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> é»˜è®¤æƒ…å†µä¸‹,openFiegnåœ¨è¿›è¡ŒæœåŠ¡è°ƒç”¨æ—¶,è¦æ±‚æœåŠ¡æä¾›æ–¹å¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶é—´å¿…é¡»åœ¨1Så†…è¿”å›,å¦‚æœè¶…è¿‡1Sæ²¡æœ‰è¿”å›åˆ™OpenFeignä¼šç›´æ¥æŠ¥é”™,ä¸ä¼šç­‰å¾…æœåŠ¡æ‰§è¡Œ,ä½†æ˜¯å¾€å¾€åœ¨å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘æ˜¯å¯èƒ½ä¼šè¶…è¿‡1S,å› æ­¤éœ€è¦ä¿®æ”¹OpenFeignçš„é»˜è®¤æœåŠ¡è°ƒç”¨è¶…æ—¶æ—¶é—´ã€‚</span><br><span class="line"><span class="bullet">-</span> è°ƒç”¨è¶…æ—¶ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.ä¿®æ”¹OpenFeigné»˜è®¤è¶…æ—¶æ—¶é—´</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">feign.client.config.PRODUCTS.connectTimeout</span>=<span class="string">5000  		#é…ç½®æŒ‡å®šæœåŠ¡è¿æ¥è¶…æ—¶</span></span><br><span class="line"><span class="meta">feign.client.config.PRODUCTS.readTimeout</span>=<span class="string">5000		  	#é…ç½®æŒ‡å®šæœåŠ¡ç­‰å¾…è¶…æ—¶</span></span><br><span class="line"><span class="comment">#feign.client.config.default.connectTimeout=5000  		#é…ç½®æ‰€æœ‰æœåŠ¡è¿æ¥è¶…æ—¶</span></span><br><span class="line"><span class="comment">#feign.client.config.default.readTimeout=5000			#é…ç½®æ‰€æœ‰æœåŠ¡ç­‰å¾…è¶…æ—¶</span></span><br></pre></td></tr></table></figure>

<h4 id="OpenFeignè°ƒç”¨è¯¦ç»†æ—¥å¿—å±•ç¤º"><a href="#OpenFeignè°ƒç”¨è¯¦ç»†æ—¥å¿—å±•ç¤º" class="headerlink" title="OpenFeignè°ƒç”¨è¯¦ç»†æ—¥å¿—å±•ç¤º"></a>OpenFeignè°ƒç”¨è¯¦ç»†æ—¥å¿—å±•ç¤º</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 0.è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> å¾€å¾€åœ¨æœåŠ¡è°ƒç”¨æ—¶æˆ‘ä»¬éœ€è¦è¯¦ç»†å±•ç¤ºfeignçš„æ—¥å¿—,é»˜è®¤feignåœ¨è°ƒç”¨æ˜¯å¹¶ä¸æ˜¯æœ€è¯¦ç»†æ—¥å¿—è¾“å‡º,å› æ­¤åœ¨è°ƒè¯•ç¨‹åºæ—¶åº”è¯¥å¼€å¯feignçš„è¯¦ç»†æ—¥å¿—å±•ç¤ºã€‚feignå¯¹æ—¥å¿—çš„å¤„ç†éå¸¸çµæ´»å¯ä¸ºæ¯ä¸ªfeignå®¢æˆ·ç«¯æŒ‡å®šæ—¥å¿—è®°å½•ç­–ç•¥ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªloggeré»˜è®¤æƒ…å†µä¸‹loggerçš„åç§°æ˜¯feignçš„å…¨é™å®šåéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œfeignæ—¥å¿—çš„æ‰“å°åªä¼šDEBUGçº§åˆ«åšå‡ºå“åº”ã€‚</span><br><span class="line"><span class="bullet">-</span> æˆ‘ä»¬å¯ä»¥ä¸ºfeignå®¢æˆ·ç«¯é…ç½®å„è‡ªçš„logger.leverå¯¹è±¡ï¼Œå‘Šè¯‰feignè®°å½•é‚£äº›æ—¥å¿—logger.leveræœ‰ä»¥ä¸‹çš„å‡ ç§å€¼</span><br><span class="line"><span class="code">	`NONE  ä¸è®°å½•ä»»ä½•æ—¥å¿—</span></span><br><span class="line"><span class="code">	`BASIC ä»…ä»…è®°å½•è¯·æ±‚æ–¹æ³•ï¼Œurlï¼Œå“åº”çŠ¶æ€ä»£ç åŠæ‰§è¡Œæ—¶é—´</span></span><br><span class="line"><span class="code">	`HEADERS è®°å½•Basicçº§åˆ«çš„åŸºç¡€ä¸Šï¼Œè®°å½•è¯·æ±‚å’Œå“åº”çš„header</span></span><br><span class="line"><span class="code">	`FULL è®°å½•è¯·æ±‚å’Œå“åº”çš„headerï¼Œbodyå’Œå…ƒæ•°æ®</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.å¼€å¯æ—¥å¿—å±•ç¤º</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">feign.client.config.PRODUCTS.loggerLevel</span>=<span class="string">full  #å¼€å¯æŒ‡å®šæœåŠ¡æ—¥å¿—å±•ç¤º</span></span><br><span class="line"><span class="comment">#feign.client.config.default.loggerLevel=full  #å…¨å±€å¼€å¯æœåŠ¡æ—¥å¿—å±•ç¤º</span></span><br><span class="line"><span class="meta">logging.level.com.baizhi.feignclients</span>=<span class="string">debug    #æŒ‡å®šfeignè°ƒç”¨å®¢æˆ·ç«¯å¯¹è±¡æ‰€åœ¨åŒ…,å¿…é¡»æ˜¯debugçº§åˆ«</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 2.æµ‹è¯•æœåŠ¡è°ƒç”¨æŸ¥çœ‹æ—¥å¿—</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCï¼šæµç¨‹åˆ†ææ¦‚è§ˆ</title>
    <url>/2021/05/06/SpringMVC%EF%BC%9A%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E6%A6%82%E8%A7%88/</url>
    <content><![CDATA[<h1 id="ğŸˆSpringMVCç®€ä»‹"><a href="#ğŸˆSpringMVCç®€ä»‹" class="headerlink" title="ğŸˆSpringMVCç®€ä»‹"></a>ğŸˆSpringMVCç®€ä»‹</h1><p>â€‹        <code>SpringMVC</code> æ˜¾ç„¶æ˜¯ç”± <code>Spring</code> ä»¥åŠ <code>MVC</code> ä¿©éƒ¨åˆ†ç»„æˆï¼Œå…ˆè¯´è¯´ <code>Spring</code> é‚£å½“ç„¶å°±æ˜¯æŒ‡ <code>Spring Framework</code> æ¡†æ¶äº†ï¼Œå‰é¢çš„æ–‡ç« å·²ç»ä»‹ç»è¿‡äº†ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™é‡Œå°±ç›¸å½“äºåœ¨ <code>Spring</code> ä¸­ä½¿ç”¨<code>MVC</code> æ¶æ„ï¼Œå½“ç„¶äº†è¿™é‡Œè®¨è®ºåº”ç”¨äºåœ¨ <code>Web</code> å¼€å‘ä¹‹ä¸­.</p>
<p>â€‹        æ¥ä¸‹æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ <code>MVC</code> æ¶æ„ä»¥åŠ <code>Web </code> å¼€å‘ä¸­çš„ä¸‰å±‚æ¶æ„ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ç†è§£æµ…æ˜¾ï¼Œåœ¨æˆ‘çœ‹æˆ‘ <code>MVC</code> æ¶æ„ä¸ <code>Web</code> ä¸­ç»å…¸çš„ä¸‰å±‚ç»“æ„ååˆ†ç›¸ä¼¼ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†ä»£ç è§£è€¦åˆã€ä»¥åŠé«˜å¯ç»´æŠ¤æ€§.</p>
<ul>
<li><p><code>MVC(MODEL-VIEW-CONTROLLER)</code> å³ æ¨¡å‹-è§†å›¾-æ§åˆ¶</p>
<ul>
<li><p><code>MODEL</code> : å±äºå¤„ç†ä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†ï¼Œç›¸å½“äºä¸‰å±‚æ¶æ„ä¸­çš„ <code>serviceã€dao</code> å±‚ï¼Œå¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œç›´æ¥æ“ä½œï¼Œå‚¨å­˜ä¸šåŠ¡æ ¸å¿ƒé€»è¾‘.</p>
</li>
<li><p><code>VIEW</code> : å±äºå‘ç”¨æˆ·å±•ç¤ºçš„éƒ¨åˆ†, <code>MODEL</code> å±‚å¤„ç†å®Œä¹‹åè¿”å›çš„æ•°æ®äº¤ç»™ <code>CONTROLLER </code> å±‚ï¼Œå†äº¤ç”± <code>VIEW</code> å±‚ï¼Œä»è€Œå‘ˆç°ç›¸åº”çš„é¡µé¢.</p>
</li>
<li><p><code>CONTROLLER</code> ï¼šå±äºè¿æ¥<code>MODEL</code> ä¸ <code>VIEW</code> çš„éƒ¨åˆ†ï¼Œç›¸å½“äº<code>Servlet</code> ä¸­çš„å­˜å‚¨çš„æ˜ å°„å…³ç³»ï¼Œèµ·åˆ°äº†<code>Servlet</code>çš„ä½œç”¨ï¼Œå°†<code>MODLE</code> ä¸</p>
<p><code>VIEW</code> è§£è€¦åˆ.</p>
</li>
</ul>
</li>
</ul>
<p>ç”¨ä¸€å¼ å›¾æ¥æ¦‚æ‹¬ï¼š</p>
<p>â€‹                                        <img src="https://img-blog.csdnimg.cn/20181030204359635.png" alt="MVC"></p>
<p>â€‹        è€Œ <code>SpringMVC</code> ç®€åŒ–äº† <code>JavaWeb</code> çš„å¼€å‘ï¼Œå°†<code>Servlet</code> çš„ç›¸å…³é…ç½®ç®€åŒ–äº†è®¸å¤š ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ª <code>è¯·æ±‚è½¬å‘æ§åˆ¶å™¨DispatcherServlet</code> ä»¥åŠ <code>èµ„æºè§†å›¾è§£æå™¨ResourceViewResolver</code> å³å¯ï¼Œæœ‰æ•ˆæé«˜äº†å¼€å‘æ•ˆç‡.</p>
<hr>
<h1 id="âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ"><a href="#âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ" class="headerlink" title="âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ"></a>âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ</h1><img src="/2021/05/06/SpringMVC%EF%BC%9A%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E6%A6%82%E8%A7%88/1.png" class title="æµç¨‹å›¾">



<p>æµç¨‹åˆ†æï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œé€šè¿‡webå®¹å™¨ä¸­é€šè¿‡ <code>DispathcerServlet</code> çš„æ˜ å°„è·¯å¾„å°†è¯·æ±‚äº¤ç»™ <code>DispathcerServlet</code> å¤„ç†.</li>
<li><code>DispatcherServlet</code>é€šè¿‡å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆ <code>HandlerMapping</code> ï¼‰è·å–è¯·æ±‚ä¿¡æ¯å¯¹åº”çš„å¤„ç†å™¨æ‰§è¡Œé“¾.</li>
<li><code>DispatcherServlet</code> å°†æ‰§è¡Œé“¾äº¤ç»™å¤„ç†å™¨é€‚é…å™¨ï¼ˆ <code>HandlerAdapter</code> ï¼‰ç„¶åå…¶è°ƒç”¨ç›¸åº”çš„å¤„ç†å™¨ï¼ˆ<code>Handler </code>ï¼‰æ‰§è¡Œ</li>
<li>æœ€ç»ˆè¿”å›å¤„ç†ç»“æœåˆ° <code>DispatcherServlet</code></li>
<li><code>DispatcherServlet</code> å°†ç»“æœäº¤ç»™è§†å›¾è§£æå™¨ï¼ˆ<code>ViewResolver</code>ï¼‰è§£æè§†å›¾ï¼Œéšåè¿”å›è§£æåçš„Viewå¯¹è±¡</li>
<li><code>DispatcherServlet</code>å†å°†Viewå¯¹è±¡è¿›è¡Œè§†å›¾æ¸²æŸ“æœ€åè¿”å›ç»™ç”¨æˆ·å‘ˆç°å‡ºé¡µé¢</li>
</ol>
<blockquote>
<h2 id="ç»„ä»¶è¯´æ˜ï¼š"><a href="#ç»„ä»¶è¯´æ˜ï¼š" class="headerlink" title="ç»„ä»¶è¯´æ˜ï¼š"></a>ç»„ä»¶è¯´æ˜ï¼š</h2><ul>
<li><h3 id="DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"><a href="#DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨" class="headerlink" title="DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"></a><code>DispatcherServlet</code>ï¼šå‰ç«¯æ§åˆ¶å™¨</h3></li>
</ul>
<p>â€‹      <strong>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº<code>mvc</code>æ¨¡å¼ä¸­çš„<code>c</code>ï¼Œ<code>dispatcherServlet</code>æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œ</strong></p>
<p>â€‹      <strong>ç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œ<code>dispatcherServlet</code>çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚</strong></p>
<ul>
<li><h3 id="HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"><a href="#HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨" class="headerlink" title="HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"></a><code>HandlerMapping</code>ï¼šå¤„ç†å™¨æ˜ å°„å™¨</h3></li>
</ul>
<p>ã€€ã€€ã€€<code>HandlerMapping</code>è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚<code>url</code>æ‰¾åˆ°<code>Handler</code>å³å¤„ç†å™¨ï¼Œ<code>springmvc</code>æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œ</p>
<p>ã€€ã€€  <strong>ä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</strong></p>
<ul>
<li><h3 id="Handlerï¼šå¤„ç†å™¨"><a href="#Handlerï¼šå¤„ç†å™¨" class="headerlink" title="Handlerï¼šå¤„ç†å™¨"></a><code>Handler</code>ï¼šå¤„ç†å™¨</h3></li>
</ul>
<p>ã€€ã€€ <strong><code>Handler</code> æ˜¯ç»§ <code>DispatcherServlet </code>å‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨ <code>DispatcherServlet </code>çš„æ§åˆ¶ä¸‹ <code>Handler</code>å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</strong></p>
<p>â€‹    <strong>ç”±äº <code>Handler </code>æ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘Handlerã€‚</strong></p>
<ul>
<li><h3 id="HandlAdapter-ï¼šå¤„ç†å™¨é€‚é…å™¨"><a href="#HandlAdapter-ï¼šå¤„ç†å™¨é€‚é…å™¨" class="headerlink" title="HandlAdapter ï¼šå¤„ç†å™¨é€‚é…å™¨"></a><code>HandlAdapter </code>ï¼šå¤„ç†å™¨é€‚é…å™¨</h3></li>
</ul>
<p>ã€€ã€€<strong>é€šè¿‡<code>HandlerAdapter</code>å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚</strong></p>
<ul>
<li><h3 id="ViewResolverï¼šè§†å›¾è§£æå™¨"><a href="#ViewResolverï¼šè§†å›¾è§£æå™¨" class="headerlink" title="ViewResolverï¼šè§†å›¾è§£æå™¨"></a><code>ViewResolver</code>ï¼šè§†å›¾è§£æå™¨</h3></li>
</ul>
<p>ã€€ã€€<strong>View Resolverè´Ÿè´£å°†å¤„ç†ç»“æœç”ŸæˆViewè§†å›¾ï¼ŒView Resolveré¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œ</strong></p>
<p>ã€€ã€€<strong>å†ç”ŸæˆViewè§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹Viewè¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚</strong></p>
<ul>
<li><h3 id="Viewï¼šè§†å›¾"><a href="#Viewï¼šè§†å›¾" class="headerlink" title="Viewï¼šè§†å›¾"></a><code>View</code>ï¼šè§†å›¾</h3></li>
</ul>
<p>ã€€ã€€<strong><code>springmvc</code>æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„Viewè§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š<code>jstlViewã€freemarkerViewã€pdfView</code>ç­‰ã€‚æˆ‘ä»¬æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯<code>jsp</code>ã€‚</strong></p>
<p>ã€€ã€€ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(ä¸‰):è‡ªå®šä¹‰ç™»å½•é¡µé¢</title>
    <url>/2021/07/13/SpringSecurity%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼"><a href="#ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼" class="headerlink" title="ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼"></a>ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼</h1><p>å¾ˆæ˜¾ç„¶åˆ†ä¸ºä¿©ç§æ¨¡å¼ï¼Œä¸€ç§ä¸ºå‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œå¦ä¸€ç§åˆ™æ˜¯å½“ä¸‹ç››è¡Œçš„å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œå¯¹äºè¿™ä¿©ç§å¼€å‘æ¨¡å¼ï¼Œè‡ªå®šä¹‰ç™»å½•é¡µé¢æœ‰ä¿©ç§ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œä½†å¯¹äºåç«¯æ¥è®²ï¼Œè¿™ä¸¤è€…åœ¨å®ç°<code>UserDetailsã€UserDetailsService</code>æ˜¯ä¸€è‡´çš„ï¼Œæ¥ä¸‹æ¥é€ä¸€è¯´æ˜å…¶ä¸ä¸€æ ·çš„éƒ¨åˆ†.</p>
<h2 id="å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"><a href="#å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹" class="headerlink" title="å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"></a>å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹</h2><ul>
<li>åœ¨<code>resource</code>ç›®å½•ä¸‹ <code>static</code> ä¸­åˆ›å»º <code>login.html</code>ï¼Œæ–¹ä¾¿æ¼”ç¤ºï¼Œè¿™é‡Œåªç¼–å†™äº†è¾ƒä¸ºç®€å•çš„è¡¨å•</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>éªŒè¯è®¿é—®<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç”¨æˆ·å&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¯†ç &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">VALUE</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç»§æ‰¿<code>WebSecurityConfigurerAdapter</code><ul>
<li>é‡å†™<code>protected void configure(HttpSecurity http)</code></li>
<li>é‡å†™<code>protected void configure(WebSecurity web)</code></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    web.ignoring().antMatchers(<span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and() <span class="comment">//è¡¨ç¤ºä¸€æ®µé…ç½®çš„ç»“æŸ</span></span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">        	<span class="comment">//æ”¾è¡Œå¦‚ä¸Šè¯·æ±‚</span></span><br><span class="line">            .permitAll() </span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><code>web.ignoring() </code>ç”¨æ¥é…ç½®å¿½ç•¥æ‰çš„ URL åœ°å€ï¼Œä¸€èˆ¬å¯¹äºé™æ€æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ­¤æ“ä½œã€‚</li>
<li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>XML</code>æ¥é…ç½® <code>Spring Security</code> ï¼Œé‡Œè¾¹ä¼šæœ‰ä¸€ä¸ªé‡è¦çš„æ ‡ç­¾ <code>&lt;http&gt;</code>ï¼Œ<code>HttpSecurity</code> æä¾›çš„é…ç½®æ–¹æ³• éƒ½å¯¹åº”äº†è¯¥æ ‡ç­¾ã€‚</li>
<li><code>authorizeRequests</code> å¯¹åº”äº† <code>&lt;intercept-url&gt;</code>ã€‚</li>
<li><code>formLogin</code> å¯¹åº”äº† <code>&lt;formlogin&gt;</code>ã€‚</li>
<li><code>and</code> æ–¹æ³•è¡¨ç¤ºç»“æŸå½“å‰æ ‡ç­¾ï¼Œä¸Šä¸‹æ–‡å›åˆ°<code>HttpSecurity</code>ï¼Œå¼€å¯æ–°ä¸€è½®çš„é…ç½®ã€‚</li>
<li><code>permitAll</code> è¡¨ç¤ºç™»å½•ç›¸å…³çš„é¡µé¢/æ¥å£ä¸è¦è¢«æ‹¦æˆªã€‚</li>
<li>æœ€åè®°å¾—å…³é—­ <code>csrf </code></li>
</ol>
<p>å½“æˆ‘ä»¬å®šä¹‰äº†ç™»å½•é¡µé¢ä¸º <code>/login.html </code>çš„æ—¶å€™ï¼Œ<code>Spring Security </code>ä¹Ÿä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ³¨å†Œä¸€ä¸ª <code>/login.html </code>çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£æ˜¯ <code>POST </code>è¯·æ±‚ï¼Œç”¨æ¥å¤„ç†ç™»å½•é€»è¾‘ã€‚</p>
<ol start="8">
<li>å¦‚æœæƒ³è¦è‡ªå®šä¹‰ç™»å½•æ¥å£åï¼Œ<code>SpringSecurity</code>ä¹Ÿæä¾›çš„ç›¸å…³çš„æ–¹å¼ï¼Œä½¿ç”¨ <code>loginProcessingUrl(url)</code>è¿›è¡Œè®¾ç½®ï¼Œ<code>action</code>å¤„åŒæ­¥æ›´æ”¹å³å¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"><a href="#å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹" class="headerlink" title="å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"></a>å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹</h2><p>&emsp;&emsp;è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€å°†<code>SpringSecurity</code>çš„æ¥å£æä¾›ç»™å‰ç«¯è°ƒç”¨å³å¯ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†æˆ‘ä»¬è‡ªå·±åç«¯çš„ä¸šåŠ¡é€»è¾‘å³å¯ï¼Œå½“ç„¶äº†å‰åç«¯è¿˜æ˜¯ä¾æ—§éœ€è¦<code>Json</code>æ•°æ®è¿›è¡Œäº¤äº’çš„ï¼Œæ­¤æ—¶ä½œä¸ºåç«¯ä¸éœ€è¦ç®¡ç†æˆåŠŸå’Œå¤±è´¥åå¦‚ä½•è·³è½¬ï¼Œåªéœ€è¦è¿”å›çŠ¶æ€ç å’Œä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆè·³è½¬ç›´æ¥ç”©ç»™å‰ç«¯è¿›è¡Œåˆ¤æ–­.</p>
<blockquote>
<p>å‰åç«¯åˆ†ç¦»ä¹‹å‰ï¼š</p>
</blockquote>
<p>å¤„ç†ç™»å½•æˆåŠŸçš„é…ç½®ä¾æ‰˜äº: <code>defaultSuccessUrl</code> ï¼Œ<code>successForwardUrl</code></p>
<blockquote>
<p>å‰åç«¯åˆ†ç¦»åï¼š</p>
</blockquote>
<p>æ˜¾ç„¶è¿™æ ·åšå·²ç»ä¸å®é™…äº† ï¼Œé‚£ä¹ˆå°±éœ€è¦ <code>successHandler</code>äº†</p>
<ul>
<li><code>successHandler</code>ï¼ˆç™»å½•æˆåŠŸï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http.authorizeRequests()</span><br><span class="line">               .anyRequest().authenticated()</span><br><span class="line">               .and()</span><br><span class="line">               .formLogin()</span><br><span class="line">               .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">               .successHandler((req,resp,authentication)-&gt;&#123;</span><br><span class="line">                   <span class="comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">                   Object principal = authentication.getPrincipal();</span><br><span class="line">                   <span class="comment">//å®šä¹‰å“åº”ä½“æ•°æ®æ ¼å¼</span></span><br><span class="line">                   resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                   <span class="comment">//è·å–IOè¾“å‡ºæµ</span></span><br><span class="line">                   PrintWriter out = resp.getWriter();</span><br><span class="line">                   <span class="comment">//å°†æ•°æ®å†™å…¥å“åº”ä½“</span></span><br><span class="line">                   out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                   <span class="comment">//ç¡®ä¿å°†è¾“å‡ºæµä¸­æ•°æ®å…¨éƒ¨å–å‡º</span></span><br><span class="line">                   out.flush();</span><br><span class="line">                   <span class="comment">//å…³é—­è¾“å‡ºæµ</span></span><br><span class="line">                   out.close();</span><br><span class="line">               &#125;)</span><br><span class="line">               .permitAll()</span><br><span class="line">               .and()</span><br><span class="line">               .csrf().disable();</span><br></pre></td></tr></table></figure>

<p><code>successHandler</code> æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª <code>AuthenticationSuccessHandler </code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æˆ‘ä»¬è¦å®ç°çš„æ–¹æ³•æ˜¯ <code>onAuthenticationSuccess</code></p>
<p><code>onAuthenticationSuccess </code>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>HttpServletRequest</code></li>
<li><code>HttpServletResponse</code></li>
<li><code>Authentication</code></li>
</ul>
<p>æœ‰äº†å‰ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™é‡Œéšå¿ƒæ‰€æ¬²çš„è¿”å›æ•°æ®äº†ã€‚åˆ©ç”¨<code> HttpServletRequest</code> æˆ‘ä»¬å¯ä»¥åšæœåŠ¡ç«¯è·³è½¬ï¼Œåˆ©ç”¨ <code>HttpServletResponse</code> æˆ‘ä»¬å¯ä»¥åšå®¢æˆ·ç«¯è·³è½¬ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿”å› <code>JSON</code> æ•°æ®ã€‚</p>
<p>ç¬¬ä¸‰ä¸ª <code>Authentication</code> å‚æ•°åˆ™ä¿å­˜äº†æˆ‘ä»¬åˆšåˆšç™»å½•æˆåŠŸçš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<blockquote>
<p>åˆ©ç”¨<code>postman</code>è¿›è¡Œæ¥å£æµ‹è¯•ï¼ŒæˆåŠŸè¿”å›æ•°æ®</p>
</blockquote>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%B8%89%EF%BC%89/1.png" alt="image-20210713042108311"></p>
<ul>
<li><code>failureHandler</code>(ç™»å½•å¤±è´¥)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.failureHandler((req, resp, e) -&gt; &#123;</span><br><span class="line">                    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                    PrintWriter out = resp.getWriter();</span><br><span class="line">                    String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">if</span> (e <span class="keyword">instanceof</span> LockedException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¢«é”å®šï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> CredentialsExpiredException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;å¯†ç è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AccountExpiredException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> DisabledException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> BadCredentialsException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥!&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(msg)));</span><br><span class="line">                    out.flush();</span><br><span class="line">                    out.close();</span><br><span class="line">                &#125;)</span><br></pre></td></tr></table></figure>



<h3 id="æœªç™»å½•æç¤º"><a href="#æœªç™»å½•æç¤º" class="headerlink" title="æœªç™»å½•æç¤º"></a>æœªç™»å½•æç¤º</h3><p>å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•å°±è®¿é—®ä¸€ä¸ªéœ€è¦è®¤è¯åæ‰èƒ½è®¿é—®çš„é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è®©ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œè€Œæ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªå°šæœªç™»å½•çš„æç¤ºï¼Œå‰ç«¯æ”¶åˆ°æç¤ºä¹‹åï¼Œå†è‡ªè¡Œå†³å®šé¡µé¢è·³è½¬ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.exceptionHandling() <span class="comment">//é¢å¤–çš„å¤„ç†</span></span><br><span class="line">.authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">            resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            PrintWriter out = resp.getWriter();</span><br><span class="line">            out.write(<span class="string">&quot;å°šæœªç™»å½•ï¼Œè¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">        &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="æ³¨é”€ç™»å½•"><a href="#æ³¨é”€ç™»å½•" class="headerlink" title="æ³¨é”€ç™»å½•"></a>æ³¨é”€ç™»å½•</h2><p>æ³¨é”€ç™»å½•æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼ŒæŒ‰ç…§å‰é¢çš„é…ç½®ï¼Œæ³¨é”€ç™»å½•ä¹‹åï¼Œç³»ç»Ÿè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸åˆé€‚çš„ï¼Œå¦‚æœæ˜¯å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œæ³¨é”€ç™»å½•æˆåŠŸåè¿”å› JSON å³å¯ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.and()</span><br><span class="line">.logout()</span><br><span class="line">.logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">.logoutSuccessHandler((req, resp, authentication) -&gt; &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.write(<span class="string">&quot;æ³¨é”€æˆåŠŸ!&quot;</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;)</span><br><span class="line">.permitAll()</span><br><span class="line">.and()</span><br></pre></td></tr></table></figure>



<h2 id="å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ"><a href="#å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ" class="headerlink" title="å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ"></a>å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ</h2><p>æ€»ä½“ä¸Šæ¥è¯´é…ç½®è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†æ˜¯è¿™äº›ä¸œè¥¿åªè¦å†™ä¸€æ¬¡ï¼Œä»¥åä½¿ç”¨å°±å¯ä»¥ç›´æ¥ç…§æ¬äº†hhh</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">            <span class="comment">//ç™»å½•æˆåŠŸå¤„ç†ç±»</span></span><br><span class="line">            .successHandler((req,resp,authentication)-&gt;&#123;</span><br><span class="line">                Object principal = authentication.getPrincipal();</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">//ç™»å½•å¤±è´¥å¤„ç†ç±»</span></span><br><span class="line">            .failureHandler((req, resp, e) -&gt; &#123;</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span> (e <span class="keyword">instanceof</span> LockedException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¢«é”å®šï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> CredentialsExpiredException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;å¯†ç è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AccountExpiredException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> DisabledException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> BadCredentialsException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥!&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(msg)));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">        	<span class="comment">//é¿å…ä¼ªé€ è·¨åŸŸè¯·æ±‚</span></span><br><span class="line">            .csrf().disable()</span><br><span class="line">            <span class="comment">//é¢å¤–å¤„ç†ç±»</span></span><br><span class="line">            .exceptionHandling()</span><br><span class="line">            .authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">                        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                        PrintWriter out = resp.getWriter();</span><br><span class="line">                        out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(<span class="string">&quot;å°šæœªç™»å½•ï¼Œæ¸…å…ˆç™»å½•ï¼&quot;</span>)));</span><br><span class="line">                        out.flush();</span><br><span class="line">                        out.close();</span><br><span class="line">                    &#125;</span><br><span class="line">            )</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">//ç™»å‡ºæ³¨é”€æ“ä½œéƒ¨åˆ†</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">            .logoutSuccessHandler((req, resp, authentication) -&gt; &#123;</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(<span class="string">&quot;æ³¨é”€æˆåŠŸï¼&quot;</span>)));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(ä¸€):è®¿é—®è®¤è¯ä¸èº«ä»½æˆæƒ</title>
    <url>/2021/07/10/SpringSecurity%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šå¥½ä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œå¿™å®Œäº†æœŸæœ«è€ƒè¯•ç„¶åèƒŒå¥½äº†è¡Œå›Šå›äº†å®¶ï¼Œç°åœ¨ç»ˆäºå¯ä»¥å¥½å¥½çš„æ›´æ–°ä¸€ä¸‹åšå®¢äº†ï¼Œæ¯•ç«Ÿéœ€è¦æ•´ç†çš„ä¸œè¥¿è¿˜æœ‰å¾ˆå¤šæ²¡æœ‰æ•´ç†ï¼Œæœç„¶ç¨‹åºå‘˜è¿™æ¡é“è·¯å°±æ˜¯ï¼Œè¶Šå­¦è¶Šè§‰å¾—è‡ªå·±è¶Šèœï¼Œæ´»åˆ°è€ï¼Œå­¦åˆ°è€hhh.</p>
</blockquote>
<h1 id="ğŸš“SpringSecurityç®€ä»‹"><a href="#ğŸš“SpringSecurityç®€ä»‹" class="headerlink" title="ğŸš“SpringSecurityç®€ä»‹"></a>ğŸš“SpringSecurityç®€ä»‹</h1><p>&emsp;&emsp;<code>spring security </code>æ˜¯åŸºäº<code>spring </code>çš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›å…¨é¢çš„å®‰å…¨æ€§è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶åœ¨Webè¯·æ±‚çº§å’Œæ–¹æ³•è°ƒç”¨çº§å¤„ç†èº«ä»½ç¡®è®¤å’Œæˆæƒã€‚åœ¨<code>Spring Framework</code>åŸºç¡€ä¸Š,<code>spring security </code>å……åˆ†åˆ©ç”¨äº†ä¾èµ–æ³¨å…¥ï¼ˆDI )å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOP)åŠŸèƒ½ï¼Œä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†ä¸ºä¼ä¸šç³»ç»Ÿå®‰å…¨æ§åˆ¶ç¼–å†™å¤§é‡é‡å¤ä»£ç çš„å·¥ä½œã€‚æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®‰å…¨æ¡†æ¶ã€‚å®ƒä¸<code>Spring MVC</code>æœ‰å¾ˆå¥½åœ°é›†æˆ.</p>
<h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><p>( 1 ) <strong>è®¤è¯</strong>ï¼ˆä½ æ˜¯è°ï¼Œç”¨æˆ·/è®¾å¤‡/ç³»ç»Ÿ)</p>
<p>( 2 ) <strong>éªŒè¯</strong>ï¼ˆä½ èƒ½å¹²ä»€ä¹ˆï¼Œä¹Ÿå«æƒé™æ§åˆ¶/æˆæƒï¼Œå…è®¸æ‰§è¡Œçš„æ“ä½œ)</p>
<h2 id="åŸºæœ¬å®ç°åŸç†"><a href="#åŸºæœ¬å®ç°åŸç†" class="headerlink" title="åŸºæœ¬å®ç°åŸç†"></a>åŸºæœ¬å®ç°åŸç†</h2><p>åŸºäº <code>Filter</code> , <code>Servlet</code> ,<code>AOP</code> å®ç°èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯.</p>
<h1 id="ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·"><a href="#ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·" class="headerlink" title="ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·"></a>ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·</h1><ul>
<li>åœ¨<code>application.properties</code>ä¸­é…ç½®</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.security.user.name</span>=<span class="string">xxx</span></span><br><span class="line"><span class="meta">spring.security.user.password</span>=<span class="string">xxxx</span></span><br></pre></td></tr></table></figure>

<h2 id="å…³é—­ç™»é™†è®¤è¯"><a href="#å…³é—­ç™»é™†è®¤è¯" class="headerlink" title="å…³é—­ç™»é™†è®¤è¯"></a>å…³é—­ç™»é™†è®¤è¯</h2><p>åœ¨å¯åŠ¨ç±»æ³¨è§£ä¸­å°†è‡ªåŠ¨é…ç½®å»é™¤åŠ è½½å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å…³é—­å®‰å…¨éªŒè¯</span></span><br><span class="line"><span class="meta">@SpringBootApplication(exclude = SecurityAutoConfiguration.class)</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·"><a href="#ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·" class="headerlink" title="ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·"></a>ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·</h1><ul>
<li><p>ç»§æ‰¿<code>WebSecurityConfigurerAdapter</code></p>
<ul>
<li><p>é‡å†™ <code>protected void configure(AuthenticationManagerBuilder auth)</code>.</p>
</li>
<li><p>å¼€å¯æ–¹æ³•çº§åˆ«æˆæƒ<code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="comment">//  å¯ç”¨æ–¹æ³•çº§åˆ«çš„è®¤è¯</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder; <span class="comment">//ç”¨äºå¯¹å¯†ç è¿›è¡ŒåŠ å¯†(å¿…é¡»çš„ï¼Œå¦åˆ™æ— æ³•å­˜å‚¨åˆ°å†…å®¹ä¸­)</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">                .password(passwordEncoder.encode(<span class="string">&quot;123456&quot;</span>))</span><br><span class="line">                .roles(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">                .password(passwordEncoder.encode(<span class="string">&quot;123&quot;</span>))</span><br><span class="line">                .roles(<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ <code>@PreAuthorize(value = &quot;hasAnyRole(&#39;admin&#39; , &#39;normal&#39;)&quot;)</code> è¿›è¡Œæˆæƒç»‘å®š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line">    <span class="meta">@PreAuthorize(value = &quot;hasAnyRole(&#x27;admin&#x27; , &#x27;normal&#x27;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloWorld</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello Spring Security&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ"><a href="#â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ" class="headerlink" title="â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ"></a>â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ</h1><ul>
<li>å®ä½“ç±»åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>dao</code>å±‚åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserInfoMapper</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">UserInfo</span> , <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>service</code>å±‚åˆ›å»º</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfoServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserInfoService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function">UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> userInfoMapper.<span class="title">findByUsername</span><span class="params">(username)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>service</code>å®ç°ç±»åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfoServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserInfoService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userInfoMapper.findByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>é…ç½®è®¤è¯ï¼ˆå®ç° <code>UserDetailsService</code>ï¼‰</p>
<p><font color="red">æ³¨æ„:</font>ç”¨æˆ·æƒé™å‰é¢å¿…é¡»åŠ ä¸Š <code>ROLE_</code> </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;MyUserDetailService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        User user = <span class="keyword">null</span>;</span><br><span class="line">        UserInfo userInfo = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(username != <span class="keyword">null</span>)&#123;</span><br><span class="line">            userInfo = userInfoMapper.findByUsername(username);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userInfo != <span class="keyword">null</span>)&#123;</span><br><span class="line">            List&lt;GrantedAuthority&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            GrantedAuthority authority = <span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">&quot;ROLE_&quot;</span>+userInfo.getRole());</span><br><span class="line">            list.add(authority);</span><br><span class="line">            user  = <span class="keyword">new</span> User(userInfo.getUsername(),userInfo.getPassword(),list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆå§‹åŒ–æ•°æ®åº“æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcInit</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        PasswordEncoder encoder = <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">        UserInfo u = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        u.setPassword(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;admin&quot;</span>));</span><br><span class="line">        u.setUsername(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        u.setRole(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        userInfoMapper.save(u);</span><br><span class="line"></span><br><span class="line">        u = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        u.setRole(<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">        u.setUsername(<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        u.setPassword(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;normal&quot;</span>));</span><br><span class="line">        userInfoMapper.save(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºé…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="comment">//  å¯ç”¨æ–¹æ³•çº§åˆ«çš„è®¤è¯</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;MyUserDetailService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//æ­¤å¤„åŠ å¯†æ–¹å¼å¿…é¡»ä¸åˆå§‹åŒ–æ—¶æ•°æ®åº“çš„åŠ å¯†æ–¹å¼ç›¸åŒ</span></span><br><span class="line">        auth.userDetailsService(userDetailsService).passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(äºŒ):æ•´åˆmybatis</title>
    <url>/2021/07/12/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="æ„å»ºæ•°æ®åº“è¡¨"><a href="#æ„å»ºæ•°æ®åº“è¡¨" class="headerlink" title="æ„å»ºæ•°æ®åº“è¡¨"></a>æ„å»ºæ•°æ®åº“è¡¨</h1><ul>
<li>ç”¨æˆ·è¡¨:<code>sys_user</code><ul>
<li>å…¶ä¸­ <code>is_enable</code> ã€ <code>is_lock</code> ã€<code>is_credentials</code> ã€<code>is_expired</code> æ¥æºäº<code>SpringSecurity</code>ä¸­ç”¨æˆ·æŠ½è±¡ç±»ä¸­çš„å››ä¸ªå±æ€§ï¼Œæœ¬è´¨ä¸Šï¼Œè¿™å¼ è¡¨ä¹Ÿæ˜¯åŸºäºç”¨æˆ·æŠ½è±¡ç±»è¿›è¡Œè‡ªå®šä¹‰å®ç°çš„.</li>
</ul>
</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/1.png"></p>
<ul>
<li>æƒé™è¡¨: <code>sys_role</code></li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" alt="image-20210712205655520"></p>
<ul>
<li>ç”¨æˆ·-æƒé™ä¸­é—´è¡¨ï¼š<code>sys_user_role</code></li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" alt="image-20210712205805311"></p>
<h1 id="æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–"><a href="#æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–" class="headerlink" title="æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–"></a>æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–</h1><p>æ­¤æ­¥éª¤å°±ä¸å†è¿›è¡Œè¿‡å¤šèµ˜è¿°.</p>
<p><font color="red">Â æ³¨æ„ï¼š</font> <code>mybatis</code>å¹¶æ²¡æœ‰è‡ªåŠ¨å¼€å¯é©¼å³°å‘½åä¸ä¸‹åˆ’çº¿ä¹‹é—´çš„è½¬æ¢ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯(ç”¨ä¹ æƒ¯äº†<code>mybatis-plus</code> å¯¼è‡´æ‰¾è¿™ä¸ªbugæ‰¾äº†åŠå¤©QAQ)ï¼ŒåŒæ—¶ä¹Ÿè¦è®°å¾—åœ¨å¯åŠ¨ç±»å¤„åŠ ä¸Š<code>@MapperScan</code>è¿™ä¸ªæ³¨è§£.</p>
<h1 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h1><ul>
<li>ç”¨æˆ·ç±»å®ç° <code>UserDetails</code> ç±»ï¼Œå¹¶é‡å†™æ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUser</span> <span class="keyword">implements</span> <span class="title">UserDetails</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String realName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isEnable;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isLock;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isCredentials;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isExpired;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> Date loginTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;GrantedAuthority&gt; authorities;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isExpired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonLocked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isLock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCredentialsNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isCredentials;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isEnable;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æƒé™ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysRole</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleMemo;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRoleName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> roleName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleName</span><span class="params">(String roleName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.roleName = roleName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRoleMemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> roleMemo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleMemo</span><span class="params">(String roleMemo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.roleMemo = roleMemo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£"><a href="#åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£" class="headerlink" title="åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£"></a>åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£</h1><ul>
<li><code>SysUserMappper</code>ã€<code>xml</code>æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysUserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(SysUser user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">SysUser <span class="title">selectAllUsers</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.anthony.dao.SysUserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> &gt;</span></span><br><span class="line">        insert into sys_user</span><br><span class="line">            (username, password, real_name, is_enable, is_lock, is_credentials, create_time, login_time)</span><br><span class="line">        values</span><br><span class="line">            (#&#123;username&#125;,#&#123;password&#125;,#&#123;realName&#125;,#&#123;isEnable&#125;,#&#123;isLock&#125;,#&#123;isCredentials&#125;,#&#123;createTime&#125;,#&#123;loginTime&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.anthony.entity.SysUser&quot;</span>&gt;</span></span><br><span class="line">        select * from sys_user where username = #&#123;username&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>SysRoleMapper</code> ã€<code>xml</code>æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysUserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(SysUser user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">SysUser <span class="title">selectAllUsers</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.anthony.dao.SysRoleMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.anthony.entity.SysRole&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> &gt;</span></span><br><span class="line">        select r.role_memo ,r.role_name</span><br><span class="line">        from sys_role r , sys_user_role ur</span><br><span class="line">        where ur.user_id = #&#123;id&#125; and ur.role_id = r.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="å®ç°ä¸šåŠ¡å±‚"><a href="#å®ç°ä¸šåŠ¡å±‚" class="headerlink" title="å®ç°ä¸šåŠ¡å±‚"></a>å®ç°ä¸šåŠ¡å±‚</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUserDetailService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysRoleMapper sysRoleMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserMapper sysUserMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        SysUser sysUsers = sysUserMapper.selectAllUsers(username);</span><br><span class="line">        System.out.println(<span class="string">&quot;=======&quot;</span>+ sysUsers.toString());</span><br><span class="line">        <span class="comment">//åˆ›å»ºæƒé™é›†åˆ</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; authorities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(sysUsers != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;RoleæŸ¥è¯¢å¼€å§‹ï¼&quot;</span> + sysUsers.getId());</span><br><span class="line">            <span class="comment">//æŸ¥è¯¢ç”¨æˆ·æƒé™</span></span><br><span class="line">            SysRole sysRole = sysRoleMapper.selectAll(sysUsers.getId());</span><br><span class="line">            <span class="keyword">if</span>(sysRole == <span class="keyword">null</span>) System.out.println(<span class="string">&quot; =============null===========&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;RoleæŸ¥è¯¢å®Œæˆï¼&quot;</span> + sysRole.getRoleName());</span><br><span class="line">            <span class="comment">//æ³¨å†Œæƒé™ä¿¡æ¯</span></span><br><span class="line">            GrantedAuthority grantedAuthority = <span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">&quot;ROLE_&quot;</span>+sysRole.getRoleName());</span><br><span class="line">            System.out.println(<span class="string">&quot;å»ºç«‹æƒé™æˆåŠŸï¼&quot;</span>+ grantedAuthority.toString());</span><br><span class="line">            authorities.add(grantedAuthority);</span><br><span class="line">            System.out.println(<span class="string">&quot;æƒé™å&quot;</span>+ sysRole.getRoleName()+<span class="string">&quot;æƒé™æè¿°&quot;</span>+ sysRole.getRoleMemo());</span><br><span class="line">            <span class="comment">//è®¾ç½®æƒé™ä¿¡æ¯</span></span><br><span class="line">            sysUsers.setAuthorities(authorities);</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> sysUsers;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–å†™é…ç½®ç±»"><a href="#ç¼–å†™é…ç½®ç±»" class="headerlink" title="ç¼–å†™é…ç½®ç±»"></a>ç¼–å†™é…ç½®ç±»</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService service;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(auth);</span></span><br><span class="line">        <span class="comment">//å¡«å…¥è‡ªå®šä¹‰çš„ç”¨æˆ·ç±»ä¸å¯†ç åŠ å¯†æ–¹å¼</span></span><br><span class="line">        auth.userDetailsService(service).passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(http);</span></span><br><span class="line">        <span class="comment">//å‘é€æˆæƒè¯·æ±‚æ—¶</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">            	<span class="comment">//å½“è®¿é—®æ¥å£ /index</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/index&quot;</span>)</span><br><span class="line">            	<span class="comment">//å…è®¸è®¿é—®ä¸éœ€è¦ç™»å½•</span></span><br><span class="line">                .permitAll()</span><br><span class="line">            	<span class="comment">//è®¿é—®å¦‚ä¸‹æ¥å£ï¼Œéœ€è¦å…·æœ‰åé¢çš„èº«ä»½ä¿¡æ¯</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/access/user/**&quot;</span>).hasRole(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/access/admin/**&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            	<span class="comment">//æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯æˆæƒ</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">            	<span class="comment">//ä½¿ç”¨è¡¨å•ç™»å½•</span></span><br><span class="line">                .formLogin();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æ§åˆ¶å±‚"><a href="#æ§åˆ¶å±‚" class="headerlink" title="æ§åˆ¶å±‚"></a>æ§åˆ¶å±‚</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toIndexHtml</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·³è½¬é¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/index.html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/access/user&quot;, produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hiUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello User!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/access/admin&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hiAdmin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello admin!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(å››):ç»“åˆVueå®ç°å¼‚æ­¥ç™»å½•</title>
    <url>/2021/07/16/SpringSecurity%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸé—®é¢˜åˆ†æ"><a href="#ğŸé—®é¢˜åˆ†æ" class="headerlink" title="ğŸé—®é¢˜åˆ†æ"></a>ğŸé—®é¢˜åˆ†æ</h1><p>&emsp;&emsp;ä½¿ç”¨å¼‚æ­¥<code>axios</code>è¯·æ±‚çš„æ–¹å¼è¿›è¡Œç™»å½•ä¸ç›´æ¥ä½¿ç”¨ <code>postman</code> å‘é€ <code>post</code> è¯·æ±‚è¿›è¡Œæµ‹è¯• ï¼Œæäº¤æ•°æ®çš„æ–¹å¼ä¼¼ä¹ä¸å¤ªä¸€æ ·ï¼Œ<code>postman</code>èƒ½è·‘é€šï¼Œè€Œä½¿ç”¨<code>axios</code> ï¼Œåå°<code>loadUserByusername</code>è·å–ä¸åˆ°ç”¨æˆ·åï¼Œè¿™å°±å¾ˆå¥‡æ€ªï¼Œå¥ˆä½•çœ‹ä¸å¤ªæ‡‚æºç ï¼Œä¸»è¦æ˜¯å„ç§è®¾è®¡æ¨¡å¼æ²¡å­¦è¿‡ä»¥åŠåº•å±‚çš„å°è£…å±‚æ•°å¤ªå¤šäº†ï¼Œçœ‹çš„ä½¿äººå¿ƒç´¯ï¼Œäºæ˜¯å¼€å§‹é€›è®ºå›ä»¥åŠå¼€æºç½‘ç«™çœ‹åˆ«äººçš„ä»£ç ï¼Œåæ¥æ‰å‘ç°ï¼Œ<code>axios</code>æäº¤çš„å‚æ•°æ˜¯å­˜æ”¾åœ¨è¯·æ±‚ä½“å½“ä¸­çš„ï¼Œè€Œ<code>SpringSecurity</code>ä¸­çš„å¤„ç†é€»è¾‘ä½¿ç”¨äº† <code>request.getParameter</code> è¿›è¡Œå‚æ•°è·å–ï¼Œæœ‰è¿‡åŸå§‹è¡¨å•æˆ–è€… <code>servlet</code> å¼€å‘ç»éªŒçš„äººéƒ½çŸ¥é“ ï¼Œ æ­¤æ–¹æ³•åªèƒ½è·å–åˆ°ç±»ä¼¼äº <code>get</code>è¯·æ±‚ ä»¥åŠ ä»¥åŸå§‹è¡¨å•æ ¼å¼æäº¤çš„<code>post</code> æ•°æ® ï¼Œ ç„¶è€Œå°è¯•è¿‡åå‘ç° ï¼Œåˆ©ç”¨<code>axios</code>è¯·æ±‚ï¼Œå°†è¯·æ±‚å¤´è®¾ç½®ä¸€ä¸‹ï¼Œå³<code>Content-Type: application/x-www-form-urlencoded``;charset=utf-8</code> ï¼Œ å®‰å…¨æ¡†æ¶ä»ç„¶è§£æä¸åˆ°<code>username</code>ï¼Œæ­¤æ—¶å¿ƒæ€å·²ç»å´©äº†ï¼Œç„¶è€Œå°±åœ¨æ­¤æ—¶ï¼Œç¿»åˆ°ä¸€ç¯‡åšå®¢ï¼Œè®°è¿°åˆ°å¯ä»¥å°†ä¼ ç»ŸåŸç”Ÿçš„è¡¨å•æäº¤æ ¼å¼æ›´æ”¹ä¸º <code>get</code> æäº¤æ•°æ®çš„æ•°æ®æ ¼å¼ï¼Œå½“ç„¶äº†åªæ˜¯æ›´æ”¹äº†æ•°æ®æ ¼å¼ï¼Œå¹¶æ²¡æœ‰æ›´æ”¹è¯·æ±‚æ–¹å¼å“ˆ.</p>
<h1 id="ğŸ˜è§£å†³æ–¹æ¡ˆ"><a href="#ğŸ˜è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ğŸ˜è§£å†³æ–¹æ¡ˆ"></a>ğŸ˜è§£å†³æ–¹æ¡ˆ</h1><p>åˆ©ç”¨<code>qs</code> åŒ… ä¸­çš„ <code>stringify</code> æ–¹æ³•æ ¼å¼åŒ–æ•°æ®.</p>
<p>å…·ä½“ï¼š</p>
<ul>
<li>å…ˆå®‰è£…è¯¥åŒ… <code>npm install qs --save</code></li>
<li>ä¿®æ”¹å‰ç«¯æäº¤æ•°æ®çš„æ ¼å¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> http.request(&#123;</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">    data: qs.stringify(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•è¿‡åå¯ä»¥è¯·æ±‚æˆåŠŸï¼Œç‹‚å–œ~</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(ä¸€):ä»‹ç»ä¸èµ·æ­¥ä½¿ç”¨</title>
    <url>/2021/06/01/Vue%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Vue-jsä»‹ç»"><a href="#Vue-jsä»‹ç»" class="headerlink" title="Vue.jsä»‹ç»"></a>Vue.jsä»‹ç»</h1><p>â€‹        Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº <strong>view</strong>) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„<strong>æ¸è¿›å¼æ¡†æ¶</strong>ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸<a href="https://cn.vuejs.org/v2/guide/single-file-components.html">ç°ä»£åŒ–çš„å·¥å…·é“¾</a>ä»¥åŠå„ç§<a href="https://github.com/vuejs/awesome-vue#libraries--plugins">æ”¯æŒç±»åº“</a>ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ï¼Œå¹¶ä¸”é‡‡ç”¨äº†<code>SPA</code>çš„è®¾è®¡æ€æƒ³æ¥å¯¹é¡µé¢è¿›è¡Œå¼€å‘ï¼Œè®©å¼€å‘ååˆ†ä¾¿æºä¸”å¯ç»´æŠ¤æ€§å¾—åˆ°æé«˜.</p>
<h1 id="å¼•å…¥Vue"><a href="#å¼•å…¥Vue" class="headerlink" title="å¼•å…¥Vue"></a>å¼•å…¥Vue</h1><p>â€‹        å°è¯• Vue.js æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://codesandbox.io/s/github/vuejs/vuejs.org/tree/master/src/v2/examples/vue-20-hello-world">Hello World ä¾‹å­</a>ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å®ƒï¼Œè·Ÿç€ä¾‹å­å­¦ä¹ ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥<a href="https://github.com/vuejs/vuejs.org/blob/master/src/v2/examples/vue-20-hello-world/index.html">åˆ›å»ºä¸€ä¸ª <code>.html</code> æ–‡ä»¶</a>ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•å…¥ Vueï¼š</p>
<p><code>CDN</code>å¼•å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>æœ¬åœ°å¼•å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span><br><span class="line">&lt;!--è¿›å…¥ç½‘ç«™ï¼Œä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œåœ¨æœ¬åœ°å¼•å…¥å³å¯ --&gt;</span><br><span class="line">https:<span class="comment">//cdn.jsdelivr.net/npm/vue/dist/vue.js</span></span><br></pre></td></tr></table></figure>





<h1 id="Vueå®ä¾‹"><a href="#Vueå®ä¾‹" class="headerlink" title="Vueå®ä¾‹"></a>Vueå®ä¾‹</h1><p>â€‹        ä½¿ç”¨ <code>Vue</code> å¼€å‘ï¼Œéµå¾ªåªæœ‰ä¸€ä¸ª<code>Vue</code>å®ä¾‹çš„åŸåˆ™ï¼Œè¿™ä¸€ç‚¹åœ¨ä»¥åä½¿ç”¨äº†<code>vue-cli</code>ä»¥åä¼šæ›´åŠ æ˜äº†ï¼Œè¿™é‡Œå…ˆä¸åšèµ˜è¿°.</p>
<p><strong>åˆ›å»ºä¸€ä¸ª<code>Vue</code>å®ä¾‹</strong></p>
<p>å…ˆå¤§è‡´äº†è§£ä¸‹ä¸€ä¸ª <code>Vue</code> å®ä¾‹èƒ½å†™å“ªäº›ä¸œè¥¿å…ˆå¤§è‡´ä¸Šè®¤è¯†ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œä»¥åä¼šæ…¢æ…¢ä»‹ç»ï¼Œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">//æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span></span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span> ,</span><br><span class="line">    <span class="comment">//å£°æ˜æ•°æ®</span></span><br><span class="line">    data: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ç¼–å†™å‡½æ•°</span></span><br><span class="line">    methods: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ç”¨äºæ³¨å†Œç»„ä»¶</span></span><br><span class="line">    components: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    computed: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ä»¥ä¸‹å‡æ˜¯Vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåé¢ä¼šæ…¢æ…¢è®²åˆ°</span></span><br><span class="line">    beforeCreate: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    created: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    updated: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Vue</code>å®ä¾‹å½“ä¸­çš„ <code>data</code>  å¯ä»¥é€šè¿‡å£°æ˜ <code>js</code> å¯¹è±¡çš„æ–¹å¼ï¼Œåœ¨å¤–éƒ¨èµ‹å€¼ï¼Œåœ¨å†…éƒ¨ä½¿ç”¨å˜é‡ç›´æ¥ä½¿ç”¨.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    name : <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    data: data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h1 id="æ¨¡æ¿è¯­æ³•"><a href="#æ¨¡æ¿è¯­æ³•" class="headerlink" title="æ¨¡æ¿è¯­æ³•"></a>æ¨¡æ¿è¯­æ³•</h1><p>â€‹        Vue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œå…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³åº•å±‚ Vue å®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰ Vue.js çš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLï¼Œæ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚</p>
<p>åœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶ï¼Œå¹¶æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚</p>
<p>å¦‚æœä½ ç†Ÿæ‚‰è™šæ‹Ÿ DOM å¹¶ä¸”åçˆ± JavaScript çš„åŸå§‹åŠ›é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¨¡æ¿ï¼Œ<a href="https://cn.vuejs.org/v2/guide/render-function.html">ç›´æ¥å†™æ¸²æŸ“ (render) å‡½æ•°</a>ï¼Œä½¿ç”¨å¯é€‰çš„ JSX è¯­æ³•ã€‚</p>
<h2 id="Mustacheè¯­æ³•"><a href="#Mustacheè¯­æ³•" class="headerlink" title="Mustacheè¯­æ³•"></a><strong>Mustacheè¯­æ³•</strong></h2><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p>æ–‡æœ¬æ•°æ®ç»‘å®šç»å¸¸ä½¿ç”¨åˆ°çš„åŒå¤§æ‹¬å·ç»‘å®šï¼š<code>&#123;&#123; msg &#125;&#125;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨æ„å¤–å±‚éœ€è¦ç”¨ id = app çš„å—çº§å…ƒç´ è¿›è¡ŒåŒ…è£¹--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¿™æ ·å°±å¯ä»¥ä»å®ä¾‹ä¸­å–å‡ºå€¼,å¹¶ä¸”æ¸²æŸ“åœ¨é¡µé¢ä¸Š--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœåŠ å…¥äº† v-once é‚£ä¹ˆè¿™ä¸ªå€¼å°±ä¸ä¼šéšç€ å®ä¾‹ä¸­å‚æ•°å€¼çš„å˜åŒ–è€Œå˜åŒ–äº†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨<code>vue</code>å®ä¾‹å½“ä¸­å£°æ˜è¿™ä¸ªæ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    name : <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    data: data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>â€‹    **æ³¨æ„:**å¦‚æœ<code>data</code>ä¸­çš„å±æ€§å€¼ä¸­æœ‰<code>html</code> æ ‡ç­¾ï¼Œå¦‚æœæƒ³è¦è§£æè¿™ä¸ªæ ‡ç­¾ï¼Œéœ€è¦åœ¨ä½¿ç”¨æ•°æ®çš„æ ‡ç­¾ä¸ŠåŠ ä¸Š <code>v-html</code>è¿™ä¸ªå±æ€§.</p>
<h3 id="ä½¿ç”¨JavaScriptè¡¨è¾¾å¼"><a href="#ä½¿ç”¨JavaScriptè¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨JavaScriptè¡¨è¾¾å¼"></a>ä½¿ç”¨<code>JavaScriptè¡¨è¾¾å¼</code></h3><p>â€‹        è¿„ä»Šä¸ºæ­¢ï¼Œåœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åªç»‘å®šç®€å•çš„ property é”®å€¼ã€‚ä½†å®é™…ä¸Šï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®šï¼ŒVue.js éƒ½æä¾›äº†å®Œå…¨çš„ JavaScript è¡¨è¾¾å¼æ”¯æŒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;&#123; number + <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? <span class="string">&#x27;YES&#x27;</span> : <span class="string">&#x27;NO&#x27;</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>) &#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹        è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å± Vue å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸º JavaScript è¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«<strong>å•ä¸ªè¡¨è¾¾å¼</strong>ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½<strong>ä¸ä¼š</strong>ç”Ÿæ•ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">var</span> a = <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">if</span> (ok) &#123; <span class="keyword">return</span> message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€ç»‘å®š"><a href="#åŠ¨æ€ç»‘å®š" class="headerlink" title="åŠ¨æ€ç»‘å®š"></a>åŠ¨æ€ç»‘å®š</h2><p>â€‹        é€šå¸¸æƒ…å†µä¸‹ï¼Œé¡µé¢ä¸­çš„æ•°æ®å¹¶ä¸æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ï¼Œå¯èƒ½åœ¨è§¦å‘æŸäº›æ—¶é—´è¿‡åä¼šå®æ—¶æ›´æ–°æ•°æ®ï¼Œå½“ç„¶äº†ï¼Œè¿™é‡Œä¸æ˜¯æŒ‡<code>&#123;&#123; &#125;&#125;</code>ä¸­çš„æ•°æ®ï¼Œå› ä¸ºè¿™é‡Œé¢çš„æ•°æ®æœ¬èº«å°±ç”±<code>vue</code>æ¥ç®¡ç†æ¥è¿›è¡ŒåŠ¨æ€æ›´æ–°çš„.è¿™é‡Œçš„åŠ¨æ€ç»‘å®šæŒ‡çš„æ˜¯æ ‡ç­¾çš„å±æ€§å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒåŠ¨æ€çš„æ›´æ–°. </p>
<h3 id="v-bind-çš„ä½¿ç”¨"><a href="#v-bind-çš„ä½¿ç”¨" class="headerlink" title="**v-bind**çš„ä½¿ç”¨"></a>**<code>v-bind</code>**çš„ä½¿ç”¨</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">  //å½“å¯¹ h2 æ ‡ç­¾ä¸è¿›è¡Œä»»ä½•å¤„ç† æ˜¯æ— æ³•è¯»å–åˆ°ids æˆ‘ä»¬éœ€è¦å°† idå±æ€§äº¤ç»™ vueå»ç®¡ç†å°±å¯ä»¥è¯»å–åˆ°äº†</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">       &lt;h2 id =&quot;ids&quot;&gt;&lt;/h2&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;script&gt;</span><br><span class="line">       let app = new Vue(&#123;</span><br><span class="line">           //æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span><br><span class="line">           el: &#x27;#app&#x27; ,</span><br><span class="line">           //å£°æ˜æ•°æ®</span><br><span class="line">           data: &#123;</span><br><span class="line">               ids: &quot;test&quot;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®çš„æ–¹å¼åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹å³å¯ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-bind:id</span> = <span class="string">&quot;ids&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:id</span> = <span class="string">&quot;ids&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="v-onçš„ä½¿ç”¨"><a href="#v-onçš„ä½¿ç”¨" class="headerlink" title="v-onçš„ä½¿ç”¨"></a><strong><code>v-on</code>çš„ä½¿ç”¨</strong></h3><p>å¦‚æœéœ€è¦ä½¿ç”¨<code>vue </code> å®ä¾‹å½“ä¸­çš„ <code>methods</code> åŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè§¦å‘äº‹ä»¶äº¤ç»™ <code>vue </code>å»ç®¡ç† </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€… åŠ¨æ€ç»‘å®šäº‹ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @[<span class="attr">event</span>]=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>vue</code>ä¸­çš„æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">      <span class="comment">//æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span></span><br><span class="line">      el: <span class="string">&#x27;#app&#x27;</span> ,</span><br><span class="line">      <span class="comment">//å£°æ˜æ•°æ®</span></span><br><span class="line">      data: &#123;</span><br><span class="line">          ids: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">          event: <span class="string">&quot;click&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    	methods: &#123;</span><br><span class="line">          <span class="comment">//ES5å†™æ³•</span></span><br><span class="line">          test: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">              </span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">//ES6å†™æ³•</span></span><br><span class="line">          <span class="function"><span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">              </span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(ä¸‰):Vuexåˆ·æ–°åˆå§‹åŒ–</title>
    <url>/2021/08/09/Vue%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>è¿™ä¸ªé—®é¢˜æ˜¯éå¸¸æ™®éçš„ï¼Œäºæ˜¯æˆ‘ä¸Š <code>StackOverFlow</code>ä¸Šé€›äº†ä¸€åœˆï¼Œå‘ç°å›½å¤–å‹äººæ¨èäº†å¥½å‡ ç§è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»ä¸­æŒ‘é€‰äº†ä¸€ä¸‹ï¼Œé€‰æ‹©äº†ä¸€ç§ååˆ†ç®€å•çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨<code>Vuex</code>æ’ä»¶ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹å®‰è£…å’Œä½¿ç”¨ä»¥åŠå…¶æä¾›çš„API</p>
</blockquote>
<h1 id="vuex-persistedstate"><a href="#vuex-persistedstate" class="headerlink" title="vuex-persistedstate"></a>vuex-persistedstate</h1><p><code>GitHub</code>åœ°å€ï¼š<a href="https://github.com/robinvdvleuten/vuex-persistedstate/tree/master">ç‚¹è¿™é‡Œ</a></p>
<ul>
<li>åˆ©ç”¨<code>npm</code> è¿›è¡Œå®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save vuex-persistedstate</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ä½¿ç”¨äº†<code>vuex</code>çš„<code>js</code>æ–‡ä»¶ä¸­å¯¼å…¥</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&quot;vuex-persistedstate&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    isLogin: <span class="literal">false</span>,</span><br><span class="line">    userInfo: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="function"><span class="title">updateInfo</span>(<span class="params">state , payload</span>)</span>&#123;</span><br><span class="line">      state.isLogin = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">Object</span>.assign(state.userInfo,payload.userinfo)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [createPersistedState(&#123;</span><br><span class="line">    <span class="comment">// å­˜å‚¨æ—¶ keyçš„å€¼ä¸º state</span></span><br><span class="line">    key: <span class="string">&quot;state&quot;</span>,</span><br><span class="line">    <span class="comment">//éœ€è¦å­˜å‚¨å“ªäº›å±æ€§ï¼Œå¦‚æœä¸å†™ï¼Œåˆ™é»˜è®¤å­˜å‚¨å…¨éƒ¨ï¼Œç©ºæ•°ç»„åˆ™ä¸å­˜</span></span><br><span class="line">    <span class="comment">//å¦‚æœä½¿ç”¨äº†module åˆ™éœ€è¦ åœ¨å‰é¢åŠ  moduleå</span></span><br><span class="line">    path:[<span class="string">&#x27;isLogin&#x27;</span>],</span><br><span class="line">    <span class="comment">//æ›´æ”¹ vuex state å­˜å‚¨ä½ç½® é»˜è®¤ localStorage (æ°¸ä¹…å­˜å‚¨)</span></span><br><span class="line">    storage: <span class="built_in">window</span>.sessionStorage,</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p><code>createPersistedState([options])</code></p>
<p>Creates a new instance of the plugin with the given options. The following options can be provided to configure the plugin for your specific needs:</p>
<ul>
<li><code>key &lt;String&gt;</code>: The key to store the persisted state under. Defaults to <code>vuex</code>.</li>
<li><code>paths &lt;Array&gt;</code>: An array of any paths to partially persist the state. If no paths are given, the complete state is persisted. If an empty array is given, no state is persisted. Paths must be specified using dot notation. If using modules, include the module name. eg: â€œauth.userâ€ Defaults to <code>undefined</code>.</li>
<li><code>reducer &lt;Function&gt;</code>: A function that will be called to reduce the state to persist based on the given paths. Defaults to include the values.</li>
<li><code>subscriber &lt;Function&gt;</code>: A function called to setup mutation subscription. Defaults to <code>store =&gt; handler =&gt; store.subscribe(handler)</code>.</li>
<li><code>storage &lt;Object&gt;</code>: Instead of (or in combination with) <code>getState</code> and <code>setState</code>. Defaults to localStorage.</li>
<li><code>getState &lt;Function&gt;</code>: A function that will be called to rehydrate a previously persisted state. Defaults to using <code>storage</code>.</li>
<li><code>setState &lt;Function&gt;</code>: A function that will be called to persist the given state. Defaults to using <code>storage</code>.</li>
<li><code>filter &lt;Function&gt;</code>: A function that will be called to filter any mutations which will trigger <code>setState</code> on storage eventually. Defaults to <code>() =&gt; true</code>.</li>
<li><code>overwrite &lt;Boolean&gt;</code>: When rehydrating, whether to overwrite the existing state with the output from <code>getState</code> directly, instead of merging the two objects with <code>deepmerge</code>. Defaults to <code>false</code>.</li>
<li><code>arrayMerger &lt;Function&gt;</code>: A function for merging arrays when rehydrating state. Defaults to <code>function (store, saved) &#123; return saved &#125;</code> (saved state replaces supplied state).</li>
<li><code>rehydrated &lt;Function&gt;</code>: A function that will be called when the rehydration is finished. Useful when you are using Nuxt.js, which the rehydration of the persisted state happens asynchronously. Defaults to <code>store =&gt; &#123;&#125;</code></li>
<li><code>fetchBeforeUse &lt;Boolean&gt;</code>: A boolean indicating if the state should be fetched from storage before the plugin is used. Defaults to <code>false</code>.</li>
<li><code>assertStorage &lt;Function&gt;</code>: An overridable function to ensure storage is available, fired on pluginsâ€™s initialization. Default one is performing a Write-Delete operation on the given Storage instance. Note, default behaviour could throw an error (like <code>DOMException: QuotaExceededError</code>).</li>
</ul>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(äºŒ):æ•´åˆmavon-editor</title>
    <url>/2021/07/22/Vue%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šä¸å¾—ä¸è¯´æˆ‘è¿˜æ˜¯å¤ªæ‡’äº†ï¼Œå‰ç«¯éƒ¨åˆ†çš„æ–‡ç« ä¸€ç›´æ²¡æœ‰å†™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰ä»€ä¹ˆå…´è‡´å†™ï¼Œç°åœ¨è¶ç€æœ‰æ—¶é—´è¿˜æ˜¯å†™å†™å§ï¼ŒVueæœ€è¿‘ä¹Ÿç®—æ˜¯ç”¨çš„æœ‰ç‚¹æ„Ÿè§‰äº†ï¼Œç»„ä»¶åŒ–æ€æƒ³æœ‰ä¸€è¯´ä¸€ï¼Œå¯¹äºä¸ªäººå¼€å‘è€…è€Œè¨€ï¼Œå¼€å‘å°å‹é¡¹ç›®è¿˜æ˜¯ç”¨åç«¯æ¨¡æ¿å†™å‰ç«¯æ¯”è¾ƒæ–¹ä¾¿hhh.</p>
</blockquote>
<h1 id="ğŸš€ä¸‹è½½å®‰è£…-mavon-editor"><a href="#ğŸš€ä¸‹è½½å®‰è£…-mavon-editor" class="headerlink" title="ğŸš€ä¸‹è½½å®‰è£… mavon-editor"></a>ğŸš€ä¸‹è½½å®‰è£… mavon-editor</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install mavon-editor --save</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ›°ä½¿ç”¨-mavon-editor"><a href="#ğŸ›°ä½¿ç”¨-mavon-editor" class="headerlink" title="ğŸ›°ä½¿ç”¨ mavon-editor"></a>ğŸ›°ä½¿ç”¨ mavon-editor</h1><h2 id="åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨"><a href="#åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨"></a>åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;mavon-editor v-model&#x3D;&quot;content&quot; </span><br><span class="line">                  :codeStyle&#x3D;&quot;codeStyle&quot;</span><br><span class="line">                  &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mavonEditor &#125; from &#39;mavon-editor&#39;</span><br><span class="line">import &#39;mavon-editor&#x2F;dist&#x2F;css&#x2F;index.css&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;MavonEditor&#39;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      content: &#39;&#39;,</span><br><span class="line">      codeStyle: &#39;ä¸»é¢˜&#39;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    mavonEditor</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š<code>content</code> ä¿å­˜çš„ä¸ºmdè¯­æ³•ï¼Œ<code>codeStyle</code>å±æ€§å¯ä»¥æ›´æ¢ä»£ç å—çš„ä¸»é¢˜ï¼Œå…·ä½“æœ‰å“ªäº›ä¸»é¢˜å¯ä»¥å‚è€ƒä¸€ä¸‹  <a href="https://github.com/hinesboy/mavonEditor/blob/HEAD/src/lib/core/hljs/lang.hljs.css.js"><font color="red">å¯é€‰ä¸»é¢˜è¡¨</font></a>  , æ¯ä¸€ç§ä¸»é¢˜çš„æ ·å¼å¯ä»¥å‚è€ƒ<a href="https://highlightjs.org/static/demo/"> <code>highlight.js</code>demoæ–‡æ¡£</a>  ï¼Œ æ›´å¤šç›¸å…³çš„è®¾ç½®å¯ä»¥å‚è€ƒæ–‡æ¡£ : <a href="https://www.npmjs.com/package/mavon-editor">mavon-editorå‚è€ƒæ–‡æ¡£</a> </p>
<h2 id="å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ "><a href="#å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ " class="headerlink" title="å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ "></a>å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ </h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;mavon-editor ref&#x3D;md @imgAdd&#x3D;&quot;imgAdd&quot; @imgDel&#x3D;&quot;$imgDel&quot;&gt;&lt;&#x2F;mavon-editor&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    exports default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        &#x2F;&#x2F; ç»‘å®š@imgAdd event</span><br><span class="line">        imgAdd(pos, $file)&#123;</span><br><span class="line">		   let _this &#x3D; this</span><br><span class="line">            &#x2F;&#x2F; ç¬¬ä¸€æ­¥.å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨.</span><br><span class="line">           var formdata &#x3D; new FormData();</span><br><span class="line">           formdata.append(&#39;image&#39;, $file);</span><br><span class="line">           axios(&#123;</span><br><span class="line">               url: &#39;å›¾ç‰‡ä¸Šä¼ apiè·¯å¾„&#39;,</span><br><span class="line">               method: &#39;post&#39;,</span><br><span class="line">               data: formdata,</span><br><span class="line">               headers: &#123; &#39;Content-Type&#39;: &#39;multipart&#x2F;form-data&#39; &#125;,</span><br><span class="line">           &#125;).then((url) &#x3D;&gt; &#123;</span><br><span class="line">               _this.$refs.md.$img2Url(pos, url);</span><br><span class="line">           &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°çš„å†™æ³•æ¯”è¾ƒå›ºå®šï¼ŒæŒ‰ç€å¦‚ä¸Šæ–¹å¼å†™å³å¯.</p>
<p>æ³¨æ„æ›¿æ¢çš„æ–¹å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†è¿”å›çš„urlæ›¿æ¢åˆ°æ–‡æœ¬åŸä½ç½®![...](0) -&gt; ![...](url)  æ›¿æ¢æ–¹å¼ä¸º: $vm.$img2Url(pos , url)</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $vm æŒ‡ä¸ºmavonEditorå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ç§æ–¹å¼è·å–</span></span><br><span class="line"><span class="comment"> * 1. é€šè¿‡å¼•å…¥å¯¹è±¡è·å–: `import &#123;mavonEditor&#125; from ...` ç­‰æ–¹å¼å¼•å…¥åï¼Œ`$vm`ä¸º`mavonEditor`</span></span><br><span class="line"><span class="comment"> * 2. é€šè¿‡$refsè·å–: htmlå£°æ˜ref : `&lt;mavon-editor ref=md &gt;&lt;/mavon-editor&gt;ï¼Œ`$vm`ä¸º`this.$refs.md`</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(äº”):é˜²æŠ–ä¸èŠ‚æµ</title>
    <url>/2021/09/09/Vue%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ä½•ä¸ºé˜²æŠ–ï¼Ÿ"><a href="#ä½•ä¸ºé˜²æŠ–ï¼Ÿ" class="headerlink" title="ä½•ä¸ºé˜²æŠ–ï¼Ÿ"></a>ä½•ä¸ºé˜²æŠ–ï¼Ÿ</h1><p>é˜²æŠ–ï¼Œå³åœ¨<code>n</code>ç§’å†…ï¼Œè§¦å‘äº†å¤šæ¬¡äº‹ä»¶ï¼Œä½†æ˜¯åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¯ä¸€æ¬¡è§¦å‘éƒ½ä¼šåˆ·æ–°æ—¶é—´ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…åªä¼šæ‰§è¡Œä¸€æ¬¡äº‹ä»¶ï¼Œå¤šç”¨äºåŠæ—¶æœç´¢ä¸­.</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc </span>å‡½æ•°é˜²æŠ–</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>func ç›®æ ‡å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> debounce = <span class="function">(<span class="params">fn, gapTime</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> _lastTime</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(_lastTime)</span><br><span class="line">    _lastTime = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">    &#125;, gapTime)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ä½•ä¸ºèŠ‚æµï¼Ÿ"><a href="#ä½•ä¸ºèŠ‚æµï¼Ÿ" class="headerlink" title="ä½•ä¸ºèŠ‚æµï¼Ÿ"></a>ä½•ä¸ºèŠ‚æµï¼Ÿ</h1><p>èŠ‚æµï¼Œå³åœ¨<code>n</code>ç§’å†…å¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä½†æ˜¯å¤šæ¬¡è§¦å‘å¹¶ä¸ä¼šåˆ·æ–°æ—¶é—´.</p>
<h2 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc </span>å‡½æ•°èŠ‚æµ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>func å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">_throttle</span>(<span class="params">fn, interval</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> last;</span><br><span class="line">  <span class="keyword">var</span> timer;</span><br><span class="line">  <span class="keyword">var</span> interval = interval || <span class="number">200</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> th = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">var</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">if</span> (last &amp;&amp; now - last &lt; interval) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        last = now;</span><br><span class="line">        fn.apply(th, args);</span><br><span class="line">      &#125;, interval);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      last = now;</span><br><span class="line">      fn.apply(th, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="å…·ä½“ä½¿ç”¨"><a href="#å…·ä½“ä½¿ç”¨" class="headerlink" title="å…·ä½“ä½¿ç”¨"></a>å…·ä½“ä½¿ç”¨</h1><p>åœ¨éœ€è¦è¿›è¡Œé˜²æŠ–/èŠ‚æµçš„åœ°æ–¹è¿›è¡Œå¦‚ä¸‹å˜å½¢å³å¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å  èŠ‚æµå‡½æ•°  </span></span><br><span class="line">getImg: _throttle(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//åŸæœ¬å‡½æ•°çš„å…·ä½“å®ç°</span></span><br><span class="line">      getVerityImg().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = result.data;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="built_in">this</span>.img = res.data.img;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="built_in">this</span>.regisForm.uuid = res.data.uuid;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">1000</span>),</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·Git</title>
    <url>/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/</url>
    <content><![CDATA[<h1 id="ğŸ”å‰è¨€"><a href="#ğŸ”å‰è¨€" class="headerlink" title="ğŸ”å‰è¨€"></a>ğŸ”å‰è¨€</h1><p>&emsp;&emsp;åœ¨å­¦ä¹ çš„ <code>Vue-Cli</code> è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°<code>Git</code>çš„é…ç½®ï¼Œç”±æ­¤æ‰å¼€å§‹ï¼Œè™½ç„¶ä»¥å‰äº†è§£è¿‡ <code>Git</code> ä½†æ˜¯å¹¶ä¸çŸ¥é“ <code>Git</code> å…·ä½“èƒ½å¸®åŠ©æˆ‘å¹²ä»€ä¹ˆï¼Œç°åœ¨æƒ³æ¥å½“æ—¶è¿˜æ˜¯å¤ªå¹´è½»äº†å“ˆï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚ğŸ˜ç¡®ä¿¡ï¼Œä¹Ÿæ­£æ˜¯ç”±æ­¤è®©æˆ‘æ­å»ºäº†è‡ªå·±çš„åšå®¢Â·Â·Â·Â·</p>
<h1 id="ğŸ‰Gitçš„ç›¸å…³ä»‹ç»"><a href="#ğŸ‰Gitçš„ç›¸å…³ä»‹ç»" class="headerlink" title="ğŸ‰Gitçš„ç›¸å…³ä»‹ç»"></a>ğŸ‰Gitçš„ç›¸å…³ä»‹ç»</h1><p><strong>äº†è§£ <code>Git</code> ä¹‹å‰å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ</strong></p>
<blockquote>
<p>&emsp;&emsp;ç‰ˆæœ¬æ§åˆ¶ï¼ˆRevision controlï¼‰æ˜¯ä¸€ç§åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç”¨äºç®¡ç†æˆ‘ä»¬å¯¹æ–‡ä»¶ã€ç›®å½•æˆ–å·¥ç¨‹ç­‰å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ›´æ”¹å†å²è®°å½•ï¼Œå¤‡ä»½ä»¥ä¾¿æ¢å¤ä»¥å‰çš„ç‰ˆæœ¬çš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯ã€‚     </p>
</blockquote>
<ul>
<li>å®ç°è·¨åŒºåŸŸå¤šäººååŒå¼€å‘</li>
<li>è¿½è¸ªå’Œè®°è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶çš„å†å²è®°å½•</li>
<li>ç»„ç»‡å’Œä¿æŠ¤ä½ çš„æºä»£ç å’Œæ–‡æ¡£</li>
<li>ç»Ÿè®¡å·¥ä½œé‡</li>
<li>å¹¶è¡Œå¼€å‘ã€æé«˜å¼€å‘æ•ˆç‡</li>
<li>è·Ÿè¸ªè®°å½•æ•´ä¸ªè½¯ä»¶çš„å¼€å‘è¿‡ç¨‹</li>
<li>å‡è½»å¼€å‘äººå‘˜çš„è´Ÿæ‹…ï¼ŒèŠ‚çœæ—¶é—´ï¼ŒåŒæ—¶é™ä½äººä¸ºé”™è¯¯</li>
</ul>
<p>&emsp;&emsp;ç®€å•è¯´å°±æ˜¯ç”¨äºç®¡ç†å¤šäººååŒå¼€å‘é¡¹ç›®çš„æŠ€æœ¯ã€‚</p>
<p>&emsp;&emsp;æ²¡æœ‰è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æˆ–è€…ç‰ˆæœ¬æ§åˆ¶æœ¬èº«ç¼ºä¹æ­£ç¡®çš„æµç¨‹ç®¡ç†ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å°†ä¼šå¼•å…¥å¾ˆå¤šé—®é¢˜ï¼Œå¦‚è½¯ä»¶ä»£ç çš„ä¸€è‡´æ€§ã€è½¯ä»¶å†…å®¹çš„å†—ä½™ã€è½¯ä»¶è¿‡ç¨‹çš„äº‹ç‰©æ€§ã€è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å¹¶å‘æ€§ã€è½¯ä»¶æºä»£ç çš„å®‰å…¨æ€§ï¼Œä»¥åŠè½¯ä»¶çš„æ•´åˆç­‰é—®é¢˜ã€‚</p>
<p>&emsp;&emsp;æ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯å­¦ä¹ ï¼Œæˆ–è€…æ˜¯è‡ªå·±åšç¬”è®°ï¼Œéƒ½ç»å†è¿‡è¿™æ ·ä¸€ä¸ªé˜¶æ®µï¼æˆ‘ä»¬å°±è¿«åˆ‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼</p>
<p>ç‰ˆæœ¬æ§åˆ¶å™¨æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p>
<ul>
<li><strong>Git</strong></li>
<li><strong>SVN</strong>ï¼ˆSubversionï¼‰</li>
<li><strong>CVS</strong>ï¼ˆConcurrent Versions Systemï¼‰</li>
<li><strong>VSS</strong>ï¼ˆMicorosoft Visual SourceSafeï¼‰</li>
<li><strong>TFS</strong>ï¼ˆTeam Foundation Serverï¼‰</li>
<li>Visual Studio Online</li>
</ul>
<p>ç‰ˆæœ¬æ§åˆ¶äº§å“éå¸¸çš„å¤šï¼ˆPerforceã€Rational ClearCaseã€RCSï¼ˆGNU Revision Control Systemï¼‰ã€Serena Dimentionã€SVKã€BitKeeperã€Monotoneã€Bazaarã€Mercurialã€SourceGear Vaultï¼‰ï¼Œç°åœ¨å½±å“åŠ›æœ€å¤§ä¸”ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Gitä¸SVN.</p>
<p><strong>1ã€é›†ä¸­ç‰ˆæœ¬æ§åˆ¶  SVN</strong></p>
<p>&emsp;&emsp;æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼ŒååŒå¼€å‘è€…ä»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ›´æ–°æˆ–ä¸Šä¼ è‡ªå·±çš„ä¿®æ”¹ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·çš„æœ¬åœ°åªæœ‰è‡ªå·±ä»¥å‰æ‰€åŒæ­¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸è¿ç½‘çš„è¯ï¼Œç”¨æˆ·å°±çœ‹ä¸åˆ°å†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•åˆ‡æ¢ç‰ˆæœ¬éªŒè¯é—®é¢˜ï¼Œæˆ–åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œã€‚è€Œä¸”ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å•ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤§çš„é£é™©è¿™ä¸ªæœåŠ¡å™¨ä¼šæŸåï¼Œè¿™æ ·å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®ï¼Œå½“ç„¶å¯ä»¥å®šæœŸå¤‡ä»½ã€‚ä»£è¡¨äº§å“ï¼šSVNã€CVSã€VSS</p>
<p><strong>2ã€åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶  Git</strong></p>
<p>&emsp;&emsp;æ¯ä¸ªäººéƒ½æ‹¥æœ‰å…¨éƒ¨çš„ä»£ç ï¼å®‰å…¨éšæ‚£ï¼</p>
<p>&emsp;&emsp;æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä»“åº“å…¨éƒ¨åŒæ­¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç”¨æˆ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥ç¦»çº¿åœ¨æœ¬åœ°æäº¤ï¼Œåªéœ€åœ¨è¿ç½‘æ—¶pushåˆ°ç›¸åº”çš„æœåŠ¡å™¨æˆ–å…¶ä»–ç”¨æˆ·é‚£é‡Œã€‚ç”±äºæ¯ä¸ªç”¨æˆ·é‚£é‡Œä¿å­˜çš„éƒ½æ˜¯æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®ï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡æ²¡æœ‰é—®é¢˜å°±å¯ä»¥æ¢å¤æ‰€æœ‰çš„æ•°æ®ï¼Œä½†è¿™å¢åŠ äº†æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å ç”¨ï¼Œä¸ä¼šå› ä¸ºæœåŠ¡å™¨æŸåæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œé€ æˆä¸èƒ½å·¥ä½œçš„æƒ…å†µï¼</p>
<p><strong>3.Gitä¸SVNçš„ä¸»è¦åŒºåˆ«</strong></p>
<p>&emsp;&emsp;SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå·¥ä½œçš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå·¥ä½œï¼Œå®Œæˆå·¥ä½œåï¼Œéœ€è¦æŠŠè‡ªå·±åšå®Œçš„æ´»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¯¹ç½‘ç»œå¸¦å®½è¦æ±‚è¾ƒé«˜ã€‚</p>
<p>&emsp;&emsp;Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œå·¥ä½œçš„æ—¶å€™ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬éƒ½åœ¨è‡ªå·±ç”µè„‘ä¸Šã€‚ååŒçš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šæ¯”å¦‚è¯´è‡ªå·±åœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œå…¶ä»–äººä¹Ÿåœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¸¤ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚Gitå¯ä»¥ç›´æ¥çœ‹åˆ°æ›´æ–°äº†å“ªäº›ä»£ç å’Œæ–‡ä»¶ï¼</p>
<p><strong>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</strong></p>
<h1 id="ğŸˆGitçš„å®‰è£…"><a href="#ğŸˆGitçš„å®‰è£…" class="headerlink" title="ğŸˆGitçš„å®‰è£…"></a>ğŸˆGitçš„å®‰è£…</h1><p>&emsp;&emsp;é€šå¸¸æƒ…å†µä¸‹è½½ <a href="https://git-scm.com/"><code>Git</code></a> (ç‚¹å‡»è·³è½¬)åœ¨å®˜ç½‘ä¸‹è½½ï¼Œç”±äºå±äºå›½å¤–ç½‘ç«™ï¼Œè™½ç„¶æ–‡ä»¶å°ï¼Œä½†æ˜¯ä¸‹è½½é€Ÿåº¦æå…¶æ…¢ï¼Œäºæ˜¯æ¨èä½¿ç”¨ <a href="http://npm.taobao.org/mirrors/git-for-windows/"><code>æ·˜å®é•œåƒ</code></a> (ç‚¹å‡»è·³è½¬)ä¸‹è½½ï¼Œæ˜¯ä¸æ˜¯ä¼šç–‘æƒ‘ä»€ä¹ˆæ˜¯ <code>æ·˜å®é•œåƒ</code> ï¼Ÿé€šä¿—çš„æ¥è®²ï¼Œå°±æ˜¯æ·˜å®æŠŠå›½å¤–ç½‘ç«™çš„ä¸œè¥¿ä¸‹å¥½äº†æ”¾åœ¨å›½å†…çš„ç½‘ç«™ä¸­ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘ä»¬é«˜é€Ÿä¸‹è½½ï¼Œç±»ä¼¼çš„è¿˜æœ‰ <code>é˜¿é‡Œé•œåƒ</code> ä¹Ÿååˆ†å¸¸ç”¨.</p>
<p>&emsp;&emsp;å›åˆ°æ­£é¢˜ï¼Œä¸‹è½½å¥½ä¹‹åï¼Œæœ‰ä¸€è¯´ä¸€é™¤äº†æ›´æ”¹å®‰è£…è·¯å¾„å¤–ï¼Œå…¶ä½™çš„éƒ½ç‚¹nextå³å¯~~  å®‰è£…çš„æ—¶å€™ä¼šå¸®åŠ©ä½ é…ç½®å¥½<code>ç¯å¢ƒå˜é‡</code>ï¼Œå…¶å® <code>Git</code> çš„è¿è¡Œé™ªä¸é…ç½®éƒ½è¡Œï¼Œé…ç½®äº†ä¹‹ååªæ˜¯è®©ä½ åœ¨è®¡ç®—æœºçš„ä»»æ„ä½ç½®ï¼Œé¼ æ ‡å³é”®è¿›è¡Œé€‰æ‹©å¯ä»¥ä½¿ç”¨ <code>Git Bash / Git GUI</code> .</p>
<p>&emsp;&emsp;åœ¨è¿›è¡Œè¿›ä¸€æ­¥é…ç½®ä¹‹å‰ï¼Œå»ºè®®å…ˆæ³¨å†Œä¸€ä¸ª <a href="https://gitee.com/"><code>Gitee/GitHub</code></a>  (ç‚¹å‡»è·³è½¬)çš„è´¦å·(æ­¤å¤„ä»¥ <code>Gitee</code> ä¸ºä¾‹ï¼Œæ²¡é”™å°±æ˜¯å› ä¸º <code>Gitee</code> æ˜¯å›½å†…çš„è®¿é—®æ¯”è¾ƒå¿«)ï¼Œå»ºè®®ç”¨è‹±æ–‡åä¸”å…¨éƒ¨å°å†™ä¸å«ç©ºæ ¼çš„é‚£ç§ï¼Œç”¨å¤§å†™è¿‡åé…ç½®ä»£ç æ‰˜ç®¡å¤§æ¦‚ç‡ä¼šå‡ºé—®é¢˜ï¼Œè°è¸©å‘è°çŸ¥é“.</p>
<p>&emsp;&emsp;æ¥ä¸‹æ¥ç»™å‡ºä¸€äº› <code>Git</code> çš„å¸¸è§å‘½ä»¤(åœ¨ <code>Git Bash</code> ä¸­ä½¿ç”¨)ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹ç³»ç»Ÿconfig</span><br><span class="line">git config --system --list</span><br><span class="line">ã€€ã€€</span><br><span class="line">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span><br><span class="line">git config --global  --list</span><br><span class="line"></span><br><span class="line">#è®¾ç½®ç”¨æˆ·æ˜µç§°è¦ä¸Giteeçš„ç”¨æˆ·åä¸€è‡´</span><br><span class="line">git config --global user.name &quot;username&quot; </span><br><span class="line"></span><br><span class="line">#è®¾ç½®ç”¨æˆ·é‚®ç®±,å¦‚æœGiteeç»‘å®šäº†ï¼Œä¹Ÿç”¨ä¸€æ ·çš„å°±è¡Œ</span><br><span class="line">git config --global user.email &quot;youremail&quot;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è¿›å…¥ C:\Users\Administrator\.ssh ç›®å½• å¦‚æœæ²¡æœ‰è‡ªå·±å°±å»ºä¸€ä¸ª</span><br><span class="line"># ç”Ÿæˆå…¬é’¥,è¿‡åä¼šåœ¨.sshä¸­ç”Ÿæˆä¸€ä¸ª id_rsa ä»¥åŠ id_rsa.pub  åˆ†åˆ«ä¸ºç§äººç§˜é’¥å’Œå…¬å¼€ç§˜é’¥ ï¼Œå…¬å¼€ç§˜é’¥å¯ä»¥è§£å¯†ä¸ºç§é’¥</span><br><span class="line">#æˆ‘ä»¬è¿‡åé…ç½®æ‰˜ç®¡ä»“åº“ä¼šç”¨åˆ° å…¬é’¥</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;è‡³æ­¤å®‰è£…å’Œç›¸å…³é…ç½®å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥ä¼šä»‹ç»Linuxçš„å¸¸ç”¨å‘½ä»¤</p>
<h1 id="âœ¨å¸¸ç”¨Linuxå‘½ä»¤"><a href="#âœ¨å¸¸ç”¨Linuxå‘½ä»¤" class="headerlink" title="âœ¨å¸¸ç”¨Linuxå‘½ä»¤"></a>âœ¨å¸¸ç”¨Linuxå‘½ä»¤</h1><p>å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1ï¼‰ã€cd : æ”¹å˜ç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰ã€cd . . å›é€€åˆ°ä¸Šä¸€ä¸ªç›®å½•ï¼Œç›´æ¥cdè¿›å…¥é»˜è®¤ç›®å½•</span><br><span class="line"></span><br><span class="line">3ï¼‰ã€pwd : æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰ã€ls(ll):  éƒ½æ˜¯åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¸è¿‡ll(ä¸¤ä¸ªll)åˆ—å‡ºçš„å†…å®¹æ›´ä¸ºè¯¦ç»†ã€‚</span><br><span class="line"></span><br><span class="line">5ï¼‰ã€touch : æ–°å»ºä¸€ä¸ªæ–‡ä»¶ å¦‚ touch index.js å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">6ï¼‰ã€rm:  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶, rm index.js å°±ä¼šæŠŠindex.jsæ–‡ä»¶åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line">7ï¼‰ã€mkdir:  æ–°å»ºä¸€ä¸ªç›®å½•,å°±æ˜¯æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</span><br><span class="line"></span><br><span class="line">8ï¼‰ã€rm -r :  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹, rm -r src åˆ é™¤srcç›®å½•</span><br><span class="line"></span><br><span class="line">rm -rf / åˆ‡å‹¿åœ¨Linuxä¸­å°è¯•ï¼åˆ é™¤ç”µè„‘ä¸­å…¨éƒ¨æ–‡ä»¶ï¼</span><br><span class="line"></span><br><span class="line">9ï¼‰ã€mv ç§»åŠ¨æ–‡ä»¶, mv index.html src index.html æ˜¯æˆ‘ä»¬è¦ç§»åŠ¨çš„æ–‡ä»¶, src æ˜¯ç›®æ ‡æ–‡ä»¶å¤¹,å½“ç„¶, è¿™æ ·å†™,å¿…é¡»ä¿è¯æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶å¤¹åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">10ï¼‰ã€reset é‡æ–°åˆå§‹åŒ–ç»ˆç«¯/æ¸…å±ã€‚</span><br><span class="line"></span><br><span class="line">11ï¼‰ã€clear æ¸…å±ã€‚</span><br><span class="line"></span><br><span class="line">12ï¼‰ã€history æŸ¥çœ‹å‘½ä»¤å†å²ã€‚</span><br><span class="line"></span><br><span class="line">13ï¼‰ã€help å¸®åŠ©ã€‚</span><br><span class="line"></span><br><span class="line">14ï¼‰ã€exit é€€å‡ºã€‚</span><br><span class="line"></span><br><span class="line">15ï¼‰ã€#è¡¨ç¤ºæ³¨é‡Š</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸ„Gitçš„å·¥ä½œæµç¨‹"><a href="#ğŸ„Gitçš„å·¥ä½œæµç¨‹" class="headerlink" title="ğŸ„Gitçš„å·¥ä½œæµç¨‹"></a>ğŸ„Gitçš„å·¥ä½œæµç¨‹</h1><p>ä¸‹é¢å°†ç»™å‡ºGitçš„å·¥ä½œæµç¨‹å›¾ï¼š</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/git-process.png" alt="å·¥ä½œæµç¨‹"></p>
<p>æ¥ä¸‹æ¥ç†è§£ä¸‹ Git å·¥ä½œåŒºã€æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“æ¦‚å¿µï¼š</p>
<ul>
<li><strong>å·¥ä½œåŒºï¼š</strong>å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚</li>
<li><strong>æš‚å­˜åŒºï¼š</strong>è‹±æ–‡å« stage æˆ– indexã€‚ä¸€èˆ¬å­˜æ”¾åœ¨ <strong>.git</strong> ç›®å½•ä¸‹çš„ index æ–‡ä»¶ï¼ˆ.git/indexï¼‰ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæš‚å­˜åŒºæœ‰æ—¶ä¹Ÿå«ä½œç´¢å¼•ï¼ˆindexï¼‰ã€‚</li>
<li><strong>ç‰ˆæœ¬åº“ï¼š</strong>å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½• <strong>.git</strong>ï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯ Git çš„ç‰ˆæœ¬åº“ã€‚</li>
</ul>
<p>ä¸‹é¢è¿™ä¸ªå›¾å±•ç¤ºäº†å·¥ä½œåŒºã€ç‰ˆæœ¬åº“ä¸­çš„æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/1352126739_7909.jpg" alt="img"></p>
<ul>
<li>å›¾ä¸­å·¦ä¾§ä¸ºå·¥ä½œåŒºï¼Œå³ä¾§ä¸ºç‰ˆæœ¬åº“ã€‚åœ¨ç‰ˆæœ¬åº“ä¸­æ ‡è®°ä¸º â€œindexâ€ çš„åŒºåŸŸæ˜¯æš‚å­˜åŒºï¼ˆstage/indexï¼‰ï¼Œæ ‡è®°ä¸º â€œmasterâ€ çš„æ˜¯ master åˆ†æ”¯æ‰€ä»£è¡¨çš„ç›®å½•æ ‘ã€‚</li>
<li>å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ­¤æ—¶ â€œHEADâ€ å®é™…æ˜¯æŒ‡å‘ master åˆ†æ”¯çš„ä¸€ä¸ªâ€æ¸¸æ ‡â€ã€‚æ‰€ä»¥å›¾ç¤ºçš„å‘½ä»¤ä¸­å‡ºç° HEAD çš„åœ°æ–¹å¯ä»¥ç”¨ master æ¥æ›¿æ¢ã€‚</li>
<li>å›¾ä¸­çš„ objects æ ‡è¯†çš„åŒºåŸŸä¸º Git çš„å¯¹è±¡åº“ï¼Œå®é™…ä½äº â€œ.git/objectsâ€ ç›®å½•ä¸‹ï¼Œé‡Œé¢åŒ…å«äº†åˆ›å»ºçš„å„ç§å¯¹è±¡åŠå†…å®¹ã€‚</li>
<li>å½“å¯¹å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶æ‰§è¡Œ <strong>git add</strong> å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘è¢«æ›´æ–°ï¼ŒåŒæ—¶å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶å†…å®¹è¢«å†™å…¥åˆ°å¯¹è±¡åº“ä¸­çš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­ï¼Œè€Œè¯¥å¯¹è±¡çš„IDè¢«è®°å½•åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶ç´¢å¼•ä¸­ã€‚</li>
<li>å½“æ‰§è¡Œæäº¤æ“ä½œï¼ˆgit commitï¼‰æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘å†™åˆ°ç‰ˆæœ¬åº“ï¼ˆå¯¹è±¡åº“ï¼‰ä¸­ï¼Œmaster åˆ†æ”¯ä¼šåšç›¸åº”çš„æ›´æ–°ã€‚å³ master æŒ‡å‘çš„ç›®å½•æ ‘å°±æ˜¯æäº¤æ—¶æš‚å­˜åŒºçš„ç›®å½•æ ‘ã€‚</li>
</ul>
<p><strong>ä¸»è¦æµç¨‹</strong>ï¼š</p>
<p>&emsp;&emsp;1<code>.git</code> åŒæ–‡ä»¶å·¥ä½œåŒºåœ¨ <code>Git Bash</code> ä¸­  é€šè¿‡ <code>git add (.gitç›®å½•ä¸‹æ–‡ä»¶å/. )</code> å‘æš‚å­˜åŒºä¸­æ·»åŠ æ–‡ä»¶</p>
<p>&emsp;&emsp;2. å†é€šè¿‡ <code>git commit -m &quot;å¤‡æ³¨ä¿¡æ¯(å¿…é¡»å†™)&quot;</code>å°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­</p>
<p>&emsp;&emsp;3. å¦‚æœæœ‰é…ç½®è¿œç¨‹çš„ä»“åº“ï¼Œåˆ™éœ€è¦æœ€åé€šè¿‡ <code>git push -u origin åˆ†æ”¯å</code> è¿›è¡Œè¿œç¨‹å’Œæœ¬åœ°çš„ä»£ç åŒæ­¥</p>
<h1 id="ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“"><a href="#ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“"></a>ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“</h1><p>&emsp;&emsp;ç°åœ¨ç»ˆäºè¦ç”¨åˆ°é‚£ä¸ªç§˜é’¥äº†ï¼š</p>
<blockquote>
<p>ç”Ÿæˆå…¬é’¥,è¿‡åä¼šåœ¨.sshä¸­ç”Ÿæˆä¸€ä¸ª id_rsa ä»¥åŠ id_rsa.pub  åˆ†åˆ«ä¸ºç§äººç§˜é’¥å’Œå…¬å¼€ç§˜é’¥ ï¼Œå…¬å¼€ç§˜é’¥å¯ä»¥è§£å¯†ä¸ºç§é’¥</p>
</blockquote>
<p>&emsp;&emsp;<strong>1. é¦–å…ˆåœ¨Giteeä¸Šåˆ›å»ºè‡ªå·±ä»“åº“ï¼Œé€‰æ‹©è¯­è¨€ä»¥åŠåˆå§‹åŒ–æ¡ä»¶ï¼Œæ¨èé€‰æ‹©READMEï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œç ”ç©¶</strong></p>
<p>&emsp;&emsp;<strong>2. å¤åˆ¶<code>id_rsa.pub</code> ä¸­çš„å†…å®¹ï¼Œç„¶ååœ¨Giteeä¸­ï¼šè®¾ç½® â€”&gt; SSHå…¬é’¥ â€”&gt; æ·»åŠ å…¬é’¥ â€”&gt;ç²˜è´´ (æ ‡é¢˜è‡ªå¡«) â€”&gt; ä¿å­˜</strong></p>
<p>æ€»çš„æ¥è¯´è¿œç¨‹ä»“åº“å·²ç»æ­å»ºå®Œæ¯•ï¼Œç°åœ¨å°±éœ€è¦è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå°†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿›è¡Œè¿æ¥.</p>
<p><strong>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</strong></p>
<p>&emsp;&emsp;åˆå§‹åŒ–çš„æ–¹å¼åˆ†ä¸º2ç§ï¼Œä¸€ç§ä¸ºæœ¬åœ°åœ¨ <code>Git Bash</code> ä¸­ä½¿ç”¨ <code>git init</code> è¿›è¡Œåˆå§‹åŒ–ï¼›</p>
<p>&emsp;&emsp;ç¬¬äºŒç§æ–¹å¼ä¸ºåœ¨ <code>Git Bash</code> ä¸­å¯¹è¿œç¨‹ä»“åº“è¿›è¡Œå…‹éš† ï¼Œå‘½ä»¤ä¸º <code>git clone URL(å…‹éš†/ä¸‹è½½ä¸­çš„httpsé“¾æ¥)</code></p>
<p><strong>æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å»ºç«‹è¿æ¥</strong></p>
<p>&emsp;&emsp;è¿›è¡Œå¦‚ä¸‹å‘½ä»¤å‰åˆ«å¿˜è®°äº†å¯¹æœ¬åœ°å·¥ä½œåŒºç›®å½•è¿›è¡Œ <code>add</code> ä»¥åŠ <code>commit</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$ git remote add origin SSHé“¾æ¥  //ä¸ºè¿œç¨‹Gitæ›´åä¸ºoriginï¼ŒSSHé“¾æ¥åœ¨Giteeä¸­çš„ä»“åº“é‡Œé€‰æ‹© å…‹éš†/ä¸‹è½½ å¤åˆ¶SSHé“¾æ¥å³å¯</span><br><span class="line"></span><br><span class="line">$ git pull --rebase origin master//å¦‚æœè¿œç¨‹ä»“åº“åˆå§‹åŒ–äº†readmeæ–‡ä»¶ï¼Œéœ€è¦æ‹‰ä¸‹æ¥åŒæ­¥ä»£ç </span><br><span class="line"></span><br><span class="line">$ git push -u origin master //æ¨é€æ­¤æ¬¡ä¿®æ”¹,åé¢å†æ¬¡æäº¤å°±å¯ä»¥ç›´æ¥git push </span><br></pre></td></tr></table></figure>

<hr>
<p><strong>æ³¨æ„ï¼šå¦‚è‹¥åœ¨æ–°çš„æœ¬åœ°ä»“åº“ä¸­æäº¤æ–°æ–‡ä»¶ï¼Œéœ€è¦å°†è¿œç¨‹ä»“åº“çš„ä»£ç   <code>git pull --rebase origin master</code>  æ‹‰ä¸‹æ¥ç„¶åå†è¿›è¡Œ <code>push</code> å³å¯ ï¼Œ ä¸ç„¶ä¼šæŠ¥é”™ï¼Œè‡³äºåŸå› ï¼Œå‡è®¾æœ¬åœ°ä»“åº“åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿œç¨‹ä»“åº“æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå¦‚æœç›´æ¥æäº¤ï¼Œæ€»ä¸èƒ½æ‹¿ä¸€ä¸ªæ–‡ä»¶ç›´æ¥è¦†ç›–æ‰è¿œç¨‹ä»“åº“çš„æ‰€æœ‰æ–‡ä»¶å§ï¼Œä¼šé€ æˆæ–‡ä»¶ç¼ºå¤±ï¼Œè¿™ä¸ªæœºåˆ¶è¿˜æ˜¯éå¸¸äººæ€§åŒ–çš„å“ˆ.</strong></p>
<h1 id="âš½IDEä¸­é›†æˆGit"><a href="#âš½IDEä¸­é›†æˆGit" class="headerlink" title="âš½IDEä¸­é›†æˆGit"></a>âš½IDEä¸­é›†æˆGit</h1><p>&emsp;&emsp;æˆ‘åªåœ¨ <code>Jetbrains</code> å®¶ä¸­çš„ <code>IDE</code> è¿›è¡Œäº†æµ‹è¯•ï¼Œæ‰€ä»¥å°±ç”¨å…¶ä¸­çš„ <code>idea</code> æ¥ä¸¾ä¾‹è¯´æ˜ï¼Œ åªéœ€è¦å°†ä½ åˆå§‹åŒ–æœ¬åœ°ä»“åº“åˆ›å»ºçš„ <code>.git</code> æ–‡ä»¶å¤åˆ¶åˆ°è¯¥å·¥ç¨‹ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³å¯</p>
<img src="/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/1.png" class title="ç¤ºä¾‹1">



<p>&emsp;&emsp;æˆ–è€…ç›´æ¥åœ¨è¯¥è·¯å¾„ä¸‹ï¼Œåœ¨ <code>Git Bash</code> ä¸­è¾“å…¥å‘½ä»¤ <code>git init</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥äº§ç”Ÿ <code>.git</code> æ–‡ä»¶ ï¼Œ è¿‡åå°±å¯ä»¥åœ¨  <code>idea</code> ä¸­çš„ç»ˆç«¯è¾“å…¥å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œå°±è·Ÿåœ¨ <code>Git Bash</code> ä¸­çš„æ“ä½œä¸€æ ·</p>
<img src="/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/2.png" class title="ç¤ºä¾‹2">



<p>å¦‚ä¸Šå›¾ï¼Œè¿™æ˜¯IDEä¸­ç»ˆç«¯çš„æ‰“å¼€æ–¹å¼~~</p>
<h1 id="å¾…åç»­æ›´æ–°-Gitä¸­çš„åˆ†æ”¯æ“ä½œ-ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·"><a href="#å¾…åç»­æ›´æ–°-Gitä¸­çš„åˆ†æ”¯æ“ä½œ-ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·" class="headerlink" title="å¾…åç»­æ›´æ–° Gitä¸­çš„åˆ†æ”¯æ“ä½œ ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·"></a>å¾…åç»­æ›´æ–° Gitä¸­çš„åˆ†æ”¯æ“ä½œ ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·</h1>]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å…¬ä¼—å·åç«¯å¼€å‘(ä¸€):access_tokenä»¥åŠOpenID</title>
    <url>/2021/05/24/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‘åŸºæœ¬æ¦‚å¿µ"><a href="#ğŸ‘åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ğŸ‘åŸºæœ¬æ¦‚å¿µ"></a>ğŸ‘åŸºæœ¬æ¦‚å¿µ</h1><p>â€‹    </p>
<p><strong><code>access_token</code></strong></p>
<p>â€‹        <code>access_token</code>æ˜¯å…¬ä¼—å·çš„å…¨å±€å”¯ä¸€æ¥å£è°ƒç”¨å‡­æ®ï¼Œå…¬ä¼—å·è°ƒç”¨å„æ¥å£æ—¶éƒ½éœ€ä½¿ç”¨<code>access_token</code>ã€‚å¼€å‘è€…éœ€è¦è¿›è¡Œå¦¥å–„ä¿å­˜ã€‚<code>access_token</code>çš„å­˜å‚¨è‡³å°‘è¦ä¿ç•™512ä¸ªå­—ç¬¦ç©ºé—´ã€‚<code>access_token</code>çš„æœ‰æ•ˆæœŸç›®å‰ä¸º2ä¸ªå°æ—¶ï¼Œéœ€å®šæ—¶åˆ·æ–°ï¼Œé‡å¤è·å–å°†å¯¼è‡´ä¸Šæ¬¡è·å–çš„<code>access_token</code>å¤±æ•ˆã€‚</p>
<p><strong><code>OpenID</code></strong></p>
<p>â€‹        ä¸ºäº†è¯†åˆ«ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·é’ˆå¯¹æ¯ä¸ªå…¬ä¼—å·ä¼šäº§ç”Ÿä¸€ä¸ªå®‰å…¨çš„<code>OpenID</code>ï¼Œå¦‚æœéœ€è¦åœ¨å¤šå…¬ä¼—å·ã€ç§»åŠ¨åº”ç”¨ä¹‹é—´åšç”¨æˆ·å…±é€šï¼Œåˆ™éœ€å‰å¾€å¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œå°†è¿™äº›å…¬ä¼—å·å’Œåº”ç”¨ç»‘å®šåˆ°ä¸€ä¸ªå¼€æ”¾å¹³å°è´¦å·ä¸‹ï¼Œç»‘å®šåï¼Œä¸€ä¸ªç”¨æˆ·è™½ç„¶å¯¹å¤šä¸ªå…¬ä¼—å·å’Œåº”ç”¨æœ‰å¤šä¸ªä¸åŒçš„<code>OpenID</code>ï¼Œä½†ä»–å¯¹æ‰€æœ‰è¿™äº›åŒä¸€å¼€æ”¾å¹³å°è´¦å·ä¸‹çš„å…¬ä¼—å·å’Œåº”ç”¨ï¼Œåªæœ‰ä¸€ä¸ª<code>UnionID</code>ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç®¡ç†-è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆ<code>UnionID</code>æœºåˆ¶ï¼‰æ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚</p>
<h1 id="âœ¨è·å–access-token"><a href="#âœ¨è·å–access-token" class="headerlink" title="âœ¨è·å–access_token"></a>âœ¨è·å–access_token</h1><p><strong>æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜</strong></p>
<blockquote>
<p>httpsè¯·æ±‚æ–¹å¼: GET</p>
<p> <code>https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&#123;&#123;appid&#125;&#125;&amp;secret=&#123;&#123;appsecret&#125;&#125;</code></p>
</blockquote>
<p><strong>å‚æ•°è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…é¡»</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">grant_type</td>
<td align="left">æ˜¯</td>
<td align="left">è·å–access_tokenå¡«å†™client_credential</td>
</tr>
<tr>
<td align="left">appid</td>
<td align="left">æ˜¯</td>
<td align="left">ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯</td>
</tr>
<tr>
<td align="left">secret</td>
<td align="left">æ˜¯</td>
<td align="left">ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯å¯†é’¥ï¼Œå³appsecret</td>
</tr>
</tbody></table>
<p><strong>è¿”å›è¯´æ˜</strong></p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¾®ä¿¡ä¼šè¿”å›ä¸‹è¿°JSONæ•°æ®åŒ…ç»™å…¬ä¼—å·ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;access_token&quot;</span>:<span class="string">&quot;ACCESS_TOKEN&quot;</span>,<span class="attr">&quot;expires_in&quot;</span>:<span class="number">7200</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">access_token</td>
<td align="left">è·å–åˆ°çš„å‡­è¯</td>
</tr>
<tr>
<td align="left">expires_in</td>
<td align="left">å‡­è¯æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ï¼šç§’</td>
</tr>
</tbody></table>
<p>é”™è¯¯æ—¶å¾®ä¿¡ä¼šè¿”å›é”™è¯¯ç ç­‰ä¿¡æ¯ï¼ŒJSONæ•°æ®åŒ…ç¤ºä¾‹å¦‚ä¸‹ï¼ˆè¯¥ç¤ºä¾‹ä¸ºAppIDæ— æ•ˆé”™è¯¯ï¼‰:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;errcode&quot;</span>:<span class="number">40013</span>,<span class="attr">&quot;errmsg&quot;</span>:<span class="string">&quot;invalid appid&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿”å›ç è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">è¿”å›ç </th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-1</td>
<td align="left">ç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶è¯·å¼€å‘è€…ç¨å€™å†è¯•</td>
</tr>
<tr>
<td align="left">0</td>
<td align="left">è¯·æ±‚æˆåŠŸ</td>
</tr>
<tr>
<td align="left">40001</td>
<td align="left">AppSecreté”™è¯¯æˆ–è€…AppSecretä¸å±äºè¿™ä¸ªå…¬ä¼—å·ï¼Œè¯·å¼€å‘è€…ç¡®è®¤AppSecretçš„æ­£ç¡®æ€§</td>
</tr>
<tr>
<td align="left">40002</td>
<td align="left">è¯·ç¡®ä¿grant_typeå­—æ®µå€¼ä¸ºclient_credential</td>
</tr>
<tr>
<td align="left">40164</td>
<td align="left">è°ƒç”¨æ¥å£çš„IPåœ°å€ä¸åœ¨ç™½åå•ä¸­ï¼Œè¯·åœ¨æ¥å£IPç™½åå•ä¸­è¿›è¡Œè®¾ç½®ã€‚ï¼ˆå°ç¨‹åºåŠå°æ¸¸æˆè°ƒç”¨ä¸è¦æ±‚IPåœ°å€åœ¨ç™½åå•å†…ã€‚ï¼‰</td>
</tr>
<tr>
<td align="left">89503</td>
<td align="left">æ­¤IPè°ƒç”¨éœ€è¦ç®¡ç†å‘˜ç¡®è®¤,è¯·è”ç³»ç®¡ç†å‘˜</td>
</tr>
<tr>
<td align="left">89501</td>
<td align="left">æ­¤IPæ­£åœ¨ç­‰å¾…ç®¡ç†å‘˜ç¡®è®¤,è¯·è”ç³»ç®¡ç†å‘˜</td>
</tr>
<tr>
<td align="left">89506</td>
<td align="left">24å°æ—¶å†…è¯¥IPè¢«ç®¡ç†å‘˜æ‹’ç»è°ƒç”¨ä¸¤æ¬¡ï¼Œ24å°æ—¶å†…ä¸å¯å†ä½¿ç”¨è¯¥IPè°ƒç”¨</td>
</tr>
<tr>
<td align="left">89507</td>
<td align="left">1å°æ—¶å†…è¯¥IPè¢«ç®¡ç†å‘˜æ‹’ç»è°ƒç”¨ä¸€æ¬¡ï¼Œ1å°æ—¶å†…ä¸å¯å†ä½¿ç”¨è¯¥IPè°ƒç”¨</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡å…¬ä¼—å·</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¸€):å¿«é€Ÿæ’åº</title>
    <url>/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš¡å¿«é€Ÿæ’åº"><a href="#ğŸš¡å¿«é€Ÿæ’åº" class="headerlink" title="ğŸš¡å¿«é€Ÿæ’åº"></a>ğŸš¡å¿«é€Ÿæ’åº</h1><blockquote>
<p>â€‹        å¿«é€Ÿæ’åºç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯:é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥<a href="https://baike.so.com/doc/5725016-5937752.html">é€’å½’</a>è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚</p>
</blockquote>
<p>å¿«é€Ÿæ’åºç®€ç§°å¿«æ’ï¼Œæ˜¯åŸºæœ¬çš„æ’åºæ–¹æ³•ä¹‹ä¸€ï¼Œå¿«æ’åœ¨æœ€å¥½çš„æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(nlogn)</code> ï¼Œæœ€åçš„æƒ…å†µä¸‹ä¸º O(n<sup>2</sup>)ï¼Œæ€»ä½“æ¥è¯´è¿˜ç®—å¯ä»¥äº†ï¼Œæœ‰ä¸€è¯´ä¸€.</p>
<h2 id="æ€è·¯è§£æ"><a href="#æ€è·¯è§£æ" class="headerlink" title="æ€è·¯è§£æ"></a>æ€è·¯è§£æ</h2><p>å¿«é€Ÿæ’åºå±äºå…¸å‹çš„<code>åˆ†æ²»+é€’å½’</code>å®ç°çš„ç®—æ³•ï¼Œæ‰€è°“åˆ†æ²»ï¼Œå°±æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œç„¶åå¯¹æ¯ä¸€å—è¿›è¡ŒåŒæ ·çš„æ“ä½œå¤„ç†ä»è€Œè¾¾åˆ°æ’åºçš„æ•ˆæœ.å…·ä½“åˆ†æå°±æ˜¯ï¼Œæˆ‘ä»¬<font color="red">é€‰å®šä¸€ä¸ªåŸºå‡†å€¼ï¼Œç„¶åå°†ä¸€ä¸ªæ•°ç»„é€šè¿‡æŸäº›æ“ä½œåˆ’åˆ†ä¸ºä¿©ä¸ªåŒºé—´ï¼ˆåˆ†æ²»ï¼‰ï¼ŒåŒºé—´çš„å€¼<code>&gt;=</code>åŸºå‡†å€¼ ï¼Œ ä¸€ä¸ªåŒºé—´çš„å€¼ <code>&lt;=</code> åŸºå‡†å€¼ ï¼Œä¹Ÿå°±æ˜¯å°†æ¯”åŸºå‡†å€¼å°çš„å€¼æ”¾åˆ°å…¶å·¦è¾¹ï¼Œå¤§çš„å€¼æ”¾åˆ°å…¶å³è¾¹ï¼Œ è¿™æ ·å†åˆ†åˆ«å¯¹è¿™ä¿©ä¸ªå°åŒºé—´è¿›è¡ŒåŒæ ·çš„æ“ä½œ(é€’å½’)ï¼Œæœ€ç»ˆå°†æ•°ç»„æ’æˆæœ‰åºçš„.</font></p>
<h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>é¢˜ç›®æ¥æºäºï¼šAcwing</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="comment">//ç”¨äºæ¥æ”¶éœ€è¦æ’åºçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> s[])</span></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœåŒºé—´ä¸­åªæœ‰ä¸€ä¸ªå€¼æˆ–è€…æ²¡æœ‰å€¼ï¼Œåˆ™é€’å½’ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// å–ä¸­é—´ç‚¹ä¸ºåŸºå‡†å€¼</span></span><br><span class="line">    <span class="keyword">int</span> x = s[(l+r) &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="comment">//ä¸ºäº†é…åˆä¸‹æ–¹å¾ªç¯çš„å½¢å¼ï¼Œæ•…åšäº†ä¸€å®šåæ ‡çš„åç§»</span></span><br><span class="line">    <span class="keyword">int</span> i = l<span class="number">-1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å½“å·¦ç«¯ç‚¹ å°äº å³ç«¯ç‚¹çš„æ—¶å€™ç»§ç»­å¾ªç¯</span></span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">        <span class="comment">//å½“å€¼å°äºåŸºå‡†å€¼çš„æ—¶å€™ä¸€ç›´å‘å³ç«¯ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(s[i] &lt; x);</span><br><span class="line">        <span class="comment">//å½“å€¼å¤§äºåŸºå‡†å€¼çš„æ—¶å€™ä¸€ç›´å‘å·¦ç«¯ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(s[j] &gt; x);</span><br><span class="line">        <span class="comment">//å¦‚æœ i å°äº j åˆ™äº¤æ¢è¿™ä¸¤å¤„çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(i &lt; j) <span class="built_in">swap</span>(s[i],s[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«å¯¹åŸºå‡†å€¼å·¦å³ä¿©ä¸ªåŒºé—´è¿›è¡Œåˆ†åˆ«æ’åº</span></span><br><span class="line">    <span class="built_in">quick_sort</span>(l , j , s),<span class="built_in">quick_sort</span>(j+<span class="number">1</span> , r , s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m ; i++)&#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¼ å…¥åˆå§‹åæ ‡,æœ«å°¾åæ ‡,éœ€è¦æ’åºçš„æ•°ç»„</span></span><br><span class="line">    <span class="built_in">quick_sort</span>(<span class="number">0</span> , m<span class="number">-1</span> , a);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m ; i++)&#123;</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ul>
<li><strong>ä½¿ç”¨Scannerè¯»å…¥</strong>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//Javaæ²¡æœ‰è‡ªå¸¦çš„äº¤æ¢å‡½æ•°,åŒæ—¶æƒ³è¦é«˜äº¤æ¢æ•ˆç‡</span></span><br><span class="line">    <span class="comment">//åœ¨åˆ«äººçš„åšå®¢ä¸­å­¦åˆ°äº†è¿™ä¸€ç§é«˜æ•ˆç‡çš„äº¤æ¢æ–¹å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        nums[j] ^= nums[i];</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> q[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt;= r ) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> x = q[l+r&gt;&gt;<span class="number">1</span>],i = l-<span class="number">1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i] &lt; x);</span><br><span class="line">            <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j] &gt; x);</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) swap(q,i,j);</span><br><span class="line">        &#125;</span><br><span class="line">        quick_sort(l , j , q);</span><br><span class="line">        quick_sort(j+<span class="number">1</span> , r , q);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        <span class="keyword">int</span> [] a = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; n ; j++) a[j] = sc.nextInt() ;</span><br><span class="line">        </span><br><span class="line">        quick_sort(<span class="number">0</span>,n-<span class="number">1</span>,a);</span><br><span class="line">        </span><br><span class="line">      	<span class="keyword">for</span>(<span class="keyword">int</span> i : a) System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ä½¿ç”¨BufferReadè¿›è¡Œè¯»å…¥</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] swap(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j) &#123;</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        nums[j] ^= nums[i];</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> q[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt;= r ) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> x = q[l+r&gt;&gt;<span class="number">1</span>],i = l-<span class="number">1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i] &lt; x);</span><br><span class="line">            <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j] &gt; x);</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) swap(q,i,j);</span><br><span class="line">        &#125;</span><br><span class="line">        quick_sort(l , j , q);</span><br><span class="line">        quick_sort(j+<span class="number">1</span> , r , q);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="keyword">int</span> n = Integer.parseInt(reader.readLine());</span><br><span class="line">        <span class="keyword">int</span> [] a = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        String [] str = reader.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; str.length ; j++) a[j] = Integer.parseInt(str[j]);</span><br><span class="line">        </span><br><span class="line">        quick_sort(<span class="number">0</span>,n-<span class="number">1</span>,a);</span><br><span class="line">        </span><br><span class="line">       	<span class="keyword">for</span>(<span class="keyword">int</span> i : a) System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        reader.close();</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ³¨æ„ï¼šä¿©ç§ä¸åŒçš„æ–¹å¼è¯»å…¥å·®è·è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ¨èä½¿ç”¨<code>BufferedReader</code>è¯»å…¥</p>
<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="æ¯”è¾ƒ">



<h2 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h2><img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/6.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/7.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/8.png" class title="å›¾è§£">



<p><strong>æœ‰ä¸€è¯´ä¸€</strong>ï¼šç”»å›¾çœŸçš„å¥½ç´¯ï¼Œè¦ä¸æ˜¯æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„å›¾è§£ï¼Œä¹Ÿä¸è‡³äºè‡ªå·±ç”»ï¼Œ2333.</p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¸ƒ):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%83%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%83%EF%BC%89/1.png" class>

<p>åŸé¢˜è¿æ¥: <a href="https://leetcode-cn.com/problems/house-robber/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>çœ‹åˆ°è¿™é¢˜ï¼Œå¾ˆæ˜æ˜¾èƒ½æ„Ÿè§‰åˆ°è¦ç”¨åŠ¨æ€è§„åˆ’ï¼Œå®é™…ä¸Šï¼Œæ‹¿è‰ç¨¿çº¸è¯•äº†ä¸€è¯•èƒ½å†™å‡ºé€’æ¨ï¼Œæœç„¶å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’ï¼Œå½“ç„¶äº†æˆ‘ä»¬éœ€è¦å…ˆç¡®å®šçŠ¶æ€æ–¹ç¨‹çš„å«ä¹‰ï¼Œ<code>dp[i] </code> è¡¨ç¤ºå‰<code>i</code> é—´æˆ¿å­èƒ½å·çš„æœ€å¤§é‡‘é¢(è¿™ä¸€ç‚¹ä¹Ÿéœ€è¦æƒ³æ¸…æ¥šï¼Œè¿™æ˜¯å› ä¸ºæœ¬è´¨ä¸Šï¼Œæœ€å¤§é‡‘é¢æ˜¯ç”±å±€éƒ¨æœ€å¤§å åŠ å¯¼è‡´çš„ï¼Œå³ä¿è¯å‰é¢èƒ½å–åˆ°æœ€å¤§ï¼Œç›¸åº”çš„åé¢çš„ä¹Ÿå–æœ€å¤§å°±èƒ½ä¿è¯è¿™ä¸€æ®µåŒºé—´å†…å–åˆ°æœ€å¤§ï¼Œå³dp[i] çš„å€¼å–å†³äº dp[i-1] ï¼Œdp[i-2]ç­‰ç­‰çš„å€¼çš„å¤§å°)ï¼Œè¿™é‡Œç²˜ä¸Šå¤§ä½¬ç”»çš„å›¾(ç™½å«–æ€ªç‹‚å–œ)</p>
<img src="/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%83%EF%BC%89/2.png" class>

<p>æˆ‘ä»¬å¯ä»¥ä»åªæœ‰ 1 é—´æˆ¿å­ å’Œ åªæœ‰ 2 é—´æˆ¿å­ç„¶åå†åªè¦ 3 é—´æˆ¿å­ä¹ƒè‡³ 4ã€5Â·Â·Â·Â·ä¾æ¬¡æ‰‹åŠ¨è®¡ç®—ä¸€ä¸‹ï¼Œç„¶åå¯ä»¥æ…¢æ…¢çš„å†™å‡ºè¡¨è¾¾å¼ï¼Œå†™çš„è¡¨è¾¾å¼è¦å…·æœ‰æ™®éæ€§ï¼Œçº¯ç†è®ºåˆ†æçš„è¯å°±å¦‚ä¸‹å›¾è¿™èˆ¬ï¼ŒåŠ¨æ€è§„åˆ’é—®é¢˜æœ¬è´¨ä¸Šå°±æ˜¯èƒ½å°†é—®é¢˜æŠ½è±¡æˆé€’æ¨å…³ç³»ï¼Œå¦‚ä½•æ‰¾å‡ºé€’æ¨å…³ç³»å°±æ˜¯åŠ¨æ€è§„åˆ’çš„éš¾ç‚¹.</p>
<img src="/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%83%EF%BC%89/3.png" class>



<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (nums.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> size = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">//åªæœ‰ä¸€é—´çš„æ—¶å€™</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å®šä¹‰vectoræ•°ç»„</span></span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; dp = vector&lt;<span class="keyword">int</span>&gt;(size, <span class="number">0</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="built_in">max</span>(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="comment">//é€’æ¨è¡¨è¾¾å¼</span></span><br><span class="line">            dp[i] = <span class="built_in">max</span>(dp[i - <span class="number">2</span>] + nums[i], dp[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[size - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> [] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">5</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = Math.max(nums[<span class="number">0</span>],nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span> ; i &lt; n ; i++)&#123;</span><br><span class="line">          dp[i] = Math.max(dp[i-<span class="number">2</span>]+nums[i],dp[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><p>ååˆ†æƒ³åæ§½ä¸€ä¸‹<code>Go</code>çš„<code>Api</code> , æ•°å­¦ç±»çš„<code>api</code>å½¢å‚ç±»å‹ä¹Ÿå¤ªå±€é™äº†ï¼Œè¿˜ä¸æ”¯æŒ ä¸‰ç›®è¡¨è¾¾å¼ï¼Œç¡®å®å¾ˆæœ‰æ•ˆçš„ç»Ÿä¸€äº†ç¼–ç é£æ ¼hhh</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rob</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    dp := <span class="built_in">make</span>([]<span class="keyword">int</span> , n+<span class="number">5</span>)</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">1</span>] = max(nums[<span class="number">0</span>] , nums[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">2</span> ; i &lt; n ; i++ &#123;</span><br><span class="line">        dp[i] = max(dp[i<span class="number">-2</span>]+nums[i],dp[i<span class="number">-1</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n<span class="number">-1</span>];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x , y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¸‰):åŒæŒ‡é’ˆç®—æ³•</title>
    <url>/2021/06/15/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš åŒæŒ‡é’ˆç®—æ³•"><a href="#ğŸš åŒæŒ‡é’ˆç®—æ³•" class="headerlink" title="ğŸš åŒæŒ‡é’ˆç®—æ³•"></a>ğŸš åŒæŒ‡é’ˆç®—æ³•</h1><p>èŒƒå¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i ++ )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; i &amp;&amp; <span class="built_in">check</span>(i, j)) j ++ ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…·ä½“é—®é¢˜çš„é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><img src="/2021/06/15/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%89%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://www.acwing.com/problem/content/801/">æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—</a></p>
<h2 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h2><p>åˆ©ç”¨åŒæŒ‡é’ˆï¼Œå½¢æˆæ•°çš„è¿ç»­åŒºé—´ï¼ŒæŒ‡é’ˆ<code>j</code>ä½äºåŒºé—´å¤´éƒ¨ï¼Œ<code>i</code>ä½äºåŒºé—´å°¾éƒ¨ï¼Œå½“æŒ‡é’ˆ<code>i</code> ä¸æ–­å‘åéå†çš„æ—¶å€™ï¼Œå¦‚æœåŒºé—´ä¸­å­˜åœ¨ç›¸åŒçš„æ•°ï¼Œåˆ™æŒ‡é’ˆ<code>j</code>å‘å‰ç§»åŠ¨ç›´åˆ°åŒºé—´å†…æ²¡æœ‰é‡å¤çš„æ•°å­—ï¼ŒæŒ‡é’ˆ<code>j</code> æœ€è¿œç§»åŠ¨åˆ°å’ŒæŒ‡é’ˆ<code>i</code>é‡åˆçš„ä½ç½®ï¼Œé‚£ä¹ˆä¸é‡å¤çš„è¿ç»­åŒºé—´é•¿åº¦å³æŒ‡é’ˆ<code>i</code>ä¸æŒ‡é’ˆ<code>j</code>ä¹‹é—´çš„è·ç¦».</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="comment">//qæ•°ç»„ç”¨äºè®°å½•åŸæ¥çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">//sæ•°ç»„ç”¨äºè®°å½•æŒ‡é’ˆåŒºé—´å†…qæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">int</span> q[N], s[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++ ) cin &gt;&gt; q[i];</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i ++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//sæ•°ç»„å­˜å‚¨çš„æ˜¯qæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        s[q[i]] ++ ;</span><br><span class="line">        <span class="comment">//å½“æŒ‡é’ˆiåœ¨å‘å³è¿›è¡Œæ‰«æçš„æ—¶å€™å‡ºç°äº†é‡å¤çš„æ•°å­—åˆ™sæ•°ç»„ä¸­å¯¹åº”çš„å€¼å¿…ç„¶å¤§äº 1</span></span><br><span class="line">        <span class="comment">//å¦‚æœå‡ºç° åŒºé—´ å‡ºç°é‡å¤çš„æ•°å­—ï¼Œå…ˆå°†æŒ‡é’ˆjå¤„æŒ‡å‘çš„æ•°ç»„æ•°å­—å‡ºç°æ¬¡æ•° -1 (sæ•°ç»„è®°å½•çš„æ˜¯ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„æ•°å­—çš„å‡ºç°çš„æ¬¡æ•°)</span></span><br><span class="line">        <span class="comment">//å†å°†æŒ‡é’ˆ j å‘åç§»åŠ¨(å‡ºç°é‡å¤æ•°å­—å¿…ç„¶æ˜¯æŒ‡é’ˆjå¤„å’ŒæŒ‡é’ˆiå¤„çš„å€¼)</span></span><br><span class="line">        <span class="keyword">while</span> (j &lt; i &amp;&amp; s[q[i]] &gt; <span class="number">1</span>) s[q[j]]-- , j++ ;</span><br><span class="line">        <span class="comment">//è·å–åŒºé—´é•¿åº¦</span></span><br><span class="line">        res = <span class="built_in">max</span>(res, i - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N], perSum = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">static</span> BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        n = Integer.parseInt(reader.readLine());</span><br><span class="line">        String[] arrStrs = reader.readLine().split(<span class="string">&quot;\\s+&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            arr[i] = Integer.parseInt(arrStrs[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            perSum[arr[i]]++;</span><br><span class="line">            <span class="keyword">while</span>(perSum[arr[i]] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                perSum[arr[j]]--;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            count = Math.max(count, i - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        reader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¹):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/28/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B9%9D%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/28/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B9%9D%EF%BC%89/1.png" class>

<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/maximum-subarray/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p><strong>æ–¹æ¡ˆä¸€ï¼š</strong>  æš´åŠ›æ±‚è§£</p>
<p>åˆ©ç”¨åŒé‡å¾ªç¯è¿›è¡Œéå†ï¼Œæ¯”è¾ƒè®°å½•æœ€å¤§å€¼ï¼Œè¿”å›å³å¯.</p>
<p><strong>æ–¹æ¡ˆäºŒï¼š</strong>åŠ¨æ€è§„åˆ’</p>
<p>é‡‡ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œæ‹†åˆ†æˆå­é—®é¢˜ï¼Œå½“åªæœ‰ <code>[-2,-1]</code>çš„æ—¶å€™ï¼Œæ­¤æ—¶æ€»å…±æœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯<code>[-2] ã€[-1] ã€[-2,-1]</code> æˆ‘ä»¬åªéœ€è¦è¿›è¡Œå¤§å°æ¯”è¾ƒå³å¯ï¼Œæ˜¾ç„¶ <code>[-1]</code> æ›´å¤§ï¼Œä¸ºäº†å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š<code>dpæ•°ç»„</code>çš„ä½œç”¨ï¼Œä¸ºäº†å»ºç«‹é€’æ¨å…³ç³»ï¼Œæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥å°†<code>[-2,-1]</code>çš„æ•°ç»„çœ‹æˆç”± <code>[-2]</code> å•ä¸ªæ•°ç»„ï¼Œåæ¥å¢åŠ äº†<code>[-1]</code>ï¼Œé‚£ä¹ˆå¯¹äº <code>-2</code> å•æ•°ç»„è€Œè¨€å…¶æœ€å¤§å’Œä¸º <code>-2</code> ï¼Œä¸å¦¨è®¾<code>dp[i]</code> ä¸º æ•°ç»„ä¸­ä¸‹æ ‡<code>[0,i]</code>çš„è¿ç»­å­ä¸²çš„æœ€å¤§å’Œï¼Œäºæ˜¯å¯¹äº<code>[-2,-1]</code> è€Œè¨€ï¼Œéœ€è¦å¯¹äº <code>( -2 + -1 ) ä¸ -1</code> è¿›è¡Œæ¯”è¾ƒï¼Œ<strong>æ³¨æ„ <code>dp[i]</code>çš„å€¼æ˜¯ä¸€å®šä¸<code>åŸæ•°ç»„[i]</code>æœ‰å…³ç³»çš„ï¼Œä½†ä¸ä¸€å®šæ˜¯æœ€å¤§å’Œ</strong>ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡å»å®æ—¶è®°å½•è¿™ä¸ªæœ€å¤§å€¼ï¼Œäºæ˜¯å¾ˆå®¹æ˜“å°±å¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹.</p>
<p><code>dp[i] = max(dp[i-1]+nums[i] , nums[i])</code></p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span></span><br><span class="line"><span class="function">        <span class="keyword">int</span> vector&lt;<span class="keyword">int</span>&gt; dp </span>= vector&lt;<span class="keyword">int</span>&gt;(nums.<span class="built_in">size</span>(),<span class="number">0</span>);</span><br><span class="line">    	<span class="comment">//è®°å½•æœ€å¤§å€¼</span></span><br><span class="line">    	<span class="keyword">int</span> maxAns = nums[<span class="number">0</span>];</span><br><span class="line">    	dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.<span class="built_in">size</span>() ; i++ ) &#123;</span><br><span class="line">            dp[i]= <span class="built_in">max</span>(dp[i<span class="number">-1</span>] + nums[i], nums[i]);</span><br><span class="line">            maxAns = <span class="built_in">max</span>(maxAns, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxAns;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> [] dp = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        <span class="keyword">int</span> ans = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.length ; i++)&#123;</span><br><span class="line">            dp[i] = Math.max(dp[i-<span class="number">1</span>] + nums[i] , nums[i]);</span><br><span class="line">            ans = ans &gt;= dp[i] ? ans : dp[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxSubArray</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    dp := <span class="built_in">make</span>([]<span class="keyword">int</span> , <span class="built_in">len</span>(nums))</span><br><span class="line">    ans := nums[<span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span> ; i &lt; <span class="built_in">len</span>(nums) ; i++ &#123;</span><br><span class="line">        dp[i] = max(dp[i<span class="number">-1</span>] + nums[i] , nums[i])</span><br><span class="line">        <span class="keyword">if</span> ans &lt; dp[i] &#123;</span><br><span class="line">            ans = dp[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">( x , y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(äºŒ):åŒæŒ‡é’ˆç®—æ³•</title>
    <url>/2021/06/12/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸƒåŒæŒ‡é’ˆç®—æ³•"><a href="#ğŸƒåŒæŒ‡é’ˆç®—æ³•" class="headerlink" title="ğŸƒåŒæŒ‡é’ˆç®—æ³•"></a>ğŸƒåŒæŒ‡é’ˆç®—æ³•</h1><p>ä½•ä¸ºåŒæŒ‡é’ˆï¼Ÿå…¶å®åœ¨ç®—æ³•ä¸­æ˜¯ä¸€ç§æŠ€å·§æ€§çš„ä¸œè¥¿ï¼Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿå¹¶éå¦‚åŒ<code>Cè¯­è¨€</code> é‚£ç§æŒ‡é’ˆï¼Œåªæ˜¯ä¸€ç§æ ‡è¯†ï¼Œç”¨äºè¡¨ç¤ºçŠ¶æ€ï¼Œå¾ˆå‡‘å·§ï¼Œåœ¨ä¸Šä¸€ç¯‡æ¯æ—¥ä¸€é¢˜ä¸­çš„å¿«é€Ÿæ’åºå°±ä½¿ç”¨äº†åŒæŒ‡é’ˆç®—æ³•,ååˆ†ç»å…¸ï¼Œå¹¶ä¸”å±äºå¯¹æ’æŒ‡é’ˆï¼ˆé€šä¿—çš„è®²å°±æ˜¯ç›¸å‘æ‰«æï¼‰ï¼Œå½“ç„¶äº†ï¼Œæ—¢ç„¶æœ‰ç›¸å‘æ‰«æï¼Œä¹Ÿè‚¯å®šæœ‰åŒå‘æ‰«æï¼Œæ¯”è¾ƒå¸¸ç”¨äºå­—ç¬¦ä¸²æ¯”å¯¹ï¼Œåˆ†æ²»ä¹‹ä¸­.</p>
<p>çªç„¶æœ‰ä¸ªä¸é”™çš„æƒ³æ³•ï¼Œæ¯æ—¥ä¸€é¢˜è¿ç»­æ›´æ–°åŒä¸€ç±»å‹çš„é¢˜ç›®ï¼Œè¿™æ ·æœ‰ä¾¿äºå…¨é¢æŒæ¡ä¸€ç§ç®—æ³•.</p>
<p>è¿™é‡Œé™„ä¸Šä¸Šä¸€ç¯‡æ–‡ç« çš„é“¾æ¥ä»¥ä¾›å¤ä¹ .</p>
<p><a href="https://soul-pe.gitee.io/shdsoul/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/">æ¯æ—¥ä¸€é¢˜(ä¸€):å¿«é€Ÿæ’åº</a></p>
<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><img src="/2021/06/12/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>é¢˜ç›®æ¥æºï¼šAcwingï¼š<a href="https://www.acwing.com/problem/content/description/773/">åŸé¢˜é“¾æ¥</a></p>
<h2 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h2><p>æˆ‘ä»¬åªéœ€è¦ï¼Œéå†æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸åæ–¹çš„å­—ç¬¦é€ä¸€æ¯”è¾ƒï¼Œç›¸åŒåˆ™ç»§ç»­å‘åæ¯”è¾ƒå¹¶è®°å½•è¿ç»­æ¬¡æ•°ï¼Œä¸åŒåˆ™åœæ­¢æ¯”è¾ƒï¼Œç»§ç»­å‘åæ–¹éå†å³å¯.</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//ç”¨äºæ¥æ”¶è¾“å…¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    string str;</span><br><span class="line">    <span class="comment">//ç”¨äºæ¥æ”¶è¾“å…¥çš„å­—ç¬¦ä¸²æ•°é‡</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">//å½“ n ä¸º 0 çš„æ—¶å€™åœæ­¢è¾“å…¥</span></span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        cin &gt;&gt; str;</span><br><span class="line">        <span class="comment">//å®šä¹‰æœ€å¤§é•¿åº¦ä¸º -1</span></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">-1</span>;</span><br><span class="line">        <span class="comment">//è®°å½•æœ€å¤šé‡å¤çš„å­—ç¬¦</span></span><br><span class="line">        string maxs;</span><br><span class="line">        <span class="comment">//æŒ‡é’ˆi :éå†è¾“å…¥çš„å­—ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; str.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            <span class="comment">//æŒ‡é’ˆj :ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">int</span> j = i; <span class="comment">//ç”±äºè¦æ±‚è¿ç»­,æ‰€ä»¥é»˜è®¤å¼€å§‹æ‰«æçš„åœ°æ–¹ä¸º æŒ‡é’ˆi çš„ä½ç½®,åªéœ€è¦éå†åé¢ï¼Œä¸éœ€è¦ç®¡å‰é¢</span></span><br><span class="line">            <span class="keyword">int</span> nums = <span class="number">0</span>;<span class="comment">//ç”¨äºè®°å½•è¿ç»­æ¬¡æ•°</span></span><br><span class="line">            <span class="comment">//å½“æŒ‡é’ˆjæŒ‡å‘çš„å€¼ä¸æŒ‡é’ˆiæŒ‡å‘çš„å€¼ç›¸åŒçš„æ—¶å€™,å¹¶ä¸”jæŒ‡é’ˆæ²¡æœ‰è¶Šç•Œçš„æ—¶å€™</span></span><br><span class="line">            <span class="keyword">while</span>(str[j] == str[i] &amp;&amp; j &lt; str.<span class="built_in">size</span>())</span><br><span class="line">                <span class="comment">//æŒ‡é’ˆjå‘åç§»åŠ¨,è¿ç»­æ¬¡æ•°è‡ªå¢1</span></span><br><span class="line">                j++ , nums++;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿ç»­æ¬¡æ•°å¤§äºæœ€å¤§å€¼åˆ™è¿›è¡Œè®°å½•,å¹¶ä¸”è®°å½•å½“å‰å­—ç¬¦    </span></span><br><span class="line">            <span class="keyword">if</span>(nums &gt; max)</span><br><span class="line">                max = nums,maxs = str[i];</span><br><span class="line">            <span class="comment">//å½“æŒ‡é’ˆjåœæ­¢ç§»åŠ¨æ—¶,[i,j)åŒºé—´ä¸­å¿…ç„¶å…¨æ˜¯ç›¸åŒçš„å­—ç¬¦,æ­¤æ—¶ iåªéœ€è¦ä»jçš„ä½ç½®å¼€å§‹ç»§ç»­éå†å³å¯</span></span><br><span class="line">            i = j <span class="number">-1</span>;<span class="comment">//è¿™é‡Œå‡1,æ˜¯ä¸ºäº†æŠµæ¶ˆæ‰å¾ªç¯ä¸­çš„ i++</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; nums &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; max;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="keyword">int</span> n = Integer.parseInt(reader.readLine());</span><br><span class="line">        <span class="keyword">while</span>(n-- != <span class="number">0</span>)&#123;</span><br><span class="line">            String s = reader.readLine();</span><br><span class="line">            <span class="keyword">char</span> c = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            <span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; s.length() ; i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> j = i;</span><br><span class="line">                <span class="keyword">int</span> nums = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(j &lt; s.length() &amp;&amp; s.charAt(i) == s.charAt(j))&#123; </span><br><span class="line">                    j++;</span><br><span class="line">                    nums++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(nums &gt; max)&#123;</span><br><span class="line">                    max = nums ;</span><br><span class="line">                    c = s.charAt(i);</span><br><span class="line">                &#125;</span><br><span class="line">                i = j - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(c + <span class="string">&quot; &quot;</span> + max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(å…«):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%85%AB%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/27/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%85%AB%EF%BC%89/1.png" class>

<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/delete-and-earn/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>åˆ é™¤æ•°ç»„ä¸­æ•°å€¼ä¸º<code>i</code> çš„æ•°ï¼Œé‚£ä¹ˆåˆ™éœ€è¦åŒæ—¶åˆ é™¤æ‰€æœ‰æ•°å€¼ä¸º <code>i-1</code> å’Œ <code>i+1</code> çš„å€¼ï¼Œå¹¶ä¸”åŒæ—¶è·å¾—æ‰€åˆ é™¤çš„æ•°å€¼å¤§å°çš„ç‚¹æ•°ï¼Œå¯ä»¥æ“ä½œå¤šæ¬¡ï¼Œè¿™å°±è®©äººæƒ³åˆ°æ‰“å®¶åŠ«èˆä¸­çš„ä¸€ä¸ªè®¾å®šï¼Œä¸èƒ½å·ç›¸é‚»çš„ä¿©å®¶ï¼Œè¿™ä¿©ä¸ªè®¾å®šæœ‰ç‚¹å¦‚å‡ºä¸€è¾™ï¼Œæˆ‘ä»¬ä¸å¦¨å°†åŸæ•°ç»„è¿›è¡Œå˜æ¢ï¼Œæˆ‘ä»¬å°†æ•°ç»„ä¸­çš„<code>æ•°å€¼</code>ä½œä¸ºä¸‹æ ‡ï¼Œ<code>æ•°å€¼ * å‡ºç°æ¬¡æ•°</code> ä½œä¸ºå¯¹åº”çš„å€¼ï¼Œè¿™æ ·ä»¥æ¥å°±å®Œå…¨å˜æˆäº†<code>æ‰“å®¶åŠ«èˆ</code>ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ–°çš„æ•°ç»„ä¸­å¹¶ä¸æ˜¯è¿ç»­çš„ï¼Œå­˜åœ¨æ•°å€¼ä¸º 0 çš„å€¼å­˜åœ¨ï¼Œæ­£å› ä¸ºæ˜¯ 0 æ‰€ä»¥å¹¶ä¸å½±å“è®¡ç®—ï¼ŒçŠ¶æ€è¡¨è¾¾å¼ï¼š</p>
<p><code>dp[i] = max(dp[i-2]+trans[i] , dp[i-1])</code></p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; &amp;nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> size = nums.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; dp = vector&lt;<span class="keyword">int</span>&gt;(size , <span class="number">0</span>);</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>], dp[<span class="number">1</span>] = <span class="built_in">max</span>(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; size; i++) &#123;</span><br><span class="line">            dp[i] = <span class="built_in">max</span>(dp[i<span class="number">-2</span>]+nums[i] , dp[i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[size<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteAndEarn</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; &amp;nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> maxVal = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//å–æœ€å¤§å€¼ä¾¿äºç¡®å®šæ•°ç»„é•¿åº¦,ä¹Ÿå¯ä»¥ç›´æ¥å¼€å·¨å¤§</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">            maxVal = <span class="built_in">max</span>(maxVal, val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">sum</span><span class="params">(maxVal + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="comment">//å°†åŸæ•°ç»„è¿›è¡Œè½¬æ¢</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">            sum[val] += val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åé¢è·Ÿæ‰“å®¶åŠ«èˆæ˜¯ä¸€æ ·çš„äº†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">rob</span>(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteAndEarn</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> [] trans = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10005</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; nums.length ; i++)</span><br><span class="line">            trans[nums[i]] += nums[i];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10005</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = trans[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = Math.max(trans[<span class="number">0</span>] , trans[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span> ; i &lt; dp.length ; i++)</span><br><span class="line">            dp[i] = Math.max(dp[i-<span class="number">2</span>]+trans[i],dp[i-<span class="number">1</span>]);</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> dp[dp.length-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h1><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteAndEarn</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    maxVal:=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> _,val:=<span class="keyword">range</span> nums&#123;</span><br><span class="line">        maxVal=max(maxVal,val)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// sum[v] ä»£è¡¨ åºå·ä¸ºvçš„ å’Œï¼Œä¹Ÿå°±æ˜¯numsä¸­æ‰€æœ‰çš„vçš„å’Œ</span></span><br><span class="line">    sum:=<span class="built_in">make</span>([]<span class="keyword">int</span>,maxVal+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> _,v:=<span class="keyword">range</span> nums&#123;</span><br><span class="line">        sum[v]+=v </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rob(sum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rob</span><span class="params">(nums []<span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">    <span class="comment">//dp[i] ä»£è¡¨ ç¬¬iä¸ª åˆ é™¤çš„æ—¶å€™çš„æ‰€æœ‰çš„å’Œ</span></span><br><span class="line">    dp:=<span class="built_in">make</span>([]<span class="keyword">int</span>,<span class="built_in">len</span>(nums))</span><br><span class="line">    dp[<span class="number">0</span>]=nums[<span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">1</span>]=max(dp[<span class="number">0</span>],nums[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">2</span>;i&lt;<span class="built_in">len</span>(nums);i++ &#123;</span><br><span class="line">        dp[i]=max(dp[i<span class="number">-1</span>],dp[i<span class="number">-2</span>]+nums[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="built_in">len</span>(nums)<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(a,b <span class="keyword">int</span>)</span><span class="title">int</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line">        <span class="keyword">return</span> a </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(å…­):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/25/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%85%AD%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/25/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%85%AD%EF%BC%89/1.png" class>

<p>â€‹    åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/climbing-stairs/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><h2 id="æ–¹æ¡ˆä¸€ï¼šæš´åŠ›é€’å½’"><a href="#æ–¹æ¡ˆä¸€ï¼šæš´åŠ›é€’å½’" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šæš´åŠ›é€’å½’"></a>æ–¹æ¡ˆä¸€ï¼šæš´åŠ›é€’å½’</h2><p>çœ‹åˆ°è¿™ä¸€é“é¢˜ ï¼Œæˆ‘ç›´æ¥æƒ³åˆ°äº†ä½¿ç”¨<code>DFS</code>æš´åŠ›é€’å½’ï¼Œç„¶è€Œï¼Œè¿˜æ˜¯æˆ‘å¤ªå¹´è½»äº†ï¼Œç”¨<code>Java</code>å†™ç”¨ä¾‹æµ‹åˆ° 44 çš„æ—¶å€™è¶…æ—¶äº†  ï¼Œ ç„¶è€Œæˆ‘ä»¥ä¸ºæ˜¯ <code>Java</code> æ‰§è¡Œæ•ˆç‡å¤ªä½å¯¼è‡´çš„ï¼Œäºæ˜¯ç”¨ <code>C++</code> é‡å†™äº†ä¸€æ³¢ï¼Œå‘ç°åŒæ ·è¶…æ—¶ï¼Œæœç„¶è¿™é¢˜å°±ä¸æ˜¯èƒ½ç”¨ <code>DFS</code> èƒ½å†™çš„.è¿™é‡Œè¿˜æ˜¯ç¨å¾®åˆ†æä¸€ä¸‹.</p>
<p>çˆ¬ <code>n</code> å±‚é˜¶æ¢¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä»æœ€å¼€å§‹  ï¼Œ æ…¢æ…¢å°è¯• ï¼Œ æ¯”å¦‚å…ˆèµ° 1 æ­¥ ï¼Œ åé¢å†èµ° 2 æ­¥ åˆæˆ–è€…æ˜¯ å…ˆèµ° 2 æ­¥ å†èµ° 2 æ­¥ ï¼Œ è¿™åˆ†ä¸ºå¾ˆå¤šç§æƒ…å†µï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>DFS</code> é’ˆå¯¹ä¸€ç§æƒ…å†µä¸€ç›´é€’å½’åˆ°èµ°åˆ°åº•ï¼Œä¹Ÿå°±æ˜¯ <code>dfs(curr + 1 , target),dfs(curr + 2 , target);</code> é’ˆå¯¹æ¯ä¸€æ¬¡é€‰æ‹©éƒ½è¿›è¡Œé€’å½’ï¼Œé€’å½’ç»“æŸæ¡ä»¶å‘¢ï¼Ÿé‚£å½“ç„¶æ˜¯è¾¾ç»ˆç‚¹ <code>curr == target</code> , æ­¤æ—¶å°±å¯ä»¥å°†æ–¹æ³•æ•° <code>res += 1</code> ï¼Œ åˆæˆ–è€…æ˜¯ <code>curr &gt; target</code> æ­¤æ—¶æ˜æ˜¾è¶…è¿‡äº†ï¼Œèµ°å¤šäº†ï¼Œå°±ä¸ç®—ä¸ºä¸€ç§æ–¹å¼ç›´æ¥ <code>return</code> å³å¯.</p>
<h2 id="æ–¹æ¡ˆäºŒï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ¡ˆäºŒï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ¡ˆäºŒï¼šåŠ¨æ€è§„åˆ’</h2><p>åˆ©ç”¨ <code>dp[n]</code> æ•°ç»„æ¥è®¡ç®—åˆ°è¾¾ç¬¬ n é˜¶æ¥¼æ¢¯çš„æ–¹æ¡ˆæ•°é‡ï¼Œç”±äºæ¯ä¸€æ¬¡èƒ½èµ° 1 æ­¥ æˆ–è€… 2 æ­¥ ï¼Œ åˆ™åˆ°è¾¾ ç¬¬ <code>n</code> é˜¶çš„æ–¹æ¡ˆæ•°é‡å–å†³äºåˆ°è¾¾å‰é¢ä¿©é˜¶æ¥¼æ¢¯çš„æ–¹æ¡ˆæ•°ä¹‹å’Œï¼Œå³åˆ°è¾¾<code>n-1 ã€ n-2</code> é˜¶æ¥¼æ¢¯æ•°çš„æ–¹æ¡ˆä¹‹å’Œï¼Œå› ä¸ºæ­¤æ—¶æ— è®ºåœ¨ <code>n-1 / n-2</code> éƒ½å¯ä»¥é€šè¿‡èµ° 1 æ­¥ æˆ–è€… èµ° 2 æ­¥åˆ°è¾¾ç»ˆç‚¹.</p>
<p>äºæ˜¯å¯ä»¥å¾—åˆ°çŠ¶æ€è¡¨è¾¾å¼ï¼š <code>dp[i] = dp[i-1] + dp[i-2]</code>  æˆ‘ä»¬åªéœ€è¦ä¾é ä¸€ä¸ªå¾ªç¯è®¡ç®—è¿™ä¸ªæ•°ç»„å³å¯.</p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><h3 id="æš´åŠ›é€’å½’"><a href="#æš´åŠ›é€’å½’" class="headerlink" title="æš´åŠ›é€’å½’"></a>æš´åŠ›é€’å½’</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//è®°å½•ç­”æ¡ˆ</span></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span> ;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä»ç¬¬ 0 å±‚å¼€å§‹ ï¼Œåˆ°è¾¾ç¬¬ n å±‚</span></span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span> , n );</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> curr , <span class="keyword">int</span> target )</span></span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœåˆ°è¾¾åˆ™ ç­”æ¡ˆæ•° + 1</span></span><br><span class="line">        <span class="keyword">if</span>(curr == target ) ans +=<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœè¶…è¿‡äº† ç›´æ¥ç»“æŸæœ¬æ¬¡é€’å½’</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (curr &gt; target) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//èµ°ä¸€æ­¥</span></span><br><span class="line">        <span class="built_in">dfs</span>(curr + <span class="number">1</span> , target);</span><br><span class="line">        <span class="comment">//èµ°äºŒæ­¥</span></span><br><span class="line">        <span class="built_in">dfs</span>(curr + <span class="number">2</span> , target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¼˜åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”±äºåªéœ€è¦ç”¨åˆ°ç¬¬ i ã€ i-1 ã€i-2 å±‚ çš„æ•°æ® ï¼Œ æ‰€ä»¥åªéœ€è¦ä¸‰ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€æ›´æ–°å³å¯ æœ€åè¿”å›æ–¹æ¡ˆå’Œå³å¯</span></span><br><span class="line">        <span class="comment">// 				r     q    p</span></span><br><span class="line">        <span class="keyword">int</span> p = <span class="number">0</span>, q = <span class="number">0</span>, r = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            p = q; </span><br><span class="line">            q = r; </span><br><span class="line">            r = p + q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šç‰ˆæœ¬</span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n; <span class="comment">// å› ä¸ºä¸‹é¢ç›´æ¥å¯¹dp[2]æ“ä½œäº†ï¼Œé˜²æ­¢ç©ºæŒ‡é’ˆ</span></span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123; <span class="comment">// æ³¨æ„iæ˜¯ä»3å¼€å§‹çš„</span></span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h3 id="æš´åŠ›é€’å½’-1"><a href="#æš´åŠ›é€’å½’-1" class="headerlink" title="æš´åŠ›é€’å½’"></a>æš´åŠ›é€’å½’</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰æ–¹æ¡ˆæ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä» 0 å±‚å¼€å§‹åˆ°è¾¾ç¬¬ n å±‚</span></span><br><span class="line">       	dfs(<span class="number">0</span>,n);</span><br><span class="line">        <span class="comment">//è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> curr , <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å½“å‰å±‚æ•° ç­‰äº ç›®æ ‡å±‚æ•° æ–¹æ¡ˆæ•° + 1</span></span><br><span class="line">        <span class="keyword">if</span>(curr == target ) res += <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//è¶…è¿‡äº†ç›´æ¥ç»“æŸé€’å½’</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(curr &gt; target) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//èµ°ä¸€æ­¥</span></span><br><span class="line">        dfs(curr + <span class="number">1</span> , target);</span><br><span class="line">        <span class="comment">//èµ°äºŒæ­¥</span></span><br><span class="line">        dfs(curr + <span class="number">2</span> , target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="åŠ¨æ€è§„åˆ’-1"><a href="#åŠ¨æ€è§„åˆ’-1" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šç‰ˆæœ¬</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> n;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼˜åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p = <span class="number">0</span>, q = <span class="number">0</span>, r = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            p = q; </span><br><span class="line">            q = r; </span><br><span class="line">            r = p + q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><h3 id="åŠ¨æ€è§„åˆ’-2"><a href="#åŠ¨æ€è§„åˆ’-2" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">climbStairs</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line">    dp := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    dp[<span class="number">2</span>] = <span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">3</span> ; i &lt;= n ; i++ &#123;</span><br><span class="line">        dp[i] = dp[i<span class="number">-1</span>] + dp[i<span class="number">-2</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(åä¸€):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/30/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/30/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89/1.png" class>

<p>åŸé¢˜é“¾æ¥:<a href="https://leetcode-cn.com/problems/best-sightseeing-pair/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>åªéœ€è¦å°† <code>values[i] + values[j] + i - j</code>  ===&gt; <code>values[i]  + i + values[j] - j</code>  å¦‚æ­¤å°±å¯ä»¥çœ‹æˆæ±‚ä¿©ä¸ªæ•°çš„æœ€å¤§å’Œäº†ï¼Œåªéœ€åŠ¨æ€çš„è®°å½•æœ€å¤§å€¼å³å¯.</p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxScoreSightseeingPair</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> leftMax = values[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; values.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            res = <span class="built_in">max</span>(res , leftMax + values[i] - i);</span><br><span class="line">            leftMax = <span class="built_in">max</span>(leftMax , values[i] + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxScoreSightseeingPair</span><span class="params">(<span class="keyword">int</span>[] values)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> leftMax = values[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; values.length ; i ++)&#123;</span><br><span class="line">            res = Math.max(res , leftMax + values[i] - i);</span><br><span class="line">            leftMax = Math.max(leftMax , values[i] + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxScoreSightseeingPair</span><span class="params">(values []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    res := <span class="number">-1</span></span><br><span class="line">    leftMax := values[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span> ; i &lt; <span class="built_in">len</span>(values) ; i++ &#123;</span><br><span class="line">        res = max(res , leftMax + values[i] - i)</span><br><span class="line">        leftMax = max(leftMax , values[i] + i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x , y <span class="keyword">int</span>)</span><span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(åä¸‰):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/10/01/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211001170717921.png" alt="image-20211001170717921"></p>
<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/pascals-triangle-ii/">ç‚¹å‡»è·³è½¬</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>åŸºæœ¬é€’æ¨å¼ï¼š<code>C[i][j] = C[i - 1][j - 1] + C[i - 1][j];</code></p>
<h2 id="æ–¹æ³•ä¸€ï¼šé€’æ¨"><a href="#æ–¹æ³•ä¸€ï¼šé€’æ¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€’æ¨"></a>æ–¹æ³•ä¸€ï¼šé€’æ¨</h2><p>é€šè¿‡ä¸Šè¿°çš„åŸºæœ¬é€’æ¨å¼ï¼Œå¯ä»¥å…ˆæŠŠæ‰€æœ‰è¡Œçš„æ•°å­—æ±‚å‡ºæ¥ï¼Œå†æ ¹æ®è¾“å…¥çš„è¡Œä¸‹æ ‡ï¼Œå–å‡ºç›¸åº”çš„è¡Œè¿”å›å³å¯.</p>
<h3 id="ä¼˜åŒ–V1-0"><a href="#ä¼˜åŒ–V1-0" class="headerlink" title="ä¼˜åŒ–V1.0"></a>ä¼˜åŒ–V1.0</h3><p>ä¸Šè¿°æ–¹å¼éœ€è¦è€—è´¹è®¸å¤šä¸å¿…è¦çš„å†…å­˜æ¥å­˜å‚¨ä¸€äº›æ— å…³çš„æ•°æ®ï¼Œäº‹å®ä¸Šæˆ‘ä»¬åªéœ€è¦ç›¸é‚»ä¿©è¡Œçš„æ•°æ®å°±è¶³å¤Ÿäº†ï¼Œè¿™æ ·æ—¢å¯ä»¥èŠ‚çœå†…å­˜ä¹Ÿå¯ä»¥èŠ‚çº¦è®¡ç®—çš„æ—¶é—´ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿä»ç„¶éœ€è¦ä¿©ä¸ªæ•°ç»„æ¥å®ç°ï¼Œé‚£èƒ½å¦åªç”¨ä¸€ä¸ªæ•°ç»„å‘¢ï¼Ÿ</p>
<h3 id="ä¼˜åŒ–V2-0"><a href="#ä¼˜åŒ–V2-0" class="headerlink" title="ä¼˜åŒ–V2.0"></a>ä¼˜åŒ–V2.0</h3><p>ç”±ç»„åˆæ•°å…¬å¼å¯ä»¥çŸ¥é“<img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211001200331282.png" alt="image-20211001200331282"></p>
<p>è®¡ç®—ç¬¬ <code>i</code>é¡¹çš„æ—¶å€™ï¼Œåªéœ€è¦çŸ¥é“ ä¸Šä¸€è¡Œçš„ <code>i</code> å’Œ <code>i-1</code>ï¼Œäºæ˜¯å¯ä»¥å€’ç€è¿›è¡Œè®¡ç®—ï¼Œæ— éœ€å¤šå¼€ä¸€ä¸ªæ•°ç»„.</p>
<h2 id="æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨"><a href="#æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨" class="headerlink" title="æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨"></a>æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨</h2><p>å·²çŸ¥</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211001200423015.png" alt="image-20211001200423015"></p>
<p>å¯ä»¥å¾—åˆ°ç›¸é‚»ä¸€è¡Œçš„ç›¸é‚»ç»„åˆæ•°çš„å…³ç³»</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211001200438959.png" alt="image-20211001200438959"></p>
<p>ç”±äº </p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211001200500641.png" alt="image-20211001200500641"></p>
<p>äºæ˜¯å¯ä»¥è®¡ç®—å‡ºç¬¬ <code>n</code> è¡Œçš„æ‰€æœ‰æ•°.</p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="æ–¹æ³•ä¸€ï¼šé€’æ¨-1"><a href="#æ–¹æ³•ä¸€ï¼šé€’æ¨-1" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€’æ¨"></a>æ–¹æ³•ä¸€ï¼šé€’æ¨</h2><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;= rowIndex ; i++ )&#123;</span><br><span class="line">            List&lt;Integer&gt; row = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt;= i ; j++)&#123;</span><br><span class="line">                <span class="comment">//ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ å€¼éƒ½ä¸º1</span></span><br><span class="line">                <span class="keyword">if</span>( j == <span class="number">0</span> || j == i)&#123;</span><br><span class="line">                    row.add(<span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    row.add(list.get(i-<span class="number">1</span>).get(j-<span class="number">1</span>)+list.get(i-<span class="number">1</span>).get(j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(row);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> list.get(rowIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">C</span>(rowIndex + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            C[i].<span class="built_in">resize</span>(i + <span class="number">1</span>);</span><br><span class="line">            C[i][<span class="number">0</span>] = C[i][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                C[i][j] = C[i - <span class="number">1</span>][j - <span class="number">1</span>] + C[i - <span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> C[rowIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="Golang"><a href="#Golang" class="headerlink" title="Golang"></a>Golang</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getRow</span><span class="params">(rowIndex <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    C := <span class="built_in">make</span>([][]<span class="keyword">int</span>, rowIndex+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> C &#123;</span><br><span class="line">        C[i] = <span class="built_in">make</span>([]<span class="keyword">int</span>, i+<span class="number">1</span>)</span><br><span class="line">        C[i][<span class="number">0</span>], C[i][i] = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; i; j++ &#123;</span><br><span class="line">            C[i][j] = C[i<span class="number">-1</span>][j<span class="number">-1</span>] + C[i<span class="number">-1</span>][j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> C[rowIndex]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä¼˜åŒ–V1-0-1"><a href="#ä¼˜åŒ–V1-0-1" class="headerlink" title="ä¼˜åŒ–V1.0"></a>ä¼˜åŒ–V1.0</h2><h3 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; pre = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;= rowIndex ; i++ )&#123;</span><br><span class="line">            List&lt;Integer&gt; row = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt;= i ; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>( j == <span class="number">0</span> || j == i)&#123;</span><br><span class="line">                    row.add(<span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    row.add(pre.get(j-<span class="number">1</span>)+pre.get(j));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            pre = row;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; pre, cur;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            <span class="comment">//é‡æ–°åˆå§‹åŒ–æ•°ç»„å¤§å°,å¢åŠ ç©ºé—´</span></span><br><span class="line">            cur.<span class="built_in">resize</span>(i + <span class="number">1</span>);</span><br><span class="line">            cur[<span class="number">0</span>] = cur[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                cur[j] = pre[j - <span class="number">1</span>] + pre[j];</span><br><span class="line">            &#125;</span><br><span class="line">            pre = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="Golang-1"><a href="#Golang-1" class="headerlink" title="Golang"></a>Golang</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getRow</span><span class="params">(rowIndex <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> pre, cur []<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= rowIndex; i++ &#123;</span><br><span class="line">        cur = <span class="built_in">make</span>([]<span class="keyword">int</span>, i+<span class="number">1</span>)</span><br><span class="line">        cur[<span class="number">0</span>], cur[i] = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; i; j++ &#123;</span><br><span class="line">            cur[j] = pre[j<span class="number">-1</span>] + pre[j]</span><br><span class="line">        &#125;</span><br><span class="line">        pre = cur</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="ä¼˜åŒ–V2-0-1"><a href="#ä¼˜åŒ–V2-0-1" class="headerlink" title="ä¼˜åŒ–V2.0"></a>ä¼˜åŒ–V2.0</h2><h3 id="Java-2"><a href="#Java-2" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; row = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        row.add(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            row.add(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span>; --j) &#123;</span><br><span class="line">                row.set(j, row.get(j) + row.get(j - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="C-2"><a href="#C-2" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">row</span><span class="params">(rowIndex + <span class="number">1</span>)</span></span>;</span><br><span class="line">        row[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span>; --j) &#123;</span><br><span class="line">                row[j] += row[j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="Golang-2"><a href="#Golang-2" class="headerlink" title="Golang"></a>Golang</h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getRow</span><span class="params">(rowIndex <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    row := <span class="built_in">make</span>([]<span class="keyword">int</span>, rowIndex+<span class="number">1</span>)</span><br><span class="line">    row[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= rowIndex; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := i; j &gt; <span class="number">0</span>; j-- &#123;</span><br><span class="line">            row[j] += row[j<span class="number">-1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> row</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨-1"><a href="#æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨-1" class="headerlink" title="æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨"></a>æ–¹æ³•äºŒï¼šçº¿æ€§é€’æ¨</h2><h3 id="Java-3"><a href="#Java-3" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; row = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        row.add(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            row.add((<span class="keyword">int</span>) ((<span class="keyword">long</span>) row.get(i - <span class="number">1</span>) * (rowIndex - i + <span class="number">1</span>) / i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="C-3"><a href="#C-3" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">row</span><span class="params">(rowIndex + <span class="number">1</span>)</span></span>;</span><br><span class="line">        row[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rowIndex; ++i) &#123;</span><br><span class="line">            row[i] = <span class="number">1LL</span> * row[i - <span class="number">1</span>] * (rowIndex - i + <span class="number">1</span>) / i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h3 id="Golang-3"><a href="#Golang-3" class="headerlink" title="Golang"></a>Golang</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">func getRow(rowIndex int) []int &#123;</span><br><span class="line">    row := <span class="built_in">make</span>([]<span class="keyword">int</span>, rowIndex+<span class="number">1</span>)</span><br><span class="line">    row[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= rowIndex; i++ &#123;</span><br><span class="line">        row[i] = row[i<span class="number">-1</span>] * (rowIndex - i + <span class="number">1</span>) / i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> row</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(å):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/07/29/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/07/29/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%EF%BC%89/1.png" class>

<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/maximum-sum-circular-subarray/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>è¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜å¾ˆåƒï¼Œå°±æ˜¯å¤šäº†ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å–è¾¹ç•Œå€¼ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥é€šè¿‡æ±‚å­æ•°ç»„çš„æœ€å°å€¼ç„¶åé€šè¿‡æ•°ç»„å€¼æ€»å’Œå‡å»è¿™ä¸ªæœ€å°å€¼å³å¯.</p>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxSubarraySumCircular</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.<span class="built_in">size</span>() == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(nums.<span class="built_in">size</span>() == <span class="number">2</span>) <span class="keyword">return</span> <span class="built_in">max</span>(nums[<span class="number">0</span>] , nums[<span class="number">1</span>]);</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; dp = vector&lt;<span class="keyword">int</span>&gt;(nums.<span class="built_in">size</span>(),<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> maxValue = nums[<span class="number">0</span>] , minValue = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> sum = nums[<span class="number">0</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ±‚æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            dp[i] = nums[i] + <span class="built_in">max</span>(<span class="number">0</span> , dp[i<span class="number">-1</span>]);</span><br><span class="line">            maxValue = <span class="built_in">max</span>(dp[i] , maxValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ±‚æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.<span class="built_in">size</span>() - <span class="number">1</span> ; i++)&#123;</span><br><span class="line">            dp[i] = nums[i] + <span class="built_in">min</span>(<span class="number">0</span> , dp[i<span class="number">-1</span>]);</span><br><span class="line">             minValue = <span class="built_in">min</span>(dp[i] ,  minValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(sum- minValue , maxValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubarraySumCircular</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">2</span>) <span class="keyword">return</span> Math.max(nums[<span class="number">0</span>] ,nums[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">//åˆ†åˆ«å¼€ä¿©ä¸ªæ•°ç»„åˆ†åˆ«æ±‚æœ€å¤§å­ä¸²å’Œæœ€å°å­ä¸²ï¼Œè¿™ä¸ªåœ°æ–¹ä¹Ÿå¯ä»¥ä¼˜åŒ–ä¸ºä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        <span class="comment">//åªæ˜¯éœ€è¦æŠŠ for è¦æ‹†æˆ 2 ä¸ªè¿›è¡Œè®¡ç®—</span></span><br><span class="line">        <span class="keyword">int</span> [] dpMax = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length]; </span><br><span class="line">        <span class="keyword">int</span> [] dpMin = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length]; </span><br><span class="line">        dpMax[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        dpMin[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>] , min = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; nums.length ; i++)&#123;</span><br><span class="line">            dpMax[i] = Math.max(dpMax[i-<span class="number">1</span>]+nums[i] , nums[i]);</span><br><span class="line">            dpMin[i] = Math.min(dpMin[i-<span class="number">1</span>]+nums[i] , nums[i]);</span><br><span class="line">            max = Math.max(dpMax[i] , max);</span><br><span class="line">            min = Math.min(dpMin[i] , min);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i : nums)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç”¨ä¸€ä¸ª for å¾ªç¯çš„å¼Šç«¯å°±æ˜¯ å–çš„æœ€å°å€¼ æ˜¯å…¨éƒ¨æ•°ç»„ä¸­çš„ è€Œä¸æ˜¯ æå¤´å»å°¾çš„å­ä¸²</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥è¿™ä¸ªåœ°æ–¹è¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹</span></span><br><span class="line">        <span class="keyword">if</span>(max &lt; <span class="number">0</span>) <span class="keyword">return</span> max;</span><br><span class="line">        <span class="keyword">return</span> Math.max(sum-min , max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxSubarraySumCircular</span><span class="params">(nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> max(nums[<span class="number">0</span>],nums[<span class="number">1</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    dp := <span class="built_in">make</span>([]<span class="keyword">int</span> , <span class="built_in">len</span>(nums) + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">var</span> maxValue , minValue , sum <span class="keyword">int</span></span><br><span class="line">    maxValue = nums[<span class="number">0</span>]</span><br><span class="line">    minValue = nums[<span class="number">0</span>]</span><br><span class="line">    sum = nums[<span class="number">0</span>]</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‚æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span> ; i &lt; <span class="built_in">len</span>(nums) ; i++ &#123;</span><br><span class="line">        sum += nums[i]</span><br><span class="line">        dp[i] = nums[i] + max(<span class="number">0</span> , dp[i<span class="number">-1</span>])</span><br><span class="line">        maxValue = max(maxValue , dp[i])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‚æœ€å°å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span> ; i &lt; <span class="built_in">len</span>(nums) - <span class="number">1</span> ; i++ &#123;</span><br><span class="line">        dp[i] = nums[i] + min(<span class="number">0</span> , dp[i<span class="number">-1</span>])</span><br><span class="line">        minValue = min(minValue , dp[i])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max( sum - minValue , maxValue)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x , y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x , y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(åäºŒ):åŠ¨æ€è§„åˆ’</title>
    <url>/2021/08/09/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><img src="/2021/08/09/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89/1.png" class>



<p>åŸé¢˜é“¾æ¥:<a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">ç‚¹è¿™é‡Œ</a></p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>è¿™ä¸€é“é¢˜å’Œä¸Šä¸€é“é¢˜å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ç›´ç»´æŠ¤å·¦è¾¹çš„æœ€å°å€¼å³å¯ï¼ŒåŠ¨æ€è®¡ç®—èƒ½è·å–çš„æœ€å¤§æ”¶ç›Šï¼Œç”±äºåˆ©æ¶¦çš„æœ€å°å€¼ä¸º 0 , æ‰€ä»¥åœ¨ç»™ç»“æœèµ‹åˆå§‹å€¼çš„æ—¶å€™ç›´æ¥èµ‹å€¼ 0 å³å¯.</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftMin = values[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; values.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            res = <span class="built_in">max</span>(res ,values[i] - leftMin);</span><br><span class="line">            leftMin = <span class="built_in">min</span>(leftMin , values[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] values)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> leftMin = values[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; values.length ; i ++)&#123;</span><br><span class="line">            res = Math.max(res , values[i] - leftMin);</span><br><span class="line">            leftMin = Math.min(leftMin , values[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(values []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    res := <span class="number">0</span></span><br><span class="line">    leftMin := values[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span> ; i &lt; <span class="built_in">len</span>(values) ; i++ &#123;</span><br><span class="line">        res = max(res ,values[i] - leftMin)</span><br><span class="line">        leftMin = min(leftMin , values[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x , y <span class="keyword">int</span>)</span><span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x , y <span class="keyword">int</span>)</span><span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(å››):æ»‘åŠ¨çª—å£</title>
    <url>/2021/07/14/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%9B%9B%EF%BC%89/1.png" alt="image-20210714161119231"></p>
<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a> â€”-leetcode</p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>æœ€å¸¸è§çš„è«è¿‡äºåŒé‡å¾ªç¯çš„æš´åŠ›è§£æ³•ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦è¿‡é«˜äº†. </p>
<p>å¯¹äºå­ä¸²é—®é¢˜è¿˜æœ‰ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„è§£æ³•ï¼ŒåŒæŒ‡é’ˆç®—æ³•ï¼Œäºæ˜¯è€ƒè™‘ä½¿ç”¨åŒæŒ‡é’ˆæ¥è¿›è¡Œåˆ†æ.</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ª<code> map</code> æ•°æ®ç»“æ„å­˜å‚¨<code> (k, v)</code>ï¼Œå…¶ä¸­ <code>key</code> å€¼ä¸ºå­—ç¬¦ï¼Œ<code>value</code> å€¼ä¸ºå­—ç¬¦ä½ç½®</li>
<li>æˆ‘ä»¬å®šä¹‰ä¸é‡å¤å­ä¸²çš„å¼€å§‹ä½ç½®ä¸º <code>start</code>ï¼Œç»“æŸä½ç½®ä¸º<code> end</code></li>
<li>éšç€ <code>end</code> ä¸æ–­éå†å‘åï¼Œä¼šé‡åˆ°ä¸ [start, end] åŒºé—´å†…å­—ç¬¦ç›¸åŒçš„æƒ…å†µï¼Œæ­¤æ—¶å°†å­—ç¬¦ä½œä¸º <code>key</code> å€¼ï¼Œè·å–å…¶ <code>value</code> å€¼ï¼Œå¹¶æ›´æ–°<code>start</code>ï¼Œæ­¤æ—¶<code> [start, end]</code> åŒºé—´å†…ä¸å­˜åœ¨é‡å¤å­—ç¬¦</li>
<li>æ— è®ºæ˜¯å¦æ›´æ–°<code> star</code>tï¼Œéƒ½ä¼šæ›´æ–°å…¶ <code>map</code> æ•°æ®ç»“æ„å’Œç»“æœ <code>ans</code>ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li>
</ul>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰mapé›†åˆ</span></span><br><span class="line">        Map&lt;Character,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="comment">//å®šä¹‰ç»“æœ</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¤´æŒ‡é’ˆ ä»¥åŠ å°¾æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> start = <span class="number">0</span> , end = <span class="number">0</span> ; end &lt; n ; end++)&#123;</span><br><span class="line">            <span class="comment">//å–å‡º å­—ç¬¦ä¸²ä¸­çš„ä½äºå°¾æŒ‡é’ˆå¤„çš„å­—ç¬¦</span></span><br><span class="line">            Character element = s.charAt(end);</span><br><span class="line">            <span class="comment">//å¦‚æœmapä¸­å«æœ‰è¿™ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(element))&#123;</span><br><span class="line">                <span class="comment">//åˆ™ å¤´æŒ‡é’ˆéœ€è¦ç§»åŠ¨ ä½¿ start - end ä¹‹é—´ä¸ºæ— é‡å¤çš„å­—ç¬¦ä¸²</span></span><br><span class="line">                <span class="comment">//åŒæ—¶å¿…é¡»å¾€å³ç§»åŠ¨ï¼Œå¾€å·¦å¿…ç„¶ä¼šå¤šé‡å¤å…ƒç´ ï¼Œå› æ­¤ start å¿…é¡»å¤§äºç­‰äºå½“å‰ start</span></span><br><span class="line">                <span class="comment">//å› æ­¤ start éœ€è¦å– é‡å¤å…ƒç´ åæ ‡çš„ä¸‹ä¸€ä¸ªä½ç½®çš„ä¸‹æ ‡ </span></span><br><span class="line">                start = Math.max(map.get(element)+<span class="number">1</span> , start);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(element , end);</span><br><span class="line">            <span class="comment">//è·å–å­ä¸²é•¿åº¦ </span></span><br><span class="line">            ans = Math.max(end - start + <span class="number">1</span> , ans);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”¨äºè®°å½• æ¯ä¸ªå­—ç¬¦å‡ºç°çš„ä¸‹æ ‡ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½® </span></span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">m</span><span class="params">(<span class="number">128</span>, <span class="number">0</span>)</span></span>; <span class="comment">//ASCIIç èŒƒå›´ï¼š0-127</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> end = <span class="number">0</span>; end &lt; s.<span class="built_in">size</span>(); end++) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªå­—ç¬¦ä»¥åŠå‡ºç°è¿‡</span></span><br><span class="line">            <span class="keyword">if</span>(m[s[end]]!=<span class="number">0</span>)  </span><br><span class="line">            <span class="comment">//åˆ™ç§»åŠ¨å¤´æŒ‡é’ˆåˆ° ä½¿å­—ç¬¦ä¸²ä¸­æ— é‡å¤å­—ç¬¦çš„ä½ç½®</span></span><br><span class="line">            <span class="comment">//è¦ä¹ˆæ˜¯é‡å¤å­—ç¬¦çš„ä¸‹ä¸€ä½ å³ m[s[end]]</span></span><br><span class="line">            <span class="comment">//å¦‚æœåœ¨å½“å‰ä½ç½®ä¹‹å‰ start åˆ™ä¸åŠ¨ </span></span><br><span class="line">            start = <span class="built_in">max</span>(start, m[s[end]]);</span><br><span class="line">			<span class="comment">//å°†å‡ºç°çš„å­—ç¬¦åŠ å…¥é›†åˆ</span></span><br><span class="line">            m[s[end]] = end + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//è®¡ç®—é•¿åº¦</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans, end - start + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹(äºŒ):æœåŠ¡å™¨å¼€å‘ä»¥åŠçº¿ç¨‹æ± </title>
    <url>/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="å‰ç½®-å¤šçº¿ç¨‹"><a href="#å‰ç½®-å¤šçº¿ç¨‹" class="headerlink" title="å‰ç½®-å¤šçº¿ç¨‹"></a>å‰ç½®-å¤šçº¿ç¨‹</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¤šçº¿ç¨‹çš„å®ç°æ–¹å¼ æ–¹å¼ä¸€ï¼š å®ç° runnable  æ–¹å¼äºŒ: ç»§æ‰¿Threadç±»  æ–¹å¼ä¸‰: çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸€ï¼šå®ç° runnable ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼äºŒç»§æ‰¿ threadç±»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æœåŠ¡ç«¯ä»£ç "><a href="#æœåŠ¡ç«¯ä»£ç " class="headerlink" title="æœåŠ¡ç«¯ä»£ç "></a>æœåŠ¡ç«¯ä»£ç </h1><p>æœåŠ¡ç«¯åªéœ€è¦åˆ›å»º <code>ServerSocket</code> å¯¹è±¡å³å¯ï¼Œå†è°ƒç”¨<code>accept</code>å¼€å¯æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ„é€ å™¨ä¸­åªéœ€è¦ä¼ å…¥æœåŠ¡æ‰€åœ¨çš„ç«¯å£å·å³å¯ ,å¦‚æœæƒ³è¦è¯»å–å®¢æˆ·ç«¯ä¼ é€’çš„æ•°ï¼Œè¯»å–å®Œæˆä¹‹åéœ€è¦åŠ ä¸Š <code>shutdownInput</code>.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerSocket01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæœåŠ¡ç«¯</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8989</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨...&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">        Socket accept = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¾“å…¥æµ</span></span><br><span class="line">        InputStream inputStream = accept.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">byte</span> [] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//è¯»å–åˆ°byteæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            len = inputStream.read(bytes);</span><br><span class="line">            <span class="keyword">if</span>(len == -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            stringBuilder.append(<span class="keyword">new</span> String(bytes , <span class="number">0</span> ,len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¯»å…¥ç»“æŸ </span></span><br><span class="line">        accept.shutdownInput();</span><br><span class="line"></span><br><span class="line">        OutputStream outputStream = accept.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello Client&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å‡ºç»“æŸ</span></span><br><span class="line">        accept.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="å®¢æˆ·ç«¯ä»£ç "><a href="#å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="å®¢æˆ·ç«¯ä»£ç "></a>å®¢æˆ·ç«¯ä»£ç </h1><p>å®¢æˆ·ç«¯éœ€è¦åˆ›å»º <code>socket</code> å¯¹è±¡ ï¼Œä¼ å…¥ <code>ip</code>åœ°å€ä¸ç«¯å£å·. ä¼ é€’æ•°æ®éœ€è¦é€šè¿‡ <code>OutPutStream</code>å¯¹è±¡ï¼ŒåŒæ ·ï¼Œä¼ è¾“å®Œæˆåéœ€è¦<code>shutdownOutPut</code> è¿›è¡Œå…³é—­.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Socket01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">// å»ºç«‹è¿æ¥</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;localhost&quot;</span>, <span class="number">8989</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘æœåŠ¡ç«¯ä¼ é€’æ•°æ®</span></span><br><span class="line">        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello Server&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å‡ºç»“æŸ</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¾“å…¥ç•™</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">byte</span> [] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//è¯»å…¥byteæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            len = inputStream.read(bytes);</span><br><span class="line">            <span class="keyword">if</span>(len == -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            stringBuilder.append(<span class="keyword">new</span> String(bytes , <span class="number">0</span> ,len));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å…¥ç»“æŸ</span></span><br><span class="line">        socket.shutdownInput();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨"><a href="#ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨" class="headerlink" title="ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨"></a>ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨</h1><p>è¿™é‡Œåªä¸¾ä¸€ä¸ªå°ä¾‹å­ï¼Œç”¨æ³•éƒ½æ˜¯å¤§åŒå°å¼‚çš„ï¼Œéƒ½æ˜¯åˆ›å»º<code>DataIn(Out)PutStream</code> è¿›è¡Œè½¬åŒ–.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   Socket socket = serverSocket.accept();</span><br><span class="line"><span class="comment">//è·å–è¾“å…¥å…­</span></span><br><span class="line">   InputStream inputStream = socket.getInputStream();</span><br><span class="line"><span class="comment">//ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œè½¬æ¢</span></span><br><span class="line">   DataInputStream dataInputStream = <span class="keyword">new</span> DataInputStream(inputStream);</span><br><span class="line"><span class="comment">//ç›´æ¥è¯»å–</span></span><br><span class="line">   System.out.println(dataInputStream.readUTF());</span><br><span class="line">   socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">   OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">   DataOutputStream dataOutputStream = <span class="keyword">new</span> DataOutputStream(outputStream);</span><br><span class="line">   dataOutputStream.writeUTF(<span class="string">&quot;æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œè¿”å›ç›¸åº”çš„æ•°æ®....&quot;</span>);</span><br><span class="line">   socket.shutdownOutput();</span><br><span class="line">   System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°ä¸º:&quot;</span> + Thread.currentThread().getName());</span><br></pre></td></tr></table></figure>

<h1 id="å¼•å…¥çº¿ç¨‹æ± "><a href="#å¼•å…¥çº¿ç¨‹æ± " class="headerlink" title="å¼•å…¥çº¿ç¨‹æ± "></a>å¼•å…¥çº¿ç¨‹æ± </h1><p>åœ¨åŸå…ˆçš„ç¨‹åºä¸­ï¼Œæ˜¾ç„¶æ˜¯ä¸æ”¯æŒå¹¶å‘å¤„ç†çš„ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥çš„ä»£ç ï¼Œæ— æ³•ä¿ƒæˆåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå¦‚æœæƒ³è¦å®ç°ï¼Œåˆ™éœ€è¦åˆ©ç”¨å¤šçº¿ç¨‹è¿›è¡Œç›¸å…³çš„å¤„ç†.ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerSocket02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8989</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨ä»¥åŠå¯åŠ¨.....&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Socket socket = serverSocket.accept();</span><br><span class="line">                        InputStream inputStream = socket.getInputStream();</span><br><span class="line">                        DataInputStream dataInputStream = <span class="keyword">new</span> DataInputStream(inputStream);</span><br><span class="line">                        System.out.println(dataInputStream.readUTF());</span><br><span class="line">                        socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">                        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">                        DataOutputStream dataOutputStream = <span class="keyword">new</span> DataOutputStream(outputStream);</span><br><span class="line">                        dataOutputStream.writeUTF(<span class="string">&quot;æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œè¿”å›ç›¸åº”çš„æ•°æ®....&quot;</span>);</span><br><span class="line">                        socket.shutdownOutput();</span><br><span class="line">                        System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°ä¸º:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘åœ¨å®¢æˆ·ç«¯åŒæ—¶å‘èµ·äº† 10000 ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œç”µè„‘å·®ç‚¹å°±å´©äº†ï¼Œå†…å­˜ä½¿ç”¨ç›´é€¼ 100% ï¼Œæµè§ˆå™¨å’ŒQQç›´æ¥è‡ªåŠ¨é€€å‡ºâ€¦ å¤ªææ€–äº†</p>
<p>ä»¥ä¸Šç¨‹åºå­˜åœ¨çš„é—®é¢˜ï¼š æ— æ³•çº¿ç¨‹å¤ç”¨ï¼Œå³ç¬¬ä¸€ä¸ªçº¿ç¨‹å¤„ç†å®Œç»“æŸåï¼Œå°±ä¸ä¼šå†ç”¨äº†ï¼Œå†æ¥è¯·æ±‚æ—¶åˆ™åˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚</p>
<p>å¦‚æ­¤ä»¥æ¥ï¼šå°±éœ€è¦çº¿ç¨‹æ± è¿›è¡Œä¼˜åŒ–çº¿ç¨‹çš„ä½¿ç”¨ï¼Œæé«˜æ¯ä¸ªçº¿ç¨‹çš„ä½¿ç”¨ç‡</p>
<img src="/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class>



<p>ä½¿ç”¨<code>ThreadPoolExecutor</code>åˆ›å»ºçº¿ç¨‹æ± ï¼ŒåŒæ ·çš„å¯ä»¥ä½¿ç”¨å…¶å°è£…ç±»æ¥æ›´ä¸ºæ–¹ä¾¿çš„åˆ›å»ºçº¿ç¨‹æ±  <code>Executors.newCachedThreadPool()</code> æˆ–è€…</p>
<p><code>Executors.newFixedThreadPool(10)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadPool</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayBlockingQueue&lt;Runnable&gt; blockingQueue = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        ThreadFactory threadFactory = Executors.defaultThreadFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ThreadPoolExecutor</span></span><br><span class="line">        <span class="comment">//å‚æ•°1ï¼š æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">        <span class="comment">//å‚æ•°2ï¼š çº¿ç¨‹æ± æœ€å¤§æ•°é‡</span></span><br><span class="line">        <span class="comment">//å‚æ•°3ï¼š æ¯ä¸ªçº¿ç¨‹å®Œæˆä¹‹åçš„ç©ºé—²æ—¶é—´</span></span><br><span class="line">        <span class="comment">//å‚æ•°4ï¼š æ—¶é—´å•ä½</span></span><br><span class="line">        <span class="comment">//å‚æ•°5ï¼š çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">//å‚æ•°6ï¼š çº¿ç¨‹å·¥å‚ --&gt; åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//å‚æ•°7ï¼š æ‹’ç»å¤„ç†å™¨</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥ä¸€ï¼šThreadPoolExecutor.AbortPolicy() æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥äºŒï¼šThreadPoolExecutor.CallerRunsPolicy() åœ¨execute æ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥ä¸‰ï¼šThreadPoolExecutor.DiscardOldestPolicy() æ”¾å¼ƒæœ€æ—§çš„æœªå¤„ç†è¯·æ±‚(å³å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„)ï¼Œç„¶åé‡è¯• executeï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡ã€‚</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥å››ï¼šThreadPoolExecutor.DiscardPolicy() é»˜è®¤æƒ…å†µä¸‹å®ƒå°†æ”¾å¼ƒè¢«æ‹’ç»çš„ä»»åŠ¡ã€‚</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//çº¿ç¨‹æ± æ‰§è¡Œé€»è¾‘:</span></span><br><span class="line">        <span class="comment">// 1. å½“è¯·æ±‚è¿›å…¥æ—¶,</span></span><br><span class="line">        <span class="comment">//      1.1 è¯·æ±‚æ•°é‡ &lt;= æ ¸å¿ƒçº¿ç¨‹æ•° ---&gt; æ°å¥½åˆ†é…æ¯ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//      1.2 è¯·æ±‚æ•°é‡ &gt; æ ¸å¿ƒçº¿ç¨‹æ•° and è¯·æ±‚æ•°é‡ &lt;= çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡  ---&gt; ç­‰å¾…(è¿›å…¥çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—)æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œåæ‰§è¡Œå‰©ä½™çš„è¯·æ±‚</span></span><br><span class="line">        <span class="comment">//      1.3 è¯·æ±‚æ•°é‡ &gt; çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡  ---&gt; æ‹’ç»å¤„ç†</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor = <span class="keyword">new</span> ThreadPoolExecutor(</span><br><span class="line">                <span class="number">3</span>, <span class="comment">//æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">                <span class="number">5</span>, <span class="comment">//çº¿ç¨‹æ± æœ€å¤§æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ä¸´æ—¶çº¿ç¨‹  ===&gt; ä¸´æ—¶çº¿ç¨‹ä¸º 2</span></span><br><span class="line">                <span class="number">10</span>, <span class="comment">//æ¯ä¸ªçº¿ç¨‹å®Œæˆä¹‹åçš„ç©ºé—²æ—¶é—´</span></span><br><span class="line">                TimeUnit.SECONDS, <span class="comment">//æ—¶é—´å•ä½</span></span><br><span class="line">                blockingQueue, <span class="comment">//çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">                threadFactory, <span class="comment">//çº¿ç¨‹å·¥å‚ --&gt; åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">                <span class="keyword">new</span> ThreadPoolExecutor.DiscardPolicy()); <span class="comment">//æ‹’ç»å¤„ç†å™¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ€å¤§å¤„ç†çº¿ç¨‹çš„æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ç­‰å¾…é˜Ÿåˆ—å®¹é‡ + ä¸´æ—¶çº¿ç¨‹æ•° = çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡ + ç­‰å¾…é˜Ÿåˆ—å®¹é‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++)</span><br><span class="line">        threadPoolExecutor.execute(<span class="keyword">new</span> MyRunnable());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ— é™çº¿ç¨‹æ•°é‡  æœ€å¤§çº¿ç¨‹æ•°é‡ä¸º 2147483648</span></span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//å›ºå®šçº¿ç¨‹æ•°é‡</span></span><br><span class="line">        ExecutorService executorService1 = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œä¸­...çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æœ€å¤§å¤„ç†çº¿ç¨‹çš„æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ç­‰å¾…é˜Ÿåˆ—å®¹é‡ + ä¸´æ—¶çº¿ç¨‹æ•° = çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡ + ç­‰å¾…é˜Ÿåˆ—å®¹é‡</strong></li>
</ul>
<p><strong>çº¿ç¨‹æ± æ‰§è¡Œé€»è¾‘:</strong></p>
<ol>
<li><p>å½“è¯·æ±‚è¿›å…¥æ—¶,</p>
<p>   1.1 è¯·æ±‚æ•°é‡  **&lt;=**  æ ¸å¿ƒçº¿ç¨‹æ•° â€“&gt; æ°å¥½åˆ†é…æ¯ä¸ªçº¿ç¨‹</p>
<p>   1.2 è¯·æ±‚æ•°é‡  <strong>&gt;</strong>  æ ¸å¿ƒçº¿ç¨‹æ•° and è¯·æ±‚æ•°  **&lt;=**  çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°  â€“&gt; ç­‰å¾…(è¿›å…¥çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—)æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œæ‰§è¡Œå‰©ä½™çš„è¯·æ±‚</p>
<p>   1.3 è¯·æ±‚æ•°é‡  <strong>&gt;</strong>  çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°  â€“&gt; æ‹’ç»å¤„ç†</p>
</li>
</ol>
<p><strong>å‚æ•°7ï¼š æ‹’ç»å¤„ç†å™¨</strong></p>
<ul>
<li><p>ç­–ç•¥ä¸€ï¼šThreadPoolExecutor.AbortPolicy()</p>
<ul>
<li>æŠ›å‡ºå¼‚å¸¸</li>
</ul>
</li>
<li><p>ç­–ç•¥äºŒï¼šThreadPoolExecutor.CallerRunsPolicy() </p>
<ul>
<li>åœ¨execute æ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</li>
</ul>
</li>
<li><p>ç­–ç•¥ä¸‰ï¼šThreadPoolExecutor.DiscardOldestPolicy()</p>
<ul>
<li>æ”¾å¼ƒæœ€æ—§çš„æœªå¤„ç†è¯·æ±‚(å³å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„)ï¼Œç„¶åé‡è¯• executeï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</li>
</ul>
</li>
<li><p>ç­–ç•¥å››ï¼šThreadPoolExecutor.DiscardPolicy()</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹å®ƒå°†æ”¾å¼ƒè¢«æ‹’ç»çš„ä»»åŠ¡</li>
</ul>
<p>â€‹        </p>
</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>çº¿ç¨‹æ± </tag>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡åŸåˆ™(ä¸€):å¼€é—­åŸåˆ™</title>
    <url>/2021/09/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ä¸ºä½•éœ€è¦è®¾è®¡åŸåˆ™ï¼Ÿ"><a href="#ä¸ºä½•éœ€è¦è®¾è®¡åŸåˆ™ï¼Ÿ" class="headerlink" title="ä¸ºä½•éœ€è¦è®¾è®¡åŸåˆ™ï¼Ÿ"></a>ä¸ºä½•éœ€è¦è®¾è®¡åŸåˆ™ï¼Ÿ</h1><p>è®¾è®¡åŸåˆ™æ˜¯æ¯”è¾ƒé«˜å¤§ä¸Šçš„è¯´æ³•ï¼Œé€šä¿—ä¸€ç‚¹è®²ï¼Œè®¾è®¡åŸåˆ™å°±æ˜¯ä¸€äº›ç¼–ç¨‹å°æŠ€å·§ï¼Œä½¿ç”¨è¿™äº›æŠ€å·§ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„è½¯ä»¶æ¶æ„è´¨é‡æ›´é«˜ï¼Œè®©ç¨‹åºä½è€¦åˆï¼Œé«˜å¤ç”¨ï¼Œé«˜å†…èšï¼Œæ˜“æ‰©å±•ï¼Œæ˜“ç»´æŠ¤ï¼Œè¿™ä¹Ÿæ˜¯æ¡†æ¶å¼€å‘ä¹ƒè‡³è®¾è®¡å¼€å‘ä¸­ä¸å¯ç¼ºå°‘çš„ä¸œè¥¿ï¼Œå¯¹äºæ¡†æ¶å¼€å‘è€…ï¼Œå…¶æœåŠ¡å¯¹è±¡ä¸ºç¨‹åºå‘˜ï¼Œè‡ªç„¶éœ€è¦å¾ˆé«˜çš„æ‰©å±•æ€§ä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå› ä¸ºä¸šåŠ¡åœºæ™¯æ˜¯æå…¶å¤æ‚çš„ï¼Œå¼€å‘è€…å¼€å‘æ¡†æ¶æ˜¾ç„¶ä¸èƒ½è§£å†³å¥½æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ï¼Œåªèƒ½å°†æ‰€æœ‰ä¸šåŠ¡åœºæ™¯è¿›è¡Œé«˜åº¦æŠ½è±¡åŒ–ï¼Œåªè¿›è¡Œä¸€äº›è¾ƒä¸ºæ™®éçš„å®ç°ï¼Œå°†ä¸€äº›é’ˆå¯¹æ€§çš„æ‹“å±•äº¤ç»™å¼€å‘äººå‘˜è‡ªå·±è¿›è¡Œæ‹“å±•ï¼Œä»¥æ»¡è¶³å„ç§ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œè€Œå¯¹äºæ™®é€šå¼€å‘äººå‘˜ï¼Œä½¿ç”¨è®¾è®¡åŸåˆ™å¯ä»¥è®©ä»£ç æ›´ä¸ºä¼˜é›…ï¼Œå½“ç„¶äº†ï¼Œç›²ç›®ä½¿ç”¨å¯èƒ½ä¼šè®©æ¶æ„å˜çš„è¿‡äºå¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰éœ€æ±‚è¿›è¡Œé€‰æ‹©.</p>
<p><strong>è®¾è®¡åŸåˆ™åˆ†ä¸ºä¸ƒå¤§ç±»ï¼š</strong></p>
<ul>
<li>å¼€é—­åŸåˆ™</li>
<li>é‡Œæ°æ›¿æ¢åŸåˆ™</li>
<li>ä¾èµ–å€’ç½®åŸåˆ™</li>
<li>å•ä¸€èŒè´£åŸåˆ™</li>
<li>æ¥å£éš”ç¦»åŸåˆ™</li>
<li>è¿ªç±³ç‰¹æ³•åˆ™</li>
<li>åˆæˆå¤ç”¨åŸåˆ™</li>
</ul>
<p>è®¾è®¡æ¨¡å¼åˆ™æ˜¯éµå¾ªä»¥ä¸ŠåŸåˆ™çš„ä¸€äº›å…·ä½“å®è·µï¼Œé‡ç‚¹åœ¨äºå…¶æ€æƒ³ï¼Œè¿™ä¸ªç³»åˆ—å°†ä¼šæŒç»­æ›´æ–°Â·Â·Â·Â·</p>
<h1 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å¼€é—­åŸåˆ™çš„å«ä¹‰æ˜¯ï¼šå½“åº”ç”¨çš„éœ€æ±‚æ”¹å˜æ—¶ï¼Œåœ¨ä¸ä¿®æ”¹è½¯ä»¶å®ä½“çš„æºä»£ç æˆ–è€…äºŒè¿›åˆ¶ä»£ç çš„å‰æä¸‹ï¼Œå¯ä»¥æ‰©å±•æ¨¡å—çš„åŠŸèƒ½ï¼Œä½¿å…¶æ»¡è¶³æ–°çš„éœ€æ±‚</p>
<h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>å¼€é—­åŸåˆ™æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ç»ˆæç›®æ ‡ï¼Œå®ƒä½¿è½¯ä»¶å®ä½“æ‹¥æœ‰ä¸€å®šçš„é€‚åº”æ€§å’Œçµæ´»æ€§çš„åŒæ—¶å…·å¤‡ç¨³å®šæ€§å’Œå»¶ç»­æ€§ã€‚å…·ä½“æ¥è¯´ï¼Œå…¶ä½œç”¨å¦‚ä¸‹ã€‚</p>
<ul>
<li><strong>å¯¹è½¯ä»¶æµ‹è¯•çš„å½±å“</strong></li>
</ul>
<p>è½¯ä»¶éµå®ˆå¼€é—­åŸåˆ™çš„è¯ï¼Œè½¯ä»¶æµ‹è¯•æ—¶åªéœ€è¦å¯¹æ‰©å±•çš„ä»£ç è¿›è¡Œæµ‹è¯•å°±å¯ä»¥äº†ï¼Œå› ä¸ºåŸæœ‰çš„æµ‹è¯•ä»£ç ä»ç„¶èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚</p>
<ul>
<li><strong>å¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§</strong></li>
</ul>
<p>ç²’åº¦è¶Šå°ï¼Œè¢«å¤ç”¨çš„å¯èƒ½æ€§å°±è¶Šå¤§ï¼›åœ¨é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡ä¸­ï¼Œæ ¹æ®åŸå­å’ŒæŠ½è±¡ç¼–ç¨‹å¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ã€‚</p>
<ul>
<li> <strong>å¯ä»¥æé«˜è½¯ä»¶çš„å¯ç»´æŠ¤æ€§</strong></li>
</ul>
<p>éµå®ˆå¼€é—­åŸåˆ™çš„è½¯ä»¶ï¼Œå…¶ç¨³å®šæ€§é«˜å’Œå»¶ç»­æ€§å¼ºï¼Œä»è€Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤</p>
<h2 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h2><p>å¦‚å›¾ï¼Œè¿™æ˜¯ä¸€ä¸ªè®¾è®¡å›¾ç›¸å…³çš„ç±»ï¼Œçˆ¶ç±»ä¸º<code>CharDisplay</code> å…¶å®ƒä¿©ä¸ªä¸ºå…¶å­ç±»ï¼Œæƒ³è¦ç”»å‡ºä¸åŒçš„çº¿ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code>CharDisplay</code>ä¸­è¿›è¡Œæ›´æ”¹ï¼Œå¢åŠ åˆ¤æ–­é€»è¾‘å³å¯ï¼Œä½†æ˜¯å¦‚æœï¼Œå­ç±»è¶Šæ¥è¶Šå¤šï¼Œçˆ¶ç±»ä¸­çš„åˆ¤æ–­é€»è¾‘ä¼šæ˜¾å¾—ååˆ†è‡ƒè‚¿ï¼Œæ˜¾ç„¶è¿™æ ·å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡.</p>
<img src="/2021/09/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class>

<p>äºæ˜¯ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è¿›è¡Œè®¾è®¡ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯å°½å¯èƒ½å‡å°‘å¯¹åˆå§‹è®¾è®¡çš„æ›´æ”¹ï¼Œåªéœ€è¦å¯¹æ–°åŠ å…¥çš„ä¸œè¥¿è¿›è¡Œç¼–å†™.é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘è¿›è¡Œä¸€å®šçš„æŠ½è±¡åŒ–ï¼Œå³å¯¹å„ç§ç±»çš„è¿›è¡Œä¸€å®šçš„ç‰¹å¾æå–ï¼Œç„¶åä½œä¸ºæŠ½è±¡ç±»ï¼Œé‚£ä¹ˆå­ç±»åªéœ€è¦å»ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»å³å¯.</p>
<img src="/2021/09/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># æœ€ç®€å•çš„ä½¿ç”¨(ä½¿ç”¨æ¥å£æˆ–è€…ç»§æ‰¿ç±»ï¼Œç›´æ¥é‡å†™æ–¹æ³•ï¼Œå½“ç„¶äº†å¯¹äºå›ºå®šçš„ä¸€äº›æ­¥éª¤ä»ç„¶è¿˜æ˜¯éœ€è¦å†è¿›è¡Œå°è£…ï¼Œè¿™ä¹ˆå†™ä»ç„¶æ— æ³•è§£å†³å¯¹äºå¤æ‚æ–¹æ³•çš„é‡å†™)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åœ†ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ­£æ–¹å½¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡¹ç›®æ„å»ºå·¥å…·ä¹‹Maven</title>
    <url>/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/</url>
    <content><![CDATA[<h1 id="ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ"><a href="#ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ"></a>ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ</h1><blockquote>
<p>mavençš„ä½œç”¨æ˜¯ï¼š1ã€åœ¨æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®ï¼Œmavenå°±ä¼šè‡ªåŠ¨çš„ä¸‹è½½ç›¸åº”çš„jaråŒ…ï¼›2ã€ä¸‹è½½ä¾èµ–ï¼Œåªè¦é…ç½®çš„jaråŒ…æ‰€ä¾èµ–çš„å…¶ä»–jaråŒ…éƒ½ä¼šè¢«å®ƒè‡ªåŠ¨ä¸‹è½½ä¸‹æ¥ï¼› 3ã€å¯ä»¥ç›´æ¥é€šè¿‡å®ƒæ‰“åŒ…waræˆ–è€…jaré¡¹ç›®ã€‚ 4.å¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç æµ‹è¯•ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆæµ‹è¯•æŠ¥å‘Š 5.å¸®åŠ©æˆ‘ä»¬ä¸€æ¬¡æ€§ç¼–è¯‘æ‰€æœ‰æºæ–‡ä»¶ ç”Ÿæˆ <code>.class</code> æ–‡ä»¶ ï¼Œå­˜æ”¾äºtarget ç›®å½•ä¸­.</p>
</blockquote>
<p>&emsp;&emsp;ç”¨é€šä¿—çš„ä¾‹å­æ¥è®²ï¼š<code>maven</code> å¥½æ¯”ä¸€ä¸ªç™¾è´§å•†åœºï¼Œ åœ¨ä»¥å‰æ²¡æœ‰ç™¾è´§å•†åœºçš„æ—¶å€™ ï¼Œ å¦‚æœä½ éœ€è¦ä¹°ä¸€äº›å·¥å…·éœ€è¦å»åˆ°ç›¸åº”çš„åº—é“ºå»å¯»æ‰¾ï¼Œä¹°é£Ÿç‰©éœ€è¦å»åˆ°èœå¸‚åœº ï¼Œååˆ†ç¹çï¼Œç°åœ¨æœ‰äº†ç™¾è´§å•†åœºï¼Œä½ å¯ä»¥å»é‡Œé¢å¾ˆç®€å•çš„å°±ä¹°åˆ°ä½ æ‰€éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä¸ç”¨å»åˆ°å¤„å¯»æ‰¾.</p>
<p>&emsp;&emsp;åœ¨é¡¹ç›®ä¸­ï¼Œæ­¤æ—¶æˆ‘éœ€è¦çš„ä¸œè¥¿å¯¹åº”çš„å°±æ˜¯ä¸€äº› jar åŒ…  ï¼Œæˆ‘ä»¬åªéœ€è¦è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„jaråŒ…ç›¸åº”çš„ä¿¡æ¯ ï¼Œ<code>maven</code> ä¾¿ä¼šå¸®æˆ‘ä»¬ä¸‹è½½å¥½ï¼Œä¸ä»…å¦‚æ­¤å¦‚æœä¸‹è½½çš„jaråŒ…ä¾èµ–äº†å…¶å®ƒjaråŒ…ï¼Œä¹Ÿä¼šåŒæ—¶å¸®åŠ©æˆ‘ä»¬ä¸‹è½½.åŒæ—¶ï¼Œè¿˜å¯ä»¥å¸®æˆ‘ä»¬å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ…æˆjaræ–‡ä»¶æˆ–è€…waræ–‡ä»¶.</p>
<p>&emsp;&emsp;mavençš„å‡ºç°ç¡®å®æé«˜äº†ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ï¼Œä¸å†ä¸ºå„å¤„å¯»æ‰¾ç›¸åº”ç‰ˆæœ¬çš„jaråŒ…è€Œå‘æ„~~</p>
<h1 id="ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ"><a href="#ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ" class="headerlink" title="ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ"></a>ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ</h1><p>ä» Apache Maven å®˜ç½‘ä¸‹è½½ Maven çš„å®‰è£…åŒ…å¹¶è§£å‹ä¹‹åï¼Œè¿›å…¥å®‰è£…ç›®å½•ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<p>bin<br>boot<br>conf<br>lib<br>LICENSE.txt<br>NOTICE.txt<br>README.txt<br>æ¥ä¸‹æ¥ï¼Œåˆ†åˆ«è§£è¯»ä»¥ä¸Šç›®å½•çš„å†…å®¹åŠåŠŸèƒ½ï¼š</p>
<p><strong>ç¬¬ 1 ä¸ªï¼šbin</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†mvnè¿è¡Œçš„è„šæœ¬ï¼Œåˆ†åˆ«ä¸ºmvnã€mvn.batã€mvnDebugã€mvnDebug.batå’Œm2.confï¼Œè¿™äº›è„šæœ¬ç”¨æ¥é…ç½® Java å‘½ä»¤ï¼Œå‡†å¤‡ CLASSPATH å’Œç›¸å…³çš„ Java ç³»ç»Ÿå±æ€§ï¼Œç„¶åæ‰§è¡Œ Java å‘½ä»¤ã€‚å…¶ä¸­ï¼Œmvnæ˜¯åŸºäº UNIX å¹³å°çš„shellè„šæœ¬ï¼Œmvn.batæ˜¯åŸºäº Windows å¹³å°çš„batè„šæœ¬ï¼›åŒç†ï¼ŒmvnDebugæ˜¯åŸºäº UNIX å¹³å°çš„shellè„šæœ¬ï¼ŒmvnDebug.batæ˜¯åŸºäº Windows å¹³å°çš„batè„šæœ¬ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»»ä½•ä¸€æ¡mvnå‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨è¿™äº›è„šæœ¬ã€‚è€Œmvnå’ŒmvnDebugçš„åŒºåˆ«å°±åœ¨äºåè€…æ¯”å‰è€…å¤šäº†ä¸€æ¡MAVEN_DEBUG_OPTSé…ç½®ï¼Œå…¶ä½œç”¨å°±æ˜¯åœ¨è¿è¡Œ Maven æ—¶å¼€å¯debugï¼Œä»¥ä¾¿è°ƒè¯• Maven æœ¬èº«ã€‚æ­¤å¤–ï¼Œm2.confæ˜¯classworldsçš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><strong>ç¬¬ 2 ä¸ªï¼šboot</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åªåŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥maven 3.0ä¸ºä¾‹ï¼Œè¯¥æ–‡ä»¶ä¸ºplexus-classworlds-2.2.3.jarã€‚plexus-classworldsæ˜¯ä¸€ä¸ªç±»åŠ è½½å™¨æ¡†æ¶ï¼Œç›¸å¯¹äºé»˜è®¤çš„ Java ç±»åŠ è½½å™¨ï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„è¯­æ³•ä»¥æ–¹ä¾¿é…ç½®ï¼ŒMaven ä½¿ç”¨è¯¥æ¡†æ¶åŠ è½½è‡ªå·±çš„ç±»åº“ã€‚</p>
<p><strong>ç¬¬ 3 ä¸ªï¼šconf</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†è¦ç»™éå¸¸é‡è¦çš„æ–‡ä»¶settings.xmlã€‚ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå°±èƒ½å†æœºå™¨ä¸Šå…¨å±€åœ°å®šåˆ¶ Maven çš„è¡Œä¸ºã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´åå‘äºå¤åˆ¶è¯¥æ–‡ä»¶è‡³<del>/.m2/ç›®å½•ä¸‹ï¼ˆ</del>è¡¨ç¤ºç”¨æˆ·ç›®å½•ï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·èŒƒå›´å®šåˆ¶ Maven çš„è¡Œä¸ºã€‚</p>
<p><strong>ç¬¬ 4 ä¸ªï¼šlib</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†æ‰€æœ‰ Maven è¿è¡Œæ—¶éœ€è¦çš„ Java ç±»åº“ï¼ŒMaven æœ¬èº«æ˜¯åˆ†æ¨¡å—å¼€å‘çš„ï¼Œå› æ­¤ç”¨æˆ·èƒ½çœ‹åˆ°è¯¸å¦‚maven-core-3.0.jarå’Œmaven-model-3.0.jarä¹‹ç±»çš„æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œè¿™é‡Œè¿˜åŒ…å«ä¸€äº› Maven ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¦‚common-cli-1.2.jarå’Œgoogle-collection-1.0.jarç­‰ã€‚å¯¹äº Maven 2 æ¥è¯´ï¼Œè¯¥ç›®å½•åªåŒ…å«ä¸€ä¸ªå¦‚maven-2.2.1-uber.jarçš„æ–‡ä»¶ï¼ŒåŸæœ¬å„ä¸ºç‹¬ç«‹çš„ JAR æ–‡ä»¶çš„ Maven æ¨¡å—å’Œç¬¬ä¸‰æ–¹ç±»åº“éƒ½è¢«æ‹†è§£åé‡æ–°åˆå¹¶åˆ°äº†è¿™ä¸ª JAR æ–‡ä»¶ä¸­ã€‚å¯ä»¥è¯´ï¼Œlibç›®å½•å°±æ˜¯çœŸæ­£çš„ Mavenã€‚è¿˜æœ‰ä¸€ç‚¹å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ‰¾åˆ° Maven å†…ç½®çš„è¶…çº§ POMã€‚</p>
<p><strong>ç¬¬ 5 ä¸ªï¼šLICENSE.txt</strong></p>
<p>ã€€ã€€è¯¥æ–‡ä»¶è®°å½•äº† Maven ä½¿ç”¨çš„è½¯ä»¶è®¸å¯è¯ Apache License Version 2.0ã€‚</p>
<p><strong>ç¬¬ 6 ä¸ªï¼šNOTICE.txt</strong></p>
<p>ã€€ã€€è¯¥æ–‡ä»¶è®°å½•äº† Maven åŒ…å«çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚</p>
<p><strong>ç¬¬ 7 ä¸ªï¼šREADME.txt</strong></p>
<h1 id="ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ"><a href="#ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ"></a>ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ</h1><ul>
<li><p><strong><code>Pom.xml</code></strong> :  ä¹Ÿç§°ä¸ºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œç”¨äºè®°å½•éœ€è¦çš„ <code>jar</code> åŒ…çš„åæ ‡ ä»¥åŠ<code>maven</code>é…ç½®å±æ€§ç­‰.</p>
</li>
<li><p><strong>çº¦å®šçš„ç›®å½•ç»“æ„</strong> ï¼š<code>maven</code> é¡¹ç›®æ„å»ºå‡ºæ¥å…·æœ‰ç‰¹å®šçš„æ–‡ä»¶ç›®å½•ç»“æ„.</p>
</li>
<li><p><strong>åæ ‡ (ä¹Ÿç§°gav)</strong> ï¼šåˆ†åˆ«ç”± <code>groupId ã€artifactId ã€version</code> ç›¸å½“äºä¸€ä¸ªç½‘å€å…·æœ‰å”¯ä¸€æ€§ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ª <code>jar/war </code> åŒ….</p>
</li>
<li><p><strong>ä¾èµ–ç®¡ç†</strong> ï¼šç”¨äºç®¡ç†å„ä¸ª <code>jar</code> åŒ…ä¹‹é—´çš„ä¾èµ– ï¼Œ<code>maven</code> å¯ä»¥è‡ªåŠ¨å¸®åŠ©ç®¡ç†ï¼Œå¹¶ä¸”å…·æœ‰è§£å†³ä¾èµ–çŸ›ç›¾çš„æªæ–½.</p>
</li>
<li><p><strong>ç”Ÿå‘½å‘¨æœŸ</strong> ï¼šå³æ•´ä¸ª <code>maven</code> é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ ï¼ˆé¡¹ç›®çš„æ¸…ç†ã€åˆå§‹åŒ–ã€ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€é›†æˆæµ‹è¯•ã€éªŒè¯ã€éƒ¨ç½²å’Œç«™ç‚¹ç”Ÿæˆç­‰ï¼‰.</p>
</li>
<li><p><strong>æ’ä»¶/ç›®æ ‡</strong> ï¼šæ’ä»¶ç”¨äºè¡¥å……æä¾›åŸæœ¬æ²¡æœ‰çš„åŠŸèƒ½ï¼Œç›®æ ‡å³ <code>target</code> ç”¨äºå­˜å‚¨ç¼–è¯‘å¥½çš„ <code>class</code> æ–‡ä»¶ä»¥åŠæ‰“åŒ…è¿‡åçš„åŒ… .</p>
</li>
<li><p><strong>ä¾èµ–èŒƒå›´ï¼ˆscopeï¼‰</strong>ï¼šå¯¹äºæŸä¸€ä¸ª <code>jar</code> åŒ…åªéœ€åœ¨æµ‹è¯•é˜¶æ®µä½¿ç”¨ï¼Œåœ¨çœŸæ­£éƒ¨ç½²çš„æ—¶å€™å…¶å®ä¸éœ€è¦ï¼Œæ­¤æ—¶çš„ä¾èµ–èŒƒå›´ä»…é™äºæµ‹è¯•.</p>
</li>
<li><p><strong>æœ¬åœ°ä»“åº“</strong> ï¼šç›¸å½“äºè‡ªå®¶çš„å†°ç®±ï¼Œç”¨äºå­˜å‚¨é¡¹ç›®ä¸­éœ€è¦çš„ <code>jar</code> åŒ…ï¼Œå¯ä»¥å­˜å‚¨ä» <code>maven</code> è¿œç¨‹ä»“åº“ä¸‹è½½å¾—åˆ°çš„ <code>jar</code> åŒ….</p>
</li>
<li><p><strong>è¿œç¨‹ä»“åº“</strong> ï¼š<code>maven</code> çš„è¿œç¨‹ä»“åº“ï¼ˆç›¸å½“äºä¸€ä¸ªè¶…å¸‚ï¼‰åŒ…å«å„ç§ç±»å‹ <code>jar</code> åŒ…ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰é˜¿é‡Œäº‘é•œåƒï¼Œä»¥åŠå¼€æºä¸­å›½é•œåƒæˆ–è€…ç§æœ.</p>
</li>
</ul>
<h2 id="Pom-xml-æ–‡ä»¶è¯¦è§£"><a href="#Pom-xml-æ–‡ä»¶è¯¦è§£" class="headerlink" title="Pom.xml æ–‡ä»¶è¯¦è§£"></a>Pom.xml æ–‡ä»¶è¯¦è§£</h2><p><strong>â‘  . åæ ‡</strong> </p>
<blockquote>
<p>åˆ†åˆ«ç”± <code>groupId ã€artifactId ã€version</code> ç›¸å½“äºä¸€ä¸ªç½‘å€å…·æœ‰å”¯ä¸€æ€§ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ª <code>jar/war </code> åŒ….</p>
</blockquote>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--dependenciesæ ‡ç­¾å¤–çš„åæ ‡--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ä¸€èˆ¬ä¸ºåŸŸåå€’å†™å…·æœ‰å”¯ä¸€æ€§<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>å®é™…é¡¹ç›®åç§°-æ¨¡å—åç§°<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>ç‰ˆæœ¬å·-RELEASEï¼ˆå‘è¡Œï¼‰/SNAPSHOTï¼ˆå¼€å‘ä¸­ï¼‰<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>æ‰“åŒ…é¡¹ç›®ç±»å‹<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--dependencieså†…çš„åæ ‡--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--ä¾èµ–èŒƒå›´--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>â‘¡ . propertieså±æ€§</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç±»ä¼¼äºjavaä¸­çš„å¯¼åŒ…ï¼Œç”¨.è¡¨ç¤ºå­ç›®å½•/å±æ€§</span></span><br><span class="line"><span class="comment">	ç®€è€Œè¨€ä¹‹å°±æ˜¯è¡¨æ˜ä»¥ä¸‹å±æ€§æ˜¯å¯ä»¥åœ¨æ–‡ä»¶ä¸­ä¸€ä¸€å¯¹åº”çš„ï¼Œ</span></span><br><span class="line"><span class="comment">	ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±æ€§ åœ¨pomçš„å…¶å®ƒä½ç½®å¯ä»¥é€š$&#123;å±æ€§å&#125;è¿›è¡Œå¼•ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>â‘¢ . plugins</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç”¨äºè®°å½•æ’ä»¶ä¿¡æ¯ä»¥åŠç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="çº¦å®šçš„ç›®å½•ç»“æ„"><a href="#çº¦å®šçš„ç›®å½•ç»“æ„" class="headerlink" title="çº¦å®šçš„ç›®å½•ç»“æ„"></a>çº¦å®šçš„ç›®å½•ç»“æ„</h2><p>ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ª<code>maven</code> é¡¹ç›®åˆå§‹åŒ–åæ‰€æ‹¥æœ‰çš„ç›®å½•ç»“æ„</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">â”œâ”€src                       #ç”¨äºå­˜æ”¾æºæ–‡ä»¶</span><br><span class="line">â”‚  â”œâ”€main                   #ç”¨äºå­˜æ”¾ç¼–å†™çš„javaæ–‡ä»¶ä»¥åŠé…ç½®å±æ€§</span><br><span class="line">â”‚  â”‚  â”œâ”€java                #javaæºæ–‡ä»¶</span><br><span class="line">â”‚  â”‚  â””â”€resources           #é…ç½®å±æ€§</span><br><span class="line">â”‚  â””â”€test	                #å­˜æ”¾æµ‹è¯•ä»£ç å’Œé…ç½®å±æ€§</span><br><span class="line">â”‚      â”œâ”€java	            #æµ‹è¯•ä»£ç </span><br><span class="line">â”‚      â””â”€resources          #é…ç½®å±æ€§</span><br><span class="line">â””â”€target                    #compileç¼–è¯‘ç”Ÿæˆçš„classæ–‡ä»¶ä»¥åŠé…ç½®æ–‡ä»¶</span><br><span class="line">|    â”œâ”€classes</span><br><span class="line">|    â””â”€maven-status</span><br><span class="line">|        â””â”€maven-compiler-plugin</span><br><span class="line">|            â””â”€compile</span><br><span class="line">|                â””â”€<span class="keyword">default</span>-compile</span><br><span class="line">|â€”pom.xml</span><br></pre></td></tr></table></figure>



<h2 id="ä¾èµ–èŒƒå›´"><a href="#ä¾èµ–èŒƒå›´" class="headerlink" title="ä¾èµ–èŒƒå›´"></a>ä¾èµ–èŒƒå›´</h2><p>ä¾èµ–èŒƒå›´å¸¸è§çš„åˆ†ä¸ºå››ç§ï¼š<code>test ã€ compile ã€provided ã€runtime</code> æ¥ä¸‹æ¥ä¸€ä¸€è¿›è¡Œä»‹ç».</p>
<ul>
<li><p><strong><code>test</code></strong> ï¼š é¡¾åæ€ä¹‰å°±æ˜¯åœ¨æµ‹è¯•é˜¶æ®µæ‰€éœ€è¦çš„ä¾èµ–ï¼Œè€Œåœ¨æ‰“åŒ…éƒ¨ç½²é˜¶æ®µå¹¶ä¸ä¼šå¯¹ç¼–è¯‘ä»¥åŠè¿è¡Œäº§ç”Ÿå½±å“ï¼Œå› æ­¤æ‰“åŒ…æ—¶ä¼šå¿½ç•¥è¿™ä¸€ç±»åŒ….</p>
</li>
<li><p><strong><code>compile</code></strong> : è¯¥èŒƒå›´å°±æ˜¯é»˜è®¤ä¾èµ–èŒƒå›´ï¼Œæ­¤ä¾èµ–èŒƒå›´å¯¹ äºç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œä¸‰ç§classpathéƒ½æœ‰æ•ˆ .</p>
</li>
<li><p><strong><code>provide</code></strong> :  ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„ <code>maven</code> ä¾èµ–ï¼Œåªå¯¹ç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œå¯¹è¿è¡Œæ— æ•ˆï¼Œå…¸å‹çš„ä¾‹å­å°±æ˜¯servlet-api .</p>
</li>
<li><p><strong><code>runtime</code></strong> : ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„mavenä¾èµ–ï¼Œåªå¯¹æµ‹è¯•å’Œè¿è¡Œæœ‰æ•ˆï¼Œå¯¹ç¼–è¯‘çš„æ— æ•ˆï¼Œå…¸å‹ä¾‹å­å°±æ˜¯JDBCçš„é©±åŠ¨å®ç°</p>
</li>
</ul>
<h1 id="ğŸ¡é…ç½®æœ¬åœ°ä»“åº“"><a href="#ğŸ¡é…ç½®æœ¬åœ°ä»“åº“" class="headerlink" title="ğŸ¡é…ç½®æœ¬åœ°ä»“åº“"></a>ğŸ¡é…ç½®æœ¬åœ°ä»“åº“</h1><p> åœ¨å®‰è£…ç›®å½•ä¸­çš„  <code>conf</code> æ–‡ä»¶å¤¹ä¸­çš„ <code>settings.xml</code> ä¸­å¯ä»¥é…ç½®æœ¬åœ°ä»“åº“çš„è·¯å¾„ï¼Œå¯ç”¨äºå­˜å‚¨ä»è¿œç¨‹ä»“åº“ä¸‹è½½æ¥çš„ <code>jar</code> åŒ….</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/1.png" class title="repository">

<p>åªéœ€æ–°å»ºä¸€ä¸ª <code>localRepository</code> æ ‡ç­¾ï¼Œå¹¶ä¸”é…ç½®ä¸Šæœ¬åœ°ä»“åº“çš„è·¯å¾„ï¼Œä¿å­˜å³å¯.</p>
<h1 id="ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ"><a href="#ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ"></a>ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ</h1><p>åŒæ ·çš„åœ¨ <code>conf</code> æ–‡ä»¶å¤¹ä¸­çš„ <code>settings.xml</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ çº¢è‰²æ¡†ä¸­å†…å®¹å°±å¯ä»¥äº†.</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/2.png" class title="mirrors">

<p><strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¥Ÿmaven-å¸¸ç”¨å‘½ä»¤"><a href="#ğŸ¥Ÿmaven-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ğŸ¥Ÿmaven å¸¸ç”¨å‘½ä»¤"></a>ğŸ¥Ÿmaven å¸¸ç”¨å‘½ä»¤</h1><p>ä»¥ä¸‹å°†åˆ—ä¸¾ <code>maven</code> çš„å¸¸ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn -version Â  Â  Â  Â  Â  Â  Â  Â  æŸ¥çœ‹mavençš„ç‰ˆæœ¬åŠé…ç½®ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">mvn compile Â  Â  Â  Â  Â  Â  Â  Â ç¼–è¯‘é¡¹ç›®ä»£ç </span><br><span class="line"></span><br><span class="line">mvn package Â  Â  Â  Â  Â  Â  Â  æ‰“åŒ…é¡¹ç›®</span><br><span class="line"></span><br><span class="line">mvn package -Dmaven.test.skip&#x3D;true Â  æ‰“åŒ…é¡¹ç›®æ—¶è·³è¿‡å•å…ƒæµ‹è¯•</span><br><span class="line"></span><br><span class="line">mvn test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â è¿è¡Œå•å…ƒæµ‹è¯•</span><br><span class="line"></span><br><span class="line">mvn clean Â  Â  Â  Â  Â  Â  Â  Â  Â  Â æ¸…é™¤ç¼–è¯‘äº§ç”Ÿçš„targetæ–‡ä»¶å¤¹å†…å®¹ï¼Œå¯ä»¥é…åˆç›¸åº”å‘½ä»¤ä¸€èµ·ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">mvn install Â  Â  Â  Â  Â  Â  Â  Â  Â  æ‰“åŒ…åå°†å…¶å®‰è£…åœ¨æœ¬åœ°ä»“åº“</span><br><span class="line"></span><br><span class="line">mvn deploy Â  Â  Â  Â  Â  Â  Â  Â  Â æ‰“åŒ…åå°†å…¶å®‰è£…åˆ°pomæ–‡ä»¶ä¸­é…ç½®çš„è¿œç¨‹ä»“åº“</span><br><span class="line"></span><br><span class="line">mvn site Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ç”Ÿæˆç«™ç‚¹ç›®å½•</span><br><span class="line"></span><br><span class="line">mvn dependency:list Â  Â  Â æ˜¾ç¤ºæ‰€æœ‰å·²ç»è§£æçš„æ‰€æœ‰ä¾èµ–</span><br><span class="line"></span><br><span class="line">mvn dependency:tree Â  Â  ä»¥æ ‘çš„ç»“æ„å±•ç¤ºé¡¹ç›®ä¸­çš„ä¾èµ–</span><br><span class="line"></span><br><span class="line">mvn dependency:analyze Â å¯¹é¡¹ç›®ä¸­çš„ä¾èµ–è¿›è¡Œåˆ†æï¼Œä¾èµ–æœªä½¿ç”¨ï¼Œä½¿ç”¨å•æœªå¼•å…¥</span><br><span class="line"></span><br><span class="line">mvn tomcat:run Â  Â  Â  Â  Â  Â  Â å¯åŠ¨tomcat</span><br></pre></td></tr></table></figure>





<h1 id="ğŸ£åœ¨IDEAä¸­é…ç½®maven"><a href="#ğŸ£åœ¨IDEAä¸­é…ç½®maven" class="headerlink" title="ğŸ£åœ¨IDEAä¸­é…ç½®maven"></a>ğŸ£åœ¨IDEAä¸­é…ç½®maven</h1><p>åœ¨ <code>IDEA</code>ä¸­è®¾ç½® <code>maven</code> ï¼š<br>    ä½¿ç”¨è‡ªå·±å®‰è£…çš„mavenï¼Œ éœ€è¦è¦†ç›– <code>IDEA</code>ä¸­çš„é»˜è®¤çš„è®¾ç½®.è®© <code>IDEA</code>æŒ‡å®š <code>maven</code>å®‰è£…ä½ç½®ç­‰ä¿¡æ¯</p>
<pre><code>é…ç½®çš„å…¥å£ â‘ ï¼šé…ç½®å½“å‰å·¥ç¨‹çš„è®¾ç½®ï¼Œ file--settings ---Build, Excution,Deployment--Build Tools--Maven 
                       Maven Home directory: mavençš„å®‰è£…ç›®å½•
                        User Settings File :  å°±æ˜¯mavenå®‰è£…ç›®å½•conf/setting.xmlé…ç½®æ–‡ä»¶
                        Local Repository :    æœ¬æœºä»“åº“çš„ç›®å½•ä½ç½®

                   --Build Tools--Maven--Runner  
                      VM Options : -DarchetypeCatalog=internal
                      JRE: ä½ é¡¹ç›®çš„jdk


                archetypeCatalog=internal , mavené¡¹ç›®åˆ›å»ºæ—¶ï¼Œä¼šè”ç½‘ä¸‹è½½æ¨¡ç‰ˆæ–‡ä»¶ï¼Œ
                      æ¯”è¾ƒå¤§ï¼Œ ä½¿ç”¨-DarchetypeCatalog=internalï¼Œä¸ç”¨ä¸‹è½½ï¼Œ åˆ›å»ºmavené¡¹ç›®é€Ÿåº¦å¿«ã€‚

            â‘¡ï¼šé…ç½®ä»¥åæ–°å»ºå·¥ç¨‹çš„è®¾ç½®ï¼Œ New projects settings è·Ÿä¸Šé¢ä¸€æ ·è¿›è¡Œé…ç½®å³å¯
</code></pre>
<p>åˆ›å»ºé¡¹ç›®çš„æ—¶å€™é€‰æ‹©çš„æ¨¡æ¿ï¼š</p>
<ul>
<li><strong>maven-archetype-quickstart : æ™®é€šçš„javaé¡¹ç›®</strong></li>
<li><strong>maven-archetype-webapp : webå·¥ç¨‹</strong></li>
</ul>
<p>ä¾§è¾¹æ å¯ä»¥ç›´æ¥é€šè¿‡ç‚¹å‡»å®ç° <code>maven</code> å‘½ä»¤çš„æ‰§è¡Œï¼š</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/3.png" class title="aside">

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MybatisPlus(äºŒ):å¸¸ç”¨åŠŸèƒ½è§£æ</title>
    <url>/2021/06/06/MybatisPlus%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>æ—¶éš”å¤šæ—¥ï¼Œæœ€è¿‘åœ¨ç†Ÿæ‚‰SpringBootåç«¯é¡¹ç›®ä»£ç ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›è°ƒè¯•å’Œé…ç½®ï¼Œåœ¨å’Œå­¦é•¿è¿›è¡Œä»£ç å¯¹æ¥ï¼Œå¿™æ´»äº†å¥½ä¸€æ•´å­ï¼Œå†åŠ ä¸ŠæœŸæœ«è€ƒè¯•ï¼Œè¿™ç¯‡åšå®¢é—²ç½®äº†å¾ˆä¹…ï¼Œæ€»è¿˜æ˜¯å·®ä¿©ä¸ªç‚¹æ²¡æœ‰æ—¶é—´å†™.</p>
</blockquote>
<h1 id="ğŸ¥™å¤šç§ä¸»é”®ç±»å‹"><a href="#ğŸ¥™å¤šç§ä¸»é”®ç±»å‹" class="headerlink" title="ğŸ¥™å¤šç§ä¸»é”®ç±»å‹"></a>ğŸ¥™å¤šç§ä¸»é”®ç±»å‹</h1><p>åœ¨å®ä½“ç±»ä¸­ï¼Œåœ¨ä¸»é”®çš„å±æ€§ä¸Šæ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼Œå…¶ä¸­typeæœ‰å¦‚ä¸‹é€‰æ‹©ï¼š</p>
<p>æ¥ä¸‹æ¥ä¼šæŒ‘é€‰å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„è¿›è¡Œè¯¦ç»†è§£é‡Š</p>
<p><strong><code>@TableId(value=&quot; &quot;,type=Id.type.xxx)</code></strong></p>
<table>
<thead>
<tr>
<th align="center">å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AUTO</td>
<td align="center">æ•°æ®åº“IDè‡ªå¢</td>
</tr>
<tr>
<td align="center">NONE</td>
<td align="center">æ— çŠ¶æ€,è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹(æ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€,å…¨å±€é‡Œçº¦ç­‰äº INPUT)</td>
</tr>
<tr>
<td align="center">INPUT</td>
<td align="center">insertå‰è‡ªè¡Œsetä¸»é”®å€¼</td>
</tr>
<tr>
<td align="center">ASSIGN_ID</td>
<td align="center">åˆ†é…ID(ä¸»é”®ç±»å‹ä¸ºNumber(Longå’ŒInteger)æˆ–String)(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextId</code>(é»˜è®¤å®ç°ç±»ä¸º<code>DefaultIdentifierGenerator</code>é›ªèŠ±ç®—æ³•)</td>
</tr>
<tr>
<td align="center">ASSIGN_UUID</td>
<td align="center">åˆ†é…UUID,ä¸»é”®ç±»å‹ä¸ºString(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextUUID</code>(é»˜è®¤defaultæ–¹æ³•)</td>
</tr>
<tr>
<td align="center">ID_WORKER</td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID é•¿æ•´å‹ç±»å‹(please use <code>ASSIGN_ID</code>)</td>
</tr>
<tr>
<td align="center">UUID</td>
<td align="center">32ä½UUIDå­—ç¬¦ä¸²(please use <code>ASSIGN_UUID</code>)</td>
</tr>
<tr>
<td align="center">ID_WORKER_STR</td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID å­—ç¬¦ä¸²ç±»å‹(please use <code>ASSIGN_ID</code>)</td>
</tr>
</tbody></table>
<ul>
<li><strong><code>Auto</code></strong> : ä¸»é”®è‡ªåŠ¨é€’å¢ +1 ï¼Œæ’å…¥æ•°æ®çš„æ—¶å€™æ— éœ€æ‰‹åŠ¨è®¾å®šä¸»é”®å€¼ï¼Œå¦‚è‹¥è®¾å®šå®‰è£…è®¾å®šçš„ä¸»é”®å€¼è¿›è¡Œæ’å…¥.</li>
<li><strong><code>INPUT</code></strong> ï¼šæ’å…¥æ•°æ®æ—¶è‡ªå·±æ‰‹åŠ¨è®¾å®š</li>
<li><strong><code>ASSIGN_ID</code></strong> : ä½¿ç”¨é›ªèŠ±ç®—æ³•ç”Ÿæˆä¸€ä¸ª 64  bit çš„ <code>long</code> å‹ä¸»é”®å€¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š64 ä¸ª bit ä¸­ï¼Œå…¶ä¸­ 1 ä¸ª bit æ˜¯ä¸ç”¨çš„ï¼Œç„¶åç”¨å…¶ä¸­çš„ 41 bit ä½œä¸ºæ¯«ç§’æ•°ï¼Œç”¨ 10 bit ä½œä¸ºå·¥ä½œæœºå™¨ idï¼Œ12 bit ä½œä¸ºåºåˆ—å·</li>
<li><strong><code>ASSIGN_UUID</code></strong> : é‡æ–°è‡ªåŠ¨ç”Ÿæˆæ’é™¤ä¸­åˆ’çº¿çš„UUIDä½œä¸ºä¸»é”®,ç±»å‹ä¸ºString</li>
</ul>
<h1 id="ğŸ¥šè‡ªåŠ¨å¡«å……"><a href="#ğŸ¥šè‡ªåŠ¨å¡«å……" class="headerlink" title="ğŸ¥šè‡ªåŠ¨å¡«å……"></a>ğŸ¥šè‡ªåŠ¨å¡«å……</h1><p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œé€šå¸¸éœ€è¦å­˜å‚¨æ•°æ®çš„åˆ›å»ºæ—¶é—´ä»¥åŠæ›´æ–°æ—¶é—´ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ‰‹åŠ¨çš„æ’å…¥å’Œæ›´æ–°çš„è¯ååˆ†ç¹çï¼Œå¹¶ä¸”è¿™ä¸ªæ“ä½œæœ¬èº«ä¸å…·æœ‰å”¯ä¸€æ€§ï¼Œå®é™…ä¸Šåªæ˜¯é‡å¤ç€ä¸€ä¸ªæ“ä½œï¼Œäºæ˜¯<code>MybatisPlus</code>æä¾›äº†è‡ªåŠ¨å¡«å……æœºåˆ¶.</p>
<p>å®ä½“ç±»ï¼šå…¶ä¸­ <strong><code>@TableField</code></strong> ä¸­<code>value</code>ç”¨äºæ ‡è®°å±æ€§ä¸æ•°æ®åº“ä¸­å¯¹åº”çš„å­—æ®µï¼Œç”±äºé…ç½®ä¸­é»˜è®¤å¼€å¯äº†é©¼å³°å‘½åå› æ­¤<code>value</code>å€¼å¯ä»¥ä¸å†™.</p>
<ul>
<li>å®ä½“ç±»éœ€è¦è‡ªåŠ¨å¡«å……çš„å­—æ®µåŠ ä¸Š  <strong><code>@TableField</code></strong> æ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line">  <span class="meta">@Version</span></span><br><span class="line">  <span class="keyword">private</span> Integer version;</span><br><span class="line">  <span class="keyword">private</span> Integer deleteFlag;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//è¡¨ç¤ºæ’å…¥æ—¶å¡«å……</span></span><br><span class="line">  <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">  <span class="keyword">private</span> Date createTime;</span><br><span class="line">  <span class="comment">//è¡¨ç¤ºæ’å…¥å’Œæ›´æ–°æ—¶å¡«å……</span></span><br><span class="line">  <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">  <span class="keyword">private</span> Date updateTime;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™å¤„ç†å™¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisAutoFill</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span> , <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šå¦‚æœæ•°æ®åº“<code>URL</code> æ—¶åŒºè®¾ç½®çš„ä¸æ˜¯ä¸œå…«åŒºçš„æ—¶åŒºï¼Œé‚£ä¹ˆæ›´æ–°çš„æ—¶é—´ä¼šä¸å½“å‰ç³»ç»Ÿæ—¶é—´å·®å‡ ä¸ªå°æ—¶ï¼Œéœ€è¦ä¿è¯ä¸œå…«åŒºçš„æ—¶åŒºï¼Œåªéœ€è¦å°† <code>ServerTimezone=Asia/shangHai</code></strong></p>
<h1 id="ğŸ–ä¹è§‚é”"><a href="#ğŸ–ä¹è§‚é”" class="headerlink" title="ğŸ–ä¹è§‚é”"></a>ğŸ–ä¹è§‚é”</h1><p>â€‹        åœ¨å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªç”¨æˆ·åŒæ—¶å¯¹ä¸€æ¡æ•°æ®è¿›è¡Œäº†æ“ä½œï¼Œä»è€Œå¯¼è‡´æ•°æ®æ··ä¹±é”™è¯¯ï¼Œå› æ­¤éœ€è¦ä¿è¯ä¸€ä¸ªç”¨æˆ·æ“ä½œå®Œæˆä¹‹åï¼Œå¦ä¸€ä¸ªç”¨æˆ·æ‰èƒ½ç»§ç»­æ“ä½œï¼Œè¿™å°±éœ€è¦ç»™æ•°æ®ä¸Šé”.</p>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯é”ï¼Ÿ</strong></p>
</blockquote>
<p>â€‹        é¡¾åæ€ä¹‰å°±æ˜¯ä¿è¯æŸä¸€æ—¶åˆ»çš„æ›´æ–°è€…æ˜¯å”¯ä¸€çš„ï¼Œæ›´æ–°æ•°æ®æ‰€éœ€è¦çš„é’¥åŒ™åªæœ‰ä¸€æŠŠï¼Œä»»ä½•æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªäººæ‹¥æœ‰é’¥åŒ™.</p>
<ul>
<li><p><strong>æ‚²è§‚é”</strong> ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šblockç›´åˆ°å®ƒæ‹¿åˆ°é”â€”â€”â€”&gt;ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³æ§åˆ¶ï¼Œé€‚ç”¨äºå¤šè¯»å°‘å†™çš„åœºæ™¯</p>
</li>
<li><p><strong>ä¹è§‚é”</strong>ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®â€”â€”â€”&gt;DBçš„è¡Œé”ã€è¡¨é”ç­‰ï¼Œé€‚ç”¨äºæ•°æ®ä¸€è‡´æ€§æ¯”è¾ƒé«˜çš„åœºæ™¯</p>
</li>
</ul>
<p><code>MybatisPlus</code>ä¸­æä¾›äº†ä¹è§‚é”æœºåˆ¶ï¼Œéœ€è¦åœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ  <code>version</code> å­—æ®µ ,  ç±»å‹ä¸º <code>int</code> é•¿åº¦ 5-6å³å¯ï¼Œå®ä½“ç±»ä¸­ <code>version</code> å±æ€§å€¼,æ•°æ®ç±»å‹ä¸º<code>Integer</code></p>
<ul>
<li>åŠ ä¸Š**<code>@Version</code>** æ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        <span class="comment">//ä¹è§‚é”é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="comment">//åˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥è¯¢ä½¿ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä¹è§‚é”åªæœ‰åœ¨æ›´æ–°æŸ¥åˆ°çš„æ•°æ®çš„æ—¶å€™æ‰ä¼šèµ·ä½œç”¨ï¼Œå•çº¯çš„æ›´æ–°æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„</span></span><br><span class="line">        Books books = booksMapper.selectById(<span class="number">11</span>);</span><br><span class="line">        books.setBookCounts(<span class="number">777</span>);</span><br><span class="line">        books.setDetail(<span class="string">&quot;æ›´æ–°æµ‹è¯•06&quot;</span>);</span><br><span class="line">        books.updateById();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">æ§åˆ¶å°è¾“å‡ºçš„SQLè¯­å¥:</span><br><span class="line">UPDATE books SET book_name=?, book_counts=?, detail=?, version=?, create_time=?, update_time=? WHERE book_id=? AND version=? AND delete_flag=<span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>åœ¨æ•°æ®åº“ä¸­ï¼Œ<code>version</code>å­—æ®µé»˜è®¤å€¼è®¾ç½®ä¸º1ï¼Œè¿‡åæ¯æ¬¡æŸ¥è¯¢åæ›´æ–°ä¸€æ¬¡ä¹‹åï¼Œ<code>version</code>å€¼åœ¨æŸ¥è¯¢å‡ºçš„å€¼ä¹‹ä¸Šè‡ªå¢ 1 .</p>
<h1 id="ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢"><a href="#ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢" class="headerlink" title="ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢"></a>ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢</h1><p><code>MybatisPlus</code> ä¸­å†…ç½®äº†åˆ†é¡µæ’ä»¶ï¼Œåªéœ€è¦è¿›è¡Œç®€å•çš„é…ç½®å³å¯å®Œæˆåˆ†é¡µæ“ä½œ</p>
<ul>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        <span class="comment">//ä¹è§‚é”é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="comment">//åˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥è¯¢ä½¿ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">selectBoos</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//åˆ†é¡µå¯¹è±¡             (ç¬¬å‡ é¡µï¼Œä¸€é¡µä¸­æ˜¾ç¤ºå‡ ä¸ª)   </span></span><br><span class="line">        Page&lt;Books&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢è¿”å› pageå¯¹è±¡</span></span><br><span class="line">        Page&lt;Books&gt; page1 = booksMapper.selectPage(page, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(page1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸ§‡-é€»è¾‘åˆ é™¤"><a href="#ğŸ§‡-é€»è¾‘åˆ é™¤" class="headerlink" title="ğŸ§‡ é€»è¾‘åˆ é™¤"></a>ğŸ§‡ é€»è¾‘åˆ é™¤</h1><p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå­˜åœ¨æŸ¥è¯¢å†å²è®°å½•çš„æƒ…å†µï¼Œä»¥å¡åˆ¸ä¸ºä¾‹ï¼Œè¿‡æœŸæˆ–è€…å·²ç»ä½¿ç”¨çš„å¡åˆ¸åœ¨æ•°æ®åº“ä¸­ç›´æ¥è¿›è¡Œåˆ é™¤ï¼Œåˆ™æ°¸è¿œæ— æ³•æŸ¥è¯¢åˆ°å·²ç»åˆ é™¤çš„å¡åˆ¸ï¼Œ<code>MybatisPlus</code> æä¾›äº†é€»è¾‘åˆ é™¤çš„é…ç½®ï¼Œåªéœ€è¦åœ¨æ•°æ®åº“ä¸­æ·»åŠ é€»è¾‘åˆ é™¤æ ‡å¿—å­—æ®µå³å¯ï¼Œé»˜è®¤å€¼ä¸º 0 ï¼Œæ¯”å¦‚<code>delete_flag</code> ï¼Œ<code>int </code> ç±»å‹ï¼Œå€¼ä¸º 1 çš„æ—¶å€™ è¡¨ç¤ºåˆ é™¤ï¼Œå€¼ä¸º 0 çš„æ—¶å€™è¡¨ç¤ºæœªåˆ é™¤.</p>
<ul>
<li>é…ç½®æ–‡ä»¶ç¼–å†™</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç»‘å®šé€»è¾‘åˆ é™¤åˆ¤æ–­çš„å±æ€§</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-delete-field</span>= <span class="string">deleteFlag</span></span><br><span class="line"><span class="comment">#è®¾ç½®å€¼ä¸º1çš„æ—¶å€™ä¸ºåˆ é™¤</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-delete-value</span>= <span class="string">1</span></span><br><span class="line"><span class="comment">#å€¼ä¸º0çš„æ—¶å€™è¡¨ç¤ºæœªåˆ é™¤</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-not-delete-value</span>= <span class="string">0</span></span><br></pre></td></tr></table></figure>



<p>é…ç½®å®Œæˆä¹‹åï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    booksMapper.deleteById(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åˆ é™¤æ“ä½œå˜æˆäº†å¯¹ <code>delete_flag</code> çš„æ›´æ–°æ“ä½œ</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">JDBC Connection [HikariProxyConnection@816918962 wrapping com.mysql.cj.jdbc.ConnectionImpl@2924f1d8] will not be managed by Spring</span><br><span class="line">==&gt;  Preparing: UPDATE books SET delete_flag=1 WHERE book_id=? AND delete_flag=0</span><br><span class="line">==&gt; Parameters: 10(Integer)</span><br><span class="line">&lt;==    Updates: 1</span><br></pre></td></tr></table></figure>



<p>å½“ç„¶äº†ï¼Œæ­¤æ—¶è¿›è¡Œå…¨è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ˜¾ç¤ºä¸å‡ºæ¥è¿™äº›å·²ç»è¿›è¡Œé€»è¾‘åˆ é™¤çš„æ•°æ®ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book_id,book_name,book_counts,detail,version,delete_flag,create_time,update_time </span><br><span class="line"><span class="keyword">FROM</span> books </span><br><span class="line"><span class="keyword">WHERE</span> delete_flag<span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>å…¨è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šåœ¨æœ«å°¾é»˜è®¤è¯„ä»·é€»è¾‘åˆ é™¤åˆ¤æ–­æ¡ä»¶</p>
<h1 id="ğŸ­-æ¡ä»¶æ„é€ å™¨"><a href="#ğŸ­-æ¡ä»¶æ„é€ å™¨" class="headerlink" title="ğŸ­ æ¡ä»¶æ„é€ å™¨"></a>ğŸ­ æ¡ä»¶æ„é€ å™¨</h1><blockquote>
<p>è¯¥éƒ¨åˆ†æ¬è¿è‡ª Mybatis-pluså®˜æ–¹æ–‡æ¡£ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå…¶å®æœ‰åˆ©ä¹Ÿæœ‰å¼Šï¼Œä½¿ç”¨æ—¶åªéœ€è¦ç¿»é˜…ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å³å¯ï¼Œå¯¹äºå¤æ‚çš„è¯­å¥å»ºè®®è¿˜æ˜¯xmlæ–‡ä»¶æèµ·ï¼Œä¾¿äºåæœŸdebug</p>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>Wrapper</code>æ„é€ å™¨å­˜åœ¨ä¿©ä¸ªå®ç°ç±»ï¼š<code>QueryWrapper </code> ä»¥åŠ <code>UpdateWrapper</code> ï¼Œå®é™…è¿ç”¨ä¸­ï¼Œåˆ›å»ºè¿™ä¿©ä¸ªå®ç°ç±»å¯¹è±¡å³å¯è¿›è¡Œä¸‹é¢è¿™èˆ¬æ“ä½œäº†</p>
<h2 id="allEqï¼ˆå…¨ç­‰äºï¼‰"><a href="#allEqï¼ˆå…¨ç­‰äºï¼‰" class="headerlink" title="allEqï¼ˆå…¨ç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>allEq</code></strong></font>ï¼ˆå…¨ç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">allEq(Map&lt;R, V&gt; params)</span><br><span class="line">allEq(Map&lt;R, V&gt; params, <span class="keyword">boolean</span> null2IsNull)</span><br><span class="line">allEq(<span class="keyword">boolean</span> condition, Map&lt;R, V&gt; params, <span class="keyword">boolean</span> null2IsNull)</span><br></pre></td></tr></table></figure>

<p><code>params</code> : <code>key</code>ä¸ºæ•°æ®åº“å­—æ®µå,<code>value</code>ä¸ºå­—æ®µå€¼<br><code>null2IsNull</code> : ä¸º<code>true</code>åˆ™åœ¨<code>map</code>çš„<code>value</code>ä¸º<code>null</code>æ—¶è°ƒç”¨ <a href="https://mp.baomidou.com/guide/wrapper.html#isnull">isNull</a> æ–¹æ³•,ä¸º<code>false</code>æ—¶åˆ™å¿½ç•¥<code>value</code>ä¸º<code>null</code>çš„</p>
<h2 id="eqï¼ˆç­‰äºï¼‰"><a href="#eqï¼ˆç­‰äºï¼‰" class="headerlink" title="eqï¼ˆç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>eq</code></strong></font>ï¼ˆç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">eq(R column, Object val)</span><br><span class="line">eq(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¾‹: <code>eq(&quot;name&quot;, &quot;è€ç‹&quot;)</code>â€”&gt;<code>name = &#39;è€ç‹&#39;</code></li>
</ul>
<h2 id="neï¼ˆä¸ç­‰äºï¼‰"><a href="#neï¼ˆä¸ç­‰äºï¼‰" class="headerlink" title="neï¼ˆä¸ç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>ne</code></strong></font>ï¼ˆä¸ç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ne(R column, Object val)</span><br><span class="line">ne(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ç­‰äº &lt;&gt;</li>
<li>ä¾‹: <code>ne(&quot;name&quot;, &quot;è€ç‹&quot;)</code>â€”&gt;<code>name &lt;&gt; &#39;è€ç‹&#39;</code></li>
</ul>
<h2 id="gtï¼ˆå¤§äºï¼‰"><a href="#gtï¼ˆå¤§äºï¼‰" class="headerlink" title="gtï¼ˆå¤§äºï¼‰"></a><font size="4" color="orange"><strong><code>gt</code></strong></font>ï¼ˆå¤§äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">gt(R column, Object val)</span><br><span class="line">gt(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤§äº &gt;</li>
<li>ä¾‹: <code>gt(&quot;age&quot;, 18)</code>â€”&gt;<code>age &gt; 18</code></li>
</ul>
<h2 id="geï¼ˆå¤§äºç­‰äºï¼‰"><a href="#geï¼ˆå¤§äºç­‰äºï¼‰" class="headerlink" title="geï¼ˆå¤§äºç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>ge</code></strong></font>ï¼ˆå¤§äºç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ge(R column, Object val)</span><br><span class="line">ge(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤§äºç­‰äº &gt;=</li>
<li>ä¾‹: <code>ge(&quot;age&quot;, 18)</code>â€”&gt;<code>age &gt;= 18</code></li>
</ul>
<h2 id="ltï¼ˆå°äºï¼‰"><a href="#ltï¼ˆå°äºï¼‰" class="headerlink" title="ltï¼ˆå°äºï¼‰"></a><font size="4" color="orange"><strong><code>lt</code></strong></font>ï¼ˆå°äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lt(R column, Object val)</span><br><span class="line">lt(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å°äº &lt;</li>
<li>ä¾‹: <code>lt(&quot;age&quot;, 18)</code>â€”&gt;<code>age &lt; 18</code></li>
</ul>
<h2 id="leï¼ˆå°äºç­‰äºï¼‰"><a href="#leï¼ˆå°äºç­‰äºï¼‰" class="headerlink" title="leï¼ˆå°äºç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>le</code></strong></font>ï¼ˆå°äºç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">le(R column, Object val)</span><br><span class="line">le(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å°äºç­‰äº &lt;=</li>
<li>ä¾‹: <code>le(&quot;age&quot;, 18)</code>â€”&gt;<code>age &lt;= 18</code></li>
</ul>
<h2 id="betweenï¼ˆåŒºé—´ï¼‰"><a href="#betweenï¼ˆåŒºé—´ï¼‰" class="headerlink" title="betweenï¼ˆåŒºé—´ï¼‰"></a><font size="4" color="orange"><strong><code>between</code></strong></font>ï¼ˆåŒºé—´ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">between(R column, Object val1, Object val2)</span><br><span class="line">between(<span class="keyword">boolean</span> condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<ul>
<li>BETWEEN å€¼1 AND å€¼2</li>
<li>ä¾‹: <code>between(&quot;age&quot;, 18, 30)</code>â€”&gt;<code>age between 18 and 30</code></li>
</ul>
<h2 id="notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰"><a href="#notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰" class="headerlink" title="notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰"></a><font size="4" color="orange"><strong><code>notbetween</code></strong></font>ï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notBetween(R column, Object val1, Object val2)</span><br><span class="line">notBetween(<span class="keyword">boolean</span> condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<ul>
<li>NOT BETWEEN å€¼1 AND å€¼2</li>
<li>ä¾‹: <code>notBetween(&quot;age&quot;, 18, 30)</code>â€”&gt;<code>age not between 18 and 30</code></li>
</ul>
<h2 id="likeï¼ˆåƒï¼‰"><a href="#likeï¼ˆåƒï¼‰" class="headerlink" title="likeï¼ˆåƒï¼‰"></a><font size="4" color="orange"><strong><code>like</code></strong></font>ï¼ˆåƒï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">like(R column, Object val)</span><br><span class="line">like(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>LIKE â€˜%å€¼%â€™</li>
<li>ä¾‹: <code>like(&quot;name&quot;, &quot;ç‹&quot;)</code>â€”&gt;<code>name like &#39;%ç‹%&#39;</code></li>
</ul>
<h2 id="notlikeï¼ˆä¸åƒï¼‰"><a href="#notlikeï¼ˆä¸åƒï¼‰" class="headerlink" title="notlikeï¼ˆä¸åƒï¼‰"></a><font size="4" color="orange"><strong><code>notlike</code></strong></font>ï¼ˆä¸åƒï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notLike(R column, Object val)</span><br><span class="line">notLike(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>NOT LIKE â€˜%å€¼%â€™</li>
<li>ä¾‹: <code>notLike(&quot;name&quot;, &quot;ç‹&quot;)</code>â€”&gt;<code>name not like &#39;%ç‹%&#39;</code></li>
</ul>
<h2 id="inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰"><a href="#inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>in</code></strong></font>ï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">in(R column, Collection&lt;?&gt; value)</span><br><span class="line">in(<span class="keyword">boolean</span> condition, R column, Collection&lt;?&gt; value)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ IN (value.get(0), value.get(1), â€¦)</li>
<li>ä¾‹: <code>in(&quot;age&quot;,&#123;1,2,3&#125;)</code>â€”&gt;<code>age in (1,2,3)</code></li>
</ul>
<h2 id="notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰"><a href="#notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>notin</code></strong></font>ï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notIn(R column, Collection&lt;?&gt; value)</span><br><span class="line">notIn(<span class="keyword">boolean</span> condition, R column, Collection&lt;?&gt; value)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ NOT IN (value.get(0), value.get(1), â€¦)</li>
<li>ä¾‹: <code>notIn(&quot;age&quot;,&#123;1,2,3&#125;)</code>â€”&gt;<code>age not in (1,2,3)</code></li>
</ul>
<h2 id="inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰"><a href="#inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>inSql</code></strong></font>ï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inSql(R column, String inValue)</span><br><span class="line">inSql(<span class="keyword">boolean</span> condition, R column, String inValue)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ IN ( sqlè¯­å¥ )</li>
<li>ä¾‹: <code>inSql(&quot;age&quot;, &quot;1,2,3,4,5,6&quot;)</code>â€”&gt;<code>age in (1,2,3,4,5,6)</code></li>
<li>ä¾‹: <code>inSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;)</code>â€”&gt;<code>id in (select id from table where id &lt; 3)</code></li>
</ul>
<h2 id="notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰"><a href="#notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>notinSql</code></strong></font>ï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notInSql(R column, String inValue)</span><br><span class="line">notInSql(<span class="keyword">boolean</span> condition, R column, String inValue)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ NOT IN ( sqlè¯­å¥ )</li>
<li>ä¾‹: <code>notInSql(&quot;age&quot;, &quot;1,2,3,4,5,6&quot;)</code>â€”&gt;<code>age not in (1,2,3,4,5,6)</code></li>
<li>ä¾‹: <code>notInSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;)</code>â€”&gt;<code>id not in (select id from table where id &lt; 3)</code></li>
</ul>
<h1 id="ğŸ›ä»£ç ç”Ÿæˆå™¨"><a href="#ğŸ›ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ğŸ›ä»£ç ç”Ÿæˆå™¨"></a>ğŸ›ä»£ç ç”Ÿæˆå™¨</h1><p>â€‹        åœ¨åˆ›å»ºé¡¹ç›®ä¹‹åˆï¼Œæ„å»ºå·¥ç¨‹ç»“æ„æ˜¯éå¸¸ç›¸ä¼¼çš„æ“ä½œï¼Œå³ é…ç½®æ•°æ®åº“å¹¶è¿æ¥æ•°æ®åº“â€”â€“&gt;åˆ›å»ºæ•°æ®åº“è¡¨å®ä½“ç±» â€”&gt; ç¼–å†™<code>dao</code>å±‚å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œâ€”-&gt;ç¼–å†™<code>service</code>å±‚è°ƒç”¨<code>dao</code>å±‚ â€”&gt; ç¼–å†™<code>controller</code>å±‚</p>
<p>â€‹        å¦‚æœå«æœ‰å¤šä¸ªè¡¨ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯ååˆ†ç¹ççš„ï¼Œäºæ˜¯<code>MybatisPlus</code>æä¾›äº†ä»£ç ç”Ÿæˆå™¨ï¼Œå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿç”Ÿæˆæ¯ä¸€å¼ è¡¨çš„ç»“æ„ï¼Œæå¤§æé«˜äº†å¼€å‘æ•ˆç‡.</p>
<ul>
<li><strong>å¼•å…¥ç›¸å…³ä¾èµ–</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç¼–å†™ä»£ç ç”Ÿæˆå™¨è®¾ç½®ç±»</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line">        <span class="comment">//å…¨å±€é…ç½®</span></span><br><span class="line">        GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        gc.setAuthor(<span class="string">&quot;Soucat&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–å½“å‰æ¨¡å—é¡¹ç›®ä½ç½®</span></span><br><span class="line">        String property = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®è¾“å‡ºç›®å½•</span></span><br><span class="line">        gc.setOutputDir(property+<span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setOpen(<span class="keyword">false</span>);</span><br><span class="line">        gc.setFileOverride(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//å»æ‰Serviceçš„Iå‰ç¼€</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ—¶é—´ç±»å‹</span></span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¸»é”®</span></span><br><span class="line">        gc.setIdType(IdType.AUTO);</span><br><span class="line">        <span class="comment">//Swagger</span></span><br><span class="line">        gc.setSwagger2(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å°†å…¨å±€é…ç½®åŠ å…¥ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line">        </span><br><span class="line">		<span class="comment">//é…ç½®æ•°æ®æº</span></span><br><span class="line">        DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        <span class="comment">//url</span></span><br><span class="line">        dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=Asia/Shanghai&quot;</span>);</span><br><span class="line">        <span class="comment">//drivername</span></span><br><span class="line">        dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//å¯†ç </span></span><br><span class="line">        dsc.setPassword(<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">        <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">        dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">//æ•°æ®åº“ç±»å‹</span></span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        </span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŒ…é…ç½®</span></span><br><span class="line">        PackageConfig pk = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        <span class="comment">//åŒ…çˆ¶ç±»</span></span><br><span class="line">        pk.setParent(<span class="string">&quot;com.soucat&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®å®ä½“ç±»åŒ…åŒ…å</span></span><br><span class="line">        pk.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®daoå±‚åŒ…å</span></span><br><span class="line">        pk.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ§åˆ¶å™¨åŒ…å</span></span><br><span class="line">        pk.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æœåŠ¡å±‚åŒ…å</span></span><br><span class="line">        pk.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        <span class="comment">//å°†åŒ…é…ç½®åŠ å…¥ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setPackageInfo(pk);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç­–ç•¥é…ç½®</span></span><br><span class="line">        StrategyConfig sc = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        <span class="comment">//æ•°æ®åº“è¡¨å</span></span><br><span class="line">        sc.setInclude(<span class="string">&quot;books&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯å®ä½“ç±»Lombok</span></span><br><span class="line">        sc.setEntityLombokModel(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯å±æ€§åé©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line">        sc.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        <span class="comment">//å¼€å¯å­—æ®µåé©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line">        sc.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        sc.setLogicDeleteFieldName(<span class="string">&quot;deleted_flag&quot;</span>);</span><br><span class="line">		<span class="comment">//è®¾ç½®å­—æ®µè‡ªåŠ¨å¡«å…¥</span></span><br><span class="line">        TableFill createTime = <span class="keyword">new</span> TableFill(<span class="string">&quot;create_time&quot;</span>, FieldFill.INSERT);</span><br><span class="line">        TableFill updateTime = <span class="keyword">new</span> TableFill(<span class="string">&quot;update_time&quot;</span>, FieldFill.INSERT_UPDATE);</span><br><span class="line">        <span class="comment">//è®¾ç½®é›†åˆ</span></span><br><span class="line">        ArrayList&lt;TableFill&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(createTime);</span><br><span class="line">        list.add(updateTime);</span><br><span class="line">        <span class="comment">//åŠ å…¥å­—æ®µé›†åˆ</span></span><br><span class="line">        sc.setTableFillList(list);</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¹è§‚é”å­—æ®µå</span></span><br><span class="line">        sc.setVersionFieldName(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å§‹RestControlleræ³¨è§£</span></span><br><span class="line">        sc.setRestControllerStyle(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//é©¼å³°è½¬æˆè¿å­—ç¬¦</span></span><br><span class="line">        sc.setControllerMappingHyphenStyle(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å°†ç­–ç•¥é…ç½®åŠ å…¥åˆ°ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setStrategy(sc);</span><br><span class="line">		<span class="comment">//å¯åŠ¨ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.execute();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MybatisPlus</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatisï¼ˆäºŒï¼‰</title>
    <url>/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸˆé…ç½®å±æ€§"><a href="#ğŸˆé…ç½®å±æ€§" class="headerlink" title="ğŸˆé…ç½®å±æ€§"></a>ğŸˆé…ç½®å±æ€§</h1><ul>
<li><strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ --&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>environments</strong></p>
</blockquote>
<p>&emsp;&emsp;å…¶ä¸­å¯ä»¥é…ç½®å¤šå¥— <code>Mybatis</code> è¿è¡Œç¯å¢ƒï¼Œå°† <code>SQL</code> æ˜ å°„åˆ°ä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¯ä»¥è®¾ç½® <code>default</code> å±æ€§è¿›è¡ŒæŒ‡å®šé…ç½®ï¼Œå¯¹åº”çš„å„å¥—ä¸åŒçš„é…ç½®æ ¹æ® <code>id</code> å±æ€§è¿›è¡ŒåŒºåˆ«.</p>
<ul>
<li>å­èŠ‚ç‚¹</li>
</ul>
<p><code>datasource</code>ï¼šä½¿ç”¨æ ‡å‡†çš„ <code>JDBC</code> æ•°æ®æºæ¥å£æ¥é…ç½® <code>JDBC</code> è¿æ¥æ•°æ®åº“ ï¼Œå…¶ <code>type</code> å±æ€§æœ‰ä¸‰ç§å€¼ï¼š<code>UNPOOLED|POOLED|JNDI</code></p>
<p>â€‹        <code>POOLED</code>ï¼š æ•°æ®åº“è¿æ¥æ± ï¼Œ<code>JDBC</code>è¿æ¥æ˜¯éå¸¸è€—æ—¶ä¸”å ç”¨èµ„æºçš„ï¼Œæ‰€ä»¥è¿ç”¨æ•°æ®åº“è¿æ¥æ± å¯¹æ¯æ¬¡è¿æ¥è¿›è¡Œç¼“å­˜å¤„ç†ï¼Œä½†æ˜¯åŒæ—¶é™åˆ¶äº†åŒæ—¶è¿›è¡Œè¿æ¥çš„æ•°é‡ä»¥åŠç¼“å­˜çš„å¤§å°.</p>
<blockquote>
<p>mappers</p>
</blockquote>
<p>&emsp;&emsp;ç”¨äºæ³¨å†Œ<code>SQL</code> æ˜ å°„æ–‡ä»¶ï¼Œè®©<code>Mybatis</code> çŸ¥é“å»å“ªé‡Œæ‰¾åˆ°å¯¹åº”çš„ <code>SQL</code> æ˜ å°„æ–‡ä»¶.å› æ­¤éœ€è¦å¼•å…¥ <code>SQL</code> æ˜ å°„æ–‡ä»¶ï¼Œå¼•å…¥æ–‡ä»¶çš„æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«ä¸º ï¼š</p>
<ul>
<li>èµ„æºæ–‡ä»¶å¼•å…¥</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨å®Œå…¨é™å®šç±»å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</span></span><br><span class="line"><span class="comment">éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨æ–‡ä»¶å¼•å…¥</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</span></span><br><span class="line"><span class="comment">ä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>Mapperæ˜ å°„æ–‡ä»¶</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>namespace</code> ï¼šå‘½åç©ºé—´ï¼Œç”¨äºç»‘å®šæ•°æ®åº“æ“ä½œæ¥å£ï¼Œåœ¨ä¸ä½¿ç”¨åˆ«åçš„æƒ…å†µä¸‹ï¼šnamespace : åŒ…å + ç±»å</li>
</ul>
<p>åœ¨ <code>mapper </code> æ ‡ç­¾ä¸­ ï¼Œ å¯ä»¥å®šä¹‰ <code>SQL</code> æ ‡ç­¾ ï¼Œå¸¸ç”¨çš„æœ‰ <code>&lt;update&gt; &lt;select&gt; &lt;delete&gt; &lt;insert&gt;</code>å››ç§ï¼Œä½†æ˜¯ä½ åŒæ ·ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªæ ‡ç­¾ä¸­å†™å››ç§ä¸åŒçš„<code>SQL </code> è¯­å¥,ä¸ä¼šæŠ¥é”™ï¼Œè¿™äº›æ ‡ç­¾ä¸­çš„ <code>id</code> å±æ€§å¿…é¡»ä¸æ¥å£ä¸­çš„æ–¹æ³•åç›¸å¯¹åº”ä»è€Œè¿›è¡Œç»‘å®šæ˜ å°„ï¼Œè¿˜æœ‰å…¶å®ƒå±æ€§ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåç»­è¿˜ä¼šç»§ç»­ä»‹ç»å…¶å®ƒå±æ€§. </p>
<p><strong>æ­£æ˜¯å› ä¸ºMapperæ˜ å°„æ–‡ä»¶ï¼Œå½»åº•å°†<code>SQL</code>  è¯­å¥ç‹¬ç«‹å‡ºæ¥ï¼Œç›¸å¯¹äºåŸå§‹çš„ <code>Java</code> ä»£ç å’Œ <code>SQL</code> ä»£ç å¤¹æ‚ï¼Œå¯ç»´æŠ¤æ€§æœ‰å·¨å¤§çš„æå‡,åŒæ—¶è®©æˆ‘ä»¬ä¸“æ³¨äºç¼–å†™ <code>SQL</code> è¯­å¥æé«˜æ•ˆç‡.</strong></p>
<blockquote>
<p>å¯¹JDBCè¿›è¡Œä¼˜åŒ–å¤„ç†</p>
</blockquote>
<p>&emsp;&emsp;åœ¨åŸç”Ÿçš„ä½¿ç”¨<code>JDBC</code>çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨<code>JDBC.properties</code> æ–‡ä»¶å†™å…¥æˆ‘ä»¬éœ€è¦çš„ <code>dirver ã€ url ã€username ã€password</code> ,å®ç°ä»£ç å’Œæ•°æ®ç›¸åˆ†ç¦»ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œä»¥åŠå¤ç”¨æ€§ï¼Œä¹Ÿæ–¹ä¾¿ä¿®æ”¹.</p>
<p>&emsp;&emsp;åŒæ ·çš„åœ¨<code>Mybatis</code>ä¸­ä¹ŸåŒæ ·å¯ä»¥éµå¾ªè¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬å†<code>resources</code> ä¸­åˆ›å»º <code>JDBC.properties</code> ï¼Œé€šè¿‡å¦‚ä¸‹æ ‡ç­¾è¿›è¡Œå¼•ç”¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;JDBC.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>config</code> æ–‡ä»¶ä¸­å¯¹æ ‡ç­¾çš„é¡ºåºæœ‰ç€ä¸¥æ ¼çš„è¦æ±‚ï¼Œå¯ä»¥å…ˆéšä¾¿æ”¾ï¼Œçœ‹é”™è¯¯æç¤ºï¼ŒæŒ‰ç…§é¡ºåºè¿›è¡Œå®‰æ”¾.</strong></p>
<ul>
<li><code>$&#123;å±æ€§å&#125;</code> ï¼šå¼•ç”¨ç¬¦ï¼Œå¼•å…¥è¿‡åï¼Œå±æ€§åå†™å…¥<code>properties</code>ä¸­ç›¸åº”çš„å±æ€§åå³å¯.</li>
</ul>
<p>é…ç½®å®Œåå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥propertiesæ–‡ä»¶--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>typeAliasesä¼˜åŒ–</p>
</blockquote>
<p>åœ¨ <code>namespace</code> ä¸­å†™å…¥çš„ç±»åï¼Œåœ¨çœŸå®é¡¹ç›®å¯èƒ½å¾ˆé•¿ï¼Œäºæ˜¯å¯ä»¥è€ƒè™‘ç”¨åˆ«åè¿›è¡Œæ›¿ä»£.å…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p>å½“è¿™æ ·é…ç½®æ—¶ï¼Œ<code>User</code>å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨<code>Dao.User</code>çš„åœ°æ–¹.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;Dao.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;Dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Java Bean æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li><code>Java Bean</code> æ˜¯ <code>Java</code> å¯¹è±¡çš„ä¸€å¥—è§„èŒƒ ï¼Œå±æ€§ç§æœ‰åŒ–ï¼Œå¯¹å¤–æä¾› <code>Get/Set</code> æ–¹æ³•ç­‰ç­‰. </li>
</ul>
</li>
</ul>
<p>æ¯ä¸€ä¸ªåœ¨åŒ… <code>Dao</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p>
<p>è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>å…¶å®ƒé…ç½®è®¾ç½®</p>
</blockquote>
<p>å¸¸ç”¨è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—åŠŸèƒ½ æ ‡å‡†æ—¥å¿—å®ç°--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯ç¼“å­˜--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯æ‡’åŠ è½½--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;multipleResultSetsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useColumnLabel&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useGeneratedKeys&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PARTIAL&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingUnknownColumnBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WARNING&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultExecutorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultStatementTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultFetchSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;safeRowBoundsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯é©¼å³°å‘½åæ˜ å°„--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;localCacheScope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SESSION&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;OTHER&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadTriggerMethods&quot;</span> <span class="attr">value</span>=<span class="string">&quot;equals,clone,hashCode,toString&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¥½rusultMap-ç»“æœé›†æ˜ å°„"><a href="#ğŸ¥½rusultMap-ç»“æœé›†æ˜ å°„" class="headerlink" title="ğŸ¥½rusultMap(ç»“æœé›†æ˜ å°„)"></a>ğŸ¥½rusultMap(ç»“æœé›†æ˜ å°„)</h1><blockquote>
<p>å¦‚æœå®ä½“ç±»ä¸­çš„å±æ€§åå’Œæ•°æ®åº“ä¸­çš„å­—æ®µåä¸ä¸€è‡´å¦‚ä½•å¤„ç† ? ä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
</blockquote>
<p>æœ¬è´¨ä¸Šï¼Œåœ¨ç¼–å†™<code>SQL</code> è¯­å¥çš„æ—¶å€™æŸ¥è¯¢å­—æ®µå¦‚æœç›´æ¥ç”¨ <code>*</code>  é‚£ä¹ˆå°±ç›¸å½“äºæŸ¥è¯¢å®ä½“ç±»ä¸­æ‰€æœ‰çš„å±æ€§ï¼Œè€Œæ­¤æ—¶æœ‰å±æ€§åå’Œå­—æ®µåä¸åŒ¹é…ï¼Œé‚£ä¹ˆè‡ªç„¶ä¼šæŸ¥è¯¢å¤±è´¥.é‚£ä¹ˆçŸ¥é“äº†åŸå› ï¼Œè§£å†³åŠæ³•å¾ˆæ˜æ˜¾ï¼Œæ‰‹åŠ¨ç¼–å†™æƒ³è¦æŸ¥è¯¢çš„å­—æ®µï¼Œå¹¶ä¸”ä»¥æ•°æ®åº“ä¸­çš„å­—æ®µä¸ºæ ‡å‡†ï¼Œå¯ä»¥ç”¨åˆ«åæ›´æ”¹ä¸ºå±æ€§å.  <strong>ä½†æ˜¯</strong> ï¼Œè¿™ç§åŠæ³•è™½ç„¶ç®€å•ï¼Œä½†å¹¶ä¸ä¼˜é›….</p>
<p><strong>æ¥ä¸‹æ¥å°†ä»‹ç»ä¸€ç§ä¼˜é›…çš„è§£æ³•</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--idåéœ€è¦è¦å”¯ä¸€æ€§ï¼Œtypeå±æ€§è¦ä½¿ç”¨å®Œå…¨é™å®šç±»åæˆ–è€…åˆ«å,typeä¸ºå“ªä¸ªå–å†³äºä½ éœ€è¦æŸ¥è¯¢çš„å®ä½“ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- idä¸ºä¸»é”® --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--resultMapç»“æœé›†æ˜ å°„--&gt;</span>                  </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">  select id , name , pwd from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>å¦‚æœå®ä½“ç±»å±æ€§ä¸­æœ‰è‡ªå®šä¹‰å¼•ç”¨æ•°æ®ç±»å‹æˆ–è€…é›†åˆï¼Œéœ€è¦ç”¨åˆ°å…¶å®ƒæ ‡ç­¾.</p>
<ul>
<li>è‡ªå®šä¹‰å¼•ç”¨æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StuTea&quot;</span> <span class="attr">type</span>=<span class="string">&quot;pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--propertyä¸º resultMapä¸­typeæŒ‡å®šçš„å®ä½“ç±»ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹å˜é‡å--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--javaType ä¸ºå¯¹åº”çš„å®ä½“ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>é›†åˆ</li>
</ul>
<p>å®ä½“ç±»å¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Score</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer stId;</span><br><span class="line">    <span class="keyword">private</span> Integer stMath;</span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">School</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer classNo;</span><br><span class="line">    <span class="keyword">private</span> String className;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Score&gt; scoreList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;baseResultMap01&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.School&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;class_no&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;classNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;class_name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">		property å…³è”å±æ€§, ä¸ºå®ä½“å¯¹è±¡ä¸­çš„é›†åˆ</span></span><br><span class="line"><span class="comment">		javaType å…³è”å±æ€§çš„ç±»å‹, é›†åˆçš„ç±»å‹, ä¸€èˆ¬æ˜¯ArrayList</span></span><br><span class="line"><span class="comment">		association å…³è”å±æ€§			</span></span><br><span class="line"><span class="comment">		ofType éœ€è¦æ˜ å°„çš„pojoå®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;list&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">ofType</span>=<span class="string">&quot;com.itheima.domain.Score&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;st_id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;st_math&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stMath&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¡Log4jæ—¥å¿—å®ç°"><a href="#ğŸ¡Log4jæ—¥å¿—å®ç°" class="headerlink" title="ğŸ¡Log4jæ—¥å¿—å®ç°"></a>ğŸ¡Log4jæ—¥å¿—å®ç°</h1><p><strong>ç®€ä»‹ï¼š</strong></p>
<ul>
<li>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®</li>
<li>é€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ï¼šæ§åˆ¶å°ï¼Œæ–‡æœ¬ï¼ŒGUIç»„ä»¶â€¦.</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p>1ã€å¯¼å…¥log4jçš„åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®æ–‡ä»¶ç¼–å†™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span><br><span class="line">log4j.rootLogger=DEBUG,console,file</span><br><span class="line"></span><br><span class="line">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="line">log4j.appender.console = org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.console.Target = System.out</span><br><span class="line">log4j.appender.console.Threshold=DEBUG</span><br><span class="line">log4j.appender.console.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=[%c]-%m%n</span><br><span class="line"></span><br><span class="line">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="line">log4j.appender.file = org.apache.log4j.RollingFileAppender</span><br><span class="line">log4j.appender.file.File=./log/kuang.log</span><br><span class="line">log4j.appender.file.MaxFileSize=10mb</span><br><span class="line">log4j.appender.file.Threshold=DEBUG</span><br><span class="line">log4j.appender.file.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.file.layout.ConversionPattern=[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span><br><span class="line"></span><br><span class="line">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br><span class="line">log4j.logger.org.mybatis=DEBUG</span><br><span class="line">log4j.logger.java.sql=DEBUG</span><br><span class="line">log4j.logger.java.sql.Statement=DEBUG</span><br><span class="line">log4j.logger.java.sql.ResultSet=DEBUG</span><br><span class="line">log4j.logger.java.sql.PreparedStatement=DEBUG</span><br></pre></td></tr></table></figure>

<p>3ã€settingè®¾ç½®æ—¥å¿—å®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨ç¨‹åºä¸­ä½¿ç”¨Log4jè¿›è¡Œè¾“å‡ºï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„å¯¼åŒ…ï¼šorg.apache.log4j.Logger</span></span><br><span class="line"><span class="keyword">static</span> Logger logger = Logger.getLogger(MyTest.class);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   logger.info(<span class="string">&quot;infoï¼šè¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   logger.debug(<span class="string">&quot;debugï¼šè¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   logger.error(<span class="string">&quot;error: è¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">   List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">   <span class="keyword">for</span> (User user: users)&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼</p>
<ul>
<li>ä½¿ç”¨Log4j è¾“å‡ºæ—¥å¿—</li>
<li>å¯ä»¥çœ‹åˆ°è¿˜ç”Ÿæˆäº†ä¸€ä¸ªæ—¥å¿—çš„æ–‡ä»¶ ã€éœ€è¦ä¿®æ”¹fileçš„æ—¥å¿—çº§åˆ«ã€‘</li>
</ul>
<h1 id="ğŸ§¨Limit-åˆ†é¡µå¤„ç†"><a href="#ğŸ§¨Limit-åˆ†é¡µå¤„ç†" class="headerlink" title="ğŸ§¨Limit åˆ†é¡µå¤„ç†"></a>ğŸ§¨Limit åˆ†é¡µå¤„ç†</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">åŸæœ¬çš„æŸ¥è¯¢è¯­å¥å†™æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users limit startindex , number</span><br><span class="line"></span><br><span class="line">startindex è¡¨ç¤ºèµ·å§‹ä½ç½®çš„å‰ä¸€ä¸ª ä¾‹å¦‚ ï¼š startindex <span class="operator">=</span> <span class="number">5</span> ï¼Œnumber <span class="operator">=</span> <span class="number">2</span>é‚£ä¹ˆå°†è¾“å‡ºç¬¬å…­ä¸ª å’Œ ç¬¬ä¸ƒä¸ª æ•°æ® </span><br><span class="line">å¦‚æœåªæœ‰ä¸€ startindex è¡¨ç¤º [<span class="number">1</span>,startindex] çš„æ‰€æœ‰æ•°æ®</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>çŸ¥é“äº†åŸæœ¬çš„ <code>SQL</code> è¯­å¥å†™æ³•åï¼Œæ€è·¯å°±å¾ˆæ¸…æ™°äº† ï¼Œå¯ä»¥ä½¿ç”¨ Map æ¥å­˜å‚¨ ç›¸åº”çš„èµ·å§‹åæ ‡å’Œæ•°é‡ ï¼Œæ—¢ç„¶è¿›è¡Œåˆ†é¡µï¼Œé‚£ä¹ˆä¸å¦¨è¿›è¡Œä¸€ä¸‹ç®€å•çš„æ¨å¯¼ï¼Œå¯ä»¥çŸ¥é“ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">startindex = (currentpage - <span class="number">1</span>) * pagesize</span><br><span class="line">                 å½“å‰ç¬¬å‡ é¡µ     æ¯ä¸€é¡µæ•°æ®æœ‰å¤šå°‘ä¸ª</span><br><span class="line">    </span><br><span class="line">é‚£ä¹ˆåªéœ€è¦åœ¨Mapä¸­å­˜å‚¨ startindex å’Œ pagesize å³å¯å®ç°</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨<code>Java</code> ä»£ç è¿›è¡Œåˆ†é¡µå¤„ç†ï¼ˆä½†æ˜¯æœ‰ä¸€è¯´ä¸€æ¯”è¾ƒç¹çï¼‰æ¥ä¸‹æ¥è´´å‡ºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUserByRowBounds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">int</span> currentPage = <span class="number">2</span>;  <span class="comment">//ç¬¬å‡ é¡µ</span></span><br><span class="line">   <span class="keyword">int</span> pageSize = <span class="number">2</span>;  <span class="comment">//æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª</span></span><br><span class="line">   RowBounds rowBounds = <span class="keyword">new</span> RowBounds((currentPage-<span class="number">1</span>)*pageSize,pageSize);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€šè¿‡session.**æ–¹æ³•è¿›è¡Œä¼ é€’rowBoundsï¼Œ[æ­¤ç§æ–¹å¼ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†]</span></span><br><span class="line">   List&lt;User&gt; users = session.selectList(<span class="string">&quot;com.kuang.mapper.UserMapper.getUserByRowBounds&quot;</span>, <span class="keyword">null</span>, rowBounds);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (User user: users)&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘"><a href="#ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘" class="headerlink" title="ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘"></a>ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘</h1><p>åœ¨Mybatis 3 ä¸­æ–°å¢äº†æ³¨è§£çš„é…ç½®ï¼Œæ›´è¿›ä¸€æ­¥çš„æé«˜äº†å¼€å‘æ•ˆç‡è™½ç„¶æ²¡æœ‰æå‡å¾ˆå¤šï¼Œä½†æ˜¯çœŸçš„å¾ˆé¦™.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å¸¸è§çš„å››ä¸ªSQLçš„æ³¨è§£:</span><br><span class="line">	<span class="meta">@select(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@update(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@delete(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@insert(&quot;&quot;)</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ç®€å•çš„ <code>SQL</code> è¯­å¥å¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œè‡³äºå¤æ‚çš„<code>SQL</code>è¯­å¥ä¾æ—§ä½¿ç”¨ <code>Mapper.xml</code>æ˜ å°„æ–‡ä»¶.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from bjpowernode.users&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦å¢åŠ å¦‚ä¸‹æ³¨è§£ï¼Œå¯ä»¥åˆ æ‰æ˜ å°„æ–‡ä»¶ä¸­å¯¹åº”çš„<code>SQL</code>æ ‡ç­¾ï¼Œå…¶ä½™éƒ¨åˆ†ä¸å˜å³å¯ï¼Œå¦‚æœæ²¡æœ‰æ˜ å°„æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±åœ¨<code>config</code>æ–‡ä»¶ä¸­çš„æ˜ å°„æ–‡ä»¶æ³¨å†Œçš„å¼•å…¥æ–¹å¼æ”¹ä¸ºå®Œå…¨é™å®šç±»åå¼•å…¥.å…¶ä½™çš„è¯­å¥ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåœ¨æ­¤å°±ä¸ç»§ç»­èµ˜è¿°äº†.</p>
<h1 id="ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢"><a href="#ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢" class="headerlink" title="ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢"></a>ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢</h1><p>å…ˆç»™å‡ºè¡¨æ•°æ®ï¼š</p>
<p>è¡¨åï¼šStudent</p>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="student">



<p>è¡¨åï¼šTeacher</p>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class title="teacher">



<p>ç¼–å†™å®ä½“ç±»ï¼š</p>
<p>è¯¥æ³¨è§£ä¸º <code>lombockæ³¨è§£</code> ç»™å‡º <code>maven</code> åæ ‡</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å¤šå¯¹ä¸€</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span> <span class="comment">//GET,SET,ToStringï¼Œæœ‰å‚ï¼Œæ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="comment">//å¤šä¸ªå­¦ç”Ÿå¯ä»¥æ˜¯åŒä¸€ä¸ªè€å¸ˆï¼Œå³å¤šå¯¹ä¸€</span></span><br><span class="line">   <span class="keyword">private</span> Teacher teacher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   éœ€æ±‚ï¼šè·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">   æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">       1. è·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">       2. æ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID-&gt;è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">       3. æ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">           1. åšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šStudentTeacher</span></span><br><span class="line"><span class="comment">           2. StudentTeacherç»“æœé›†çš„ç±»å‹ä¸º Student</span></span><br><span class="line"><span class="comment">           3. å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚</span></span><br><span class="line"><span class="comment">              å¤šä¸ª [1,...ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=&gt; ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š</span></span><br><span class="line"><span class="comment">           4. æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">æ˜¾ç„¶å¯ä»¥ä½¿ç”¨è¿è¡¨æŸ¥è¯¢ å’Œ å­æŸ¥è¯¢ é¦–è¦æ¨èè¿è¡¨æŸ¥è¯¢.</span><br><span class="line">å­æŸ¥è¯¢:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--associationå…³è”å±æ€§ propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼</span></span><br><span class="line"><span class="comment">   associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">       column=&quot;&#123;key=value,key=value&#125;&quot;</span></span><br><span class="line"><span class="comment">       å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">      select * from teacher where id = #&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¿è¡¨æŸ¥è¯¢:</span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æŒ‰æŸ¥è¯¢ç»“æœåµŒå¥—å¤„ç†</span></span><br><span class="line"><span class="comment">æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">   1. ç›´æ¥æŸ¥è¯¢å‡ºç»“æœï¼Œè¿›è¡Œç»“æœé›†çš„æ˜ å°„</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span> &gt;</span></span><br><span class="line">      select s.id sid, s.name sname , t.name tname</span><br><span class="line">      from student s,teacher t</span><br><span class="line">      where s.tid = t.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--å…³è”å¯¹è±¡property å…³è”å¯¹è±¡åœ¨Studentå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>â€‹    </p>
<ul>
<li><strong>ä¸€å¯¹å¤š</strong></li>
</ul>
<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="comment">//ä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿ</span></span><br><span class="line">   <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  æ€è·¯:</span></span><br><span class="line"><span class="comment">      1. ä»å­¦ç”Ÿè¡¨å’Œè€å¸ˆè¡¨ä¸­æŸ¥å‡ºå­¦ç”Ÿidï¼Œå­¦ç”Ÿå§“åï¼Œè€å¸ˆå§“å</span></span><br><span class="line"><span class="comment">      2. å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ“ä½œåšç»“æœé›†æ˜ å°„</span></span><br><span class="line"><span class="comment">          1. é›†åˆçš„è¯ï¼Œä½¿ç”¨collectionï¼</span></span><br><span class="line"><span class="comment">              JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„</span></span><br><span class="line"><span class="comment">              JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</span></span><br><span class="line"><span class="comment">              ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">     select s.id sid, s.name sname , t.name tname, t.id tid</span><br><span class="line">     from student s,teacher t</span><br><span class="line">     where s.tid = t.id and t.id=#&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span>  <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>å¦‚æœSQLè¯­å¥å†™çš„å¥½ï¼Œå°±ç”¨è¿è¡¨æŸ¥è¯¢å°±è¡Œï¼ŒresultMap éœ€è¦ä¸éœ€è¦å–å†³äº å±æ€§åå’Œå­—æ®µåæ˜¯å¦å¯¹åº”</strong></p>
<h1 id="ğŸåŠ¨æ€SQL"><a href="#ğŸåŠ¨æ€SQL" class="headerlink" title="ğŸåŠ¨æ€SQL"></a>ğŸåŠ¨æ€SQL</h1><p>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼š<strong>åŠ¨æ€SQLæŒ‡çš„æ˜¯æ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ , ç”Ÿæˆä¸åŒçš„Sqlè¯­å¥.</strong></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">å®˜ç½‘æè¿°ï¼š</span><br><span class="line">MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ä¾¿æ˜¯å®ƒçš„åŠ¨æ€ <span class="keyword">SQL</span>ã€‚å¦‚æœä½ æœ‰ä½¿ç”¨ JDBC æˆ–å…¶å®ƒç±»ä¼¼æ¡†æ¶çš„ç»éªŒï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ <span class="keyword">SQL</span> è¯­å¥çš„ç—›è‹¦ã€‚ä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ <span class="keyword">SQL</span> è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</span><br><span class="line">è™½ç„¶åœ¨ä»¥å‰ä½¿ç”¨åŠ¨æ€ <span class="keyword">SQL</span> å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†æ­£æ˜¯ MyBatis æä¾›äº†å¯ä»¥è¢«ç”¨åœ¨ä»»æ„ <span class="keyword">SQL</span> æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ <span class="keyword">SQL</span> è¯­è¨€å¾—ä»¥æ”¹è¿›è¿™ç§æƒ…å½¢ã€‚</span><br><span class="line">åŠ¨æ€ <span class="keyword">SQL</span> å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ <span class="type">XML</span> çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis <span class="number">3</span> å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">  <span class="comment">-------------------------------</span></span><br><span class="line">  - <span class="keyword">if</span></span><br><span class="line">  - choose (<span class="keyword">when</span>, otherwise)</span><br><span class="line">  - trim (<span class="keyword">where</span>, <span class="keyword">set</span>)</span><br><span class="line">  - <span class="keyword">foreach</span></span><br><span class="line">  <span class="comment">-------------------------------</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹‹å‰å†™çš„ SQL è¯­å¥éƒ½æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤æ‚çš„ SQL è¯­å¥ï¼Œå¾€å¾€éœ€è¦æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥ SQL ï¼Œç¨å¾®ä¸æ³¨æ„ï¼Œç”±äºå¼•å·ï¼Œç©ºæ ¼ç­‰ç¼ºå¤±å¯èƒ½éƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦ä½¿ç”¨ mybatis åŠ¨æ€SQLï¼Œé€šè¿‡ if, choose, when, otherwise, trim, where, set, foreachç­‰æ ‡ç­¾ï¼Œå¯ç»„åˆæˆéå¸¸çµæ´»çš„SQLè¯­å¥ï¼Œä»è€Œåœ¨æé«˜ SQL è¯­å¥çš„å‡†ç¡®æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¤§å¤§æé«˜äº†å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚</p>
<hr>
<ul>
<li><strong>æä¾›æ ·è¡¨ï¼š</strong></li>
</ul>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class title="blog">

<p><img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/GitHub_Blog\myblog\source_drafts\Mybatiså…¥é—¨ï¼ˆäºŒï¼‰\3.png" alt="image-20210421222515645"></p>
<ul>
<li><strong>ç¼–å†™å®ä½“ç±»</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">private</span> String title;</span><br><span class="line">   <span class="keyword">private</span> String author;</span><br><span class="line">   <span class="keyword">private</span> Date createTime;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> views;</span><br><span class="line">   <span class="comment">//setï¼Œget....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç¼–å†™SQLè¯­å¥</strong></li>
</ul>
<blockquote>
<p>if è¯­å¥</p>
</blockquote>
<p><strong>éœ€æ±‚ï¼šæ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</strong></p>
<p>1ã€ç¼–å†™æ¥å£ç±»</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éœ€æ±‚1</span></span><br><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogIf</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚1ï¼š</span></span><br><span class="line"><span class="comment">æ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼</span></span><br><span class="line"><span class="comment">å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">select * from blog where title = #&#123;title&#125; and author = #&#123;author&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog where</span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		è¿™æ ·å†™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ author ç­‰äº nullï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where title=#&#123;title&#125;,ä½†æ˜¯å¦‚æœtitleä¸ºç©ºå‘¢ï¼Ÿé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where and author=#&#123;author&#125;ï¼Œè¿™æ˜¯é”™è¯¯çš„ SQL è¯­å¥ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ where è¯­å¥ï¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>Where</p>
</blockquote>
<p>ä¿®æ”¹ä¸Šé¢çš„SQLè¯­å¥ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">          title = #&#123;title&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">          and author = #&#123;author&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªâ€œwhereâ€æ ‡ç­¾ä¼šçŸ¥é“å¦‚æœå®ƒåŒ…å«çš„æ ‡ç­¾ä¸­æœ‰è¿”å›å€¼çš„è¯ï¼Œå®ƒå°±æ’å…¥ä¸€ä¸ªâ€˜whereâ€™ã€‚æ­¤å¤–ï¼Œå¦‚æœæ ‡ç­¾è¿”å›çš„å†…å®¹æ˜¯ä»¥AND æˆ–OR å¼€å¤´çš„ï¼Œåˆ™å®ƒä¼šå‰”é™¤æ‰ã€‚</strong></p>
<blockquote>
<p>Set</p>
</blockquote>
<p>åŒç†ï¼Œä¸Šé¢çš„å¯¹äºæŸ¥è¯¢ SQL è¯­å¥åŒ…å« where å…³é”®å­—ï¼Œå¦‚æœåœ¨è¿›è¡Œæ›´æ–°æ“ä½œçš„æ—¶å€™ï¼Œå«æœ‰ set å…³é”®è¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p>1ã€ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateBlog</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨æ„setæ˜¯ç”¨çš„é€—å·éš”å¼€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update blog</span><br><span class="line">     <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;,</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            author = #&#123;author&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>chooseè¯­å¥</p>
</blockquote>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ç”¨åˆ°æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåªæƒ³é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼ŒæŸ¥è¯¢æ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å³å¯ï¼Œä½¿ç”¨ choose æ ‡ç­¾å¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜ï¼Œç±»ä¼¼äº Java çš„ switch è¯­å¥</p>
<p>1ã€ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogChoose</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">                title = #&#123;title&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">              and author = #&#123;author&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">              and views = #&#123;views&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>SQLç‰‡æ®µ</p>
</blockquote>
<p>æœ‰æ—¶å€™å¯èƒ½æŸä¸ª sql è¯­å¥æˆ‘ä»¬ç”¨çš„ç‰¹åˆ«å¤šï¼Œä¸ºäº†å¢åŠ ä»£ç çš„é‡ç”¨æ€§ï¼Œç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä»£ç æŠ½å–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>æå–SQLç‰‡æ®µï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å¼•ç”¨SQLç‰‡æ®µï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<p>â‘ ã€æœ€å¥½åŸºäº å•è¡¨æ¥å®šä¹‰ sql ç‰‡æ®µï¼Œæé«˜ç‰‡æ®µçš„å¯é‡ç”¨æ€§</p>
<p>â‘¡ã€åœ¨ sql ç‰‡æ®µä¸­ä¸è¦åŒ…æ‹¬ where</p>
<blockquote>
<p>Foreach</p>
</blockquote>
<p>å°†æ•°æ®åº“ä¸­å‰ä¸‰ä¸ªæ•°æ®çš„idä¿®æ”¹ä¸º1,2,3ï¼›</p>
<p>éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦æŸ¥è¯¢ blog è¡¨ä¸­ id åˆ†åˆ«ä¸º1,2,3çš„åšå®¢ä¿¡æ¯</p>
<p>1ã€ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogForeach</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§</span></span><br><span class="line"><span class="comment">       item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">       open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       select * from blog where 1=1 and (id=1 or id=2 or id=3)</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span>  <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">          id=#&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶"><a href="#ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶"></a>ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶</h1><p>1ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ</p>
<ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li>
</ul>
<p>3ã€ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚</li>
</ul>
<blockquote>
<p>Mybatisç¼“å­˜</p>
</blockquote>
<ul>
<li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong></p>
</li>
<li><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸€çº§ç¼“å­˜</p>
</blockquote>
<p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š</p>
<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li>
</ul>
<blockquote>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</p>
</blockquote>
<p>1.ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç›´å¼€å¯çš„ï¼Œæˆ‘ä»¬å…³é—­ä¸äº†å®ƒï¼›</p>
<p>2.ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µï¼šæ²¡æœ‰ä½¿ç”¨åˆ°å½“å‰çš„ä¸€çº§ç¼“å­˜ï¼Œæ•ˆæœå°±æ˜¯ï¼Œè¿˜éœ€è¦å†å‘æ•°æ®åº“ä¸­å‘èµ·ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼</p>
<p>3.å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™ä¼šè‡ªåŠ¨æ¸…é™¤ç¼“å­˜</p>
<p>4.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‰‹åŠ¨æ¸…ç†ç¼“å­˜</span></span><br><span class="line">sqlsession.clearcache();</span><br></pre></td></tr></table></figure>







<blockquote>
<p>äºŒçº§ç¼“å­˜</p>
</blockquote>
<ul>
<li><p>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</p>
</li>
<li><p>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</p>
</li>
<li><p>å·¥ä½œæœºåˆ¶</p>
</li>
<li><ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li>
<li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä½¿ç”¨æ­¥éª¤</p>
</blockquote>
<p>1ã€å¼€å¯å…¨å±€ç¼“å­˜ ã€mybatis-config.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ï¼›ã€xxxMapper.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">å®˜æ–¹ç¤ºä¾‹=====&gt;æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span><br><span class="line">&lt;cache</span><br><span class="line"> eviction=&quot;FIFO&quot;</span><br><span class="line"> flushInterval=&quot;60000&quot;</span><br><span class="line"> size=&quot;512&quot;</span><br><span class="line"> readOnly=&quot;true&quot;/&gt;</span><br><span class="line">è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</span><br></pre></td></tr></table></figure>



<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</li>
<li>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
</ul>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/4.png" class title="circle">



<p><strong>æ³¨æ„ï¼šéƒ¨åˆ†å†…å®¹æ¬è‡ªç‹‚ç¥è¯´å…¬ä¼—å·æ–‡æ¡£ï¼Œç¼“å­˜éƒ¨åˆ†å…¶å®æœ¬èº«å¹¶ä¸æƒ³è®²ï¼Œç”¨åˆ°çš„å¹¶ä¸å¤šï¼Œä½†è¿˜æ˜¯äº†è§£ä¸€ä¸‹</strong></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring5(äºŒ)</title>
    <url>/2021/05/01/Spring5%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="âœŒè‡ªåŠ¨è£…é…"><a href="#âœŒè‡ªåŠ¨è£…é…" class="headerlink" title="âœŒè‡ªåŠ¨è£…é…"></a>âœŒè‡ªåŠ¨è£…é…</h1><p>&emsp;&emsp;å¯¹äºå®ä½“ç±»ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ <code>bean</code> æ ‡ç­¾è¿›è¡Œå±æ€§è£…é…ï¼Œå¯¹äºå¼•ç”¨æ•°æ®ç±»å‹æ¥è¯´ï¼Œè¿™æ ·çš„æ–¹å¼è¾ƒä¸ºç¹çï¼ŒSpringæä¾›äº†ä¸€ç§æ›´ä¸ºç®€å•çš„è£…é…æ–¹å¼â€”â€”<strong>è‡ªåŠ¨è£…é…</strong>.</p>
<p>â€‹        è‡ªåŠ¨è£…é…åˆ†ä¸ºä¸¤ç§ï¼Œä¸‹é¢å°†ä¸€ä¸€ä»‹ç»ï¼š</p>
<ul>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¢æ·»å±æ€§</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">autowireå±æ€§ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ä¼šæŒ‰ç…§ç»™å®šçš„æ–¹å¼åŒ¹é…åˆ°ç›¸åº”çš„å¯¹è±¡ä»è€Œè¿›è¡Œè£…é…ï¼š</span><br><span class="line">	byNameå®é™…ä¸Šå°±æ˜¯é€šè¿‡å±æ€§åçš„å°å†™å½¢å¼è¿›è¡ŒåŒ¹é…</span><br><span class="line">	byTypeå®é™…ä¸Šå°±æ˜¯é€šè¿‡å±æ€§çš„ç±»å‹è¿›è¡ŒåŒ¹é…,é…ç½®æ–‡ä»¶ä¸­ç±»å‹å¿…é¡»å”¯ä¸€</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Person&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span> /&gt;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Person&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>åˆ©ç”¨æ³¨è§£</li>
</ul>
<p>ä½¿ç”¨ä¹‹å‰éœ€è¦è¿›è¡Œç›¸å…³é…ç½®ï¼š</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">åœ¨é…ç½®æ–‡ä»¶beansæ ‡ç­¾ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</span><br><span class="line">xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line"></span><br><span class="line">ç›´æ¥æ·»åŠ åˆ°xlns:schemaLocationä¸­</span><br><span class="line">http:<span class="regexp">//</span>www.springframework.org<span class="regexp">/schema/</span>context</span><br><span class="line">http:<span class="regexp">//</span>www.springframework.org<span class="regexp">/schema/</span>context/spring-context.xsd</span><br><span class="line"></span><br><span class="line">å†æ·»åŠ å¦‚ä¸‹æ ‡ç­¾ï¼š</span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">1. @Autowired : å•ç‹¬ä½¿ç”¨ä¼šå…ˆæŒ‰ByTypeå»æ‰¾,æ‰¾ä¸åˆ°åˆ™æŒ‰Bynameå»æŸ¥æ‰¾(é»˜è®¤å–å½“å‰å±æ€§å)</span><br><span class="line">2. @Resource : æŒ‰ç…§å…ˆBynameå»æŸ¥æ‰¾åå†æŒ‰ByTypeæŸ¥æ‰¾</span><br><span class="line">3. @Qualifier : åœ¨ä½¿ç”¨@Autowireï¼ŒåŠ ä¸Š@Qualifier(â€œtestâ€)å¯ä»¥æŒ‡å®šByNameæ³¨å…¥å“ªä¸ªå¯¹è±¡</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;å…­å…­&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;66&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//    å½“required ä¸º false å¯ä»¥ç†è§£ä¸ºä¸éœ€è¦ å³è¯¥å±æ€§çš„å€¼å¯ä»¥ä¸ºç©º ä¹Ÿå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æ²¡æœ‰è¿™ä¸ªbeanå¯¹è±¡</span></span><br><span class="line"><span class="comment">//    Autowiredçš„å¯ä»¥å¸®åŠ©è‡ªåŠ¨åŒ¹é…è‡ªå®šä¹‰ç±» ï¼Œjavaè‡ªå¸¦çš„ç±»å’Œæ™®é€šçš„æ•°æ®ç±»å‹ä¸èƒ½ä½¿ç”¨</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="comment">//    Qualifierå¯ä»¥å¸®åŠ©Autowired æŒ‰ç…§idè¿›è¡Œé€‰æ‹©</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;address1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resourceå¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ï¼›</span></span><br><span class="line"><span class="comment">//    å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›</span></span><br><span class="line"><span class="comment">//    å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;cat1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š@Autowire(require = false)å¯ä»¥ç†è§£ä¸ºä¸éœ€è¦ å³è¯¥å±æ€§çš„å€¼å¯ä»¥ä¸ºç©º ä¹Ÿå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æ²¡æœ‰è¿™ä¸ªbeanå¯¹è±¡</strong></p>
<h1 id="ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘"></a>ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘</h1><p>åœ¨å­¦ä¹ äº†Mybatisåï¼Œæ„ˆå‘äº†è§£æ³¨è§£çš„ä¾¿åˆ©æ€§ï¼Œå½“ç„¶äº†ä¹Ÿè¿›è¡Œç›¸åº”çš„é…ç½®ï¼š</p>
<p>åªè¦åœ¨ä¸Šè¿°é…ç½®ä¸­æ·»åŠ ä¸€ä¸ªæ ‡ç­¾</p>
<p><code>&lt;context:component-scan base-package=&quot;åŒ…å&quot;/&gt;</code></p>
<p><strong>ç»™å‡ºä¸€äº›å¸¸ç”¨çš„æ³¨è§£</strong>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">1. @Autowired : å•ç‹¬ä½¿ç”¨ä¼šå…ˆæŒ‰ByTypeå»æ‰¾,æ‰¾ä¸åˆ°åˆ™æŒ‰Bynameå»æŸ¥æ‰¾(é»˜è®¤å–å½“å‰å±æ€§å)</span><br><span class="line">2. @Resource : æŒ‰ç…§å…ˆBynameå»æŸ¥æ‰¾åå†æŒ‰ByTypeæŸ¥æ‰¾</span><br><span class="line">3. @Qualifier : åœ¨ä½¿ç”¨@Autowireï¼ŒåŠ ä¸Š@Qualifier(â€œtestâ€)å¯ä»¥æŒ‡å®šBynameæ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼›</span><br><span class="line">4. @Component : ç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„beanæ ‡ç­¾</span><br><span class="line">5. @value : å¯ä»¥ç»™å±æ€§èµ‹å€¼</span><br><span class="line">6. @Repository : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™Daoå±‚æ³¨å†Œ</span><br><span class="line">7. @Service : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™serviceå±‚æ³¨å†Œ</span><br><span class="line">8. @Controller : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™controlå±‚æ³¨å†Œ</span><br><span class="line">9. @Scope : å¯ä»¥å®šä¹‰ä½œç”¨åŸŸï¼Œå•ä¾‹æˆ–è€…å…¶å®ƒç±»å‹ </span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ä¸€ä¸€è¿›è¡Œä»‹ç»ï¼š</p>
<blockquote>
<p>@Component</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="comment">//ç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ &lt;bean id = &quot;user&quot; class=&quot;å½“å‰ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;18&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å® <code>@Repositoryã€@Service ã€@Controller</code> çš„æ•ˆæœä¸ <code>@Component</code> çš„æ•ˆæœä¸€æ ·ï¼Œåªæ˜¯ç”¨çš„åœ°æ–¹ä¸ä¸€æ ·è€Œå·².</p>
<blockquote>
<p>@Scope</p>
</blockquote>
<p>åˆ†ä¸ºå•ä¾‹æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ï¼š</p>
<ul>
<li>å•ä¾‹æ¨¡å¼ï¼šæ— è®ºè·å–å¤šå°‘ä¸ªå¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li>
<li>åŸå‹æ¨¡å¼ï¼šæ— è®ºè·å–å¤šå°‘ä¸ªå¯¹è±¡éƒ½æŒ‡å‘ä¸åŒçš„å¯¹è±¡</li>
</ul>
<p><strong>è¿™æ ·ä»¥æ¥ï¼Œå¯ä»¥å°†Userä¸­çš„<code>Catã€Dog</code> åŒæ ·çš„ä½¿ç”¨ï¼Œå®Œå…¨å…å»äº†åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ›å»ºå¯¹è±¡çš„å·¥ä½œ</strong></p>
<h1 id="ğŸ­ä»£ç†æ¨¡å¼"><a href="#ğŸ­ä»£ç†æ¨¡å¼" class="headerlink" title="ğŸ­ä»£ç†æ¨¡å¼"></a>ğŸ­ä»£ç†æ¨¡å¼</h1><p>ä»£ç†æ¨¡å¼åˆ†ä¸ºä¿©ç§ï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†.</p>
<blockquote>
<h2 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h2></blockquote>
<p><strong>é™æ€ä»£ç†è§’è‰²åˆ†æ</strong></p>
<ul>
<li><p>æŠ½è±¡è§’è‰² : ä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°</p>
</li>
<li><p>çœŸå®è§’è‰² : è¢«ä»£ç†çš„è§’è‰²</p>
</li>
<li><p>ä»£ç†è§’è‰² : ä»£ç†çœŸå®è§’è‰² ; ä»£ç†çœŸå®è§’è‰²å , ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œ .</p>
</li>
<li><p>å®¢æˆ·  :  ä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ .</p>
</li>
</ul>
<p><strong>ä»£ç å®ç°</strong></p>
<p>Rent . java å³æŠ½è±¡è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Host . java å³çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ¿å±‹å‡ºç§Ÿ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Proxy . java å³ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»£ç†è§’è‰²ï¼šä¸­ä»‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Host host;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Proxy</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Proxy</span><span class="params">(Host host)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.host = host;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç§Ÿæˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>&#123;</span><br><span class="line">       seeHouse();</span><br><span class="line">       host.rent();</span><br><span class="line">       fare();</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seeHouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;å¸¦æˆ¿å®¢çœ‹æˆ¿&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fare</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Client . java å³å®¢æˆ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//æˆ¿ä¸œè¦ç§Ÿæˆ¿</span></span><br><span class="line">       Host host = <span class="keyword">new</span> Host();</span><br><span class="line">       <span class="comment">//ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ</span></span><br><span class="line">       Proxy proxy = <span class="keyword">new</span> Proxy(host);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä½ å»æ‰¾ä¸­ä»‹ï¼</span></span><br><span class="line">       proxy.rent();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­é€šè¿‡ä»£ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼.</p>
<p><strong>é™æ€ä»£ç†çš„å¥½å¤„:</strong></p>
<ul>
<li>å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .</li>
</ul>
<p>ç¼ºç‚¹ :</p>
<ul>
<li>ç±»å¤šäº† , å¤šäº†ä»£ç†ç±» , å·¥ä½œé‡å˜å¤§äº† . å¼€å‘æ•ˆç‡é™ä½ .</li>
</ul>
<p>æˆ‘ä»¬æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥ , å°±æœ‰äº†åŠ¨æ€ä»£ç† !</p>
<blockquote>
<h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2></blockquote>
<ul>
<li><p>åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†çš„ä¸€æ · .</p>
</li>
<li><p>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ . é™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„</p>
</li>
<li><p>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±» : ä¸€ç±»æ˜¯åŸºäºæ¥å£åŠ¨æ€ä»£ç† , ä¸€ç±»æ˜¯åŸºäºç±»çš„åŠ¨æ€ä»£ç†</p>
</li>
<li><ul>
<li>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†â€”-JDKåŠ¨æ€ä»£ç†</li>
<li>åŸºäºç±»çš„åŠ¨æ€ä»£ç†â€“cglib</li>
<li>ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ <code>javasist</code> æ¥ç”ŸæˆåŠ¨æ€ä»£ç† . ç™¾åº¦ä¸€ä¸‹<code>javasist</code></li>
<li>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨JDKçš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ã€</li>
</ul>
</li>
</ul>
<p><strong>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»</strong></p>
<p>æ ¸å¿ƒ : <code>InvocationHandler</code>   å’Œ   <code>Proxy</code>  ï¼Œ æ‰“å¼€JDKå¸®åŠ©æ–‡æ¡£çœ‹çœ‹</p>
<p>ã€<code>InvocationHandler</code>ï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, æ–¹æ³• method, Object[] args)</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="comment">//å‚æ•°</span></span></span><br><span class="line"><span class="function"><span class="comment">//proxy - è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹</span></span></span><br><span class="line"><span class="function"><span class="comment">//method -æ‰€è¿°æ–¹æ³•å¯¹åº”äºè°ƒç”¨ä»£ç†å®ä¾‹ä¸Šçš„æ¥å£æ–¹æ³•çš„å®ä¾‹ã€‚æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯è¯¥æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯ä»£ç†ç±»ç»§æ‰¿è¯¥æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…çº§æ¥å£ã€‚</span></span></span><br><span class="line"><span class="function"><span class="comment">//args -åŒ…å«çš„æ–¹æ³•è°ƒç”¨ä¼ é€’ä»£ç†å®ä¾‹çš„å‚æ•°å€¼çš„å¯¹è±¡çš„é˜µåˆ—ï¼Œæˆ–nullå¦‚æœæ¥å£æ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…å™¨ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean ã€‚</span></span></span><br></pre></td></tr></table></figure>

<p>ã€Proxy  : ä»£ç†ã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">                                 rent.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä»£ç å®ç°</strong> </p>
<p>æŠ½è±¡è§’è‰²å’ŒçœŸå®è§’è‰²å’Œä¹‹å‰çš„ä¸€æ ·ï¼</p>
<p>Rent . java å³æŠ½è±¡è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Host . java å³çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ¿å±‹å‡ºç§Ÿ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ProxyInvocationHandler. java </code>å³ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Rent rent;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRent</span><span class="params">(Rent rent)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.rent = rent;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç”Ÿæˆä»£ç†ç±»ï¼Œé‡ç‚¹æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·å–è¦ä»£ç†çš„æŠ½è±¡è§’è‰²ï¼ä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªè§’è‰²ï¼Œç°åœ¨å¯ä»¥ä»£ç†ä¸€ç±»è§’è‰²</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">               rent.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// proxy : ä»£ç†ç±» method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡.</span></span><br><span class="line">   <span class="comment">// å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> throwsThrowable </span>&#123;</span><br><span class="line">       seeHouse();</span><br><span class="line">       <span class="comment">//æ ¸å¿ƒï¼šæœ¬è´¨åˆ©ç”¨åå°„å®ç°ï¼</span></span><br><span class="line">       Object result = method.invoke(rent, args);</span><br><span class="line">       fare();</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seeHouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;å¸¦æˆ¿å®¢çœ‹æˆ¿&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fare</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Client . java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç§Ÿå®¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">       Host host = <span class="keyword">new</span> Host();</span><br><span class="line">       <span class="comment">//ä»£ç†å®ä¾‹çš„è°ƒç”¨å¤„ç†ç¨‹åº</span></span><br><span class="line">       ProxyInvocationHandler pih = <span class="keyword">new</span> ProxyInvocationHandler();</span><br><span class="line">       pih.setRent(host); <span class="comment">//å°†çœŸå®è§’è‰²æ”¾ç½®è¿›å»ï¼</span></span><br><span class="line">       Rent proxy = (Rent)pih.getProxy(); <span class="comment">//åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„ä»£ç†ç±»ï¼</span></span><br><span class="line">       proxy.rent();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒï¼š<strong>ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡ , ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼ã€</strong></p>
<blockquote>
<h3 id="åŠ¨æ€ä»£ç†çš„å¥½å¤„"><a href="#åŠ¨æ€ä»£ç†çš„å¥½å¤„" class="headerlink" title="åŠ¨æ€ä»£ç†çš„å¥½å¤„"></a>åŠ¨æ€ä»£ç†çš„å¥½å¤„</h3></blockquote>
<p>é™æ€ä»£ç†æœ‰çš„å®ƒéƒ½æœ‰ï¼Œé™æ€ä»£ç†æ²¡æœ‰çš„ï¼Œå®ƒä¹Ÿæœ‰ï¼</p>
<ul>
<li>å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼</li>
</ul>
<h1 id="ğŸ‡Spring-AOP"><a href="#ğŸ‡Spring-AOP" class="headerlink" title="ğŸ‡Spring AOP"></a>ğŸ‡Spring AOP</h1><p>&emsp;&emsp;æ„ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦é¢å‘åˆ‡å‘ï¼Ÿåœ¨ä¸šåŠ¡é€»è¾‘å·²ç»å®Œå–„çš„æƒ…å†µä¸‹ï¼Œå»ä¿®æ”¹æºä»£ç æ˜¯ååˆ†å±é™©çš„äº‹æƒ…ï¼Œäºæ˜¯æˆ‘éœ€è¦åœ¨å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæ’å…¥ä¸€ä¸ªåˆ‡é¢ï¼Œä»åˆ‡å…¥ç‚¹åˆ‡å…¥ï¼Œä½†ä¸å½±å“åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¹¶ä¸ä¼šæ¥è§¦åŸæœ‰é¡¹ç›®çš„æºä»£ç ï¼‰ï¼Œåªæ˜¯å¯¹å…¶è¿›è¡ŒåŠŸèƒ½å¢å¼ºä»¥åŠå®Œå–„.æé«˜äº†ä»£ç å¤ç”¨æ€§ä»¥åŠæ•ˆç‡.</p>
<p><strong>æ¥ä¸‹æ¥ä»‹ç»ç›¸å…³çš„æ¦‚å¿µï¼š</strong></p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ â€¦.</li>
<li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ– çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li>
<li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<p>ä½¿ç”¨ä¹‹å‰ä¾æ—§éœ€è¦è¿›è¡Œç›¸å…³é…ç½®:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›¸å…³ä¾èµ–ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š--&gt;</span></span><br><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/aop</span><br><span class="line">http://www.springframework.org/schema/aop/spring-aop.xsd</span><br></pre></td></tr></table></figure>





<p><strong>éœ€æ±‚ï¼šåœ¨æ‰€æœ‰æ–¹æ³•å‰åæ·»åŠ æ–¹æ³•å‰æ—¥å¿—ä»¥åŠæ–¹æ³•åæ—¥å¿—ï¼Ÿ</strong></p>
<blockquote>
<h2 id="ç¬¬ä¸€ç§å®ç°æ–¹å¼"><a href="#ç¬¬ä¸€ç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ç§å®ç°æ–¹å¼"></a>ç¬¬ä¸€ç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>ç”¨<code>Spring</code>æ¡†æ¶ä¸­æä¾›çš„ç±»è¿›è¡Œåˆ‡å…¥</strong>ï¼š</p>
<ul>
<li>æ¥å£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">select</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceIml</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Select===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Update===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Insert===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Delete===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•å‰æ—¥å¿—ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">log</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] objects, Object o)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(o.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•è¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•åæ—¥å¿—</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Afterlog</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•åæ—¥å¿—æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.UserServiceIml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;after&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Afterlog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;before&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.log&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸€: ç”¨springæ¡†æ¶ä¸­æä¾›çš„ç±»è¿›è¡Œåˆ‡å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å®šä¹‰åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äºä»¥ä¸Š<code>expression=&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</code>çš„è§£è¯»ï¼š</p>
<p>â€‹    <code>execution()</code> : æ‰§è¡Œçš„æ„æ€,</p>
<p>â€‹    ç¬¬ä¸€ä¸ª <code>*</code> : å¯¹åº”è¿”å›å€¼ç±»å‹ï¼Œ * è¡¨ç¤ºæ‰€æœ‰ç±»å‹</p>
<p>â€‹    åŒ…åï¼šéœ€è¦å®ç°ç±»çš„å…¨é™å®šç±»å</p>
<p>â€‹    ç±»ååçš„<code>.*</code> ï¼šè¡¨ç¤ºç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•</p>
<p>â€‹    æœ€åçš„<code>(..)</code> : è¡¨ç¤ºæ‰€æœ‰çš„å½¢å¼å‚æ•°</p>
<ul>
<li>æµ‹è¯•ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        UserDao userservice = context.getBean(<span class="string">&quot;userservice&quot;</span>, UserDao.class);</span><br><span class="line">        userservice.select();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h2 id="ç¬¬äºŒç§å®ç°æ–¹å¼"><a href="#ç¬¬äºŒç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬äºŒç§å®ç°æ–¹å¼"></a>ç¬¬äºŒç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>è‡ªå®šä¹‰å‰åæ–¹æ³•å®ç°</strong></p>
<ul>
<li>è‡ªå®šä¹‰ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;diy&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">diy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å‰æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•åæ‰§è¡Œ~~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ–¹å¼äºŒ:è‡ªå®šä¹‰å‰åæ–¹æ³•è¿›è¡Œå®ç°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>





<blockquote>
<h2 id="ç¬¬ä¸‰ç§å®ç°æ–¹å¼"><a href="#ç¬¬ä¸‰ç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ç§å®ç°æ–¹å¼"></a>ç¬¬ä¸‰ç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>åˆ©ç”¨æ³¨è§£å¢å¼ºç±»</strong></p>
<ul>
<li>æ³¨è§£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component(&quot;pointcut&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Annotationpointcut</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* jh.pojo.UserServiceIml.*(..) )&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œä¹‹å‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* jh.pojo.UserServiceIml.*(..) )&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œä¹‹å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¨ç¤ºç¯ç»• ï¼Œ åœ¨æœ€å‰é¢ä¸€ä¸ª å’Œ æœ€åé¢ä¸€ä¸ª</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰~~&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾å&quot;</span>+jp.getSignature());</span><br><span class="line">        Object proce = jp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">        System.out.println(proce);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<p><strong>è®°å¾—è®°å¾—å¼€å¯ç»„ä»¶æ‰«æå™¨</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ç¬¬ä¸‰ç§: å®ç°è‡ªå®šä¹‰æ³¨è§£å¢å¼ºå®ç°ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>ä¸ªäººæ¯”è¾ƒå–œæ¬¢ç¬¬ä¸€ç§ï¼Œæ­é…æ³¨è§£ä½¿ç”¨ï¼Œéå¸¸é¦™~ï¼Œç¬¬äºŒç§ä¹Ÿéå¸¸å¥½</strong></p>
<h1 id="ğŸ‰Spring-Mybatisæ•´åˆ"><a href="#ğŸ‰Spring-Mybatisæ•´åˆ" class="headerlink" title="ğŸ‰Spring-Mybatisæ•´åˆ"></a>ğŸ‰Spring-Mybatisæ•´åˆ</h1><p>å…ˆæä¾›ç›¸å…³ä¾èµ–ä»¥åŠé…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--è®©mavaenå¤„ç†xmlæ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>ç¼–å†™<code>Dao</code></p>
<ul>
<li>æ¥å£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»(æ•´åˆåå¿…é¡»è¦å†™è¿™ä¸ªç±»ä¸èƒ½åªç”¨æ˜ å°„æ–‡ä»¶)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSqlSession</span><span class="params">(SqlSession sqlSession)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sqlSession = sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSession.getMapper(UserMapper.class).getUserList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™æ˜ å°„æ–‡ä»¶è¦ä¸æ¥å£åŒå</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;jh.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userchange&quot;</span> <span class="attr">type</span>=<span class="string">&quot;jh.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userchange&quot;</span>&gt;</span></span><br><span class="line">        select * from users</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>ç¼–å†™å®ä½“ç±»User</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™Springé…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    sqlSessionFactoryå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:jh/Dao/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é€šè¿‡sqlSessionFactoryåˆ›å»ºsqlSession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/bjpowernode?serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;qwe123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.Dao.UserMapperImpl&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>æµ‹è¯•ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        UserMapper userMapper =(UserMapper) context.getBean(<span class="string">&quot;userMapper&quot;</span>);</span><br><span class="line">        List&lt;User&gt; list = userMapper.getUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸŠå£°æ˜ç¤ºäº‹ç‰©"><a href="#ğŸŠå£°æ˜ç¤ºäº‹ç‰©" class="headerlink" title="ğŸŠå£°æ˜ç¤ºäº‹ç‰©"></a>ğŸŠå£°æ˜ç¤ºäº‹ç‰©</h1><ul>
<li>é…ç½®æ–‡ä»¶ä¸­ç¼–å†™</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®å£°æ˜ç¤ºäº‹ç‰©--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ç»“åˆaopå®ç°äº‹ç‰©--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.Dao.* .*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring5</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(å››):åˆ¶ä½œWebç«¯éŸ³ä¹æ’­æ”¾å™¨</title>
    <url>/2021/09/09/Vue%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h1><p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211123172105378.png" alt="image-20211123172105378"></p>
<p><strong>åŠŸèƒ½ä¸€è§ˆ</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå•æ›²å¾ªç¯ã€éšæœºæ’­æ”¾ã€é¡ºåºå¾ªç¯</li>
<li>æ”¯æŒä¸Šä¸€é¦–ã€ä¸‹ä¸€é¦–åˆ‡æ¢</li>
<li>æ”¯æŒæµ·æŠ¥å¤„ç‚¹å‡»æš‚åœ</li>
<li>æ”¯æŒæ‹–åŠ¨è¿›åº¦æ¡æ¡ä»¶å½“å‰æ—¶é—´</li>
<li>æ”¯æŒéŸ³é‡æ¡çš„æ‹–åŠ¨æ”¹å˜éŸ³é‡</li>
<li>æ”¯æŒåˆ—è¡¨ä¸­ç‚¹å‡»åˆ‡æ¢ç›¸å¯¹åº”çš„æ­Œæ›²</li>
</ul>
<h1 id="lt-audio-gt-æ ‡ç­¾"><a href="#lt-audio-gt-æ ‡ç­¾" class="headerlink" title="&lt;audio/&gt;æ ‡ç­¾"></a><code>&lt;audio/&gt;</code>æ ‡ç­¾</h1><p>æ’­æ”¾éŸ³é¢‘éœ€è¦ä½¿ç”¨ç‰¹å®šçš„ <code>html</code>æ ‡ç­¾ï¼Œä¾‹å¦‚<code>video</code>ã€<code>audio</code>æ ‡ç­¾ï¼Œè¿™é‡Œåªè®¨è®ºä½¿ç”¨<code>audio</code>æ ‡ç­¾ï¼Œå› ä¸ºæˆ‘ç”¨çš„å°±æ˜¯<code>audio</code>æ ‡ç­¾.è¿™é‡Œä¹Ÿç»™å‡ºç›¸å…³çš„æ ‡ç­¾æ–‡æ¡£ï¼Œ<code>MDN Audio</code> æ ‡ç­¾æ–‡æ¡£[é“¾æ¥](<audio> - HTMLï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰ | MDN (mozilla.org))ï¼Œå¤§éƒ¨åˆ†å†…å®¹ä¹Ÿä»è¿™ä»½æ–‡æ¡£ä¸­å­¦ä¹ åˆ°çš„.</audio></p>
<h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><p>è¿™é‡Œåªåˆ—ä¸¾æ¯”è¾ƒå¸¸ç”¨çš„å±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>boolean</td>
<td>æ˜¯å¦å¼€å¯è‡ªåŠ¨æ’­æ”¾</td>
</tr>
<tr>
<td>controls</td>
<td></td>
<td>å£°æ˜äº†è¯¥å±æ€§ï¼Œæµè§ˆå™¨å°†æä¾›ä¸€ä¸ªåŒ…å«å£°éŸ³ï¼Œæ’­æ”¾è¿›åº¦ï¼Œæ’­æ”¾æš‚åœçš„æ§åˆ¶é¢æ¿ï¼Œè®©ç”¨æˆ·å¯ä»¥æ§åˆ¶éŸ³é¢‘çš„æ’­æ”¾</td>
</tr>
<tr>
<td>currentTime</td>
<td>double</td>
<td>è¯»å– <code>currentTime</code> å±æ€§å°†è¿”å›ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹å€¼ï¼Œç”¨ä»¥æ ‡æ˜ä»¥ç§’ä¸ºå•ä½çš„å½“å‰éŸ³é¢‘çš„æ’­æ”¾ä½ç½®</td>
</tr>
<tr>
<td>duration</td>
<td>double</td>
<td>éŸ³é¢‘åœ¨æ—¶é—´è½´ä¸­çš„æŒç»­æ—¶é—´ï¼ˆæ€»é•¿åº¦ï¼‰ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td>
</tr>
<tr>
<td>loop</td>
<td>boolean</td>
<td>å¾ªç¯æ’­æ”¾éŸ³é¢‘</td>
</tr>
<tr>
<td>muted</td>
<td>boolean</td>
<td>æ˜¯å¦é™éŸ³</td>
</tr>
<tr>
<td>preload</td>
<td>none | metadata | auto</td>
<td>é¢„åŠ è½½æ¨¡å¼ï¼Œå¯ä»¥åŠ è½½éŸ³é¢‘é•¿åº¦æˆ–è€…å®Œæ•´å†…å®¹</td>
</tr>
<tr>
<td>src</td>
<td>string</td>
<td>éŸ³é¢‘åœ°å€ï¼Œå¯ä»¥æ˜¯httpåœ°å€</td>
</tr>
<tr>
<td>volume</td>
<td>int</td>
<td>å£°éŸ³å¤§å°ï¼Œæœ€é«˜ä¸º 100</td>
</tr>
</tbody></table>
<h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><table>
<thead>
<tr>
<th>äº‹ä»¶å</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>play</td>
<td>æ’­æ”¾å¼€å§‹</td>
</tr>
<tr>
<td>pause</td>
<td>æ’­æ”¾åœæ­¢</td>
</tr>
<tr>
<td>timeupdate</td>
<td>å½“ currentTime æ—¶é—´æ›´æ–°</td>
</tr>
<tr>
<td>ended</td>
<td>æ’­æ”¾ç»“æŸæ—¶</td>
</tr>
<tr>
<td>volumechange</td>
<td>å£°éŸ³æ”¹å˜æ—¶</td>
</tr>
</tbody></table>
<h1 id="å¼€å‘æµç¨‹"><a href="#å¼€å‘æµç¨‹" class="headerlink" title="å¼€å‘æµç¨‹"></a>å¼€å‘æµç¨‹</h1><h2 id="åŸå‹å›¾è®¾è®¡"><a href="#åŸå‹å›¾è®¾è®¡" class="headerlink" title="åŸå‹å›¾è®¾è®¡"></a>åŸå‹å›¾è®¾è®¡</h2><p>åŸå…ˆå†™å‰ç«¯å®Œå…¨çº¯å‡­ç€æ„Ÿè§‰å†™ï¼Œè¾¹å†™è¾¹è°ƒï¼Œæ•ˆç‡ååˆ†ä½æ•ˆï¼Œåæ¥äº†è§£åˆ°åŸå‹å›¾è¿™ç§ä¸œè¥¿ï¼Œäºæ˜¯å°è¯•å…ˆç”»åŸå‹å›¾å†è¿›è¡Œå¼€å‘çš„æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥å®Œå…¨åˆ†ç¦»è®¾è®¡ä¸å¼€å‘ï¼Œä»å¼€å‘ä½“éªŒä¸Šæ¥è®²è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæˆ‘æ‰€è®¾è®¡çš„åŸå‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/img/image-20211123172128528.png" alt="image-20211123172128528"></p>
<p>å°±è¿˜åŸåº¦ä¸Šæ¥è®²ï¼Œè¿˜ç®—å¯ä»¥ï¼Œæ€»ä¹‹ï¼Œç¬¬ä¸€æ¬¡å°è¯•ä½¿ç”¨åŸå‹å›¾è¿˜ç®—æˆåŠŸ.</p>
<h2 id="é¡µé¢å¼€å‘"><a href="#é¡µé¢å¼€å‘" class="headerlink" title="é¡µé¢å¼€å‘"></a>é¡µé¢å¼€å‘</h2><p>é¡µé¢å¼€å‘è¿™éƒ¨åˆ†å°±ä¸è¯´äº†ï¼Œé‡‡ç”¨äº†<code>flex</code>å¸ƒå±€è¿›è¡Œå®ç°</p>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><h3 id="å•æ›²å¾ªç¯"><a href="#å•æ›²å¾ªç¯" class="headerlink" title="å•æ›²å¾ªç¯"></a>å•æ›²å¾ªç¯</h3><p>æ³¨æ„åˆ° <code>audio</code>å…·æœ‰<code>loop</code>å±æ€§ï¼Œå¯ä»¥é€šè¿‡å¸ƒå°”å€¼è¿›è¡Œè®¾ç½®ï¼Œå¹¶ä¸”åœ¨<code>ended</code>çš„äº‹ä»¶ä¸­åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºå•æ›²å¾ªç¯ï¼Œä»è€Œç¡®å®šæ˜¯å¦åˆ‡æ¢è‡³ä¸‹ä¸€é¦–ï¼Œå¦‚ä½•æ¥è§¦å•æ›²å¾ªç¯å‘¢ï¼Ÿç¬¬ä¸€ç§æ–¹å¼ï¼Œåˆ‡æ¢æ’­æ”¾æ¨¡å¼ï¼Œç¬¬äºŒç§æ–¹å¼ï¼Œç‚¹å‡»åˆ—è¡¨ä¸­çš„æ­Œæ›²åˆ‡æ¢æ­Œ(è¿™ä¸ªåœ°æ–¹å…¶å®æœ‰ç‚¹ä¸åˆç†ï¼Œä½†æ˜¯ä¸ºäº†å·æ‡’hhh)</p>
<h3 id="éšæœºæ’­æ”¾"><a href="#éšæœºæ’­æ”¾" class="headerlink" title="éšæœºæ’­æ”¾"></a>éšæœºæ’­æ”¾</h3><p>è¿™é‡Œä½¿ç”¨äº†éšæœºæ‰“ä¹±æ•°ç»„çš„ç®—æ³•ï¼Œå°†æ’­æ”¾åˆ—è¡¨æ‰“ä¹±ï¼Œç„¶åé¡ºåºæ’­æ”¾ï¼Œè¿™ä¹Ÿæ˜¯æ‰€è°“çš„ä¼ªéšæœºæ’­æ”¾ï¼Œäº‹å®ä¸Šï¼Œå¸‚é¢ä¸Šæ‰€æœ‰éŸ³ä¹æ’­æ”¾å™¨çš„éšæœºæ’­æ”¾éƒ½æ˜¯ä¼ªéšæœºï¼Œæ¯•ç«ŸçœŸçœŸçš„éšæœºæ˜¯ææœ‰å¯èƒ½ä¼šå‡ºç°é‡å¤æ’­æ”¾çš„ï¼Œç„¶è€Œç”¨æˆ·ä½“éªŒçš„è¯è¿™æ ·ä¸æ˜¯å¾ˆå¥½.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">shuffle</span>(<span class="params">arr</span>)</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> i = arr.length;</span><br><span class="line">     <span class="keyword">while</span> (i) &#123;</span><br><span class="line">       <span class="keyword">let</span> j = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * i--);</span><br><span class="line">       [arr[j], arr[i]] = [arr[i], arr[j]];</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">//æ‰“ä¹±å®Œæˆåå¼€å§‹ä»ç¬¬ä¸€é¦–æ’­æ”¾</span></span><br><span class="line">     <span class="built_in">this</span>.autoPlay()</span><br><span class="line">    <span class="comment">//å…³é—­å•æ›²å¾ªç¯</span></span><br><span class="line">     <span class="built_in">this</span>.forevered = <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="é¡ºåºæ’­æ”¾"><a href="#é¡ºåºæ’­æ”¾" class="headerlink" title="é¡ºåºæ’­æ”¾"></a>é¡ºåºæ’­æ”¾</h3><p>ç”±äºï¼Œåˆ—è¡¨æ­Œå•å’Œæ’­æ”¾æ­Œå•æˆ‘é‡‡ç”¨äº†ä¿©ä¸ªå˜é‡è¿›è¡Œå­˜å‚¨ï¼Œäºæ˜¯åªéœ€è¦å°†åˆ—è¡¨æ­Œå•å’Œæ’­æ”¾æ­Œå•è¿›è¡Œåˆå¹¶å³å¯ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨äº†<code>Object.assign</code>è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ•°ç»„åˆå¹¶</p>
<h3 id="æ—¶é—´æ¡"><a href="#æ—¶é—´æ¡" class="headerlink" title="æ—¶é—´æ¡"></a>æ—¶é—´æ¡</h3><p>ä½¿ç”¨äº†äº‹ä»¶  <code>timeupdate</code>ï¼Œä»¥åŠå±æ€§<code>currentTime</code>ã€<code>duration</code>ï¼Œå½“<code>currentTime</code>ï¼ŒåŒæ—¶æ›´æ–°è¿›åº¦æ¡ï¼Œæ‰€ç»‘å®šçš„å€¼ <code>curr</code>ï¼Œ<code>curr = (currentTime / duration ) * 100</code>ï¼Œå¯¹äºæ—¶é—´æ¡æ‹–åŠ¨/ç‚¹å‡»ï¼Œåˆ™é€šè¿‡ <code>curr</code>åè§£å‡º <code>currentTime</code>é‡æ–°èµ‹å€¼ç»™å±æ€§å€¼å³å¯ï¼Œå®Œæˆæ•ˆæœ.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">nextTime</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> lenght = <span class="built_in">this</span>.getAudio().duration</span><br><span class="line">  <span class="keyword">let</span> curr = <span class="built_in">this</span>.getAudio().currentTime</span><br><span class="line">  <span class="built_in">this</span>.getAudio().currentTime  = (<span class="built_in">this</span>.music.curr * lenght)/<span class="number">100</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">updateTime</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> lenght =<span class="built_in">this</span>.getAudio().duration</span><br><span class="line">  <span class="keyword">let</span> curr = <span class="built_in">this</span>.getAudio().currentTime</span><br><span class="line">  <span class="built_in">this</span>.music.curr = (curr / lenght ) * <span class="number">100</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="éŸ³é‡è°ƒèŠ‚"><a href="#éŸ³é‡è°ƒèŠ‚" class="headerlink" title="éŸ³é‡è°ƒèŠ‚"></a>éŸ³é‡è°ƒèŠ‚</h3><p>åŸç†å’Œæ—¶é—´æ¡çš„åŸç†å·®ä¸å¤šï¼Œå‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦æ£€æµ‹å€¼çš„æ‹–åŠ¨å˜åŒ–å°±å¯ä»¥äº†.</p>
<h3 id="åŒå‡»æ­Œå•æ’­æ”¾"><a href="#åŒå‡»æ­Œå•æ’­æ”¾" class="headerlink" title="åŒå‡»æ­Œå•æ’­æ”¾"></a>åŒå‡»æ­Œå•æ’­æ”¾</h3><p>å¦‚ä½•åˆ¤æ–­åŒå‡»ï¼Ÿä½¿ç”¨è®¡æ•°å™¨è¿›è¡Œè®°å½•ï¼Œå†åŠ ä¸Šå®šæ—¶å™¨ï¼Œåœ¨ä¸€å®šæ—¶é—´åæ¸…æ¥šè®¡æ•°å™¨å³å¯ï¼Œè¿™ä¸ªæ—¶é—´ä¸èƒ½å¤ªé•¿ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨çš„500msï¼Œä½“éªŒä¸‹æ¥æ„Ÿè§‰è¿˜ä¸é”™.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">changeMusic</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//é˜²æ­¢ç‚¹å‡»æ•°å¤§äº 2 </span></span><br><span class="line">  <span class="built_in">this</span>.clickNum %= <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">this</span>.clickNum += <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">this</span>.clickNum === <span class="number">2</span>)&#123;</span><br><span class="line">    <span class="built_in">this</span>.music.playIndex = index</span><br><span class="line">    <span class="built_in">this</span>.music.isActive = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">this</span>.order();</span><br><span class="line">    <span class="built_in">this</span>.autoPlay()</span><br><span class="line">    <span class="built_in">this</span>.clickNum = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.record()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">record</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.clickNum = <span class="number">0</span></span><br><span class="line">  &#125;,<span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;box&quot; ref&#x3D;&quot;box&quot; @click.stop&#x3D;&quot;controlVoice &#x3D; false&quot;&gt;</span><br><span class="line">      &lt;audio class&#x3D;&quot;music&quot; @timeupdate&#x3D;&quot;updateTime&quot;</span><br><span class="line">             id&#x3D;&quot;audio&quot;</span><br><span class="line">             ref&#x3D;&quot;music&quot;</span><br><span class="line">             :src&#x3D;&quot;playingList[music.playIndex].url&quot;</span><br><span class="line">             preload&#x3D;&quot;auto&quot;</span><br><span class="line">             muted&#x3D;&quot;muted&quot;</span><br><span class="line">             @ended&#x3D;&quot;ended()&quot; :loop&#x3D;&quot;forevered&quot;&gt;</span><br><span class="line">      &lt;&#x2F;audio&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;post&quot;&gt;</span><br><span class="line">            &lt;img :src&#x3D;&quot;playingList[music.playIndex].image&quot; style&#x3D;&quot;width: 100%; height: 100%; border-radius: 8px;&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;shadow&quot; @click&#x3D;&quot;stopMusic&quot;&gt;</span><br><span class="line">              &lt;svg v-if&#x3D;&quot;!isPlay&quot; style&#x3D;&quot;margin: 15px 15px&quot; t&#x3D;&quot;1630327886993&quot; class&#x3D;&quot;icon&quot; viewBox&#x3D;&quot;0 0 1024 1024&quot; version&#x3D;&quot;1.1&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; p-id&#x3D;&quot;25112&quot; width&#x3D;&quot;48&quot; height&#x3D;&quot;48&quot;&gt;&lt;path d&#x3D;&quot;M175.50336 138.24a40.96 40.96 0 1 1 81.92 0v747.52a40.96 40.96 0 0 1-81.92 0V138.24zM771.69664 138.24a40.96 40.96 0 1 1 81.92 0v747.52a40.96 40.96 0 1 1-81.92 0V138.24z&quot; fill&#x3D;&quot;#bfbfbf&quot; p-id&#x3D;&quot;25113&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;</span><br><span class="line">              &lt;div v-else class&#x3D;&quot;iconfont&quot; style&#x3D;&quot;font-size: 45px;margin: 8px 20px&quot;&gt;&amp;#xe600;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;info&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;name&quot;&gt;</span><br><span class="line">              &lt;span v-html&#x3D;&quot;playingList[music.playIndex].name&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123;playingList[music.playIndex].singer&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;verticle&quot; v-show &#x3D; &quot;controlVoice&quot;&gt;</span><br><span class="line">              &lt;el-slider</span><br><span class="line">                v-model&#x3D;&quot;music.voice&quot;</span><br><span class="line">                vertical</span><br><span class="line">                :show-tooltip&#x3D;&quot;false&quot;</span><br><span class="line">                height&#x3D;&quot;40px&quot;</span><br><span class="line">                @change&#x3D;&quot;changeVoice&quot;&gt;</span><br><span class="line">              &lt;&#x2F;el-slider&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;play&quot;&gt;</span><br><span class="line">              &lt;!--éŸ³é‡--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;margin-left: 12px&quot; @click.stop&#x3D;&quot;showVoice&quot;&gt;&amp;#xe67f;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--ä¸Šä¸€é¦–--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; @click.stop&#x3D;&quot;prev()&quot; &gt;&amp;#xe636;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--æ’­æ”¾&#x2F;åœæ­¢--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;font-size: 21px&quot; v-if&#x3D;&quot;!isPlay&quot; @click.stop&#x3D;&quot;stopMusic&quot;&gt;&amp;#xe606;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;font-size: 21px&quot; v-else @click.stop&#x3D;&quot;stopMusic&quot; &gt;&amp;#xe612;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--ä¸‹ä¸€é¦–--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; @click.stop&#x3D;&quot;next()&quot;&gt;&amp;#xe637;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--é¡ºåºæ’­æ”¾--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;font-size: 19px&quot; v-if&#x3D;&quot;isActive &#x3D;&#x3D;&#x3D; 0&quot; @click.stop&#x3D;&quot;changePattern()&quot; &gt;&amp;#xe802;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--å•æ›²å¾ªç¯--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;font-size: 19px&quot; v-if&#x3D;&quot;isActive &#x3D;&#x3D;&#x3D; 1&quot; @click.stop&#x3D;&quot;changePattern()&quot; &gt;&amp;#xe6e2;&lt;&#x2F;i&gt;</span><br><span class="line">              &lt;!--éšæœºæ’­æ”¾--&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;iconfont icons&quot; style&#x3D;&quot;font-size: 19px&quot; v-if&#x3D;&quot;isActive &#x3D;&#x3D;&#x3D; 2&quot; @click.stop&#x3D;&quot;changePattern()&quot; &gt;&amp;#xe6ae;&lt;&#x2F;i&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;dividerBox&quot;&gt;</span><br><span class="line">        &lt;el-slider class&#x3D;&quot;divide&quot; v-model&#x3D;&quot;music.curr&quot; :show-tooltip&#x3D;&quot;false&quot; @change&#x3D;&quot;nextTime()&quot;&gt;&lt;&#x2F;el-slider&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;music-list&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;song&quot; v-for&#x3D;&quot;(item , index) in songs&quot; :key&#x3D;&quot;index&quot; @click.stop&#x3D;&quot;changeMusic(index)&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;index&quot;&gt;&#123;&#123;index+1&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;song-name&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;song-singer&quot;&gt;&#123;&#123;item.singer&#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;index&quot;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isPlay: true,</span><br><span class="line">      isActive: 0,</span><br><span class="line">      isMouseDown: false,</span><br><span class="line">      clickNum: 0,</span><br><span class="line">      forevered: false,</span><br><span class="line">      controlVoice: false,</span><br><span class="line">      songs:[</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1330348068&#39;,</span><br><span class="line">          name: &#39;èµ·é£äº†&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p4.music.126.net&#x2F;UuyXioGw4lD8lFiDXQvpSg&#x3D;&#x3D;&#x2F;109951166006211207.jpg?param&#x3D;200y200&#39;,</span><br><span class="line">          singer: &#39;å´é’å³°&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1859245776&#39;,</span><br><span class="line">          name: &#39;STAY&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p1.music.126.net&#x2F;e5cvcdgeosDKTDrkTfZXnQ&#x3D;&#x3D;&#x2F;109951166155165682.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;The Kid LAROI&#x2F;Justin Bieber&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1308818967&#39;,</span><br><span class="line">          name: &#39;é£˜å‘åŒ—æ–¹&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p1.music.126.net&#x2F;D-mpVLLwMrA-hPu0QPYUNQ&#x3D;&#x3D;&#x2F;109951163551410648.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;é‚£å¾å…‹çƒ­-NW&#x2F;å°¤é•¿é–&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1381755293&#39;,</span><br><span class="line">          name: &#39;å±±æ¥‚æ ‘ä¹‹æ‹&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p2.music.126.net&#x2F;G00sAe86sPi5gFQyuJHU7A&#x3D;&#x3D;&#x2F;109951164260611202.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;ç¨‹ä½³ä½³&#39;,</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      playingList: [</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1330348068&#39;,</span><br><span class="line">          name: &#39;èµ·é£äº†&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p4.music.126.net&#x2F;UuyXioGw4lD8lFiDXQvpSg&#x3D;&#x3D;&#x2F;109951166006211207.jpg?param&#x3D;200y200&#39;,</span><br><span class="line">          singer: &#39;å´é’å³°&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1859245776&#39;,</span><br><span class="line">          name: &#39;STAY&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p1.music.126.net&#x2F;e5cvcdgeosDKTDrkTfZXnQ&#x3D;&#x3D;&#x2F;109951166155165682.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;The Kid LAROI&#x2F;Justin Bieber&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1308818967&#39;,</span><br><span class="line">          name: &#39;é£˜å‘åŒ—æ–¹&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p1.music.126.net&#x2F;D-mpVLLwMrA-hPu0QPYUNQ&#x3D;&#x3D;&#x2F;109951163551410648.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;é‚£å¾å…‹çƒ­-NW&#x2F;å°¤é•¿é–&#39;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: &#39;http:&#x2F;&#x2F;music.163.com&#x2F;song&#x2F;media&#x2F;outer&#x2F;url?id&#x3D;1381755293&#39;,</span><br><span class="line">          name: &#39;å±±æ¥‚æ ‘ä¹‹æ‹&#39;,</span><br><span class="line">          image: &#39;http:&#x2F;&#x2F;p2.music.126.net&#x2F;G00sAe86sPi5gFQyuJHU7A&#x3D;&#x3D;&#x2F;109951164260611202.jpg?param&#x3D;130y130&#39;,</span><br><span class="line">          singer: &#39;ç¨‹ä½³ä½³&#39;,</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      music: &#123;</span><br><span class="line">        curr: 0,</span><br><span class="line">        voice: 50,</span><br><span class="line">        playIndex: 0,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getAudio()&#123;</span><br><span class="line">      return document.getElementById(&quot;audio&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    changeVoice()&#123;</span><br><span class="line">      this.getAudio().volume &#x3D; this.music.voice &#x2F; 100;</span><br><span class="line">    &#125;,</span><br><span class="line">    changePattern()&#123;</span><br><span class="line">      this.isActive +&#x3D; 1;</span><br><span class="line">      this.isActive %&#x3D; 3;</span><br><span class="line">    &#125;,</span><br><span class="line">    showVoice()&#123;</span><br><span class="line">      this.controlVoice &#x3D; ! this.controlVoice;</span><br><span class="line">      let t &#x3D; setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">        this.controlVoice &#x3D; false</span><br><span class="line">      &#125;,5000)</span><br><span class="line">    &#125;,</span><br><span class="line">    shuffle(arr) &#123;</span><br><span class="line">      let i &#x3D; arr.length;</span><br><span class="line">      while (i) &#123;</span><br><span class="line">        let j &#x3D; Math.floor(Math.random() * i--);</span><br><span class="line">        [arr[j], arr[i]] &#x3D; [arr[i], arr[j]];</span><br><span class="line">      &#125;</span><br><span class="line">      this.autoPlay()</span><br><span class="line">      this.forevered &#x3D; false;</span><br><span class="line">    &#125;,</span><br><span class="line">    forever()&#123;</span><br><span class="line">      this.forevered &#x3D; true</span><br><span class="line">    &#125;,</span><br><span class="line">    nextTime()&#123;</span><br><span class="line">      let lenght &#x3D; this.getAudio().duration</span><br><span class="line">      let curr &#x3D; this.getAudio().currentTime</span><br><span class="line">      this.getAudio().currentTime  &#x3D; (this.music.curr * lenght)&#x2F;100</span><br><span class="line">    &#125;,</span><br><span class="line">    updateTime()&#123;</span><br><span class="line">      let lenght &#x3D;this.getAudio().duration</span><br><span class="line">      let curr &#x3D; this.getAudio().currentTime</span><br><span class="line">      this.music.curr &#x3D; (curr &#x2F; lenght ) * 100;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    order()&#123;</span><br><span class="line">      let temp &#x3D; this.songs;</span><br><span class="line">      Object.assign(this.playingList , temp)</span><br><span class="line">      this.forevered &#x3D; false;</span><br><span class="line">      this.autoPlay();</span><br><span class="line">    &#125;,</span><br><span class="line">    stopMusic()&#123;</span><br><span class="line">      this.isPlay &#x3D; !this.isPlay;</span><br><span class="line">      if(this.isPlay)&#123;</span><br><span class="line">        this.stop();</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        this.start()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    start()&#123;</span><br><span class="line">      this.getAudio().play()</span><br><span class="line">    &#125;,</span><br><span class="line">    stop()&#123;</span><br><span class="line">      this.getAudio().pause()</span><br><span class="line">    &#125;,</span><br><span class="line">    autoPlay()&#123;</span><br><span class="line">      setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">        this.getAudio().play()</span><br><span class="line">        this.isPlay &#x3D; false</span><br><span class="line">      &#125;,0)</span><br><span class="line">    &#125;,</span><br><span class="line">    ended()&#123;</span><br><span class="line">      if(this.isActive &#x3D;&#x3D;&#x3D; 1)&#123;</span><br><span class="line">        this.getAudio().play()</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        this.next();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    prev()&#123;</span><br><span class="line">      if(this.playIndex &lt;&#x3D; 0)&#123;</span><br><span class="line">        this.music.playIndex &#x3D; this.playingList.length</span><br><span class="line">      &#125;</span><br><span class="line">      this.playIndex -&#x3D; 1</span><br><span class="line">      this.autoPlay()</span><br><span class="line">    &#125;,</span><br><span class="line">    next()&#123;</span><br><span class="line">        this.music.playIndex +&#x3D; 1</span><br><span class="line">        this.music.playIndex %&#x3D; this.playingList.length</span><br><span class="line">        this.autoPlay()</span><br><span class="line">    &#125;,</span><br><span class="line">    changeMusic(index)&#123;</span><br><span class="line">      this.clickNum %&#x3D; 3;</span><br><span class="line">      this.clickNum +&#x3D; 1;</span><br><span class="line">      if(this.clickNum &#x3D;&#x3D;&#x3D; 2)&#123;</span><br><span class="line">        this.music.playIndex &#x3D; index</span><br><span class="line">        this.music.isActive &#x3D; 0;</span><br><span class="line">        this.order();</span><br><span class="line">        this.autoPlay()</span><br><span class="line">        this.clickNum &#x3D; 0;</span><br><span class="line">      &#125;</span><br><span class="line">      this.record()</span><br><span class="line">    &#125;,</span><br><span class="line">    record()&#123;</span><br><span class="line">      setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">        this.clickNum &#x3D; 0</span><br><span class="line">      &#125;,500)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch:&#123;</span><br><span class="line">    isActive: function ()&#123;</span><br><span class="line">      if(this.isActive &#x3D;&#x3D;&#x3D; 0)&#123;</span><br><span class="line">        this.order()</span><br><span class="line">      &#125;else if(this.isActive &#x3D;&#x3D;&#x3D; 1)&#123;</span><br><span class="line">        this.shuffle(this.playingList)</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        this.forever()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    music: function ()&#123;</span><br><span class="line">      this.$store.commit(&#123;</span><br><span class="line">        type: &quot;updateMusic&quot;,</span><br><span class="line">        music: this.music</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    if(this.$store.state.music.curr !&#x3D;&#x3D; 0)&#123;</span><br><span class="line">      Object.assign(this.music,this.$store.state.music)</span><br><span class="line">      console.log(this.music)</span><br><span class="line">      setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">        this.getAudio().play();</span><br><span class="line">      &#125;,100)</span><br><span class="line">    &#125;</span><br><span class="line">    this.music.voice &#x3D; this.getAudio().volume * 100;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.verticle &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 107px;</span><br><span class="line">  top: 23px;</span><br><span class="line">  &#x2F;deep&#x2F; .el-slider &#123;</span><br><span class="line">    .el-slider__runway &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .el-slider__bar&#123;</span><br><span class="line">      --antd-wave-shadow-color: #54FF9F !important;</span><br><span class="line">      background-color:#54FF9F;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .el-slider__button &#123;</span><br><span class="line">      background-color: #CAE1FF;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">  -webkit-user-select:none;</span><br><span class="line">  -moz-user-select:none;</span><br><span class="line">  -ms-user-select:none;</span><br><span class="line">  user-select:none;</span><br><span class="line">&#125;</span><br><span class="line">.box &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: 250px;</span><br><span class="line">  height: 300px;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">  z-index: 1000;</span><br><span class="line">  padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">.header &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  height: 92px;</span><br><span class="line">  width: 250px;</span><br><span class="line">  padding: 7px;</span><br><span class="line">  .shadow &#123;</span><br><span class="line">    display: none;</span><br><span class="line">    position: relative;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    top: -100%;</span><br><span class="line">    width: 80px;</span><br><span class="line">    height: 80px;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    opacity: .7;</span><br><span class="line">    background-color: #6E6E6E;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.post &#123;</span><br><span class="line">  width: 80px;</span><br><span class="line">  height: 80px;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  background-color: skyblue;</span><br><span class="line">&#125;</span><br><span class="line">.music &#123;</span><br><span class="line">  visibility: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.post:hover &#123;</span><br><span class="line">  .shadow &#123;</span><br><span class="line">    display: block;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;deep&#x2F; .el-slider__button&#123;</span><br><span class="line">      width: 7px;</span><br><span class="line">      height: 7px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dividerBox &#x2F;deep&#x2F; .el-slider__button-wrapper&#123;</span><br><span class="line">  display: none;</span><br><span class="line">  top: -6px;</span><br><span class="line">  height: 6px;</span><br><span class="line">&#125;</span><br><span class="line">.dividerBox &#x2F;deep&#x2F; .el-slider &#123;</span><br><span class="line">  height: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.dividerBox &#x2F;deep&#x2F; .el-slider__runway &#123;</span><br><span class="line">  margin: 3px 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dividerBox &#x2F;deep&#x2F; .el-slider__runway:hover .el-slider__button-wrapper &#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dividerBox &#x2F;deep&#x2F; .el-slider__bar &#123;</span><br><span class="line">  background-color: grey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.music-list &#123;</span><br><span class="line">  height: 204px;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding: 0 2px;</span><br><span class="line">  padding-top: 4px;</span><br><span class="line">  overflow: scroll;</span><br><span class="line">  .song &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    width: 240px;</span><br><span class="line">    height: 28px;</span><br><span class="line">    margin-left: auto;</span><br><span class="line">    margin-right: auto;</span><br><span class="line">    margin-top: 4.5px;</span><br><span class="line">    line-height: 28px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    border: 1px solid #DCDCDC;</span><br><span class="line">    box-shadow: 1px 1px .5px black;</span><br><span class="line">    span &#123;</span><br><span class="line">      display: block;</span><br><span class="line">    &#125;</span><br><span class="line">    .index &#123;</span><br><span class="line">      width: 10px;</span><br><span class="line">      margin-left: 3px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .song-name &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      margin-left: 30px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .song-singer &#123;</span><br><span class="line">      margin-left: 13px;</span><br><span class="line">      width: 80px;</span><br><span class="line">      white-space: nowrap;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .song:hover &#123;</span><br><span class="line">    background-color: #F0FFFF;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.info &#123;</span><br><span class="line">  &#x2F;&#x2F;position: absolute;</span><br><span class="line">  width: 151px;</span><br><span class="line">  height: 80px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">  .name &#123;</span><br><span class="line">    width: 151px;</span><br><span class="line">    height: 50px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    &#x2F;&#x2F;background-color: green;</span><br><span class="line">    span &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      width: 151px;</span><br><span class="line">      height: 18px;</span><br><span class="line">      margin-top: 5px;</span><br><span class="line">      white-space: nowrap;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      text-overflow: ellipsis;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .play &#123;</span><br><span class="line">    width: 151px;</span><br><span class="line">    height: 25px;</span><br><span class="line">    .icons &#123;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      margin-left: 10px;</span><br><span class="line">      font-size: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  width: 8px;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar:horizontal &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line"></span><br><span class="line">  background-color: #90d7ec;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(äº”):åŠ¨æ€è§„åˆ’(è½¬è½½)</title>
    <url>/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šæœ¬æ–‡è½¬è½½äº†labuladongå¤§ä½¬çš„ä¸€ç¯‡æ–‡ç« ï¼Œéå¸¸é€šä¿—æ˜“æ‡‚çš„è®²è§£äº†åŠ¨æ€è§„åˆ’çš„æ€æƒ³ä¸ä»£ç å®ç°ï¼Œäºæ˜¯è½¬è½½åˆ°äº†æœ¬åšå®¢</p>
<p>åŸæ–‡ç« åœ°å€ï¼š<a href="https://leetcode-cn.com/problems/fibonacci-number/solution/dong-tai-gui-hua-tao-lu-xiang-jie-by-labuladong/">åŸæ–‡åœ°å€</a> (ps:æˆ‘æ˜¯åœ¨leetcodeä¸Šåˆ·é¢˜çœ‹é¢˜è§£çœ‹åˆ°çš„)</p>
</blockquote>
<hr>
<h1 id="åŠ¨æ€è§„åˆ’æ¦‚è¿°"><a href="#åŠ¨æ€è§„åˆ’æ¦‚è¿°" class="headerlink" title="åŠ¨æ€è§„åˆ’æ¦‚è¿°"></a>åŠ¨æ€è§„åˆ’æ¦‚è¿°</h1><p>è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘ä»¬å·åŠå¹´å‰ä¸€ç¯‡ 200 å¤šèµèµçš„æˆåä¹‹ä½œã€ŒåŠ¨æ€è§„åˆ’è¯¦è§£ã€çš„è¿›é˜¶ç‰ˆã€‚ç”±äºè´¦å·è¿ç§»çš„åŸå› ï¼Œæ—§æ–‡æ— æ³•è¢«æœç´¢åˆ°ï¼Œæ‰€ä»¥æˆ‘æ¶¦è‰²äº†æœ¬æ–‡ï¼Œå¹¶æ·»åŠ äº†æ›´å¤šå¹²è´§å†…å®¹ï¼Œå¸Œæœ›æœ¬æ–‡æˆä¸ºè§£å†³åŠ¨æ€è§„åˆ’çš„ä¸€éƒ¨ã€ŒæŒ‡å¯¼æ–¹é’ˆã€ã€‚</p>
<p>åŠ¨æ€è§„åˆ’é—®é¢˜ï¼ˆDynamic Programmingï¼‰åº”è¯¥æ˜¯å¾ˆå¤šè¯»è€…å¤´ç–¼çš„ï¼Œä¸è¿‡è¿™ç±»é—®é¢˜ä¹Ÿæ˜¯æœ€å…·æœ‰æŠ€å·§æ€§ï¼Œæœ€æœ‰æ„æ€çš„ã€‚æœ¬ä¹¦ä½¿ç”¨äº†æ•´æ•´ä¸€ä¸ªç« èŠ‚ä¸“é—¨æ¥å†™è¿™ä¸ªç®—æ³•ï¼ŒåŠ¨æ€è§„åˆ’çš„é‡è¦æ€§ä¹Ÿå¯è§ä¸€æ–‘ã€‚</p>
<p>åˆ·é¢˜åˆ·å¤šäº†å°±ä¼šå‘ç°ï¼Œç®—æ³•æŠ€å·§å°±é‚£å‡ ä¸ªå¥—è·¯ï¼Œæˆ‘ä»¬åç»­çš„åŠ¨æ€è§„åˆ’ç³»åˆ—ç« èŠ‚ï¼Œéƒ½åœ¨ä½¿ç”¨æœ¬æ–‡çš„è§£é¢˜æ¡†æ¶æ€ç»´ï¼Œå¦‚æœä½ å¿ƒé‡Œæœ‰æ•°ï¼Œå°±ä¼šè½»æ¾å¾ˆå¤šã€‚æ‰€ä»¥æœ¬æ–‡æ”¾åœ¨ç¬¬ä¸€ç« ï¼Œæ¥æ‰’ä¸€æ‰’åŠ¨æ€è§„åˆ’çš„è£¤å­ï¼Œå½¢æˆä¸€å¥—è§£å†³è¿™ç±»é—®é¢˜çš„æ€ç»´æ¡†æ¶ï¼Œå¸Œæœ›èƒ½å¤Ÿæˆä¸ºè§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€éƒ¨æŒ‡å¯¼æ–¹é’ˆã€‚æœ¬æ–‡å°±æ¥è®²è§£è¯¥ç®—æ³•çš„åŸºæœ¬å¥—è·¯æ¡†æ¶ï¼Œä¸‹é¢ä¸Šå¹²è´§ã€‚</p>
<p>é¦–å…ˆï¼ŒåŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸€èˆ¬å½¢å¼å°±æ˜¯æ±‚æœ€å€¼ã€‚åŠ¨æ€è§„åˆ’å…¶å®æ˜¯è¿ç­¹å­¦çš„ä¸€ç§æœ€ä¼˜åŒ–æ–¹æ³•ï¼Œåªä¸è¿‡åœ¨è®¡ç®—æœºé—®é¢˜ä¸Šåº”ç”¨æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚è¯´è®©ä½ æ±‚æœ€é•¿é€’å¢å­åºåˆ—å‘€ï¼Œæœ€å°ç¼–è¾‘è·ç¦»å‘€ç­‰ç­‰ã€‚</p>
<p>æ—¢ç„¶æ˜¯è¦æ±‚æœ€å€¼ï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ±‚è§£åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒé—®é¢˜æ˜¯ç©·ä¸¾ã€‚å› ä¸ºè¦æ±‚æœ€å€¼ï¼Œè‚¯å®šè¦æŠŠæ‰€æœ‰å¯è¡Œçš„ç­”æ¡ˆç©·ä¸¾å‡ºæ¥ï¼Œç„¶ååœ¨å…¶ä¸­æ‰¾æœ€å€¼å‘—ã€‚</p>
<p>åŠ¨æ€è§„åˆ’è¿™ä¹ˆç®€å•ï¼Œå°±æ˜¯ç©·ä¸¾å°±å®Œäº‹äº†ï¼Ÿæˆ‘çœ‹åˆ°çš„åŠ¨æ€è§„åˆ’é—®é¢˜éƒ½å¾ˆéš¾å•Šï¼</p>
<p>é¦–å…ˆï¼ŒåŠ¨æ€è§„åˆ’çš„ç©·ä¸¾æœ‰ç‚¹ç‰¹åˆ«ï¼Œå› ä¸ºè¿™ç±»é—®é¢˜å­˜åœ¨ã€Œé‡å å­é—®é¢˜ã€ï¼Œå¦‚æœæš´åŠ›ç©·ä¸¾çš„è¯æ•ˆç‡ä¼šæå…¶ä½ä¸‹ï¼Œæ‰€ä»¥éœ€è¦ã€Œå¤‡å¿˜å½•ã€æˆ–è€…ã€ŒDP tableã€æ¥ä¼˜åŒ–ç©·ä¸¾è¿‡ç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—ã€‚</p>
<p>è€Œä¸”ï¼ŒåŠ¨æ€è§„åˆ’é—®é¢˜ä¸€å®šä¼šå…·å¤‡ã€Œæœ€ä¼˜å­ç»“æ„ã€ï¼Œæ‰èƒ½é€šè¿‡å­é—®é¢˜çš„æœ€å€¼å¾—åˆ°åŸé—®é¢˜çš„æœ€å€¼ã€‚</p>
<p>å¦å¤–ï¼Œè™½ç„¶åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç©·ä¸¾æ±‚æœ€å€¼ï¼Œä½†æ˜¯é—®é¢˜å¯ä»¥åƒå˜ä¸‡åŒ–ï¼Œç©·ä¸¾æ‰€æœ‰å¯è¡Œè§£å…¶å®å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œåªæœ‰åˆ—å‡º<strong>æ­£ç¡®çš„ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€</strong>æ‰èƒ½æ­£ç¡®åœ°ç©·ä¸¾ã€‚</p>
<p>ä»¥ä¸Šæåˆ°çš„é‡å å­é—®é¢˜ã€æœ€ä¼˜å­ç»“æ„ã€çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯åŠ¨æ€è§„åˆ’ä¸‰è¦ç´ ã€‚å…·ä½“ä»€ä¹ˆæ„æ€ç­‰ä¼šä¼šä¸¾ä¾‹è¯¦è§£ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç®—æ³•é—®é¢˜ä¸­ï¼Œå†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯æœ€å›°éš¾çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šæœ‹å‹è§‰å¾—åŠ¨æ€è§„åˆ’é—®é¢˜å›°éš¾çš„åŸå› ï¼Œæˆ‘æ¥æä¾›æˆ‘ç ”ç©¶å‡ºæ¥çš„ä¸€ä¸ªæ€ç»´æ¡†æ¶ï¼Œè¾…åŠ©ä½ æ€è€ƒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<p>æ˜ç¡® base case -&gt; æ˜ç¡®ã€ŒçŠ¶æ€ã€-&gt; æ˜ç¡®ã€Œé€‰æ‹©ã€ -&gt; å®šä¹‰ dp æ•°ç»„/å‡½æ•°çš„å«ä¹‰ã€‚</p>
<p>æŒ‰ä¸Šé¢çš„å¥—è·¯èµ°ï¼Œæœ€åçš„ç»“æœå°±å¯ä»¥å¥—è¿™ä¸ªæ¡†æ¶ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"># åˆå§‹åŒ– base <span class="keyword">case</span></span><br><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>][...] = base</span><br><span class="line"># è¿›è¡ŒçŠ¶æ€è½¬ç§»</span><br><span class="line"><span class="keyword">for</span> çŠ¶æ€<span class="number">1</span> in çŠ¶æ€<span class="number">1</span>çš„æ‰€æœ‰å–å€¼ï¼š</span><br><span class="line">    <span class="keyword">for</span> çŠ¶æ€<span class="number">2</span> in çŠ¶æ€<span class="number">2</span>çš„æ‰€æœ‰å–å€¼ï¼š</span><br><span class="line">        <span class="keyword">for</span> ...</span><br><span class="line">            dp[çŠ¶æ€<span class="number">1</span>][çŠ¶æ€<span class="number">2</span>][...] = æ±‚æœ€å€¼(é€‰æ‹©<span class="number">1</span>ï¼Œé€‰æ‹©<span class="number">2.</span>..)</span><br></pre></td></tr></table></figure>


<p>ä¸‹é¢é€šè¿‡æ–æ³¢é‚£å¥‘æ•°åˆ—é—®é¢˜å’Œå‡‘é›¶é’±é—®é¢˜æ¥è¯¦è§£åŠ¨æ€è§„åˆ’çš„åŸºæœ¬åŸç†ã€‚å‰è€…ä¸»è¦æ˜¯è®©ä½ æ˜ç™½ä»€ä¹ˆæ˜¯é‡å å­é—®é¢˜ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—æ²¡æœ‰æ±‚æœ€å€¼ï¼Œæ‰€ä»¥ä¸¥æ ¼æ¥è¯´ä¸æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜ï¼‰ï¼Œåè€…ä¸»è¦ä¸¾é›†ä¸­äºå¦‚ä½•åˆ—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</p>
<h1 id="æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>æ–æ³¢é‚£å¥‘æ•°åˆ—</h1><p>è¯·è¯»è€…ä¸è¦å«Œå¼ƒè¿™ä¸ªä¾‹å­ç®€å•ï¼Œåªæœ‰ç®€å•çš„ä¾‹å­æ‰èƒ½è®©ä½ æŠŠç²¾åŠ›å……åˆ†é›†ä¸­åœ¨ç®—æ³•èƒŒåçš„é€šç”¨æ€æƒ³å’ŒæŠ€å·§ä¸Šï¼Œè€Œä¸ä¼šè¢«é‚£äº›éšæ™¦çš„ç»†èŠ‚é—®é¢˜æçš„è«åå…¶å¦™ã€‚æƒ³è¦å›°éš¾çš„ä¾‹å­ï¼Œå†å²æ–‡ç« é‡Œæœ‰çš„æ˜¯ã€‚</p>
<h2 id="æš´åŠ›é€’å½’"><a href="#æš´åŠ›é€’å½’" class="headerlink" title="æš´åŠ›é€’å½’"></a>æš´åŠ›é€’å½’</h2><p>æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ•°å­¦å½¢å¼å°±æ˜¯é€’å½’çš„ï¼Œå†™æˆä»£ç å°±æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N == <span class="number">1</span> || N == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fib</span>(N - <span class="number">1</span>) + <span class="built_in">fib</span>(N - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¸ç”¨å¤šè¯´äº†ï¼Œå­¦æ ¡è€å¸ˆè®²é€’å½’çš„æ—¶å€™ä¼¼ä¹éƒ½æ˜¯æ‹¿è¿™ä¸ªä¸¾ä¾‹ã€‚æˆ‘ä»¬ä¹ŸçŸ¥é“è¿™æ ·å†™ä»£ç è™½ç„¶ç®€æ´æ˜“æ‡‚ï¼Œä½†æ˜¯ååˆ†ä½æ•ˆï¼Œä½æ•ˆåœ¨å“ªé‡Œï¼Ÿå‡è®¾ n = 20ï¼Œè¯·ç”»å‡ºé€’å½’æ ‘ï¼š</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/3.png" class>

<p>PSï¼šä½†å‡¡é‡åˆ°éœ€è¦é€’å½’çš„é—®é¢˜ï¼Œæœ€å¥½éƒ½ç”»å‡ºé€’å½’æ ‘ï¼Œè¿™å¯¹ä½ åˆ†æç®—æ³•çš„å¤æ‚åº¦ï¼Œå¯»æ‰¾ç®—æ³•ä½æ•ˆçš„åŸå› éƒ½æœ‰å·¨å¤§å¸®åŠ©ã€‚</p>
<p>è¿™ä¸ªé€’å½’æ ‘æ€ä¹ˆç†è§£ï¼Ÿå°±æ˜¯è¯´æƒ³è¦è®¡ç®—åŸé—®é¢˜ f(20)ï¼Œæˆ‘å°±å¾—å…ˆè®¡ç®—å‡ºå­é—®é¢˜ f(19) å’Œ f(18)ï¼Œç„¶åè¦è®¡ç®— f(19)ï¼Œæˆ‘å°±è¦å…ˆç®—å‡ºå­é—®é¢˜ f(18) å’Œ f(17)ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€åé‡åˆ° f(1) æˆ–è€… f(2) çš„æ—¶å€™ï¼Œç»“æœå·²çŸ¥ï¼Œå°±èƒ½ç›´æ¥è¿”å›ç»“æœï¼Œé€’å½’æ ‘ä¸å†å‘ä¸‹ç”Ÿé•¿äº†ã€‚</p>
<p>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ€ä¹ˆè®¡ç®—ï¼Ÿå°±æ˜¯ç”¨å­é—®é¢˜ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´ã€‚</p>
<p>é¦–å…ˆè®¡ç®—å­é—®é¢˜ä¸ªæ•°ï¼Œå³é€’å½’æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ã€‚æ˜¾ç„¶äºŒå‰æ ‘èŠ‚ç‚¹æ€»æ•°ä¸ºæŒ‡æ•°çº§åˆ«ï¼Œæ‰€ä»¥å­é—®é¢˜ä¸ªæ•°ä¸º O(2^n)ã€‚</p>
<p>ç„¶åè®¡ç®—è§£å†³ä¸€ä¸ªå­é—®é¢˜çš„æ—¶é—´ï¼Œåœ¨æœ¬ç®—æ³•ä¸­ï¼Œæ²¡æœ‰å¾ªç¯ï¼Œåªæœ‰ f(n - 1) + f(n - 2) ä¸€ä¸ªåŠ æ³•æ“ä½œï¼Œæ—¶é—´ä¸º O(1)ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºäºŒè€…ç›¸ä¹˜ï¼Œå³ O(2^n)ï¼ŒæŒ‡æ•°çº§åˆ«ï¼Œçˆ†ç‚¸ã€‚</p>
<p>è§‚å¯Ÿé€’å½’æ ‘ï¼Œå¾ˆæ˜æ˜¾å‘ç°äº†ç®—æ³•ä½æ•ˆçš„åŸå› ï¼šå­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œæ¯”å¦‚ f(18) è¢«è®¡ç®—äº†ä¸¤æ¬¡ï¼Œè€Œä¸”ä½ å¯ä»¥çœ‹åˆ°ï¼Œä»¥ f(18) ä¸ºæ ¹çš„è¿™ä¸ªé€’å½’æ ‘ä½“é‡å·¨å¤§ï¼Œå¤šç®—ä¸€éï¼Œä¼šè€—è´¹å·¨å¤§çš„æ—¶é—´ã€‚æ›´ä½•å†µï¼Œè¿˜ä¸æ­¢ f(18) è¿™ä¸€ä¸ªèŠ‚ç‚¹è¢«é‡å¤è®¡ç®—ï¼Œæ‰€ä»¥è¿™ä¸ªç®—æ³•åŠå…¶ä½æ•ˆã€‚</p>
<p>è¿™å°±æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜çš„ç¬¬ä¸€ä¸ªæ€§è´¨ï¼šé‡å å­é—®é¢˜ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æƒ³åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•"><a href="#å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•" class="headerlink" title="å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•"></a>å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•</h2><p>æ˜ç¡®äº†é—®é¢˜ï¼Œå…¶å®å°±å·²ç»æŠŠé—®é¢˜è§£å†³äº†ä¸€åŠã€‚å³ç„¶è€—æ—¶çš„åŸå› æ˜¯é‡å¤è®¡ç®—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€ ä¸€ä¸ªã€Œå¤‡å¿˜å½•ã€ï¼Œæ¯æ¬¡ç®—å‡ºæŸä¸ªå­é—®é¢˜çš„ç­”æ¡ˆååˆ«æ€¥ç€è¿”å›ï¼Œå…ˆè®°åˆ°ã€Œå¤‡å¿˜å½•ã€é‡Œå†è¿”å›ï¼›æ¯æ¬¡é‡åˆ°ä¸€ä¸ªå­é—®é¢˜å…ˆå»ã€Œå¤‡å¿˜å½•ã€é‡ŒæŸ¥ä¸€æŸ¥ï¼Œå¦‚æœå‘ç°ä¹‹å‰å·²ç»è§£å†³è¿‡è¿™ä¸ªé—®é¢˜äº†ï¼Œç›´æ¥æŠŠç­”æ¡ˆæ‹¿å‡ºæ¥ç”¨ï¼Œä¸è¦å†è€—æ—¶å»è®¡ç®—äº†ã€‚</p>
<p>ä¸€èˆ¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„å……å½“è¿™ä¸ªã€Œå¤‡å¿˜å½•ã€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰ï¼Œæ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// å¤‡å¿˜å½•å…¨åˆå§‹åŒ–ä¸º 0</span></span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">memo</span><span class="params">(N + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="comment">// è¿›è¡Œå¸¦å¤‡å¿˜å½•çš„é€’å½’</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">helper</span>(memo, N);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">helper</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; memo, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// base case </span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// å·²ç»è®¡ç®—è¿‡</span></span><br><span class="line">    <span class="keyword">if</span> (memo[n] != <span class="number">0</span>) <span class="keyword">return</span> memo[n];</span><br><span class="line">    memo[n] = <span class="built_in">helper</span>(memo, n - <span class="number">1</span>) + <span class="built_in">helper</span>(memo, n - <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> memo[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œç”»å‡ºé€’å½’æ ‘ï¼Œä½ å°±çŸ¥é“ã€Œå¤‡å¿˜å½•ã€åˆ°åº•åšäº†ä»€ä¹ˆã€‚</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/2.png" class>

<p>å®é™…ä¸Šï¼Œå¸¦ã€Œå¤‡å¿˜å½•ã€çš„é€’å½’ç®—æ³•ï¼ŒæŠŠä¸€æ£µå­˜åœ¨å·¨é‡å†—ä½™çš„é€’å½’æ ‘é€šè¿‡ã€Œå‰ªæã€ï¼Œæ”¹é€ æˆäº†ä¸€å¹…ä¸å­˜åœ¨å†—ä½™çš„é€’å½’å›¾ï¼Œæå¤§å‡å°‘äº†å­é—®é¢˜ï¼ˆå³é€’å½’å›¾ä¸­èŠ‚ç‚¹ï¼‰çš„ä¸ªæ•°ã€‚</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/1.png" class>

<p><strong>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ€ä¹ˆè®¡ç®—ï¼Ÿå°±æ˜¯ç”¨å­é—®é¢˜ä¸ªæ•°ä¹˜ä»¥è§£å†³ä¸€ä¸ªå­é—®é¢˜éœ€è¦çš„æ—¶é—´ã€‚</strong></p>
<p>å­é—®é¢˜ä¸ªæ•°ï¼Œå³å›¾ä¸­èŠ‚ç‚¹çš„æ€»æ•°ï¼Œç”±äºæœ¬ç®—æ³•ä¸å­˜åœ¨å†—ä½™è®¡ç®—ï¼Œå­é—®é¢˜å°±æ˜¯ f(1), f(2), f(3) â€¦ f(20)ï¼Œæ•°é‡å’Œè¾“å…¥è§„æ¨¡ n = 20 æˆæ­£æ¯”ï¼Œæ‰€ä»¥å­é—®é¢˜ä¸ªæ•°ä¸º O(n)ã€‚</p>
<p>è§£å†³ä¸€ä¸ªå­é—®é¢˜çš„æ—¶é—´ï¼ŒåŒä¸Šï¼Œæ²¡æœ‰ä»€ä¹ˆå¾ªç¯ï¼Œæ—¶é—´ä¸º O(1)ã€‚</p>
<p>æ‰€ä»¥ï¼Œæœ¬ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚æ¯”èµ·æš´åŠ›ç®—æ³•ï¼Œæ˜¯é™ç»´æ‰“å‡»ã€‚</p>
<p>è‡³æ­¤ï¼Œå¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•çš„æ•ˆç‡å·²ç»å’Œè¿­ä»£çš„åŠ¨æ€è§„åˆ’è§£æ³•ä¸€æ ·äº†ã€‚å®é™…ä¸Šï¼Œè¿™ç§è§£æ³•å’Œè¿­ä»£çš„åŠ¨æ€è§„åˆ’å·²ç»å·®ä¸å¤šäº†ï¼Œåªä¸è¿‡è¿™ç§æ–¹æ³•å«åšã€Œè‡ªé¡¶å‘ä¸‹ã€ï¼ŒåŠ¨æ€è§„åˆ’å«åšã€Œè‡ªåº•å‘ä¸Šã€ã€‚</p>
<p>å•¥å«ã€Œè‡ªé¡¶å‘ä¸‹ã€ï¼Ÿæ³¨æ„æˆ‘ä»¬åˆšæ‰ç”»çš„é€’å½’æ ‘ï¼ˆæˆ–è€…è¯´å›¾ï¼‰ï¼Œæ˜¯ä»ä¸Šå‘ä¸‹å»¶ä¼¸ï¼Œéƒ½æ˜¯ä»ä¸€ä¸ªè§„æ¨¡è¾ƒå¤§çš„åŸé—®é¢˜æ¯”å¦‚è¯´ f(20)ï¼Œå‘ä¸‹é€æ¸åˆ†è§£è§„æ¨¡ï¼Œç›´åˆ° f(1) å’Œ f(2) è¿™ä¸¤ä¸ª base caseï¼Œç„¶åé€å±‚è¿”å›ç­”æ¡ˆï¼Œè¿™å°±å«ã€Œè‡ªé¡¶å‘ä¸‹ã€ã€‚</p>
<p>å•¥å«ã€Œè‡ªåº•å‘ä¸Šã€ï¼Ÿåè¿‡æ¥ï¼Œæˆ‘ä»¬ç›´æ¥ä»æœ€åº•ä¸‹ï¼Œæœ€ç®€å•ï¼Œé—®é¢˜è§„æ¨¡æœ€å°çš„ f(1) å’Œ f(2) å¼€å§‹å¾€ä¸Šæ¨ï¼Œç›´åˆ°æ¨åˆ°æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆ f(20)ï¼Œè¿™å°±æ˜¯åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåŠ¨æ€è§„åˆ’ä¸€èˆ¬éƒ½è„±ç¦»äº†é€’å½’ï¼Œè€Œæ˜¯ç”±å¾ªç¯è¿­ä»£å®Œæˆè®¡ç®—ã€‚</p>
<h2 id="dp-æ•°ç»„çš„è¿­ä»£è§£æ³•"><a href="#dp-æ•°ç»„çš„è¿­ä»£è§£æ³•" class="headerlink" title="dp æ•°ç»„çš„è¿­ä»£è§£æ³•"></a>dp æ•°ç»„çš„è¿­ä»£è§£æ³•</h2><p>æœ‰äº†ä¸Šä¸€æ­¥ã€Œå¤‡å¿˜å½•ã€çš„å¯å‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªã€Œå¤‡å¿˜å½•ã€ç‹¬ç«‹å‡ºæ¥æˆä¸ºä¸€å¼ è¡¨ï¼Œå°±å«åš DP table å§ï¼Œåœ¨è¿™å¼ è¡¨ä¸Šå®Œæˆã€Œè‡ªåº•å‘ä¸Šã€çš„æ¨ç®—å²‚ä¸ç¾å“‰ï¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(N + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="comment">// base case</span></span><br><span class="line">    dp[<span class="number">1</span>] = dp[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= N; i++)</span><br><span class="line">        dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">return</span> dp[N];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/4.png" class>


<p>ç”»ä¸ªå›¾å°±å¾ˆå¥½ç†è§£äº†ï¼Œè€Œä¸”ä½ å‘ç°è¿™ä¸ª DP table ç‰¹åˆ«åƒä¹‹å‰é‚£ä¸ªã€Œå‰ªæã€åçš„ç»“æœï¼Œåªæ˜¯åè¿‡æ¥ç®—è€Œå·²ã€‚å®é™…ä¸Šï¼Œå¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•ä¸­çš„ã€Œå¤‡å¿˜å½•ã€ï¼Œæœ€ç»ˆå®Œæˆåå°±æ˜¯è¿™ä¸ª DP tableï¼Œæ‰€ä»¥è¯´è¿™ä¸¤ç§è§£æ³•å…¶å®æ˜¯å·®ä¸å¤šçš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ•ˆç‡ä¹ŸåŸºæœ¬ç›¸åŒã€‚</p>
<p>è¿™é‡Œï¼Œå¼•å‡ºã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€è¿™ä¸ªåè¯ï¼Œå®é™…ä¸Šå°±æ˜¯æè¿°é—®é¢˜ç»“æ„çš„æ•°å­¦å½¢å¼ï¼š</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/5.png" class>

<p>ä¸ºå•¥å«ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ï¼Ÿå…¶å®å°±æ˜¯ä¸ºäº†å¬èµ·æ¥é«˜ç«¯ã€‚ä½ æŠŠ f(n) æƒ³åšä¸€ä¸ªçŠ¶æ€<code> n</code>ï¼Œè¿™ä¸ªçŠ¶æ€ n æ˜¯ç”±çŠ¶æ€<code> n - 1</code> å’ŒçŠ¶æ€<code>n - 2</code>ç›¸åŠ è½¬ç§»è€Œæ¥ï¼Œè¿™å°±å«çŠ¶æ€è½¬ç§»ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼Œä¸Šé¢çš„å‡ ç§è§£æ³•ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œä¾‹å¦‚<code> return f(n - 1) + f(n - 2)ï¼Œdp[i] = dp[i - 1] + dp[i - 2]</code>ï¼Œä»¥åŠå¯¹å¤‡å¿˜å½•æˆ– DP table çš„åˆå§‹åŒ–æ“ä½œï¼Œéƒ½æ˜¯å›´ç»•è¿™ä¸ªæ–¹ç¨‹å¼çš„ä¸åŒè¡¨ç°å½¢å¼ã€‚å¯è§åˆ—å‡ºã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€çš„é‡è¦æ€§ï¼Œå®ƒæ˜¯è§£å†³é—®é¢˜çš„æ ¸å¿ƒã€‚è€Œä¸”å¾ˆå®¹æ˜“å‘ç°ï¼Œå…¶å®çŠ¶æ€è½¬ç§»æ–¹ç¨‹ç›´æ¥ä»£è¡¨ç€æš´åŠ›è§£æ³•ã€‚</p>
<p>åƒä¸‡ä¸è¦çœ‹ä¸èµ·æš´åŠ›è§£ï¼ŒåŠ¨æ€è§„åˆ’é—®é¢˜æœ€å›°éš¾çš„å°±æ˜¯å†™å‡ºè¿™ä¸ªæš´åŠ›è§£ï¼Œå³çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚åªè¦å†™å‡ºæš´åŠ›è§£ï¼Œä¼˜åŒ–æ–¹æ³•æ— éæ˜¯ç”¨å¤‡å¿˜å½•æˆ–è€… DP tableï¼Œå†æ— å¥¥å¦™å¯è¨€ã€‚</p>
<p>è¿™ä¸ªä¾‹å­çš„æœ€åï¼Œè®²ä¸€ä¸ªç»†èŠ‚ä¼˜åŒ–ã€‚ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°ï¼Œæ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå½“å‰çŠ¶æ€åªå’Œä¹‹å‰çš„ä¸¤ä¸ªçŠ¶æ€æœ‰å…³ï¼Œå…¶å®å¹¶ä¸éœ€è¦é‚£ä¹ˆé•¿çš„ä¸€ä¸ª DP table æ¥å­˜å‚¨æ‰€æœ‰çš„çŠ¶æ€ï¼Œåªè¦æƒ³åŠæ³•å­˜å‚¨ä¹‹å‰çš„ä¸¤ä¸ªçŠ¶æ€å°±è¡Œäº†ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒæŠŠç©ºé—´å¤æ‚åº¦é™ä¸º <code>O(1)</code>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">2</span> || n == <span class="number">1</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> prev = <span class="number">1</span>, curr = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = prev + curr;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> curr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæŠ€å·§å°±æ˜¯æ‰€è°“çš„ã€ŒçŠ¶æ€å‹ç¼©ã€ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°æ¯æ¬¡çŠ¶æ€è½¬ç§»åªéœ€è¦ DP table ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ç”¨çŠ¶æ€å‹ç¼©æ¥ç¼©å° DP table çš„å¤§å°ï¼Œåªè®°å½•å¿…è¦çš„æ•°æ®ï¼Œä¸Šè¿°ä¾‹å­å°±ç›¸å½“äºæŠŠDP table çš„å¤§å°ä» n ç¼©å°åˆ° 2ã€‚åç»­çš„åŠ¨æ€è§„åˆ’ç« èŠ‚ä¸­æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°è¿™æ ·çš„ä¾‹å­ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯æŠŠä¸€ä¸ªäºŒç»´çš„ DP table å‹ç¼©æˆä¸€ç»´ï¼Œå³æŠŠç©ºé—´å¤æ‚åº¦ä»<code>O(n^2)</code>å‹ç¼©åˆ° <code>O(n)</code>ã€‚</p>
<p>æœ‰äººä¼šé—®ï¼ŒåŠ¨æ€è§„åˆ’çš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€Œæœ€ä¼˜å­ç»“æ„ã€ï¼Œæ€ä¹ˆæ²¡æœ‰æ¶‰åŠï¼Ÿä¸‹é¢ä¼šæ¶‰åŠã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ä¸¥æ ¼æ¥è¯´ä¸ç®—åŠ¨æ€è§„åˆ’ï¼Œå› ä¸ºæ²¡æœ‰æ¶‰åŠæ±‚æœ€å€¼ï¼Œä»¥ä¸Šæ—¨åœ¨è¯´æ˜é‡å å­é—®é¢˜çš„æ¶ˆé™¤æ–¹æ³•ï¼Œæ¼”ç¤ºå¾—åˆ°æœ€ä¼˜è§£æ³•é€æ­¥æ±‚ç²¾çš„è¿‡ç¨‹ã€‚ä¸‹é¢ï¼Œçœ‹ç¬¬äºŒä¸ªä¾‹å­ï¼Œå‡‘é›¶é’±é—®é¢˜ã€‚</p>
<h1 id="å‡‘é›¶é’±é—®é¢˜"><a href="#å‡‘é›¶é’±é—®é¢˜" class="headerlink" title="å‡‘é›¶é’±é—®é¢˜"></a>å‡‘é›¶é’±é—®é¢˜</h1><p>å…ˆçœ‹ä¸‹é¢˜ç›®ï¼šç»™ä½  k ç§é¢å€¼çš„ç¡¬å¸ï¼Œé¢å€¼åˆ†åˆ«ä¸º c1, c2 â€¦ ckï¼Œæ¯ç§ç¡¬å¸çš„æ•°é‡æ— é™ï¼Œå†ç»™ä¸€ä¸ªæ€»é‡‘é¢ amountï¼Œé—®ä½ æœ€å°‘éœ€è¦å‡ æšç¡¬å¸å‡‘å‡ºè¿™ä¸ªé‡‘é¢ï¼Œå¦‚æœä¸å¯èƒ½å‡‘å‡ºï¼Œç®—æ³•è¿”å› -1 ã€‚ç®—æ³•çš„å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p>
<p>// coins ä¸­æ˜¯å¯é€‰ç¡¬å¸é¢å€¼ï¼Œamount æ˜¯ç›®æ ‡é‡‘é¢<br><code>int coinChange(int[] coins, int amount);</code><br>æ¯”å¦‚è¯´ k = 3ï¼Œé¢å€¼åˆ†åˆ«ä¸º 1ï¼Œ2ï¼Œ5ï¼Œæ€»é‡‘é¢ amount = 11ã€‚é‚£ä¹ˆæœ€å°‘éœ€è¦ 3 æšç¡¬å¸å‡‘å‡ºï¼Œå³ 11 = 5 + 5 + 1ã€‚</p>
<p>ä½ è®¤ä¸ºè®¡ç®—æœºåº”è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿæ˜¾ç„¶ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰è‚¯èƒ½çš„å‡‘ç¡¬å¸æ–¹æ³•éƒ½ç©·ä¸¾å‡ºæ¥ï¼Œç„¶åæ‰¾æ‰¾çœ‹æœ€å°‘éœ€è¦å¤šå°‘æšç¡¬å¸ã€‚</p>
<h2 id="æš´åŠ›é€’å½’-1"><a href="#æš´åŠ›é€’å½’-1" class="headerlink" title="æš´åŠ›é€’å½’"></a>æš´åŠ›é€’å½’</h2><p>é¦–å…ˆï¼Œè¿™ä¸ªé—®é¢˜æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå› ä¸ºå®ƒå…·æœ‰ã€Œæœ€ä¼˜å­ç»“æ„ã€çš„ã€‚è¦ç¬¦åˆã€Œæœ€ä¼˜å­ç»“æ„ã€ï¼Œå­é—®é¢˜é—´å¿…é¡»äº’ç›¸ç‹¬ç«‹ã€‚å•¥å«ç›¸äº’ç‹¬ç«‹ï¼Ÿä½ è‚¯å®šä¸æƒ³çœ‹æ•°å­¦è¯æ˜ï¼Œæˆ‘ç”¨ä¸€ä¸ªç›´è§‚çš„ä¾‹å­æ¥è®²è§£ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œå‡è®¾ä½ è€ƒè¯•ï¼Œæ¯é—¨ç§‘ç›®çš„æˆç»©éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚ä½ çš„åŸé—®é¢˜æ˜¯è€ƒå‡ºæœ€é«˜çš„æ€»æˆç»©ï¼Œé‚£ä¹ˆä½ çš„å­é—®é¢˜å°±æ˜¯è¦æŠŠè¯­æ–‡è€ƒåˆ°æœ€é«˜ï¼Œæ•°å­¦è€ƒåˆ°æœ€é«˜â€¦â€¦ ä¸ºäº†æ¯é—¨è¯¾è€ƒåˆ°æœ€é«˜ï¼Œä½ è¦æŠŠæ¯é—¨è¯¾ç›¸åº”çš„é€‰æ‹©é¢˜åˆ†æ•°æ‹¿åˆ°æœ€é«˜ï¼Œå¡«ç©ºé¢˜åˆ†æ•°æ‹¿åˆ°æœ€é«˜â€¦â€¦ å½“ç„¶ï¼Œæœ€ç»ˆå°±æ˜¯ä½ æ¯é—¨è¯¾éƒ½æ˜¯æ»¡åˆ†ï¼Œè¿™å°±æ˜¯æœ€é«˜çš„æ€»æˆç»©ã€‚</p>
<p>å¾—åˆ°äº†æ­£ç¡®çš„ç»“æœï¼šæœ€é«˜çš„æ€»æˆç»©å°±æ˜¯æ€»åˆ†ã€‚å› ä¸ºè¿™ä¸ªè¿‡ç¨‹ç¬¦åˆæœ€ä¼˜å­ç»“æ„ï¼Œâ€œæ¯é—¨ç§‘ç›®è€ƒåˆ°æœ€é«˜â€è¿™äº›å­é—®é¢˜æ˜¯äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœåŠ ä¸€ä¸ªæ¡ä»¶ï¼šä½ çš„è¯­æ–‡æˆç»©å’Œæ•°å­¦æˆç»©ä¼šäº’ç›¸åˆ¶çº¦ï¼Œæ•°å­¦åˆ†æ•°é«˜ï¼Œè¯­æ–‡åˆ†æ•°å°±ä¼šé™ä½ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™æ ·çš„è¯ï¼Œæ˜¾ç„¶ä½ èƒ½è€ƒåˆ°çš„æœ€é«˜æ€»æˆç»©å°±è¾¾ä¸åˆ°æ€»åˆ†äº†ï¼ŒæŒ‰åˆšæ‰é‚£ä¸ªæ€è·¯å°±ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚å› ä¸ºå­é—®é¢˜å¹¶ä¸ç‹¬ç«‹ï¼Œè¯­æ–‡æ•°å­¦æˆç»©æ— æ³•åŒæ—¶æœ€ä¼˜ï¼Œæ‰€ä»¥æœ€ä¼˜å­ç»“æ„è¢«ç ´åã€‚</p>
<p>å›åˆ°å‡‘é›¶é’±é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¯´å®ƒç¬¦åˆæœ€ä¼˜å­ç»“æ„å‘¢ï¼Ÿæ¯”å¦‚ä½ æƒ³æ±‚ amount = 11 æ—¶çš„æœ€å°‘ç¡¬å¸æ•°ï¼ˆåŸé—®é¢˜ï¼‰ï¼Œå¦‚æœä½ çŸ¥é“å‡‘å‡º amount = 10 çš„æœ€å°‘ç¡¬å¸æ•°ï¼ˆå­é—®é¢˜ï¼‰ï¼Œä½ åªéœ€è¦æŠŠå­é—®é¢˜çš„ç­”æ¡ˆåŠ ä¸€ï¼ˆå†é€‰ä¸€æšé¢å€¼ä¸º 1 çš„ç¡¬å¸ï¼‰å°±æ˜¯åŸé—®é¢˜çš„ç­”æ¡ˆã€‚å› ä¸ºç¡¬å¸çš„æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œæ‰€ä»¥å­é—®é¢˜ä¹‹é—´æ²¡æœ‰ç›¸äº’åˆ¶ï¼Œæ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚</p>
<p>PSï¼šå…³äºæœ€ä¼˜å­ç»“æ„çš„é—®é¢˜ï¼Œåæ–‡åŠ¨æ€è§„åˆ’ç­”ç–‘ç¯‡ è¿˜ä¼šå†ä¸¾ä¾‹æ¢è®¨ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ—¢ç„¶çŸ¥é“äº†è¿™æ˜¯ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå°±è¦æ€è€ƒå¦‚ä½•åˆ—å‡ºæ­£ç¡®çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Ÿ</p>
<p>1ã€ç¡®å®š base caseï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼Œæ˜¾ç„¶ç›®æ ‡é‡‘é¢ amount ä¸º 0 æ—¶ç®—æ³•è¿”å› 0ï¼Œå› ä¸ºä¸éœ€è¦ä»»ä½•ç¡¬å¸å°±å·²ç»å‡‘å‡ºç›®æ ‡é‡‘é¢äº†ã€‚</p>
<p>2ã€ç¡®å®šã€ŒçŠ¶æ€ã€ï¼Œä¹Ÿå°±æ˜¯åŸé—®é¢˜å’Œå­é—®é¢˜ä¸­ä¼šå˜åŒ–çš„å˜é‡ã€‚ç”±äºç¡¬å¸æ•°é‡æ— é™ï¼Œç¡¬å¸çš„é¢é¢ä¹Ÿæ˜¯é¢˜ç›®ç»™å®šçš„ï¼Œåªæœ‰ç›®æ ‡é‡‘é¢ä¼šä¸æ–­åœ°å‘ base case é è¿‘ï¼Œæ‰€ä»¥å”¯ä¸€çš„ã€ŒçŠ¶æ€ã€å°±æ˜¯ç›®æ ‡é‡‘é¢ amountã€‚</p>
<p>3ã€ç¡®å®šã€Œé€‰æ‹©ã€ï¼Œä¹Ÿå°±æ˜¯å¯¼è‡´ã€ŒçŠ¶æ€ã€äº§ç”Ÿå˜åŒ–çš„è¡Œä¸ºã€‚ç›®æ ‡é‡‘é¢ä¸ºä»€ä¹ˆå˜åŒ–å‘¢ï¼Œå› ä¸ºä½ åœ¨é€‰æ‹©ç¡¬å¸ï¼Œä½ æ¯é€‰æ‹©ä¸€æšç¡¬å¸ï¼Œå°±ç›¸å½“äºå‡å°‘äº†ç›®æ ‡é‡‘é¢ã€‚æ‰€ä»¥è¯´æ‰€æœ‰ç¡¬å¸çš„é¢å€¼ï¼Œå°±æ˜¯ä½ çš„ã€Œé€‰æ‹©ã€ã€‚</p>
<p>4ã€æ˜ç¡® dp å‡½æ•°/æ•°ç»„çš„å®šä¹‰ã€‚æˆ‘ä»¬è¿™é‡Œè®²çš„æ˜¯è‡ªé¡¶å‘ä¸‹çš„è§£æ³•ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€ä¸ªé€’å½’çš„ dp å‡½æ•°ï¼Œä¸€èˆ¬æ¥è¯´å‡½æ•°çš„å‚æ•°å°±æ˜¯çŠ¶æ€è½¬ç§»ä¸­ä¼šå˜åŒ–çš„é‡ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´åˆ°çš„ã€ŒçŠ¶æ€ã€ï¼›å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯é¢˜ç›®è¦æ±‚æˆ‘ä»¬è®¡ç®—çš„é‡ã€‚å°±æœ¬é¢˜æ¥è¯´ï¼ŒçŠ¶æ€åªæœ‰ä¸€ä¸ªï¼Œå³ã€Œç›®æ ‡é‡‘é¢ã€ï¼Œé¢˜ç›®è¦æ±‚æˆ‘ä»¬è®¡ç®—å‡‘å‡ºç›®æ ‡é‡‘é¢æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ dp å‡½æ•°ï¼š</p>
<p>dp(n) çš„å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ªç›®æ ‡é‡‘é¢ nï¼Œè¿”å›å‡‘å‡ºç›®æ ‡é‡‘é¢ n çš„æœ€å°‘ç¡¬å¸æ•°é‡ã€‚</p>
<p>ææ¸…æ¥šä¸Šé¢è¿™å‡ ä¸ªå…³é”®ç‚¹ï¼Œè§£æ³•çš„ä¼ªç å°±å¯ä»¥å†™å‡ºæ¥äº†ï¼š</p>
<p><strong>ä¼ªä»£ç æ¡†æ¶ï¼š</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">def <span class="title">coinChange</span><span class="params">(coins: List[<span class="keyword">int</span>], amount: <span class="keyword">int</span>)</span>:</span></span><br><span class="line"><span class="function">    # å®šä¹‰ï¼šè¦å‡‘å‡ºé‡‘é¢ nï¼Œè‡³å°‘è¦ dp(n) ä¸ªç¡¬å¸</span></span><br><span class="line"><span class="function">    def dp(n):</span></span><br><span class="line"><span class="function">        # åšé€‰æ‹©ï¼Œé€‰æ‹©éœ€è¦ç¡¬å¸æœ€å°‘çš„é‚£ä¸ªç»“æœ</span></span><br><span class="line"><span class="function">        for coin in coins:</span></span><br><span class="line"><span class="function">            res =</span> <span class="built_in">min</span>(res, <span class="number">1</span> + <span class="built_in">dp</span>(n - coin))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    # é¢˜ç›®è¦æ±‚çš„æœ€ç»ˆç»“æœæ˜¯ <span class="built_in">dp</span>(amount)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dp</span>(amount)</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®ä¼ªç ï¼Œæˆ‘ä»¬åŠ ä¸Š base case å³å¯å¾—åˆ°æœ€ç»ˆçš„ç­”æ¡ˆã€‚æ˜¾ç„¶ç›®æ ‡é‡‘é¢ä¸º 0 æ—¶ï¼Œæ‰€éœ€ç¡¬å¸æ•°é‡ä¸º 0ï¼›å½“ç›®æ ‡é‡‘é¢å°äº 0 æ—¶ï¼Œæ— è§£ï¼Œè¿”å› -1ï¼š</p>
<p>def coinChange(coins: List[int], amount: int):</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">def <span class="title">dp</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="function">    # base case</span></span><br><span class="line"><span class="function">    if n =</span>= <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">0</span>: <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    # æ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸ºæ­£æ— ç©·</span><br><span class="line">    res = float(&#x27;INF&#x27;)</span><br><span class="line">    <span class="keyword">for</span> coin in coins:</span><br><span class="line">        subproblem = <span class="built_in">dp</span>(n - coin)</span><br><span class="line">        # å­é—®é¢˜æ— è§£ï¼Œè·³è¿‡</span><br><span class="line">        <span class="keyword">if</span> subproblem == <span class="number">-1</span>: <span class="keyword">continue</span></span><br><span class="line">        res = <span class="built_in">min</span>(res, <span class="number">1</span> + subproblem)</span><br><span class="line"></span><br><span class="line">    return res if res != float(&#x27;INF&#x27;) else -1</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">dp</span>(amount)</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å…¶å®å·²ç»å®Œæˆäº†ï¼Œä»¥ä¸Šç®—æ³•å·²ç»æ˜¯æš´åŠ›è§£æ³•äº†ï¼Œä»¥ä¸Šä»£ç çš„æ•°å­¦å½¢å¼å°±æ˜¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/8.png" class>

<p>è‡³æ­¤ï¼Œè¿™ä¸ªé—®é¢˜å…¶å®å°±è§£å†³äº†ï¼Œåªä¸è¿‡éœ€è¦æ¶ˆé™¤ä¸€ä¸‹é‡å å­é—®é¢˜ï¼Œæ¯”å¦‚ amount = 11, coins = {1,2,5} æ—¶ç”»å‡ºé€’å½’æ ‘çœ‹çœ‹ï¼š</p>
<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/6.png" class>

<p>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æï¼šå­é—®é¢˜æ€»æ•° x æ¯ä¸ªå­é—®é¢˜çš„æ—¶é—´ã€‚</p>
<p>å­é—®é¢˜æ€»æ•°ä¸ºé€’å½’æ ‘èŠ‚ç‚¹ä¸ªæ•°ï¼Œè¿™ä¸ªæ¯”è¾ƒéš¾çœ‹å‡ºæ¥ï¼Œæ˜¯ O(n^k)ï¼Œæ€»ä¹‹æ˜¯æŒ‡æ•°çº§åˆ«çš„ã€‚æ¯ä¸ªå­é—®é¢˜ä¸­å«æœ‰ä¸€ä¸ª for å¾ªç¯ï¼Œå¤æ‚åº¦ä¸º O(k)ã€‚æ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(k * n^k)ï¼ŒæŒ‡æ•°çº§åˆ«ã€‚</p>
<h2 id="å¸¦å¤‡å¿˜å½•çš„é€’å½’"><a href="#å¸¦å¤‡å¿˜å½•çš„é€’å½’" class="headerlink" title="å¸¦å¤‡å¿˜å½•çš„é€’å½’"></a>å¸¦å¤‡å¿˜å½•çš„é€’å½’</h2><p>ç±»ä¼¼ä¹‹å‰æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ï¼Œåªéœ€è¦ç¨åŠ ä¿®æ”¹ï¼Œå°±å¯ä»¥é€šè¿‡å¤‡å¿˜å½•æ¶ˆé™¤å­é—®é¢˜ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">def <span class="title">coinChange</span><span class="params">(coins: List[<span class="keyword">int</span>], amount: <span class="keyword">int</span>)</span>:</span></span><br><span class="line"><span class="function">    # å¤‡å¿˜å½•</span></span><br><span class="line"><span class="function">    memo =</span> <span class="built_in">dict</span>()</span><br><span class="line">    <span class="function">def <span class="title">dp</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="function">        # æŸ¥å¤‡å¿˜å½•ï¼Œé¿å…é‡å¤è®¡ç®—</span></span><br><span class="line"><span class="function">        if n in memo: return memo[n]</span></span><br><span class="line"><span class="function">        # base case</span></span><br><span class="line"><span class="function">        if n =</span>= <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">0</span>: <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        res = float(&#x27;INF&#x27;)</span><br><span class="line">        <span class="keyword">for</span> coin in coins:</span><br><span class="line">            subproblem = <span class="built_in">dp</span>(n - coin)</span><br><span class="line">            <span class="keyword">if</span> subproblem == <span class="number">-1</span>: <span class="keyword">continue</span></span><br><span class="line">            res = <span class="built_in">min</span>(res, <span class="number">1</span> + subproblem)</span><br></pre></td></tr></table></figure>

<p>â€‹        </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">    # è®°å…¥å¤‡å¿˜å½•</span><br><span class="line">    memo[n] = res if res != float(&#x27;INF&#x27;) else -1</span><br><span class="line">    <span class="keyword">return</span> memo[n]</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">dp</span>(amount)</span><br></pre></td></tr></table></figure>
<p>ä¸ç”»å›¾äº†ï¼Œå¾ˆæ˜¾ç„¶ã€Œå¤‡å¿˜å½•ã€å¤§å¤§å‡å°äº†å­é—®é¢˜æ•°ç›®ï¼Œå®Œå…¨æ¶ˆé™¤äº†å­é—®é¢˜çš„å†—ä½™ï¼Œæ‰€ä»¥å­é—®é¢˜æ€»æ•°ä¸ä¼šè¶…è¿‡é‡‘é¢æ•° nï¼Œå³å­é—®é¢˜æ•°ç›®ä¸º O(n)ã€‚å¤„ç†ä¸€ä¸ªå­é—®é¢˜çš„æ—¶é—´ä¸å˜ï¼Œä»æ˜¯ O(k)ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(kn)ã€‚</p>
<h2 id="dp-æ•°ç»„çš„è¿­ä»£è§£æ³•-1"><a href="#dp-æ•°ç»„çš„è¿­ä»£è§£æ³•-1" class="headerlink" title="dp æ•°ç»„çš„è¿­ä»£è§£æ³•"></a>dp æ•°ç»„çš„è¿­ä»£è§£æ³•</h2><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªåº•å‘ä¸Šä½¿ç”¨ dp table æ¥æ¶ˆé™¤é‡å å­é—®é¢˜ï¼Œå…³äºã€ŒçŠ¶æ€ã€ã€Œé€‰æ‹©ã€å’Œ base case ä¸ä¹‹å‰æ²¡æœ‰åŒºåˆ«ï¼Œdp æ•°ç»„çš„å®šä¹‰å’Œåˆšæ‰ dp å‡½æ•°ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æŠŠã€ŒçŠ¶æ€ã€ï¼Œä¹Ÿå°±æ˜¯ç›®æ ‡é‡‘é¢ä½œä¸ºå˜é‡ã€‚ä¸è¿‡ dp å‡½æ•°ä½“ç°åœ¨å‡½æ•°å‚æ•°ï¼Œè€Œ dp æ•°ç»„ä½“ç°åœ¨æ•°ç»„ç´¢å¼•ï¼š</p>
<p>dp æ•°ç»„çš„å®šä¹‰ï¼šå½“ç›®æ ‡é‡‘é¢ä¸º i æ—¶ï¼Œè‡³å°‘éœ€è¦ dp[i] æšç¡¬å¸å‡‘å‡ºã€‚</p>
<p>æ ¹æ®æˆ‘ä»¬æ–‡ç« å¼€å¤´ç»™å‡ºçš„åŠ¨æ€è§„åˆ’ä»£ç æ¡†æ¶å¯ä»¥å†™å‡ºå¦‚ä¸‹è§£æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ•°ç»„å¤§å°ä¸º amount + 1ï¼Œåˆå§‹å€¼ä¹Ÿä¸º amount + 1</span></span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(amount + <span class="number">1</span>, amount + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="comment">// base case</span></span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// å¤–å±‚ for å¾ªç¯åœ¨éå†æ‰€æœ‰çŠ¶æ€çš„æ‰€æœ‰å–å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dp.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        <span class="comment">// å†…å±‚ for å¾ªç¯åœ¨æ±‚æ‰€æœ‰é€‰æ‹©çš„æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> coin : coins) &#123;</span><br><span class="line">            <span class="comment">// å­é—®é¢˜æ— è§£ï¼Œè·³è¿‡</span></span><br><span class="line">            <span class="keyword">if</span> (i - coin &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dp[i] = <span class="built_in">min</span>(dp[i], <span class="number">1</span> + dp[i - coin]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (dp[amount] == amount + <span class="number">1</span>) ? <span class="number">-1</span> : dp[amount];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/07/23/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%94%EF%BC%89/7.png" class>


<p>PSï¼šä¸ºå•¥ dp æ•°ç»„åˆå§‹åŒ–ä¸º amount + 1 å‘¢ï¼Œå› ä¸ºå‡‘æˆ amount é‡‘é¢çš„ç¡¬å¸æ•°æœ€å¤šåªå¯èƒ½ç­‰äº amountï¼ˆå…¨ç”¨ 1 å…ƒé¢å€¼çš„ç¡¬å¸ï¼‰ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¸º amount + 1 å°±ç›¸å½“äºåˆå§‹åŒ–ä¸ºæ­£æ— ç©·ï¼Œä¾¿äºåç»­å–æœ€å°å€¼ã€‚</p>
<h1 id="æœ€åæ€»ç»“"><a href="#æœ€åæ€»ç»“" class="headerlink" title="æœ€åæ€»ç»“"></a>æœ€åæ€»ç»“</h1><p>ç¬¬ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„é—®é¢˜ï¼Œè§£é‡Šäº†å¦‚ä½•é€šè¿‡ã€Œå¤‡å¿˜å½•ã€æˆ–è€…ã€Œdp tableã€çš„æ–¹æ³•æ¥ä¼˜åŒ–é€’å½’æ ‘ï¼Œå¹¶ä¸”æ˜ç¡®äº†è¿™ä¸¤ç§æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Šçš„ä¸åŒè€Œå·²ã€‚</p>
<p>ç¬¬äºŒä¸ªå‡‘é›¶é’±çš„é—®é¢˜ï¼Œå±•ç¤ºäº†å¦‚ä½•æµç¨‹åŒ–ç¡®å®šã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€ï¼Œåªè¦é€šè¿‡çŠ¶æ€è½¬ç§»æ–¹ç¨‹å†™å‡ºæš´åŠ›é€’å½’è§£ï¼Œå‰©ä¸‹çš„ä¹Ÿå°±æ˜¯ä¼˜åŒ–é€’å½’æ ‘ï¼Œæ¶ˆé™¤é‡å å­é—®é¢˜è€Œå·²ã€‚</p>
<p>å¦‚æœä½ ä¸å¤ªäº†è§£åŠ¨æ€è§„åˆ’ï¼Œè¿˜èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒçœŸå¾—ç»™ä½ é¼“æŒï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†è¿™ä¸ªç®—æ³•çš„è®¾è®¡æŠ€å·§ã€‚</p>
<p><strong>è®¡ç®—æœºè§£å†³é—®é¢˜å…¶å®æ²¡æœ‰ä»»ä½•å¥‡æŠ€æ·«å·§ï¼Œå®ƒå”¯ä¸€çš„è§£å†³åŠæ³•å°±æ˜¯ç©·ä¸¾</strong>ï¼Œç©·ä¸¾æ‰€æœ‰å¯èƒ½æ€§ã€‚ç®—æ³•è®¾è®¡æ— éå°±æ˜¯å…ˆæ€è€ƒâ€œå¦‚ä½•ç©·ä¸¾â€ï¼Œç„¶åå†è¿½æ±‚â€œå¦‚ä½•èªæ˜åœ°ç©·ä¸¾â€ã€‚</p>
<p>åˆ—å‡ºåŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼Œå°±æ˜¯åœ¨è§£å†³â€œå¦‚ä½•ç©·ä¸¾â€çš„é—®é¢˜ã€‚ä¹‹æ‰€ä»¥è¯´å®ƒéš¾ï¼Œä¸€æ˜¯å› ä¸ºå¾ˆå¤šç©·ä¸¾éœ€è¦é€’å½’å®ç°ï¼ŒäºŒæ˜¯å› ä¸ºæœ‰çš„é—®é¢˜æœ¬èº«çš„è§£ç©ºé—´å¤æ‚ï¼Œä¸é‚£ä¹ˆå®¹æ˜“ç©·ä¸¾å®Œæ•´ã€‚</p>
<p>å¤‡å¿˜å½•ã€DP table å°±æ˜¯åœ¨è¿½æ±‚â€œå¦‚ä½•èªæ˜åœ°ç©·ä¸¾â€ã€‚ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ€è·¯ï¼Œæ˜¯é™ä½æ—¶é—´å¤æ‚åº¦çš„ä¸äºŒæ³•é—¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯•é—®ï¼Œè¿˜èƒ½ç©å‡ºå•¥èŠ±æ´»ï¼Ÿ</p>
<p>ä¹‹åæˆ‘ä»¬ä¼šæœ‰ä¸€ç« ä¸“é—¨è®²è§£åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå¦‚æœæœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥éšæ—¶å›æ¥é‡è¯»æœ¬æ–‡ï¼Œå¸Œæœ›è¯»è€…åœ¨é˜…è¯»æ¯ä¸ªé¢˜ç›®å’Œè§£æ³•æ—¶ï¼Œå¤šå¾€ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€ä¸Šé ï¼Œæ‰èƒ½å¯¹è¿™å¥—æ¡†æ¶äº§ç”Ÿè‡ªå·±çš„ç†è§£ï¼Œè¿ç”¨è‡ªå¦‚ã€‚</p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>æ¯æ—¥ä¸€é¢˜</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹(ä¸€):æœåŠ¡å™¨é€šä¿¡æ¦‚å¿µ</title>
    <url>/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ"><a href="#ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ" class="headerlink" title="ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ"></a>ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ</h1><p>ç½‘ç»œç¼–ç¨‹é€šä¿—è®²ï¼Œ<strong>å³é€šè¿‡ç¼–ç çš„æ–¹å¼è®©ä¸¤å°è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡ï¼ˆå³è¿›è¡Œæ•°æ®ä¼ é€’å’Œäº¤æ¢ï¼‰</strong></p>
<h1 id="ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜"><a href="#ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜" class="headerlink" title="ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜"></a>ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜</h1><p>ç°æœ‰å¦‚ä¸‹åœºæ™¯ï¼š æ‰“å¼€æµè§ˆå™¨<strong>è®¿é—®</strong>ç™¾åº¦ï¼Œè¾“å…¥<strong>ç™¾åº¦çš„ç½‘å€</strong>ï¼ŒæŒ‰ä¸‹å›è½¦<strong>å‘å‡ºè¯·æ±‚</strong>ï¼Œæ­¤æ—¶å°±å‘<strong>ç™¾åº¦çš„æœåŠ¡å™¨</strong>å‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨<strong>æ¥æ”¶åˆ°è¯·æ±‚</strong>ä¹‹å<strong>å“åº”</strong>ç»™å®¢æˆ·åº¦(æµè§ˆå™¨)ç»“æœå³å‰ç«¯é¡µé¢ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰€è®¿é—®çš„ç™¾åº¦é¡µé¢å°±è¢«æ¸²æŸ“å‡ºæ¥äº†.</p>
<hr>
<p>åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>é€šè¿‡æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ â€”-&gt; B/Sæ¶æ„(BSçš„å‡ºç°è§£å†³äº†CSçš„å†—æ‚ç¹çï¼Œæ›´åŠ é«˜æ ¡)</li>
<li>è¾“å…¥ç™¾åº¦ç½‘å€ â€”-&gt; é€šè¿‡ç½‘å€ç¡®å®šäº†ç™¾åº¦çš„æœåŠ¡å™¨ â€”- &gt; å®šå‘å‘å‡ºè¯·æ±‚</li>
<li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚å â€”-&gt; æ ¹æ®è¯·æ±‚æ‰€æºå¸¦çš„å‚æ•°/ç½‘å€è¿›è¡Œå“åº”ï¼Œè¿”å›ç»™å®¢æˆ·åº¦å“åº”çš„æ•°æ®ï¼Œé€šè¿‡æµè§ˆå™¨å»å±•ç¤º </li>
</ul>
<h2 id="æœåŠ¡å™¨å¯»å€"><a href="#æœåŠ¡å™¨å¯»å€" class="headerlink" title="æœåŠ¡å™¨å¯»å€"></a>æœåŠ¡å™¨å¯»å€</h2><p>åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¼—å¤šçš„æœåŠ¡å™¨ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•ç¡®å®šå»è®¿é—®æˆ‘ä»¬æ‰€éœ€è¦çš„é‚£ä¸€å°æœåŠ¡å™¨å»è¯·æ±‚æœåŠ¡å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<strong>ç½‘å€</strong>ï¼Œç½‘å€çš„åŸºæœ¬ç»„æˆåŒ…æ‹¬äº›ä»€ä¹ˆå‘¢ï¼Ÿ <strong>ç½‘å€ = <code>åè®®://((ipåœ°å€:ç«¯å£å·)/åŸŸå)/(èµ„æºè·¯å¾„)?(å‚æ•° key = value)</code></strong> ï¼Œ æƒ³è¦ç¡®å®šæœåŠ¡å™¨ï¼Œæ˜¾ç„¶éœ€è¦æœåŠ¡å™¨çš„<code>ip</code> åœ°å€ï¼Œæˆ–è€…å…¶<code>ip</code>åœ°å€æ‰€æ˜ å°„çš„åŸŸåï¼Œå³**é€šè¿‡<code>DNS</code>è§£æåŸŸåä»è€Œè·å¾—<code>ip+ç«¯å£å·</code>**ï¼Œåˆç”±äºåŒä¸€å°æœåŠ¡å™¨ä¸Šä¸åŒçš„ç«¯å£å·è¿è¡Œç€ä¸åŒçš„æœåŠ¡ï¼Œäºæ˜¯æˆ‘ä»¬ä¹Ÿéœ€è¦ç¡®å®šç«¯å£å·ï¼Œå¦‚æœä½¿ç”¨äº†åŸŸåï¼Œç»‘å®šåŸŸåæ—¶åº”è¯¥åŒæ—¶ç»‘å®šç«¯å£å·ã€‚æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦çŸ¥é“æˆ‘ä»¬éœ€è¦è®¿é—®çš„èµ„æºè·¯å¾„å³å¯ï¼Œå¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œé€šè¿‡ <strong>key = value</strong> æˆ–è€… æ›´ä¸ºå®‰å…¨çš„å¦ä¸€ç§æ–¹å¼ æ¥è¿›è¡Œä¼ é€’.</p>
<h2 id="ç½‘ç»œåè®®"><a href="#ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œåè®®"></a>ç½‘ç»œåè®®</h2><h3 id="ç½‘ç»œåè®®çš„å®šä¹‰"><a href="#ç½‘ç»œåè®®çš„å®šä¹‰" class="headerlink" title="ç½‘ç»œåè®®çš„å®šä¹‰"></a>ç½‘ç»œåè®®çš„å®šä¹‰</h3><pre><code> â— ç½‘ç»œåè®®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è½¯ä»¶ï¼Œæ˜¯è®¡ç®—æœºç½‘ç»œå®ç°å…¶åŠŸèƒ½çš„åŸºæœ¬æœºåˆ¶

 â— ç½‘ç»œåè®®çš„æœ¬è´¨æ˜¯è§„åˆ™ï¼Œå³å„ç§ç¡¬ä»¶å’Œè½¯ä»¶å¿…é¡»éµå¾ªçš„å…±åŒè§„åˆ™

 â— ç½‘ç»œåè®®å¹¶ä¸æ˜¯ä¸€å¥—å•ç‹¬çš„è½¯ä»¶ï¼Œä»–èåˆäºå…¶ä»–æ‰€æœ‰è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œåè®®åœ¨ç½‘ç»œä¸­æ— æ‰€

    ä¸åœ¨
</code></pre>
<h3 id="å¸¸ç”¨çš„ç½‘ç»œåè®®"><a href="#å¸¸ç”¨çš„ç½‘ç»œåè®®" class="headerlink" title="å¸¸ç”¨çš„ç½‘ç»œåè®®"></a>å¸¸ç”¨çš„ç½‘ç»œåè®®</h3><pre><code>   TCP  UDP     HTTP   HTTPS    FTP  DNS  Telnet    TCP/IP    SSL/TLS   websocket
</code></pre>
<h4 id="TCPåè®®"><a href="#TCPåè®®" class="headerlink" title="TCPåè®®"></a>TCPåè®®</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">TCPåè®®ï¼Œï¼ˆtransmission control protocolï¼‰ï¼Œä¼ è¾“æ§åˆ¶åè®®ã€‚</span><br><span class="line">å®šä¹‰ï¼šTCPåè®®æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€ä¼ è¾“é€Ÿåº¦æ…¢ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</span><br><span class="line"></span><br><span class="line"><span class="code">          åœ¨ç®€åŒ–çš„è®¡ç®—æœºç½‘ç»œOSIæ¨¡å‹ä¸­å®Œæˆç¬¬å››å±‚ä¼ è¾“å±‚æ‰€æŒ‡å®šçš„åŠŸèƒ½ã€‚ </span></span><br></pre></td></tr></table></figure>


<p>æä¾›å¯é çš„ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œå¯ä»¥ä¿è¯æ¥æ”¶æ–¹æ”¶åˆ°çš„æ•°æ®ä¸å‘é€æ–¹å‘é€çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€æ— å·®é”™ï¼ŒåŒæ—¶è¿˜æœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶çš„åŠŸèƒ½ï¼Œæ‰€ä»¥TCPåè®®æ¯”è¾ƒå¤æ‚ï¼Œèƒ½å¤Ÿä¸ºè¦æ±‚å¯é æ€§çš„åº”ç”¨å±‚åè®®æä¾›æœåŠ¡ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€é‚®ä»¶æ”¶å‘ã€ç½‘é¡µæµè§ˆã€è¿œç¨‹ç™»å½•ç­‰ç­‰</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ä½œç”¨ï¼šä¸»è¦ç”¨äºåœ¨ä¸»æœºé—´å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œä»¥å®ç°é«˜å¯é æ€§çš„æ•°æ®åŒ…äº¤æ¢</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">IPåè®®çš„ä½œç”¨ï¼šå¯ä»¥è¿›è¡ŒIPæ•°æ®åŒ…çš„åˆ†å‰²å’Œç»„è£…</span><br><span class="line"></span><br><span class="line">IPåè®®çš„ç¼ºç‚¹ï¼šä½†æ˜¯é€šè¿‡IPåè®®å¹¶ä¸èƒ½æ¸…æ¥šçš„äº†è§£åˆ°æ•°æ®åŒ…æ˜¯å¦é¡ºåˆ©çš„å‘é€ç»™ç›®æ ‡è®¡ç®—æœº</span><br><span class="line"></span><br><span class="line">TCPçš„ç‰¹ç‚¹ï¼š</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰é¢å‘è¿æ¥çš„</p>
<p>ï¼ˆ2ï¼‰æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡</p>
<p>ï¼ˆ3ï¼‰æä¾›æµé‡æ§åˆ¶ã€‚TCPèƒ½å¤Ÿæ§åˆ¶è¿›ç¨‹å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä¿è¯å¦ä¸€ç«¯ä¸è¢«å¤§é‡çš„æ•°æ®â€œæ·¹æ²¡â€è€Œå‡ºç°æº¢å‡ºã€‚</p>
<p>ï¼ˆ4ï¼‰æä¾›æ‹¥å¡æ§åˆ¶ã€‚å½“ç½‘ç»œå‡ºç°æ‹¥å¡çš„æ—¶å€™ï¼ŒTCPèƒ½å¤Ÿå‡å°å‘ç½‘ç»œæ³¨å…¥æ•°æ®çš„é€Ÿç‡å’Œæ•°é‡ï¼Œç¼“è§£æ‹¥å¡ã€‚</p>
<p>ï¼ˆ5ï¼‰æä¾›å…¨åŒå·¥é€šä¿¡ã€‚TCPæä¾›åŒå‘çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚TCPå…è®¸é€šä¿¡åŒæ–¹çš„åº”ç”¨è¿›ç¨‹åœ¨ä»»ä½•æ—¶å€™å‘é€æ•°æ®ã€‚TCPè¿æ¥çš„ä¸¤ç«¯éƒ½è®¾æœ‰å‘é€ç¼“å­˜å’Œæ¥æ”¶ç¼“å­˜ï¼Œç”¨æ¥ä¸´æ—¶å­˜æ”¾åŒå‘é€šä¿¡çš„æ•°æ®ã€‚</p>
<p>ï¼ˆ6ï¼‰TCPæ˜¯é¢å‘å­—èŠ‚æµçš„ã€‚TCPä¸­çš„â€œæµâ€æ˜¯æŒ‡æµå…¥åˆ°è¿›ç¨‹æˆ–ä»è¿›ç¨‹æµå‡ºçš„å­—èŠ‚</p>
<h4 id="UDPåè®®"><a href="#UDPåè®®" class="headerlink" title="UDPåè®®"></a>UDPåè®®</h4><p>ç”¨æˆ·æ•°æ®åŒ…åè®®ï¼ˆUser Datagram Protocolï¼‰</p>
<p>UDPåè®®ä¸èƒ½ä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€æ— å·®é”™ï¼Œä¹Ÿä¸èƒ½ä¿è¯æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®çš„é¡ºåºå’Œå‘é€æ–¹å‘é€æ•°æ®çš„é¡ºåºä¸€æ ·ã€‚UDPåè®®æ¯”è¾ƒç®€å•ï¼Œä½†æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œèƒ½ä¸ºå¯¹å¯é æ€§è¦æ±‚ä¸é«˜ï¼Œå¯¹å®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨æä¾›æœåŠ¡ï¼Œå¦‚ä¼ è¾“éŸ³é¢‘å’Œè§†é¢‘ã€‚</p>
<p>å®šä¹‰ï¼šUDPåè®®æ˜¯OSI(Open System Interconnectionï¼Œå¼€æ”¾å¼ç³»ç»Ÿäº’è”)æ¨¡å‹ä¸­çš„ä¸€ç§</p>
<p>æ— è¿æ¥çš„ã€ç®€å•ä¸å¯é çš„ã€ä¼ è¾“é€Ÿåº¦å¿«ã€é¢å‘äº‹åŠ¡çš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<p>UDPåè®®çš„ç‰¹ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ— è¿æ¥çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰UDPæ˜¯ä¸€ç§å°½åŠ›è€Œä¸ºçš„æœåŠ¡æ–¹å¼ï¼Œä¸æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼ˆæ¯”å¦‚æ•°æ®çš„ä¸¢å¤±ã€é‡å¤å’Œæ— åºï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰UDPæ˜¯é«˜æ•ˆçš„ä¼ è¾“åè®®ã€‚</p>
<p>ï¼ˆ4ï¼‰UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶ã€‚</p>
<p>TCPå’ŒUDPåè®®çš„åŒºåˆ«</p>
<p>Aã€TCPé¢å‘è¿æ¥ï¼ˆæ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰ï¼›</p>
<pre><code>  UDPæ˜¯æ— è¿æ¥çš„ï¼ˆå‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼‰ã€‚
</code></pre>
<p>Bã€TCPæä¾›å¯é çš„æœåŠ¡ï¼ˆé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰åºåˆ°è¾¾ï¼‰ï¼›</p>
<pre><code>  UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä¸ä¿è¯å¯é äº¤ä»˜ã€‚
</code></pre>
<p>Cã€TCPåŸºäºå­—èŠ‚æµï¼ˆå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµï¼‰ã€‚</p>
<pre><code>  UDPæ˜¯åŸºäºæŠ¥æ–‡çš„ï¼ŒUDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½

 ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼ŒIPç”µè¯ï¼Œå®æ—¶è§†é¢‘ç”µè¯ï¼‰ã€‚
</code></pre>
<p>Dã€TCPä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼›</p>
<pre><code>  UDPå¯èƒ½ä¸¢åŒ…ã€‚
</code></pre>
<p>Eã€TCPä¿è¯æ•°æ®é¡ºåºï¼›</p>
<pre><code>  UDPä¸ä¿è¯ã€‚
</code></pre>
<p>Fã€æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼›</p>
<pre><code> UDPæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡
</code></pre>
<p>Gã€TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“</p>
<pre><code>  UDPåˆ™æ˜¯ä¸å¯é ä¿¡é“
</code></pre>
<p>Hã€TCPçš„é¦–éƒ¨å¼€é”€20å­—èŠ‚</p>
<pre><code>   UDPçš„é¦–éƒ¨å¼€é”€8å­—èŠ‚
</code></pre>
<p>Iã€TCPè¦æ±‚ç³»ç»Ÿèµ„æºè¾ƒå¤šï¼ŒUDPè¾ƒå°‘</p>
<h4 id="TCP-IPåè®®"><a href="#TCP-IPåè®®" class="headerlink" title="TCP/IPåè®®"></a>TCP/IPåè®®</h4><pre><code> å®è´¨ï¼š TCP/IPå…¶å®å°±æ˜¯TCPå’ŒIPç­‰åè®®çš„ç»„åˆï¼Œå³ä¼ è¾“æ§åˆ¶åè®®/äº’è”ç½‘åè®®ã€‚

åº”ç”¨åœºæ™¯ï¼šä¸»è¦ç”¨äºåœ¨å®‰è£…äº†ä¸åŒç¡¬ä»¶å’Œä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºä¹‹é—´ï¼Œå®ç°å¯é çš„ç½‘ç»œé€š

                 ä¿¡ã€‚TCPåè®®å¯ä»¥ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„å¯é æ€§ï¼›IPåè®®å¯ä»¥ä¿è¯æ•°æ®åŒ…è¢«ä¼ è¾“åˆ°

                ç›®æ ‡è®¡ç®—æœºä¸Šã€‚
</code></pre>
<h4 id="FTPåè®®"><a href="#FTPåè®®" class="headerlink" title="FTPåè®®"></a>FTPåè®®</h4><pre><code> æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFile Transfer Protocolï¼‰ã€‚

 ç”¨é€”ï¼šä¸»è¦ç”¨äºåœ¨ä¸¤å°è®¡ç®—æœºä¹‹é—´å®ç°æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½ï¼Œå…¶ä¸­ä¸€å°è®¡ç®—æœºä½œä¸ºFTPçš„å®¢

            æˆ·ç«¯ï¼Œå¦ä¸€å°ä½œä¸ºFTPçš„æœåŠ¡ç«¯ã€‚é€šè¿‡FTPåè®®å¯ä»¥ä¸Šä¼ ã€ä¸‹è½½å‡ ä¹æ‰€æœ‰çš„æ–‡ä»¶ç±»

            å‹ï¼Œæ¯”å¦‚txt  exe  doc  pdf   mp3  zip rarç­‰
</code></pre>
<h4 id="Telnetåè®®"><a href="#Telnetåè®®" class="headerlink" title="Telnetåè®®"></a>Telnetåè®®</h4><pre><code>  å®šä¹‰ï¼šè¿œç¨‹ç™»å½•åè®®ï¼Œæ˜¯Internetä¸Šæ™®éé‡‡ç”¨çš„ä»¿çœŸç½‘ç»œåè®®ï¼ŒåŒæ—¶Telnetä¹Ÿæ˜¯ä»è¿œç¨‹

            ä½ç½®ç™»å½•å¸¸ç”¨çš„ç¨‹åºã€‚

  ä½œç”¨ï¼šé€šè¿‡Telnetç¨‹åºç™»å½•è¿œç¨‹Telnetè®¡ç®—æœºã€‚ä¸€èˆ¬é‡‡ç”¨æˆæƒçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚ç™»å½•

            ä¹‹åå°±å¦‚åŒä½¿ç”¨æœ¬åœ°è®¡ç®—æœºä¸€æ ·ï¼Œä½¿ç”¨è¿œç¨‹è®¡ç®—æœºçš„çš„ç¡¬ç›˜ã€è¿è¡Œåº”ç”¨ç¨‹åºç­‰ã€‚
</code></pre>
<h4 id="DNSåè®®"><a href="#DNSåè®®" class="headerlink" title="DNSåè®®"></a>DNSåè®®</h4><p>DNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼Œå› ç‰¹ç½‘ä¸Šä½œä¸ºåŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿ç”¨æˆ·æ›´æ–¹ä¾¿çš„è®¿é—®äº’è”ç½‘ï¼Œè€Œä¸ç”¨å»è®°ä½èƒ½å¤Ÿè¢«æœºå™¨ç›´æ¥è¯»å–çš„IPæ•°ä¸²ã€‚é€šè¿‡ä¸»æœºåï¼Œæœ€ç»ˆå¾—åˆ°è¯¥ä¸»æœºåå¯¹åº”çš„IPåœ°å€çš„è¿‡ç¨‹å«åšåŸŸåè§£æï¼ˆæˆ–ä¸»æœºåè§£æï¼‰ã€‚</p>
<p>ä½œç”¨ï¼š</p>
<p>â— è¯¥åè®®ä¸»è¦è´Ÿè´£å°†åŸŸåè½¬æ¢æˆç½‘ç»œå¯ä»¥è¯†åˆ«çš„IPåœ°å€ï¼ˆ<a href="http://www.cce.com.cnè½¬æ¢æˆ221.122.32.15),åŸŸåå’Œipåœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„./">www.cce.com.cnè½¬æ¢æˆ221.122.32.15ï¼‰ï¼ŒåŸŸåå’ŒIPåœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</a></p>
<p>â— å› ä¸ºè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œæœ€ç»ˆéƒ½æ˜¯è½¬æ¢æˆIPåœ°å€è¿›è¡Œè®¿é—®çš„</p>
<p>â— ç›´æ¥è®¾ç½®DNSæœåŠ¡å™¨ã€‚å¯ä»¥æé«˜ç½‘ç»œçš„è®¿é—®é€Ÿåº¦ï¼Œä¿è¯è®¿é—®çš„æ­£ç¡®æ€§</p>
<p>DNSçš„ä¸¤ç§æŸ¥è¯¢æ–¹å¼ï¼šé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢</p>
<p>a)é€’å½’è§£æ<br>å½“å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±ä¸èƒ½å›ç­”å®¢æˆ·æœºçš„DNSæŸ¥è¯¢æ—¶ï¼Œå®ƒå°±éœ€è¦å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚æ­¤æ—¶æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚å›¾æ‰€ç¤ºçš„æ˜¯é€’å½’æ–¹å¼ã€‚å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±è´Ÿè´£å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€èˆ¬æ˜¯å…ˆå‘è¯¥åŸŸåçš„æ ¹åŸŸæœåŠ¡å™¨æŸ¥è¯¢ï¼Œå†ç”±æ ¹åŸŸåæœåŠ¡å™¨ä¸€çº§çº§å‘ä¸‹æŸ¥è¯¢ã€‚æœ€åå¾—åˆ°çš„æŸ¥è¯¢ç»“æœè¿”å›ç»™å±€éƒ¨DNSæœåŠ¡å™¨ï¼Œå†ç”±å±€éƒ¨DNSæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>b)è¿­ä»£è§£æ</p>
<p>å½“å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±ä¸èƒ½å›ç­”å®¢æˆ·æœºçš„DNSæŸ¥è¯¢æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿­ä»£æŸ¥è¯¢çš„æ–¹å¼è¿›è¡Œè§£æï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å±€éƒ¨DNSæœåŠ¡å™¨ä¸æ˜¯è‡ªå·±å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯æŠŠèƒ½è§£æè¯¥åŸŸåçš„å…¶ä»–DNSæœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™å®¢æˆ·ç«¯DNSç¨‹åºï¼Œå®¢æˆ·ç«¯DNSç¨‹åºå†ç»§ç»­å‘è¿™äº›DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œç›´åˆ°å¾—åˆ°æŸ¥è¯¢ç»“æœä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿­ä»£è§£æåªæ˜¯å¸®ä½ æ‰¾åˆ°ç›¸å…³çš„æœåŠ¡å™¨è€Œå·²ï¼Œè€Œä¸ä¼šå¸®ä½ å»æŸ¥ã€‚æ¯”å¦‚è¯´ï¼šbaidu.comçš„æœåŠ¡å™¨ipåœ°å€åœ¨192.168.4.5è¿™é‡Œï¼Œä½ è‡ªå·±å»æŸ¥å§ï¼Œæœ¬äººæ¯”è¾ƒå¿™ï¼Œåªèƒ½å¸®ä½ åˆ°è¿™é‡Œäº†ã€‚</p>
<h4 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h4><pre><code> è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆ Hyper Text Transfer Protocol ï¼‰

å®šä¹‰ï¼šâ— æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘ï¼ˆwwwï¼‰æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®

          â— æ˜¯ åŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTMLã€å›¾ç‰‡ã€æŸ¥è¯¢ç»“æœç­‰ï¼‰çš„åè®®

          â— æ˜¯ä¸€ä¸ªå±äºåº”ç”¨å±‚çš„ã€é¢å‘å¯¹è±¡çš„åè®®

          â— ç”±äºå…¶ç®€æ·ã€å¿«é€Ÿçš„é€‚ç”¨äºåˆ†å¸ƒå¼è¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿ

å·¥ä½œåŸç†ï¼šHTTPåè®®å·¥ä½œåœ¨å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¶æ„ä¸Šã€‚

                æµè§ˆå™¨ä½œä¸ºHTTPå®¢æˆ·ç«¯é€šè¿‡URLå‘HTTPæœåŠ¡ç«¯ï¼ˆå³WEBæœåŠ¡å™¨ï¼‰å‘é€è¯·æ±‚ï¼Œ

                WEBæœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘é€å“åº”ä¿¡æ¯ã€‚

HTTPè¯·æ±‚/å“åº”çš„æ­¥éª¤ï¼š

           Aã€å®¢æˆ·ç«¯è¿æ¥åˆ°webæœåŠ¡å™¨ï¼šä¸€ä¸ªHTTPå®¢æˆ·ç«¯é€šå¸¸æ˜¯æµè§ˆå™¨ï¼Œä¸webæœåŠ¡å™¨çš„

                HTTPç«¯å£ï¼ˆé»˜è®¤ä¸º80ï¼‰å»ºç«‹ä¸€ä¸ªTCPå¥—æ¥å­—è¿æ¥

           Bã€å‘é€HTTPè¯·æ±‚ï¼šé€šè¿‡TCPå¥—æ¥å­—ï¼Œå®¢æˆ·ç«¯å‘webæœåŠ¡å™¨å‘é€ä¸€ä¸ªæ–‡æœ¬çš„è¯·æ±‚

                æŠ¥æ–‡ï¼Œä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®ç»„æˆ

           Cã€æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶è¿”å›HTTPå“åº”ï¼šWEBæœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œå®šä½è¯·æ±‚èµ„æºã€‚æœ

                 åŠ¡å™¨å°†èµ„æºå‰¯æœ¬å†™åˆ°TCPå¥—æ¥å­—ï¼Œç”±å®¢æˆ·ç«¯è¯»å–ã€‚ä¸€ä¸ªå“åº”ç”±çŠ¶æ€è¡Œã€å“åº”å¤´

                 éƒ¨ã€ç©ºè¡Œã€å“åº”æ•°æ®ç»„æˆ

           Dã€é‡Šæ”¾TCPè¿æ¥ï¼šè‹¥connectionæ¨¡å¼ä¸ºcloseï¼Œåˆ™æœåŠ¡å™¨ä¸»åŠ¨å…³é—­TCPè¿æ¥ï¼Œå®¢æˆ·

                 ç«¯è¢«åŠ¨å…³é—­è¿æ¥ï¼Œé‡Šæ”¾TCPè¿æ¥ï¼›è‹¥connectionæ¨¡å¼ä¸ºkeepaliveï¼Œåˆ™è¯¥è¿æ¥

                 ä¼šä¿æŒä¸€æ®µæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…å¯ä»¥æ¥ç€æ¥æ”¶è¯·æ±‚

            Eã€å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è§£æHTMLå†…å®¹ï¼šå®¢æˆ·ç«¯é¦–å…ˆè§£æçŠ¶æ€è¡Œï¼ŒæŸ¥çœ‹è¡¨æ˜è¯·æ±‚æ˜¯

                 å¦æˆåŠŸçš„çŠ¶æ€ä»£ç   ï¼›ç„¶åè§£ææ¯ä¸€ä¸ªå“åº”å¤´ï¼Œå‘åº”å¤´å‘ŠçŸ¥ä»¥ä¸‹ä¸ºè‹¥å¹²å­—èŠ‚çš„

                  HTMLæ–‡æ¡£å’Œæ–‡æ¡£çš„å­—ç¬¦é›†ã€‚å®¢æˆ·ç«¯è¯»å–å“åº”æ•°æ®HTMLï¼Œæ ¹æ®HTMLçš„è¯­æ³•

                  å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤º

 ç‰¹ç‚¹ï¼šâ— æ— è¿æ¥ï¼šå…¶å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶

               åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œæ–­å¼€è¿æ¥ï¼Œå¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´

           â— æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚

                           ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å¿…é¡»é‡ä¼ ã€‚è¿™å¯èƒ½å¯¼è‡´

                           æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚ä½†æ˜¯åœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶ï¼Œä»–çš„åº”ç­”

                           å°±è¾ƒå¿«

            â— ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚

                               è¯·æ±‚æ–¹æ³•å¸¸ç”¨POST  GET  HEADï¼Œæ¯ç§æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨è”ç³»çš„

                               ç±»å‹ä¸åŒã€‚

                               HTTPåè®®ç®€å•ï¼Œä¼¼çš„HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¿«

             â— çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-Type

                          æ ‡è®°

             â— æ”¯æŒB/S   C/Sæ¨¡å¼

HTTPè¯·æ±‚æ–¹æ³•ï¼šHTTP1.0å®šä¹‰ä¸‰ç§æ–¹æ³•ï¼Œå³POST   GET   HEAD

                          HTTP1.1æ–°å¢5ç§æ–¹æ³•ï¼ŒOPTIONS   PUT  DELETE  TRACE  CONNECT

             â— GETï¼šè¯·æ±‚æŒ‡å®šé¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“

             â— POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•ã€ä¸Šä¼ æ–‡ä»¶ï¼‰

             â— HEADï¼šç±»ä¼¼GETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´

             â— PUTï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹

             â—  DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢

             â—  CONNECTï¼šHTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“å¼çš„ä»£ç†æœåŠ¡å™¨

             â—  OPTIONSï¼šå…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½

             â— TRACEï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­

POSTå’ŒGETçš„åŒºåˆ«ï¼š

             â— GETæäº¤çš„æ•°æ®ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ˆå³æ•°æ®æ”¾åœ¨URLä¹‹åï¼Œä»¥?åˆ†å‰²URLå’Œä¼ è¾“çš„

                æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿ï¼‰ï¼›

               POSTæäº¤çš„æ•°æ®æ”¾åœ¨HTTPåŒ…çš„bodyä¸­ï¼Œå› æ­¤åœ°å€æ ä¸ä¼šæ˜¾ç¤ºæäº¤çš„æ•°æ®

             â— GETæäº¤çš„æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆå› ä¸ºæµè§ˆå™¨å¯¹URLçš„é•¿åº¦æœ‰é™åˆ¶ï¼‰ï¼›

                POSTæäº¤çš„æ•°æ®æ²¡æœ‰é™åˆ¶

             â— GETæ–¹å¼æäº¤æ•°æ®ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚ç™»å½•é¡µé¢ï¼Œé€šè¿‡GETæ–¹å¼æäº¤æ•°æ®æ—¶ï¼Œ

                ç”¨æˆ·åå’Œå¯†ç ä¼šå‡ºç°åœ¨åœ°å€æ ä¸Šï¼Œå¦‚æœé¡µé¢å¯ä»¥è¢«ç¼“å­˜æˆ–è€…å…¶ä»–äººå¯ä»¥è®¿é—®è¿™å°

                æœºå™¨ï¼Œå°±å¯ä»¥ä»å†å²è®°å½•è·å¾—è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

                 POSTä¸å­˜åœ¨å®‰å…¨é—®é¢˜

            â— GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼

                POSTé€šè¿‡Request.Formæ¥å–å¾—å˜é‡çš„å€¼
</code></pre>
<p>8ã€SSL/TLSåè®®</p>
<pre><code> â— SSLï¼ˆSecure Sockets Layerï¼‰ï¼Œå®‰å…¨å¥—æ¥å±‚ã€‚ä¸Šä¸–çºª90å¹´ä»£ç”±ç½‘æ™¯å…¬å¸è®¾è®¡ã€‚åŸå…ˆäº’

     è”ç½‘ä½¿ç”¨çš„HTTPåè®®æ˜¯æ˜æ–‡çš„ï¼Œå­˜åœ¨å¾ˆå¤šç¼ºç‚¹ï¼ˆä¼ è¾“å†…å®¹ä¼šè¢«å·çª¥ï¼ˆå—…æ¢ï¼‰å’Œç¯¡æ”¹ï¼‰ã€‚

     SSLå°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜

  â— åˆ°äº†1999å¹´ï¼ŒSSLå› ä¸ºå¹¿æ³›åº”ç”¨ï¼Œå·²ç»æˆä¸ºäº’è”ç½‘ä¸Šçš„äº‹å®æ ‡å‡†ã€‚IETFå°±åœ¨é‚£ä¸€å¹´æŠŠ

      SSLæ ‡å‡†åŒ–ï¼Œæ ‡å‡†åŒ–åç§°æ”¹ä¸ºTLSï¼ˆTransport  Layer  Securityï¼‰ï¼Œä¼ è¾“å±‚å®‰å…¨åè®®

   â— SSLå’ŒTLSæ˜¯åŒä¸€ä¸ªä¸œè¥¿çš„ä¸åŒé˜¶æ®µ
</code></pre>
<h4 id="HTTPSåè®®"><a href="#HTTPSåè®®" class="headerlink" title="HTTPSåè®®"></a>HTTPSåè®®</h4><pre><code> å®šä¹‰ï¼šHTTPSåè®®æ˜¯HTTPåè®®å’ŒSSL/TLSåè®®çš„ç»„åˆ
</code></pre>
<p>   ä¸ºä»€ä¹ˆè¦è®¾è®¡HTTPSæˆè¿™æ ·ï¼š</p>
<pre><code>      â— å…¼å®¹æ€§ï¼šåŸºäºTCPä¼ è¾“ï¼›å•ç‹¬ä½¿ç”¨æ–°çš„åè®®å°†HTTPï¼ŒæŠŠHTTPåè®®åŒ…è£¹èµ·æ¥

      â— å¯æ‰©å±•æ€§

      â— ä¿å¯†æ€§ï¼ˆé˜²æ³„å¯†ï¼‰

      â—  å®Œæ•´æ€§ï¼ˆé˜²ç¯¡æ”¹ï¼‰

      â— çœŸå®æ€§ï¼ˆé˜²å‡å†’ï¼‰

      â— æ€§èƒ½
</code></pre>
<p>   åŠ å¯†å’Œè§£å¯†çš„å®šä¹‰ï¼š</p>
<pre><code>     â€œåŠ å¯†â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠâ€œæ˜æ–‡â€å˜æˆâ€œå¯†æ–‡â€çš„è¿‡ç¨‹ã€‚â€œè§£å¯†â€çš„è¿‡ç¨‹å°±æ˜¯å°†â€œå¯†æ–‡â€

      å˜æˆâ€œæ˜æ–‡â€çš„è¿‡ç¨‹ã€‚åœ¨è¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­ï¼Œéƒ½éœ€å“Ÿå•Šâ€œå¯†é’¥â€ã€‚
</code></pre>
<p>   å¯¹ç§°åŠ å¯†ï¼šâ€œåŠ å¯†â€å’Œâ€œè§£å¯†â€ä½¿ç”¨â€œç›¸åŒå¯†é’¥â€</p>
<p>   éå¯¹ç§°åŠ å¯†ï¼šåŠ å¯†â€å’Œâ€œè§£å¯†â€ä½¿ç”¨â€œä¸åŒå¯†é’¥â€</p>
<p>   å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<pre><code>     â— â€éå¯¹ç§°åŠ å¯†â€œçš„åŠŸèƒ½æ¯”â€å¯¹ç§°åŠ å¯†â€œçš„åŠŸèƒ½è¦å¤š

     â— â€éå¯¹ç§°åŠ å¯†â€œæ¶‰åŠå¤æ‚çš„æ•°å­¦é—®é¢˜ï¼Œæ‰€ä»¥å…¶æ€§èƒ½ç›¸å¯¹â€å¯¹ç§°åŠ å¯†â€œè¦å·®
</code></pre>
<h4 id="websocketåè®®"><a href="#websocketåè®®" class="headerlink" title="websocketåè®®"></a>websocketåè®®</h4><p>1ï¼‰WebSocket æ˜¯Webåº”ç”¨ç¨‹åºçš„ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªHtml5åè®®ï¼Œå®ƒæä¾›äº†åŒå‘çš„ï¼ŒæŒ‰åºåˆ°è¾¾çš„æ•°æ®æµ</p>
<p>2ï¼‰WebSocketçš„è¿æ¥æ˜¯æŒä¹…çš„ï¼Œä»–é€šè¿‡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒåŒå·¥è¿æ¥ï¼ŒæœåŠ¡å™¨çš„æ›´æ–°å¯ä»¥è¢«åŠæ—¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯ä»¥ä¸€å®šæ—¶é—´é—´éš”å»è½®è¯¢ </p>
<p>3ï¼‰WebSocket è¿æ¥å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…¨åŒå·¥é€šä¿¡ï¼Œä»¥ä¾¿ä»»ä¸€æ–¹éƒ½å¯ä»¥é€šè¿‡å»ºç«‹çš„è¿æ¥å°†æ•°æ®æ¨é€åˆ°å¦ä¸€ç«¯ã€‚</p>
<p>4ï¼‰WebSocket åªéœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œå°±å¯ä»¥ä¸€ç›´ä¿æŒè¿æ¥çŠ¶æ€ï¼Œè¿™ç›¸æ¯”äºè½®è¯¢æ–¹å¼çš„ä¸åœå»ºç«‹è¿æ¥æ˜¾ç„¶æ•ˆç‡è¦å¤§å¤§æé«˜</p>
<h4 id="RPCåè®®"><a href="#RPCåè®®" class="headerlink" title="RPCåè®®"></a>RPCåè®®</h4><p>å®šä¹‰ï¼šRPC( Remote Procedure Call)è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ )åè®®</p>
<p>ä¸HTTPåè®®çš„åŒºåˆ«:</p>
<p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ç›´è§‚è¯´æ³•å°±æ˜¯Aé€šè¿‡ç½‘ç»œè°ƒç”¨Bçš„è¿‡ç¨‹æ–¹æ³•</p>
<p>é¦–å…ˆäº†è§£OSIç½‘ç»œä¸ƒå±‚æ¨¡å‹</p>
<p>ç¬¬ä¸€å±‚ï¼šåº”ç”¨å±‚ã€‚å®šä¹‰äº†ç”¨äºåœ¨ç½‘ç»œä¸­è¿›è¡Œé€šä¿¡å’Œä¼ è¾“æ•°æ®çš„æ¥å£ï¼›<br>ç¬¬äºŒå±‚ï¼šè¡¨ç¤ºå±‚ã€‚å®šä¹‰ä¸åŒçš„ç³»ç»Ÿä¸­æ•°æ®çš„ä¼ è¾“æ ¼å¼ï¼Œç¼–ç å’Œè§£ç è§„èŒƒç­‰ï¼›<br>ç¬¬ä¸‰å±‚ï¼šä¼šè¯å±‚ã€‚ç®¡ç†ç”¨æˆ·çš„ä¼šè¯ï¼Œæ§åˆ¶ç”¨æˆ·é—´é€»è¾‘è¿æ¥çš„å»ºç«‹å’Œä¸­æ–­ï¼›<br>ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ã€‚ç®¡ç†ç€ç½‘ç»œä¸­çš„ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“ï¼›<br>ç¬¬äº”å±‚ï¼šç½‘ç»œå±‚ã€‚å®šä¹‰ç½‘ç»œè®¾å¤‡é—´å¦‚ä½•ä¼ è¾“æ•°æ®ï¼›<br>ç¬¬å…­å±‚ï¼šé“¾è·¯å±‚ã€‚å°†ä¸Šé¢çš„ç½‘ç»œå±‚çš„æ•°æ®åŒ…å°è£…æˆæ•°æ®å¸§ï¼Œä¾¿äºç‰©ç†å±‚ä¼ è¾“ï¼›<br>ç¬¬ä¸ƒå±‚ï¼šç‰©ç†å±‚ã€‚è¿™ä¸€å±‚ä¸»è¦å°±æ˜¯ä¼ è¾“è¿™äº›äºŒè¿›åˆ¶æ•°æ®<br>äº”å±‚åè®®ç»“æ„é‡Œé¢æ˜¯æ²¡æœ‰è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚çš„ã€‚åº”è¯¥è¯´å®ƒä»¬å’Œåº”ç”¨å±‚åˆå¹¶ã€‚</p>
<p>1ï¼‰æœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œå°±æ˜¯RPCä¸»è¦æ˜¯åŸºäºTCP/IPåè®®çš„ï¼Œè€ŒHTTPä¸»è¦æ˜¯åŸºäºHTTPåè®®çš„ï¼ŒHTTPåè®®æ˜¯åœ¨ä¼ è¾“å±‚åè®®TCPä¹‹ä¸Šçš„åº”ç”¨å±‚ï¼Œæ•ˆç‡ä¸Šï¼ŒRPCå½“ç„¶æ˜¯è¦æ›´èƒœä¸€ç­¹</p>
<p>2ï¼‰ä¸€èˆ¬æ¥è¯´ï¼ŒRPCæœåŠ¡ä¸»è¦æ˜¯é’ˆå¯¹å¤§å‹ä¼ä¸šçš„ï¼Œè€ŒHTTPæœåŠ¡ä¸»è¦æ˜¯é’ˆå¯¹å°ä¼ä¸šçš„ï¼Œå› ä¸ºRPCæ•ˆç‡æ›´é«˜ï¼Œè€ŒHTTPæœåŠ¡å¼€å‘è¿­ä»£ä¼šæ›´å¿«</p>
<p>RPCæœåŠ¡</p>
<p>ä»ä¸‰ä¸ªè§’åº¦æ¥ä»‹ç»RPCæœåŠ¡ï¼šRPCæ¶æ„ï¼ŒåŒæ­¥å¼‚æ­¥è°ƒç”¨ã€æµè¡Œçš„RPCæ¡†æ¶</p>
<p>1ï¼‰RPCæ¶æ„</p>
<p>åŒ…å«äº†å››ä¸ªæ ¸å¿ƒçš„ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Client ,Server,Client Stubä»¥åŠServer Stubï¼Œè¿™ä¸ªStubå¤§å®¶å¯ä»¥ç†è§£ä¸ºå­˜æ ¹ã€‚åˆ†åˆ«è¯´è¯´è¿™å‡ ä¸ªç»„ä»¶ï¼š</p>
<p>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼ŒæœåŠ¡çš„è°ƒç”¨æ–¹ã€‚<br>æœåŠ¡ç«¯ï¼ˆServerï¼‰ï¼ŒçœŸæ­£çš„æœåŠ¡æä¾›è€…ã€‚<br>å®¢æˆ·ç«¯å­˜æ ¹ï¼Œå­˜æ”¾æœåŠ¡ç«¯çš„åœ°å€æ¶ˆæ¯ï¼Œå†å°†å®¢æˆ·ç«¯çš„è¯·æ±‚å‚æ•°æ‰“åŒ…æˆç½‘ç»œæ¶ˆæ¯ï¼Œç„¶åé€šè¿‡ç½‘ç»œè¿œç¨‹å‘é€ç»™æœåŠ¡æ–¹ã€‚<br>æœåŠ¡ç«¯å­˜æ ¹ï¼Œæ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯è§£åŒ…ï¼Œå¹¶è°ƒç”¨æœ¬åœ°çš„æ–¹æ³•<br>2ï¼‰æµè¡Œçš„RPCæ¡†æ¶</p>
<p>ï¼ˆ1ï¼‰gRPCæ˜¯Googleæœ€è¿‘å…¬å¸ƒçš„å¼€æºè½¯ä»¶ï¼ŒåŸºäºæœ€æ–°çš„HTTP2.0åè®®ï¼Œå¹¶æ”¯æŒå¸¸è§çš„ä¼—å¤šç¼–ç¨‹è¯­è¨€</p>
<p>ï¼ˆ2ï¼‰Thriftæ˜¯Facebookçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªè·¨è¯­è¨€çš„æœåŠ¡å¼€å‘æ¡†æ¶</p>
<p>ï¼ˆ3ï¼‰Dubboæ˜¯é˜¿é‡Œé›†å›¢å¼€æºçš„ä¸€ä¸ªæä¸ºå‡ºåçš„RPCæ¡†æ¶ï¼Œåœ¨å¾ˆå¤šäº’è”ç½‘å…¬å¸å’Œä¼ä¸šåº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨</p>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>React(ä¸€):React Hook</title>
    <url>/2022/01/12/React%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="React-Hook"><a href="#React-Hook" class="headerlink" title="React Hook"></a>React Hook</h1><blockquote>
<p>React Hookçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³è®©ç»„ä»¶åœ¨å‡½æ•°å¼ç¼–å†™çš„æ—¶å€™å¯ä»¥åŒæ ·ä½¿ç”¨åˆ°<code>Class</code>ç¼–å†™æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨çš„<code>state</code>å€¼ä»¥åŠç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè®©<code>React</code>ç»„ä»¶å¼€å‘å˜çš„æ›´ä¸ºå®¹æ˜“ç®€å•ï¼Œå‘Šåˆ«<code>Class</code>ç¼–å†™çš„å†—æ‚ï¼Œå•°å—¦ï¼Œä»¥åŠé€»è¾‘æ— æ³•å¾ˆå¥½å¤ç”¨çš„ç¼ºç‚¹.</p>
</blockquote>
<h1 id="Hook-ä½¿ç”¨è§„åˆ™"><a href="#Hook-ä½¿ç”¨è§„åˆ™" class="headerlink" title="Hook ä½¿ç”¨è§„åˆ™"></a>Hook ä½¿ç”¨è§„åˆ™</h1><p><code>Hook</code> å°±æ˜¯<code> JavaScript</code> å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒä»¬ä¼šæœ‰ä¸¤ä¸ªé¢å¤–çš„è§„åˆ™ï¼š</p>
<ul>
<li>åªèƒ½åœ¨<strong>å‡½æ•°æœ€å¤–å±‚</strong>è°ƒç”¨<code> Hook</code>ã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚</li>
<li>åªèƒ½åœ¨ <strong>Reactçš„å‡½æ•°ç»„ä»¶</strong>ä¸­è°ƒç”¨<code> Hook</code>ã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚</li>
</ul>
<h1 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h1><p>ä¼ ç»Ÿçš„ä½¿ç”¨<code>class</code>ç¼–å†™ç»„ä»¶ï¼Œä½¿ç”¨<code>state</code>è®°å½•çŠ¶æ€</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;<span class="built_in">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.setState(&#123; <span class="attr">count</span>: <span class="built_in">this</span>.state.count + <span class="number">1</span> &#125;)&#125;&gt;</span><br><span class="line">          Click me</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>React Hook</code>ç”¨å‡½æ•°å¼ç»„ä»¶é‡å†™ä»¥ä¸Šç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> setCount(count + <span class="number">1</span>)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹        <code>useState</code>éœ€è¦ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ï¼Œå¹¶ä¸”å®ƒä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›äº†<code>count</code>çš„å¼•ç”¨å€¼ï¼Œä»¥åŠä¿®æ”¹<code>count</code>çš„å‡½æ•°ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>ES6</code>è¯­æ³•æ•°ç»„è§£æ„çš„æ–¹å¼è¿›è¡Œå–å€¼.</p>
<p>â€‹        æƒ³è¦ä¿®æ”¹<code>state</code>å€¼åˆ™å¿…é¡»è¦ä½¿ç”¨<code>setState</code>è¿™ä¸ªå‡½æ•°è¿›è¡Œä¿®æ”¹ï¼Œå–å€¼åˆ™ç›´æ¥ä½¿ç”¨å˜é‡å³å¯.</p>
<ul>
<li><strong>å¦‚ä½•å°†ä¸åŒç»„ä»¶çš„<code>state</code>åŒºåˆ†æ¥ç®¡ç†è”ç³»çš„ï¼Ÿ</strong></li>
</ul>
<p><code>React</code>ä½¿ç”¨äº†ä¸€ä¸ªåå«â€œè®°å¿†åŒ–å•å…ƒæ ¼â€çš„åˆ—è¡¨å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªç»„ä»¶ç›¸äº’åˆ†ç¦»ï¼Œç‹¬ç«‹å­˜åœ¨ä¸€ä¸ªï¼Œå½“è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ä¼šå¯¹å•å…ƒæ ¼ä¸­æ·»åŠ å€¼.</p>
<h1 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h1><p>ä½¿ç”¨<code>class</code>ç¼–å†™ç»„ä»¶çš„æ—¶å€™ï¼Œå…¶ä¸­æœ‰ç±»ä¼¼äº<code>Vue</code>çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°(åªæ˜¯å› ä¸ºçš„å…ˆå­¦ä¹ çš„<code>Vue</code>è€Œå·²)ï¼Œè€Œ<code>useEffect</code>çš„ä½œç”¨å°±æ˜¯è®©å‡½æ•°å¼ç»„ä»¶ä¹Ÿæœ‰å¯¹åº”å…¶ç›¸åº”çš„åŠŸèƒ½ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£ç»™ä¸çš„æè¿°.</p>
<blockquote>
<p><code>useEffect</code> Hook çœ‹åš <code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</p>
</blockquote>
<p>å®˜æ–¹å°†<code>Effect</code>ç§°ä½œå‰¯ä½œç”¨ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œ<code>state</code>å……å½“äº†çŠ¶æ€å±‚ï¼Œè€Œ<code>JSX</code>å……å½“äº†<code>UI</code>ï¼Œè€Œè¿™ä¸ª<code>Effect</code>ç›¸å½“äºè¿›è¡Œé¢å¤–çš„åŠ¨æ€ã€é™æ€æ“ä½œï¼Œæ—¢å¯ä»¥èµ‹èƒ½äº<code>state</code>ä¹Ÿå¯ä»¥ä»…ä»…çš„è®°å½•æ—¥å¿—.</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Similar to componentDidMount and componentDidUpdate:</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Update the document title using the browser API</span></span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> setCount(count + <span class="number">1</span>)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>Effect</code>åˆ†ä¸ºéœ€è¦æ¸…é™¤çš„<code>Effect</code>ä»¥åŠæ— éœ€æ¸…é™¤çš„<code>Effect</code>ï¼Œæ¥ä¸‹æ¥ä¸€ä¸€ä»‹ç»ã€‚</p>
<h2 id="æ— éœ€æ¸…é™¤çš„Effect"><a href="#æ— éœ€æ¸…é™¤çš„Effect" class="headerlink" title="æ— éœ€æ¸…é™¤çš„Effect"></a>æ— éœ€æ¸…é™¤çš„Effect</h2><p>å®˜æ–¹æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³<strong>åœ¨ React æ›´æ–° DOM ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚</strong>æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ DOMï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p>
</blockquote>
<p><code>Effect</code>çš„æ‰§è¡Œæ˜¯åœ¨<code>render</code>æ¸²æŸ“å®Œä¹‹åæ‰è¿›è¡Œçš„ï¼Œè¿™ç‚¹ååˆ†å®¹æ˜“éªŒè¯ï¼Œåªéœ€è¦åœ¨<code>useEffect</code>ä¸­æ‰§è¡Œæ‰“å°æ—¥å¿—ï¼Œä»¥åŠåœ¨å¤–éƒ¨ä¹Ÿæ‰§è¡Œæ—¥å¿—æ‰“å°å³å¯çŸ¥é“ã€‚å¸¸è§çš„åœºæ™¯ä¾‹å¦‚ï¼Œæ¸²æŸ“ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼Œå½“æ¸²æŸ“å®Œæ¯•æ—¶éœ€è¦å‘é€ç½‘ç»œè¯·æ±‚è·å–æ•°æ®ï¼Œåˆ™æ­¤æ—¶å°±å¯ä»¥åœ¨<code>useEffect</code>ä¸­è·å–æ•°æ®ç„¶åè¿›è¡Œæ¸²æŸ“ï¼ŒåŒ<code>Vue</code>ä¸­åœ¨<code>mounted</code>ä¸­è·å–æ•°æ®ä¸€æ ·.</p>
<h2 id="éœ€è¦æ¸…é™¤çš„Effect"><a href="#éœ€è¦æ¸…é™¤çš„Effect" class="headerlink" title="éœ€è¦æ¸…é™¤çš„Effect"></a>éœ€è¦æ¸…é™¤çš„Effect</h2><p>ä¸Šæ–¹æ‰€ç¤ºçš„åŠ¿åŠ›ä»£ç ä¸­ï¼Œå¾ˆå®¹æ˜“å‘ç°æ‰€ä½¿ç”¨çš„ä¸ºç®­å¤´å‡½æ•°/æˆ–è€…å¯ä»¥åœ¨<code>useEffect</code>ä¸­å®šä¹‰<code>function</code>å‡½æ•°ï¼Œä¸ºä½•éœ€è¦è¿™ç§è§„å®šï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡è°ƒç”¨<code>useEffect</code>çš„æ—¶å€™éƒ½ä¼šé‡æ–°åŠ è½½å‡½æ•°ï¼Œä»¥æ­¤æ¥ä¿è¯å…¶å†…éƒ¨è·å–åˆ°çš„<code>state</code>çš„å€¼æ˜¯æœ€æ–°çš„.</p>
<p>å½“<code>useEffect</code>ä¸­å­˜åœ¨å®šæ—¶å™¨æ—¶ï¼Œåœ¨å“ªä¸€ç§æ—¶æœºæ¥æ¸…é™¤è¿™ä¸ªå®šæ—¶å™¨æ¥é¿å…å ç”¨å†…å­˜å‘¢ï¼Ÿ<code>useEffect</code>ä¸­æä¾›ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡å‡½æ•°çš„çš„è¿”å›å€¼ï¼Œè¿”å›ä¸€ä¸ªæ¸…é™¤å®šæ—¶å™¨çš„å‡½æ•°ï¼Œé€šå¸¸ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥è¡¨ç¤ºï¼Œä»£ç å¦‚ä¸‹.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React , &#123;useEffect, useRef, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Button</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [count , setCount] = useState(<span class="number">0</span>)</span><br><span class="line">    useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;å¤–éƒ¨å‡½æ•°è¯»å–countï¼š&quot;</span>,count);</span><br><span class="line">        <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            setCount(count + <span class="number">1</span>);</span><br><span class="line">        &#125;,<span class="number">5000</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id)</span><br><span class="line">    &#125;,[count])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;å¤–éƒ¨count:&quot;</span>,count);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Btn onClick=&#123;<span class="function">() =&gt;</span> setCount(count + <span class="number">1</span>)&#125;&gt;&#123;count&#125;&lt;/Btn&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button;</span><br></pre></td></tr></table></figure>



<h2 id="æŒ‰éœ€æ›´æ–°"><a href="#æŒ‰éœ€æ›´æ–°" class="headerlink" title="æŒ‰éœ€æ›´æ–°"></a>æŒ‰éœ€æ›´æ–°</h2><p>æ¯æ¬¡æ›´æ–°ç»„ä»¶çŠ¶æ€æ—¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼ŒåŒæ—¶ä¹Ÿä¼šæ‰§è¡Œ<code>useEffect</code>ï¼Œä½†æ˜¯äº‹å®ä¸Šå¹¶ä¸æ˜¯æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½éœ€è¦æ‰§è¡Œï¼Œäºæ˜¯æä¾›äº†<code>useEffect</code>çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºç»‘å®šæ‰§è¡Œæ¡ä»¶ï¼Œä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;, [count]); <span class="comment">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°ç»„ï¼Œæ˜¯å¯ä»¥å¡«å…¥å¤šä¸ªå€¼çš„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡<code>if</code>æ¡ä»¶è¿›è¡Œè¿‡æ»¤æ“ä½œä»è€Œè·å¾—ç›¸åº”çš„æ•ˆæœ.</p>
<h2 id="æŸ¥é”™æ’ä»¶"><a href="#æŸ¥é”™æ’ä»¶" class="headerlink" title="æŸ¥é”™æ’ä»¶"></a>æŸ¥é”™æ’ä»¶</h2><blockquote>
<h3 id="åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook"><a href="#åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook" class="headerlink" title="åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook"></a>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</h3><p><strong>ä¸è¦åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ Hookã€‚</strong>ä½ å¯ä»¥ï¼š</p>
<ul>
<li>âœ… åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hook</li>
<li>âœ… åœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å…¶ä»– Hook </li>
</ul>
<p>éµå¾ªæ­¤è§„åˆ™ï¼Œç¡®ä¿ç»„ä»¶çš„çŠ¶æ€é€»è¾‘åœ¨ä»£ç ä¸­æ¸…æ™°å¯è§ã€‚</p>
</blockquote>
<p>å®˜æ–¹å‘å¸ƒäº†ä¸€ä¸ªåä¸º <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks"><code>eslint-plugin-react-hooks</code></a> çš„ ESLint æ’ä»¶æ¥å¼ºåˆ¶æ‰§è¡Œè¿™ä¸¤æ¡è§„åˆ™ã€‚å¦‚æœæƒ³å°è¯•ä¸€ä¸‹ï¼Œå¯ä»¥å°†æ­¤æ’ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼š</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">npm install eslint-plugin-react-hooks --save-dev</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ä½ çš„ ESLint é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    <span class="regexp">//</span> ...</span><br><span class="line">    <span class="string">&quot;react-hooks&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="regexp">//</span> ...</span><br><span class="line">    <span class="string">&quot;react-hooks/rules-of-hooks&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="regexp">//</span> æ£€æŸ¥ Hook çš„è§„åˆ™</span><br><span class="line">    <span class="string">&quot;react-hooks/exhaustive-deps&quot;</span>: <span class="string">&quot;warn&quot;</span> <span class="regexp">//</span> æ£€æŸ¥ effect çš„ä¾èµ–</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="è‡ªå®šä¹‰Hook"><a href="#è‡ªå®šä¹‰Hook" class="headerlink" title="è‡ªå®šä¹‰Hook"></a>è‡ªå®šä¹‰Hook</h1><blockquote>
<p>ä¸ºä½•éœ€è¦è‡ªå®šä¹‰Hookï¼Ÿå½“å¤šä¸ªç»„ä»¶éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œä¸ºäº†è¾¾åˆ°é€»è¾‘å¤ç”¨çš„æ•ˆæœï¼Œå°†HookæŠ½ç¦»å‡ºæ¥ï¼Œä¾›ç»„ä»¶ä½¿ç”¨ï¼Œä»¥æ­¤æ¥è¾¾åˆ°å¤ç”¨çš„æ•ˆæœï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæ˜¯é€»è¾‘å¤ç”¨ï¼Œå¹¶ä¸æ˜¯çŠ¶æ€å…±äº«ï¼</p>
</blockquote>
<p>é€šå¸¸æå–è‡ªå®šä¹‰<code>Hook</code>çš„å‡½æ•°åä»¥<code>use</code>å¼€å¤´ï¼Œè¿™æ ·<code>React</code>æ‰èƒ½è¯†åˆ«ä½ çš„è‡ªå®šä¹‰<code>Hook</code>æ˜¯å¦è¿åäº†å‰é¢çš„è¯´æ˜çš„è§„åˆ™ï¼Œä»¥ä¸‹ä¸ºç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useCount</span>(<span class="params">init</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [count , setCount] = useState(init);</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">        setCount(count + <span class="number">1</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h1><p>ç›¸å½“äºå¸¸å¸¸è¯´åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œå½“çˆ¶ç»„ä»¶éœ€è¦å‘å­ç»„ä»¶ä¼ å€¼çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¤§é‡çš„<code>props.xxxx</code>ï¼Œè¿™è¦ä¸€å±‚ä¸€å±‚å¾€ä¸‹ä¼ é€’ï¼Œååˆ†çš„ä¸æ–¹ä¾¿ï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨<code>context</code>æœºåˆ¶ï¼Œå¸¸è§çš„åœºæ™¯æœ‰ä¸»é¢˜åˆ‡æ¢ç­‰ç­‰ï¼Œä»¥ä¸‹ä¸ºç¤ºä¾‹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> themes = &#123;</span><br><span class="line">  light: &#123;</span><br><span class="line">    foreground: <span class="string">&quot;#000000&quot;</span>,</span><br><span class="line">    background: <span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  dark: &#123;</span><br><span class="line">    foreground: <span class="string">&quot;#ffffff&quot;</span>,</span><br><span class="line">    background: <span class="string">&quot;#222222&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ context api åˆ›å»ºä¸Šä¸‹æ–‡ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(themes.light);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">     <span class="comment">// ä½œä¸ºçˆ¶ç»„ä»¶æä¾›æ•°æ® .Provideræ˜¯å¿…å¡«çš„ é»˜è®¤æœ‰ä¸€ä¸ªvalueå±æ€§ ä¸‹æ–¹å–å€¼å–å‡ºçš„å°±æ˜¯valueå€¼</span></span><br><span class="line">    &lt;ThemeContext.Provider value=&#123;themes.dark&#125;&gt;</span><br><span class="line">      &lt;Toolbar /&gt;</span><br><span class="line">    &lt;/ThemeContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toolbar</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ThemedButton /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ThemedButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å–å‡ºçˆ¶çº§ä¼ ä¸‹æ¥çš„å€¼ï¼Œå¯ä»¥åœ¨æ¯ä¸€çº§éƒ½å¯ä»¥å–å‡º</span></span><br><span class="line">  <span class="keyword">const</span> theme = useContext(ThemeContext);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;button style=&#123;&#123; <span class="attr">background</span>: theme.background, <span class="attr">color</span>: theme.foreground &#125;&#125;&gt;</span><br><span class="line">      I am styled by theme context!</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>context</code>æ”¯æŒåµŒå¥—ï¼Œä½†æ˜¯å­ç»„ä»¶ä¼šè¦†ç›–æ‰çˆ¶ç»„ä»¶çš„å€¼.</p>
<h1 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h1><p>ä½¿ç”¨<code>useState</code>æ—¶ï¼Œå½“æœ‰å¤§é‡çš„çŠ¶æ€éœ€è¦ç®¡ç†çš„æ—¶å€™ï¼Œéœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†ï¼Œä¸ºäº†æ›´å¥½çš„ç®¡ç†å¹¶ä¸”ä½¿ç”¨çŠ¶æ€ç®¡ç†ä»£æ›¿<code>useState</code>ï¼Œäºæ˜¯æ¨å‡ºäº†<code>useReducer</code>æ–¹ä¾¿è¿›è¡Œç»Ÿä¸€ç®¡ç†.</p>
<p><code>useReducer</code>å¯ä»¥æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œ<code>userReducer(reducer , initState , [lazyInit])</code></p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç®¡ç†çŠ¶æ€çš„åŠ¨æ€é™æ€æ“ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰æ‰€éœ€è¦çš„<code>state</code></p>
<p>çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºè¿›è¡ŒåŠ¨æ€åŠ è½½ï¼Œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ¥æ”¶æ¥è‡ªçˆ¶ç»„ä»¶çš„å€¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">initialCount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">count</span>: initialCount&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;reset&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> init(action.payload);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">&#123;initialCount&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialCount, init);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;state.count&#125;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;reset&#x27;</span>, <span class="attr">payload</span>: initialCount&#125;)&#125;&gt;</span><br><span class="line">        Reset</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;decrement&#x27;</span>&#125;)&#125;&gt;-&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>&#125;)&#125;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æƒ°æ€§åŠ è½½åˆå§‹åŒ–ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">initialCount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">count</span>: initialCount&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;reset&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> init(action.payload);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">&#123;initialCount&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialCount, init);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;state.count&#125;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;reset&#x27;</span>, <span class="attr">payload</span>: initialCount&#125;)&#125;&gt;</span><br><span class="line">        Reset</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;decrement&#x27;</span>&#125;)&#125;&gt;-&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function">() =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>&#125;)&#125;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®—æ³•å›¾é‰´(ä¸€)</title>
    <url>/2022/03/30/%E7%AE%97%E6%B3%95%E5%9B%BE%E9%89%B4%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h1><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> s[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// æ·»åŠ åç§»å€¼åªæ˜¯ä¸ºäº†é€‚ç”¨ do while è¯­å¥</span></span><br><span class="line">    <span class="comment">// k å–ä¸­é—´å€¼å¯ä»¥ä½¿æ—¶é—´å¤æ‚åº¦æ›´ç¨³å®š</span></span><br><span class="line">    <span class="keyword">int</span> i = l - <span class="number">1</span> , j = r + <span class="number">1</span> , k = s[(l + r - <span class="number">1</span>)&gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(s[i] &lt; k);</span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(s[j] &gt; k);</span><br><span class="line">        <span class="keyword">if</span>( i &lt; j) <span class="built_in">swap</span>(s[i] , s[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä»¥ j ä¸ºåˆ†ç•Œ</span></span><br><span class="line">    <span class="built_in">quick_sort</span>(l , j , s) , <span class="built_in">quick_sort</span>(j+<span class="number">1</span> , r , s);</span><br><span class="line">    <span class="comment">// ä»¥ i ä¸ºåˆ†ç•Œ</span></span><br><span class="line">    <span class="comment">//quick_sort(l , i-1 , s) , quick_sort(i , r , s);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N], tmp[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge_sort</span><span class="params">(<span class="keyword">int</span> q[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="comment">// å½“å·¦æŒ‡é’ˆå¤§äºç­‰äºå³æŒ‡é’ˆä½ç½®æ—¶ç»“æŸé€’å½’</span></span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//ç¡®å®šä¸­é—´ä¸ºåˆ†ç•Œç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«æ’åºä¸¤ä¾§</span></span><br><span class="line">    <span class="built_in">merge_sort</span>(q, l, mid), <span class="built_in">merge_sort</span>(q, mid + <span class="number">1</span>, r);</span><br><span class="line">	<span class="comment">// å– k ä¸ºæ–°æ•°ç»„çš„èµ·ç‚¹ i ä¸ºå·¦è¾¹æ•°ç»„çš„èµ·ç‚¹ ï¼Œj ä¸ºå³è¾¹æ•°ç»„çš„èµ·ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>, i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// å½“ i ä¸ j æœªè¶Šç•Œ</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class="line">        <span class="comment">// æ¯”è¾ƒä¸¤ä¾§æ•°ç»„ä¸­çš„å€¼,å°†æœ€å°å€¼ä»¥æ­¤æ”¾å…¥æ–°çš„æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class="line">        <span class="keyword">else</span> tmp[k ++ ] = q[j ++ ];</span><br><span class="line">    <span class="comment">//æ‰«å°¾å·¥ä½œ,è‹¥å­˜åœ¨æ²¡æœ‰æ”¾å…¥çš„ç›´æ¥æ”¾å…¥å³å¯.</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class="line">	<span class="comment">// å°†å€¼è£…å…¥åŸæ¥çš„æ•°ç»„ä¸­å³å¯å®Œæˆ</span></span><br><span class="line">    <span class="keyword">for</span> (i = l, j = <span class="number">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="æ ‘ä¸å›¾"><a href="#æ ‘ä¸å›¾" class="headerlink" title="æ ‘ä¸å›¾"></a>æ ‘ä¸å›¾</h1><h2 id="é‚»æ¥è¡¨"><a href="#é‚»æ¥è¡¨" class="headerlink" title="é‚»æ¥è¡¨"></a>é‚»æ¥è¡¨</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºæ¯ä¸ªç‚¹kï¼Œå¼€ä¸€ä¸ªå•é“¾è¡¨ï¼Œå­˜å‚¨kæ‰€æœ‰å¯ä»¥èµ°åˆ°çš„ç‚¹ã€‚h[k]å­˜å‚¨è¿™ä¸ªå•é“¾è¡¨çš„å¤´ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">int</span> h[N], e[N], ne[N], idx;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä¸€æ¡è¾¹a-&gt;b</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">idx = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br></pre></td></tr></table></figure>



<h2 id="æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†"><a href="#æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†"></a>æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">    st[u] = <span class="literal">true</span>; <span class="comment">// st[u] è¡¨ç¤ºç‚¹uå·²ç»è¢«éå†è¿‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = h[u]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">        <span class="keyword">int</span> j = e[i];</span><br><span class="line">        <span class="keyword">if</span> (!st[j]) <span class="built_in">dfs</span>(j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†"><a href="#æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†"></a>æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">queue&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">st[<span class="number">1</span>] = <span class="literal">true</span>; <span class="comment">// è¡¨ç¤º1å·ç‚¹å·²ç»è¢«éå†è¿‡</span></span><br><span class="line">q.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (q.<span class="built_in">size</span>())&#123;</span><br><span class="line">    <span class="keyword">int</span> t = q.<span class="built_in">front</span>();</span><br><span class="line">    q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = h[t]; i != <span class="number">-1</span>; i = ne[i])&#123;</span><br><span class="line">        <span class="keyword">int</span> j = e[i];</span><br><span class="line">        <span class="keyword">if</span> (!st[j])&#123;</span><br><span class="line">            st[j] = <span class="literal">true</span>; <span class="comment">// è¡¨ç¤ºç‚¹jå·²ç»è¢«éå†è¿‡</span></span><br><span class="line">            q.<span class="built_in">push</span>(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> g[N][N];  <span class="comment">// å­˜å‚¨æ¯æ¡è¾¹</span></span><br><span class="line"><span class="keyword">int</span> dist[N];  <span class="comment">// å­˜å‚¨1å·ç‚¹åˆ°æ¯ä¸ªç‚¹çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line"><span class="keyword">bool</span> st[N];   <span class="comment">// å­˜å‚¨æ¯ä¸ªç‚¹çš„æœ€çŸ­è·¯æ˜¯å¦å·²ç»ç¡®å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚1å·ç‚¹åˆ°nå·ç‚¹çš„æœ€çŸ­è·¯ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dijkstra</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dist);</span><br><span class="line">    dist[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i ++ )&#123;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">-1</span>;     <span class="comment">// åœ¨è¿˜æœªç¡®å®šæœ€çŸ­è·¯çš„ç‚¹ä¸­ï¼Œå¯»æ‰¾è·ç¦»æœ€å°çš„ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">            <span class="keyword">if</span> (!st[j] &amp;&amp; (t == <span class="number">-1</span> || dist[t] &gt; dist[j]))</span><br><span class="line">                t = j;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨tæ›´æ–°å…¶ä»–ç‚¹çš„è·ç¦»</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j ++ )</span><br><span class="line">            dist[j] = <span class="built_in">min</span>(dist[j], dist[t] + g[t][j]);</span><br><span class="line"></span><br><span class="line">        st[t] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dist[n] == <span class="number">0x3f3f3f3f</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> dist[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="æ•°å­¦çŸ¥è¯†"><a href="#æ•°å­¦çŸ¥è¯†" class="headerlink" title="æ•°å­¦çŸ¥è¯†"></a>æ•°å­¦çŸ¥è¯†</h1><h2 id="GCDæ±‚æœ€å¤§å…¬çº¦æ•°"><a href="#GCDæ±‚æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="GCDæ±‚æœ€å¤§å…¬çº¦æ•°"></a>GCDæ±‚æœ€å¤§å…¬çº¦æ•°</h2><p>è¾—è½¬ç›¸é™¤æ³•æ±‚æœ€å¤§å…¬çº¦æ•°ï¼ŒåŸºäºæ•°å­¦çŸ¥è¯†çš„æ¨¡æ‹Ÿï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š<code> m = 10 , n = 4</code>åˆ™Â·</p>
<p><code>10 / 4 = 2 ... 2</code> =&gt;</p>
<p><code>4 / 2 = 0 ... 0</code> =&gt; <code>2</code> å³ä¸ºæœ€å¤§å…¬çº¦æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€’å½’æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> m , <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="comment">// m &gt; n</span></span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0</span> ? <span class="built_in">gcd</span>(n , m%n) : m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½è¿ç®—æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> m , <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"> 	<span class="keyword">while</span>(n ^= m ^= n ^= m %= n);</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="LCMæ±‚æœ€å°å…¬å€æ•°"><a href="#LCMæ±‚æœ€å°å…¬å€æ•°" class="headerlink" title="LCMæ±‚æœ€å°å…¬å€æ•°"></a>LCMæ±‚æœ€å°å…¬å€æ•°</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€’å½’æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> m , <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="comment">// m &gt; n</span></span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0</span> ? <span class="built_in">gcd</span>(n , m%n) : m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> m , <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m / <span class="built_in">gcd</span>(m , n) * n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
</search>
