<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Dubbo(ä¸€):æ ¸å¿ƒæ¦‚å¿µä¸åŸºç¡€é…ç½®</title>
    <url>/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<p>æ³¨ï¼šå†…å®¹å¤§éƒ¨åˆ†éƒ½å‚è€ƒäº <a href="https://dubbo.apache.org/zh/docs/">Dubboå®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></p>
<h1 id="ğŸ¤¯ä¸ºä½•éœ€è¦RPC"><a href="#ğŸ¤¯ä¸ºä½•éœ€è¦RPC" class="headerlink" title="ğŸ¤¯ä¸ºä½•éœ€è¦RPC"></a>ğŸ¤¯ä¸ºä½•éœ€è¦RPC</h1><img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class>

<p>R P C  (Remote Procedure Callï¼Œä¸­æ–‡æ„æ€å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨)</p>
<p>å¦‚ä¸Šå›¾ ï¼Œ æ˜¯ <code>web</code> å¼€å‘çš„å‘å±•å†å²ï¼Œæ›¾ç»çš„ <code>all in one </code> åº”ç”¨å¼€å‘ï¼Œæ‰€æœ‰æœåŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼ˆåŒ…æ‹¬å‰ç«¯ï¼‰ï¼Œå½“æœåŠ¡é‡è¿›ä¸€æ­¥å¢å¤§æ—¶ï¼Œåº”ç”¨çš„ä½“ç§¯ä¹Ÿä¼šå˜å¾—å·¨å¤§ï¼Œæ­¤æ—¶è¦æƒ³ç»´æŠ¤è¿™ä¸ªåº”ç”¨æ˜¯ååˆ†è´¹åŠ›çš„ï¼Œå¹¶ä¸”è¿™ç§å¼€å‘æ¨¡å¼å¯¼è‡´æ•´ä¸ªåº”ç”¨å¯¼è‡´å¤šäººå¼€å‘æå…¶ä¸ä¾¿ï¼Œè°ƒè¯•ååˆ†å›°éš¾ï¼Œäºæ˜¯å‡ºç°äº† <code>MVC å‰åç«¯åˆ†ç¦»</code>æ¶æ„ï¼Œå¯¹åº”ç”¨è¿›è¡Œåˆ†å±‚å¼€å‘ï¼Œæ¥é™ä½å¼€å‘è€…å·¥ä½œé‡æå‡å¯ç»´æŠ¤æ€§ï¼Œå‰åç«¯åˆ†ç¦»å¼€å‘ ï¼Œå‰åç«¯å¯ä»¥ç‹¬è‡ªå¼€å‘ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡å¼€å‘è¿›åº¦ï¼Œç„¶è€Œé—®é¢˜åˆéšä¹‹è€Œæ¥ï¼ŒåŸºäºåˆ†ç¦»å¼€å‘çš„æ¨¡å¼ï¼Œåç«¯ç³»ç»Ÿå¯èƒ½æ˜¯æœ‰å¤šä¸ªäººä¸€èµ·å¼€å‘çš„ï¼Œå¦‚æœåº”ç”¨Aéœ€è¦åº”ç”¨Bçš„ä¸€äº›æœåŠ¡ï¼Œå¿…é¡»è‡ªå·±é‡æ–°å®ç°ä¸€éå…¶é€»è¾‘ï¼Œååˆ†ä½æ•ˆï¼Œè¿™ä¸€ç‚¹åœ¨å¤§åº”ç”¨ä¸­å°¤ä¸ºæ˜æ˜¾ï¼Œå„ç§æ•°æ®ä¾èµ–æ€§è¾ƒå¼ºï¼Œäºæ˜¯å‡ºç°äº† <code>rpc</code> æ¡†æ¶.å…¶è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯å°†<strong>ç³»ç»ŸB</strong>æä¾›çš„æœåŠ¡<strong>äº¤ç”±ç¬¬ä¸‰æ–¹è¿›è¡Œç®¡ç†</strong>ï¼Œå¹¶ä¸”è¿™ä¸ªç¬¬ä¸‰æ–¹è¿˜å¯ä»¥<strong>å¯¹å¤–å¼€æ”¾</strong>ç³»ç»ŸBæ‰€æä¾›çš„æœåŠ¡ï¼Œ<strong>ç³»ç»ŸA</strong>åˆ™å¯ä»¥é€šè¿‡è¿™ä¸ªç¬¬ä¸‰æ–¹æ¥è·å–<strong>ç³»ç»ŸB</strong>çš„æœåŠ¡ ï¼Œå…¶åº•å±‚å®é™…ä¸Šæ˜¯é‡‡ç”¨ <code>TCP</code>çš„æ–¹å¼è¿›è¡Œè¿æ¥çš„ï¼ŒåŒæ—¶ï¼Œ<code>rpc</code> æ¡†æ¶ä¹Ÿå¯ä»¥å®ç°è·¨è¯­è¨€æä¾›æœåŠ¡ï¼Œä½†æ˜¯ï¼Œ<code>dubbo</code> ç›®å‰è¿˜ä¸æ”¯æŒï¼Œåªæ”¯æŒ<code>java</code> ï¼Œ æ®æˆ‘äº†è§£<code>thriftã€motan</code> , <code>Dubbo</code>å…¶æ¶æ„å¦‚ä¸‹å›¾</p>
<img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class>

<img src="/2021/07/22/Dubbo%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class>



<p><strong>è°ƒç”¨å…³ç³»è¯´æ˜:</strong></p>
<ol>
<li><p>æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿â¾æœåŠ¡æä¾›è€…ã€‚ </p>
</li>
<li><p>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­â¼¼è®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚ </p>
</li>
<li><p>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚ </p>
</li>
<li><p>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚ </p>
</li>
</ol>
<h1 id="ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹"><a href="#ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹" class="headerlink" title="ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹"></a>ğŸ˜›Dubboå¿«é€Ÿå¼€å§‹</h1><p>è¿™é‡Œæ¼”ç¤ºåŸºäº <code>Spring</code> æ¥ä½¿ç”¨ <code>Dubbo</code> ï¼Œ<code>Dubbo</code> å¯ä»¥ å¾ˆå¥½çš„æ¥å…¥ <code>Spring</code> æ²¡æœ‰ä»»ä½•çš„ <code>API</code> ä¾µå…¥</p>
<p>é¦–å…ˆåˆ›å»ºä¸¤ä¸ª<code>module</code>  ï¼Œä½¿ç”¨æ™®é€šçš„<code>mavon</code>é¡¹ç›®æ¥æ„å»ºï¼Œä¸€ä¸ªæ˜¯ <code>dubbo_consumer</code> æœåŠ¡æ¶ˆè´¹è€…ï¼Œä¸€ä¸ªæ˜¯<code>dubbo_provider</code> æœåŠ¡æä¾›è€…</p>
<p>å…ˆå¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><font color="skyblue">é¦–å…ˆå…ˆæ¥å†™ æä¾›è€…</font></p>
</blockquote>
<ul>
<li>å®šä¹‰æœåŠ¡æ¥å£åŠå…¶å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">&quot;æ­£åœ¨è®¿é—®çš„ç”¨æˆ·ä¸ºï¼š&quot;</span>+ username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®<code>Dubbo</code>(åœ¨<code>Spring</code>çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®) </li>
</ul>
<p><code>spring-dubbo.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æä¾›æ–¹åº”ç”¨ä¿¡æ¯ ï¼Œ ç”¨äºè®¡ç®—ä¾èµ–å…³ç³»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;hello-world-app&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒ æš´éœ²æœåŠ¡åœ°å€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;multicast://224.5.6.7:1234&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨dubboåè®®åœ¨20880ç«¯å£æš´éœ²æœåŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;dubbo&quot;</span> <span class="attr">port</span>=<span class="string">&quot;20880&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å£°æ˜éœ€è¦æš´éœ²çš„æœåŠ¡æ¥å£--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å°†å®ç°ç±»æ³¨å…¥springå®¹å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.anthony.service.impl.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åŠ è½½é…ç½®(æœ¬è´¨ä¸Šå°±æ˜¯æ³¨å†Œæ‰€æš´éœ²çš„æˆ–è€…è¯´æ˜¯æä¾›çš„æœåŠ¡)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–é…ç½®</span></span><br><span class="line">        ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring-dubbo.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line">        context.start();</span><br><span class="line">        System.in.read(); <span class="comment">//æŒ‰ä»»æ„é”®é€€å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><font color="skyblue">å†æ¥å†™ æ¶ˆè´¹è€…</font></p>
</blockquote>
<ul>
<li>åˆ›å»ºæœåŠ¡æ¥å£ï¼Œä½†æ˜¯ä¸éœ€è¦åˆ›å»ºå…¶å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
</ul>
<p><code>spring-dubbo.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆè´¹æ–¹åº”ç”¨åï¼Œç”¨äºè®¡ç®—ä¾èµ–å…³ç³»ï¼Œä¸æ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸è¦ä¸æä¾›æ–¹ä¸€æ · --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;consumer-of-hello-world-app&quot;</span>  /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒæš´éœ²å‘ç°æœåŠ¡åœ°å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;multicast://224.5.6.7:1234&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨demoService --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.anthony.service.UserService&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¼€å§‹æµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è¯»å–é…ç½®</span></span><br><span class="line">        ClassPathXmlApplicationContext Context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring-dubbo.xml&quot;</span>);</span><br><span class="line">       	<span class="comment">//è®¢é˜…æœåŠ¡</span></span><br><span class="line">        Context.start();;</span><br><span class="line">        <span class="comment">//è·å–æœåŠ¡</span></span><br><span class="line">        UserService userService = Context.getBean(<span class="string">&quot;userService&quot;</span>,UserService.class);</span><br><span class="line">        <span class="comment">//æœåŠ¡è°ƒç”¨</span></span><br><span class="line">        String hello_world = userService.findByUsername(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        System.out.println(hello_world);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ˜Dubboé…ç½®"><a href="#ğŸ˜Dubboé…ç½®" class="headerlink" title="ğŸ˜Dubboé…ç½®"></a>ğŸ˜Dubboé…ç½®</h1><table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>ç”¨é€”</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;dubbo:service/&gt;</code></td>
<td>æœåŠ¡é…ç½®</td>
<td>ç”¨äºæš´éœ²ä¸€ä¸ªæœåŠ¡ï¼Œå®šä¹‰æœåŠ¡çš„å…ƒä¿¡æ¯ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥ç”¨å¤šä¸ªåè®®æš´éœ²ï¼Œä¸€ä¸ªæœåŠ¡ä¹Ÿå¯ä»¥æ³¨å†Œåˆ°å¤šä¸ªæ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td><code>&lt;dubbo:reference/&gt;</code></td>
<td>å¼•ç”¨é…ç½®</td>
<td>ç”¨äºåˆ›å»ºä¸€ä¸ªè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œä¸€ä¸ªå¼•ç”¨å¯ä»¥æŒ‡å‘å¤šä¸ªæ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td><code>&lt;dubbo:protocol/&gt;</code></td>
<td>åè®®é…ç½®</td>
<td>ç”¨äºé…ç½®æä¾›æœåŠ¡çš„åè®®ä¿¡æ¯ï¼Œåè®®ç”±æä¾›æ–¹æŒ‡å®šï¼Œæ¶ˆè´¹æ–¹è¢«åŠ¨æ¥å—</td>
</tr>
<tr>
<td><code>&lt;dubbo:application/&gt;</code></td>
<td>åº”ç”¨é…ç½®</td>
<td>ç”¨äºé…ç½®å½“å‰åº”ç”¨ä¿¡æ¯ï¼Œä¸ç®¡è¯¥åº”ç”¨æ˜¯æä¾›è€…è¿˜æ˜¯æ¶ˆè´¹è€…</td>
</tr>
<tr>
<td><code>&lt;dubbo:module/&gt;</code></td>
<td>æ¨¡å—é…ç½®</td>
<td>ç”¨äºé…ç½®å½“å‰æ¨¡å—ä¿¡æ¯ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:registry/&gt;</code></td>
<td>æ³¨å†Œä¸­å¿ƒé…ç½®</td>
<td>ç”¨äºé…ç½®è¿æ¥æ³¨å†Œä¸­å¿ƒç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td><code>&lt;dubbo:monitor/&gt;</code></td>
<td>ç›‘æ§ä¸­å¿ƒé…ç½®</td>
<td>ç”¨äºé…ç½®è¿æ¥ç›‘æ§ä¸­å¿ƒç›¸å…³ä¿¡æ¯ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:provider/&gt;</code></td>
<td>æä¾›æ–¹é…ç½®</td>
<td>å½“ ProtocolConfig å’Œ ServiceConfig æŸå±æ€§æ²¡æœ‰é…ç½®æ—¶ï¼Œé‡‡ç”¨æ­¤ç¼ºçœå€¼ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:consumer/&gt;</code></td>
<td>æ¶ˆè´¹æ–¹é…ç½®</td>
<td>å½“ ReferenceConfig æŸå±æ€§æ²¡æœ‰é…ç½®æ—¶ï¼Œé‡‡ç”¨æ­¤ç¼ºçœå€¼ï¼Œå¯é€‰</td>
</tr>
<tr>
<td><code>&lt;dubbo:method/&gt;</code></td>
<td>æ–¹æ³•é…ç½®</td>
<td>ç”¨äº ServiceConfig å’Œ ReferenceConfig æŒ‡å®šæ–¹æ³•çº§çš„é…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td><code>&lt;dubbo:argument/&gt;</code></td>
<td>å‚æ•°é…ç½®</td>
<td>ç”¨äºæŒ‡å®šæ–¹æ³•å‚æ•°é…ç½®</td>
</tr>
</tbody></table>
<h2 id="ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»"><a href="#ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»" class="headerlink" title="ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»"></a>ğŸ¤—ä¸åŒç²’åº¦é…ç½®çš„è¦†ç›–å…³ç³»</h2><p>ä»¥ timeout ä¸ºä¾‹ï¼Œä¸‹å›¾æ˜¾ç¤ºäº†é…ç½®çš„æŸ¥æ‰¾é¡ºåºï¼Œå…¶å®ƒ retries, loadbalance, actives ç­‰ç±»ä¼¼ï¼š</p>
<ul>
<li>æ–¹æ³•çº§ä¼˜å…ˆï¼Œæ¥å£çº§æ¬¡ä¹‹ï¼Œå…¨å±€é…ç½®å†æ¬¡ä¹‹ã€‚</li>
<li>å¦‚æœçº§åˆ«ä¸€æ ·ï¼Œåˆ™æ¶ˆè´¹æ–¹ä¼˜å…ˆï¼Œæä¾›æ–¹æ¬¡ä¹‹ã€‚</li>
</ul>
<p>å…¶ä¸­ï¼ŒæœåŠ¡æä¾›æ–¹é…ç½®ï¼Œé€šè¿‡ URL ç»ç”±æ³¨å†Œä¸­å¿ƒä¼ é€’ç»™æ¶ˆè´¹æ–¹ã€‚</p>
<p><img src="https://dubbo.apache.org/imgs/user/dubbo-config-override.jpg" alt="dubbo-config-override"></p>
<p>ï¼ˆå»ºè®®ç”±æœåŠ¡æä¾›æ–¹è®¾ç½®è¶…æ—¶ï¼Œå› ä¸ºä¸€ä¸ªæ–¹æ³•éœ€è¦æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼ŒæœåŠ¡æä¾›æ–¹æ›´æ¸…æ¥šï¼Œå¦‚æœä¸€ä¸ªæ¶ˆè´¹æ–¹åŒæ—¶å¼•ç”¨å¤šä¸ªæœåŠ¡ï¼Œå°±ä¸éœ€è¦å…³å¿ƒæ¯ä¸ªæœåŠ¡çš„è¶…æ—¶è®¾ç½®ï¼‰ã€‚</p>
<p>ç†è®ºä¸Š ReferenceConfig ä¸­é™¤äº†<code>interface</code>è¿™ä¸€é¡¹ï¼Œå…¶ä»–æ‰€æœ‰é…ç½®é¡¹éƒ½å¯ä»¥ç¼ºçœä¸é…ç½®ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨ä½¿ç”¨ConsumerConfigï¼ŒServiceConfig, ProviderConfigç­‰æä¾›çš„ç¼ºçœé…ç½®ã€‚</p>
]]></content>
      <categories>
        <category>åˆ†å¸ƒå¼</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­é…ç½®Redis</title>
    <url>/2021/05/27/Linux%E4%B8%AD%E9%85%8D%E7%BD%AERedis/</url>
    <content><![CDATA[<h1 id="ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis"><a href="#ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis" class="headerlink" title="ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis"></a>ğŸ‡Linuxç³»ç»Ÿä¸‹å®‰è£…Redis</h1><p>è¿™é‡Œå…ˆç»™å‡ºæ‰€ç”¨åˆ°çš„ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p>VMware 15.x+</p>
<p>CentOS 7 </p>
<p>Redis 4.0.10</p>
</blockquote>
<p>â€‹        è¿˜è¦ä½¿ç”¨ <code>xshell</code> ä»¥åŠ <code>xftp</code> è¿™ä¸¤ä¸ªå·¥å…·ï¼Œä¸€ä¸ªæ˜¯ç”¨æ¥è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¿›è¡Œå‘½ä»¤è¡Œæ“ä½œæœåŠ¡å™¨ï¼Œä¸€ä¸ªæ˜¯è¿æ¥è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¼ è¾“ä»¥åŠå¯¹æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶è¿›è¡Œä¸€ç³»åˆ—æ“ä½œ.</p>
<ul>
<li>åˆ©ç”¨<code>xftp</code> å°†ä¸‹è½½å¥½çš„ <code>redis.tar</code> ä¸Šä¼ åˆ°è™šæ‹Ÿæœºä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¯ä¸Šä¼ åˆ°æ ¹ç›®å½•ä¸‹çš„<code>opt</code>ç›®å½•ä¹‹ä¸­</li>
<li>åˆ©ç”¨ <code>xshell</code> æˆ–è€… <code>VMware</code> ç»ˆç«¯å°†å‹ç¼©åŒ…è¿›è¡Œè§£å‹å®‰è£…ï¼Œè§£å‹ç¼©ä¹‹å‰éœ€è¦æŠŠç»ˆç«¯è·¯å¾„åˆ‡æ¢åˆ°<code>tar</code>åŒ…æ‰€åœ¨è·¯å¾„</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å¯¹taråŒ…è¿›è¡Œè§£å‹</span></span><br><span class="line"><span class="bullet">-</span> tar -zxvf redis-4.0.10.tar.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>å®‰è£…<code>gcc</code>ç¼–è¯‘<code>redis</code> æºç  (<code>Redis</code>æ˜¯<code>C</code>è¯­è¨€æ‰€ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦<code>c</code>è¯­è¨€çš„ç¼–è¯‘å™¨ <code>gcc</code>è¿›è¡Œç¼–è¯‘)</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 5.å®‰è£…gcc  </span></span><br><span class="line"><span class="bullet">-</span> yum install -y gcc</span><br><span class="line"></span><br><span class="line"><span class="section"># 6.è¿›å…¥è§£å‹ç¼©ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="bullet">-</span> make MALLOC=libc</span><br><span class="line"></span><br><span class="line"><span class="section"># 7.ç¼–è¯‘å®Œæˆåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line"><span class="bullet">-</span> make install PREFIX=/usr/redis</span><br><span class="line"></span><br><span class="line"><span class="section"># 8.è¿›å…¥/usr/redisç›®å½•å¯åŠ¨redisæœåŠ¡ </span></span><br><span class="line"><span class="bullet">-</span> ./redis-server</span><br></pre></td></tr></table></figure>

<img src="/2021/05/27/Linux%E4%B8%AD%E9%85%8D%E7%BD%AERedis/1.png" class title="é…ç½®æˆåŠŸæç¤º">

<ul>
<li>å¤åˆ¶ä¸€ä¸ªä¼šè¯ï¼Œè¿›è¡Œå®¢æˆ·ç«¯è¿æ¥</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 9.RedisæœåŠ¡ç«¯å£é»˜è®¤æ˜¯ 6379</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 10.è¿›å…¥binç›®å½•æ‰§è¡Œå®¢æˆ·ç«¯è¿æ¥æ“ä½œ</span></span><br><span class="line"><span class="bullet">-</span> ./redis-cli â€“p 6379</span><br></pre></td></tr></table></figure>

<p>å‡ºç°å¦‚ä¸‹æç¤ºå³è¿æ¥æˆåŠŸ !</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[root@localhost bin]# ./redis-cli -p 6379</span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>



<h1 id="ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥"><a href="#ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥" class="headerlink" title="ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥"></a>ğŸ‰é…ç½®RedisæœåŠ¡è¿œç¨‹è¿æ¥</h1><p>â€‹        é€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šçœ‹<code>Redis</code>ä¸­çš„æ•°æ®ï¼Œä½¿ç”¨<code>xshell</code>ç”¨å‘½ä»¤æ¥æŸ¥è¯¢æ•ˆç‡ååˆ†ä½ä¸‹ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>Redis</code>å¯è§†åŒ–å·¥å…·åœ¨æœ¬åœ°è¿æ¥åï¼Œæœ¬åœ°æŸ¥çœ‹æ•°æ®åº“ä¸­çš„å†…å®¹.</p>
<ul>
<li><p>å¯ä»¥åœ¨æœ¬åœ°å…ˆå®‰è£… <code>RedisDeskManager</code></p>
</li>
<li><p>Linuxä¸­å®‰è£…é˜²ç«å¢™æœåŠ¡</p>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å®‰è£…iptables-services</span></span><br><span class="line"><span class="bullet">-</span> yum install iptables-services</span><br><span class="line"></span><br><span class="line"><span class="section"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="bullet">-</span> systemctl enable iptables</span><br><span class="line"><span class="bullet">-</span> systemctl start iptables</span><br><span class="line"></span><br><span class="line"><span class="section"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></span><br><span class="line"><span class="bullet">-</span> service iptables status</span><br><span class="line"></span><br><span class="line"><span class="section"># å…³é—­é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables stop</span><br><span class="line"></span><br><span class="line"><span class="section"># æ‰“å¼€é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables start </span><br><span class="line"></span><br><span class="line"><span class="section"># é‡å¯é˜²ç«å¢™</span></span><br><span class="line"><span class="bullet">-</span> service iptables restart </span><br></pre></td></tr></table></figure>



<ul>
<li><p>ç¼–è¾‘<code>Linux</code>é˜²ç«å¢™ </p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># å¢åŠ é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line"><span class="bullet">-</span> vi /etc/sysconfig/iptables</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŠ å…¥é˜²ç«å¢™è§„åˆ™ï¼š<code>-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 6379 -j ACCEPT</code></p>
</li>
<li><p>å°†å‹ç¼©åŒ…è§£å‹ç›®å½•ä¹‹ä¸­çš„<code>redis.conf</code> ç§»åŠ¨åˆ° <code>usr/redis</code> ä¸‹ï¼ˆä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼‰</p>
<ul>
<li>æ³¨æ„ï¼šä¸€å®šè¦ç”¨ç®¡ç†å‘˜èº«ä»½è¿›è¡Œç¼–è¾‘ï¼Œä¸ç„¶æ–‡ä»¶ä¸ºåªè¯»æ–‡ä»¶æ— æ³•æ›´æ”¹</li>
</ul>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># æ›´æ”¹ç™½åå•</span></span><br><span class="line">bind 127.0.0.1 </span><br><span class="line"><span class="section"># æ”¹ä¸º ï¼ˆæ³¨é‡Šæ‰ï¼‰</span></span><br><span class="line">= &gt; # bind 127.0.0.1 </span><br><span class="line"></span><br><span class="line"><span class="section"># å°†yesæ”¹ä¸ºno</span></span><br><span class="line">protected-mode yes</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownå…¥é—¨</title>
    <url>/2021/04/09/Markdown%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="1-ä»£ç å—"><a href="#1-ä»£ç å—" class="headerlink" title="1.ä»£ç å—:"></a>1.ä»£ç å—:</h2><p>â€‹    ä½¿ç”¨ä¸‰ä¸ª â€œ ``` â€ å³å¯ç”Ÿæˆä»£ç å—,å¹¶ä¸”å¯ä»¥é€‰æ‹©è¯­è¨€ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( args [] string)</span></span>&#123;</span><br><span class="line">        System.println(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="2-æ ‡é¢˜"><a href="#2-æ ‡é¢˜" class="headerlink" title="2.æ ‡é¢˜"></a>2.æ ‡é¢˜</h2><p>â€‹    ä½¿ç”¨ â€œ # â€ æ¥è¡¨ç¤ºï¼Œâ€œ # â€è¶Šå¤šå­—ä½“è¶Šå° ï¼Œ æœ€å¤šå…­çº§æ ‡é¢˜ï¼Œæ³¨æ„ï¼š# åé¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜ </span><br></pre></td></tr></table></figure>

<h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6><h1 id="3-å­—ä½“"><a href="#3-å­—ä½“" class="headerlink" title="3.å­—ä½“"></a>3.å­—ä½“</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ ç²—</span></span><br><span class="line">	**åŠ ç²—**</span><br><span class="line"><span class="comment">//ä»£ç é«˜äº®æ˜¾ç¤º</span></span><br><span class="line">    ==é«˜äº®==</span><br><span class="line"><span class="comment">//åˆ é™¤çº¿</span></span><br><span class="line">    ~åˆ é™¤çº¿~</span><br><span class="line"><span class="comment">//æ–œä½“</span></span><br><span class="line">    *æ–œä½“*</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ï¼ˆé«˜äº®å¥½åƒæœ‰ç‚¹é—®é¢˜å“ˆï¼‰</p>
<p><strong>åŠ ç²—</strong></p>
<p><del>åˆ é™¤çº¿</del></p>
<p><em>æ–œä½“</em></p>
<h1 id="4-å¼•ç”¨"><a href="#4-å¼•ç”¨" class="headerlink" title="4.å¼•ç”¨"></a>4.å¼•ç”¨</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨è¯­æ³•</span></span><br><span class="line">&gt;ä½œè€…:XXX</span><br><span class="line">&gt;&gt;ä½œè€…:XXX</span><br><span class="line">&gt;&gt;&gt;ä½œè€…:XXX</span><br></pre></td></tr></table></figure>



<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
<blockquote>
<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>ä½œè€…:XXX</p>
</blockquote>
</blockquote>
</blockquote>
<h1 id="5-åˆ†å‰²çº¿"><a href="#5-åˆ†å‰²çº¿" class="headerlink" title="5.åˆ†å‰²çº¿"></a>5.åˆ†å‰²çº¿</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†å‰²çº¿</span></span><br><span class="line">	---</span><br><span class="line"><span class="comment">//åˆ†å‰²çº¿2</span></span><br><span class="line">   	***</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h1 id="6-å›¾ç‰‡æ’å…¥"><a href="#6-å›¾ç‰‡æ’å…¥" class="headerlink" title="6.å›¾ç‰‡æ’å…¥"></a>6.å›¾ç‰‡æ’å…¥</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åœ¨çº¿å›¾ç‰‡å’Œæœ¬åœ°å›¾ç‰‡</span></span><br><span class="line">![å¥¥ç‰¹æ›¼](https:<span class="comment">//ss2.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/42166d224f4a20a46b610b709b529822720ed00d.jpg)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://ss2.baidu.com/-vo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/42166d224f4a20a46b610b709b529822720ed00d.jpg" alt="å¥¥ç‰¹æ›¼" title="å¥¥ç‰¹æ›¼"></p>
<img src="/2021/04/09/Markdown%E5%85%A5%E9%97%A8/ddm.jpg" class title="å®å½“çŒ«">





<h1 id="7-è¶…é“¾æ¥"><a href="#7-è¶…é“¾æ¥" class="headerlink" title="7.è¶…é“¾æ¥"></a>7.è¶…é“¾æ¥</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¶…é“¾æ¥è¯­æ³•</span></span><br><span class="line">[å†…å®¹](é“¾æ¥)</span><br></pre></td></tr></table></figure>

<p><a href="www.baidu.com">ç™¾åº¦</a></p>
<h1 id="8-åˆ—è¡¨"><a href="#8-åˆ—è¡¨" class="headerlink" title="8.åˆ—è¡¨"></a>8.åˆ—è¡¨</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ— åºåˆ—è¡¨</span></span><br><span class="line">- ç›®å½•<span class="number">1</span></span><br><span class="line">- ç›®å½•<span class="number">2</span></span><br><span class="line">- ç›®å½•<span class="number">3</span></span><br><span class="line">- ç›®å½•<span class="number">4</span></span><br><span class="line"><span class="comment">//æœ‰åºåˆ—è¡¨</span></span><br><span class="line"><span class="number">1</span>+. +åç§°</span><br></pre></td></tr></table></figure>





<ul>
<li>ç›®å½•1</li>
<li>ç›®å½•2</li>
<li>ç›®å½•3</li>
<li>ç›®å½•4</li>
</ul>
<ol>
<li>é¦–é¡µ</li>
<li>æ‹‰æ–‡å…‹åŠ³</li>
<li>æŒ–é‡‘çŸ¿ä¸ºäº†æ•‘</li>
</ol>
<h1 id="9-è¡¨æ ¼"><a href="#9-è¡¨æ ¼" class="headerlink" title="9.è¡¨æ ¼"></a>9.è¡¨æ ¼</h1><p>â€‹    ä¸€èˆ¬æƒ…å†µä¸‹ç›´æ¥ç”¨Typoraå¿«é€Ÿç”Ÿæˆï¼Œååˆ†æ–¹ä¾¿</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL(ä¸€)</title>
    <url>/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸŠMySQLçš„å®‰è£…"><a href="#ğŸŠMySQLçš„å®‰è£…" class="headerlink" title="ğŸŠMySQLçš„å®‰è£…"></a>ğŸŠMySQLçš„å®‰è£…</h1><p>â€‹    â‘ ï¼šå»å®˜ç½‘ä¸‹è½½ç¤¾åŒºç‰ˆä¸Šé¢çš„ä¸€ä¸ªï¼›<br>â€‹    ï¼ˆå»ºè®®å¤åˆ¶ä¸‹è½½åœ°å€ç„¶ååœ¨è¿…é›·å½“ä¸­ä¸‹è½½æ¯”è¾ƒå¿«ï¼‰<br>â€‹    â‘¡ï¼šåœ¨éCç›˜å»ºä¸€ä¸ª <code>MySQL</code> æ–‡ä»¶å¤¹è£…å…¥ä¸‹è½½æ–‡ä»¶å¹¶ä¸”è§£å‹ï¼›<br>â€‹    â‘¢ï¼šå°†binç›®å½•é…å…¥ç¯å¢ƒå˜é‡ï¼›<br>â€‹    â‘£ï¼šç¼–å†™é…ç½®æ–‡ä»¶ï¼š(å…ˆå»ºæ–‡æœ¬æ–‡ä»¶ï¼Œç¼–å†™å¥½ä»¥åï¼Œå°†æ–‡ä»¶æ›´æ”¹ä¸º <code>my.ini</code> æ–‡ä»¶å¹¶æ”¹ä»¥ <code>ANSCI</code> ç¼–è¯‘ä¿å­˜)ï¼›<br>â€‹        å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ï¼‰è®¾ç½® <code>mysql</code> çš„å®‰è£…ç›®å½•å’Œæ•°æ®åº“çš„æ•°æ®å­˜æ”¾ç›®å½•æ ¹æ®ä¸ªäººä¸‹è½½ä½ç½®è¿›æ›´æ”¹<br>â€‹            </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line"></span><br><span class="line">	[mysqld]</span><br><span class="line">	# è®¾ç½®3306ç«¯å£</span><br><span class="line">	port=3306</span><br><span class="line">	# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•</span><br><span class="line">	basedir=Z:\\MySQL8.0\\mysql-8.0.22-winx64</span><br><span class="line">	# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•</span><br><span class="line">	datadir=Z:\\MySQL8.0\\mysql-8.0.22-winx64\\data</span><br><span class="line">	# å…è®¸æœ€å¤§è¿æ¥æ•°</span><br><span class="line">	max_connections=200</span><br><span class="line">	# å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚</span><br><span class="line">	max_connect_errors=10</span><br><span class="line">	# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºutf8mb4</span><br><span class="line">	character-set-server=utf8mb4</span><br><span class="line">	# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span><br><span class="line">	default-storage-engine=INNODB</span><br><span class="line">	# é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯</span><br><span class="line">	#mysql_native_password</span><br><span class="line">	default_authentication_plugin=mysql_native_password</span><br><span class="line">	[mysql]</span><br><span class="line">	# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span><br><span class="line">	default-character-set=utf8mb4</span><br><span class="line">	[client]</span><br><span class="line">	# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£</span><br><span class="line">	port=3306</span><br><span class="line">	default-character-set=utf8mb4</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">â‘¤ï¼šå¯¹MySQLè¿›è¡Œåˆå§‹åŒ–å®‰è£…ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦ï¼›</span><br><span class="line">å¹¶ä¸”å°†è·¯å¾„åˆ‡æ¢è‡³binç›®å½•ä¸‹ï¼›</span><br><span class="line">â‘¥ï¼š</span><br><span class="line">	1.è¾“å…¥å‘½ä»¤ï¼šmysqld --initialize --console </span><br><span class="line">		è¿›è¡Œåˆå§‹åŒ–,æœ€åé¢ä¼šæ˜¾ç¤ºéšæœºç”Ÿæˆçš„å¯†ç ï¼Œè¦è®°ä½</span><br><span class="line">	2.è¾“å…¥å‘½ä»¤ï¼šmysqld -install mysql</span><br><span class="line">		å‡ºç°ï¼šService successfully installed å³æˆåŠŸ</span><br><span class="line">	3.å¯åŠ¨mysqlæœåŠ¡ ï¼šnet start mysql</span><br><span class="line">	   å…³é—­mysqlæœåŠ¡ ï¼š net stop mysql</span><br><span class="line">	4.ä¿®æ”¹å¯†ç  </span><br><span class="line">		ALTER USER &#x27;root&#x27; @&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;å¯†ç &#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>è¡¥å……ï¼šæœ‰çš„ç”µè„‘ä¼šç¼ºå°‘ä¸€äº›æ³¨å†Œè¡¨ï¼Œå®‰è£…ä¸€ä¸ªVC++2015redistå³å¯</strong></p>
<h1 id="ğŸMySQLç›¸å…³æ¦‚å¿µ"><a href="#ğŸMySQLç›¸å…³æ¦‚å¿µ" class="headerlink" title="ğŸMySQLç›¸å…³æ¦‚å¿µ"></a>ğŸMySQLç›¸å…³æ¦‚å¿µ</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯SQLï¼Ÿ</strong></p>
<p>&emsp;&emsp;ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ä¸€é—¨æ ‡å‡†é€šç”¨çš„è¯­è¨€ã€‚æ ‡å‡†çš„ <code>sql</code> é€‚åˆäºæ‰€æœ‰æ•°æ®åº“äº§å“ ,<code>SQL</code> å±äºé«˜çº§è¯­è¨€ã€‚åªè¦èƒ½çœ‹æ‡‚è‹±è¯­å•è¯çš„ï¼Œå†™å‡ºæ¥çš„ <code>sql</code> è¯­å¥ï¼Œå¯ä»¥è¯»æ‡‚ä»€ä¹ˆæ„æ€. <code>SQL</code> è¯­å¥åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®é™…ä¸Šå†…éƒ¨ä¹Ÿä¼šå…ˆè¿›è¡Œç¼–è¯‘ï¼Œç„¶ååœ¨æ‰§è¡Œ <code>sql</code> .( <code>sql</code> è¯­å¥çš„ç¼–è¯‘ç”±<code>DBMS</code>å®Œæˆ.)</p>
</li>
<li><p><strong>DB ã€DBMS æ¦‚å¿µï¼Ÿ</strong></p>
<ul>
<li>DBï¼ˆDatabaseï¼‰ï¼šæ•°æ®åº“ï¼Œå­˜å‚¨åœ¨ç”µè„‘ç¡¬ç›˜ä¸­</li>
<li>DBMSï¼ˆDataBase Management Systemï¼‰ï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå¸¸è§çš„æœ‰MySQL ã€Sqlserver ã€Oracleã€DB2 ã€Sybase</li>
</ul>
</li>
<li><p><strong>DBMSæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</strong></p>
</li>
</ul>
<p>&emsp;&emsp;<code>DBMS</code> è´Ÿè´£æ‰§è¡Œ <code>sql</code> è¯­å¥ï¼Œé€šè¿‡æ‰§è¡Œ <code>sql</code> è¯­å¥å¯¹ <code>DB</code> ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œ.</p>
<ul>
<li><strong>è¡¨</strong></li>
</ul>
<p>&emsp;&emsp;è¡¨ï¼ˆtable) æ˜¯æ•°æ®åº“çš„åŸºæœ¬ç»„æˆå•ä½ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ç”¨è¡¨ï¼Œæ— ä¸æ˜¯ä¸ºäº†è®©æ•°æ®æ–¹ä¾¿æŸ¥è¯¢å’Œç»Ÿè®¡ä»¥åŠä¿®æ”¹ï¼Œååˆ†ä¾¿åˆ©ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè®©æˆ‘ä»¬å¯è¯»æ€§å˜å¼º. ä¸€ä¸ªè¡¨åŒ…æ‹¬è¡Œå’Œåˆ—.</p>
<p>&emsp;&emsp;<code>è¡Œ</code>ï¼šè¢«ç§°ä¸ºæ•°æ®è®°å½•ï¼ˆdataï¼‰</p>
<p>&emsp;&emsp;<code>åˆ—</code>ï¼šè¢«ç§°ä¸ºå­—æ®µï¼ˆcolumnï¼‰</p>
<p> &emsp;&emsp;<strong>å­—æ®µåŒ…å«çš„å±æ€§æœ‰ï¼šå­—æ®µå ã€æ•°æ®ç±»å‹ ã€ç›¸å…³çº¦æŸ</strong></p>
<ul>
<li><p><strong>SQLè¯­å¥çš„åˆ†ç±»</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰ï¼šæŸ¥è¯¢è¯­å¥ï¼Œå‡¡æ˜¯selectè¯­å¥éƒ½æ˜¯DQLã€‚</span><br><span class="line"></span><br><span class="line">DMLï¼ˆæ•°æ®æ“ä½œï¼‰ï¼šinsert delet update å¯¹è¡¨å½“ä¸­æ•°æ®è¿›å­¦æ ¡å¢åˆ æ”¹</span><br><span class="line"></span><br><span class="line">DDLï¼ˆæ•°æ®å®šä¹‰ï¼‰ï¼šcreat drop alter å¯¹è¡¨ç»“æ„çš„å¢åˆ æ”¹ã€‚</span><br><span class="line"></span><br><span class="line">TCLï¼ˆäº‹ç‰©æ§åˆ¶ï¼‰ï¼šcommitæäº¤äº‹åŠ¡ï¼Œrollbackå›æ»šäº‹åŠ¡ã€‚ï¼ˆTä¸ºtransactionï¼‰</span><br><span class="line"></span><br><span class="line">DCLï¼ˆæ•°æ®æ§åˆ¶ï¼‰ï¼šgrantæˆæƒã€revokeæ’¤é”€æƒé™ã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="ğŸ‡MySQLåŸºæœ¬è¯­å¥"><a href="#ğŸ‡MySQLåŸºæœ¬è¯­å¥" class="headerlink" title="ğŸ‡MySQLåŸºæœ¬è¯­å¥"></a>ğŸ‡MySQLåŸºæœ¬è¯­å¥</h1><p>â€‹    <strong>ç™»å½•ï¼šmysql -uroot -på¯†ç ï¼›æˆ–è€… mysql -uroot -på›è½¦ï¼›ï¼ˆä¸‹ä¸€è¡Œè¾“å…¥å¯†ç ä¸å¯è§ï¼‰</strong><br>â€‹    <strong>é€€å‡ºï¼šexit</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹æ•°æ®åº“</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">#åˆå§‹åŒ–æ•°æ®</span><br><span class="line">source æ‹–åˆ°æºæ–‡ä»¶åˆ°CMDä¸­ </span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šæ‰€æœ‰ <code>sql</code> è¯­å¥éƒ½è¦ä»¥è‹±æ–‡<code>â€˜;â€™</code> ç»“æŸä¸ç„¶ä¸ä¼šæ‰§è¡Œï¼Œä»¥ä¸Šå®é™…ä¸ºMySQLçš„å‘½ä»¤ï¼Œè€Œä¸”sqlè¯­å¥ä¸åŒºåˆ†å¤§å°å†™å“¦</strong></p>
<h2 id="æŸ¥è¯¢è¡¨ç»“æ„"><a href="#æŸ¥è¯¢è¡¨ç»“æ„" class="headerlink" title="æŸ¥è¯¢è¡¨ç»“æ„"></a>æŸ¥è¯¢è¡¨ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢æŸä¸ªè¡¨çš„ç»“æ„</span><br><span class="line">desc è¡¨å;</span><br><span class="line"></span><br><span class="line">è¡¨ç»“æ„å½“ä¸­ä¼šæ˜¾ç¤ºï¼Œå­—æ®µå ï¼Œ æ•°æ®ç±»å‹ ï¼Œçº¦æŸ ï¼Œ é»˜è®¤å€¼ </span><br></pre></td></tr></table></figure>



<h2 id="æŸ¥è¯¢è¯­å¥"><a href="#æŸ¥è¯¢è¯­å¥" class="headerlink" title="æŸ¥è¯¢è¯­å¥"></a>æŸ¥è¯¢è¯­å¥</h2><h3 id="æ™®é€šæŸ¥è¯¢è¯­å¥"><a href="#æ™®é€šæŸ¥è¯¢è¯­å¥" class="headerlink" title="æ™®é€šæŸ¥è¯¢è¯­å¥"></a>æ™®é€šæŸ¥è¯¢è¯­å¥</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æŸ¥è¯¢æŸä¸ªå­—æ®µ</span><br><span class="line">select å­—æ®µ from è¡¨å;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</span><br><span class="line">select * from è¡¨å;</span><br><span class="line"></span><br><span class="line">#ä¸€èˆ¬æ€§æ ¼å¼</span><br><span class="line">select å­—æ®µ1,å­—æ®µ2ï¼ŒÂ·Â·Â·ï¼Œå­—æ®µn from è¡¨å;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å½“å‰æ‰€ä½¿ç”¨çš„æ•°æ®åº“1</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢mysqlç‰ˆæœ¬å·</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line"># \c å¯ä»¥ç»“æŸä¸€æ¡è¯­å¥çš„è¾“å…¥</span><br></pre></td></tr></table></figure>



<p>æŸ¥è¯¢è¯­å¥ä¸­ï¼Œå­—æ®µå¯ä»¥å‚ä¸æ•°å­¦è¿ç®—ï¼Œä»¥åŠå¯ä»¥å–åˆ«å.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#å–åˆ«åæ—¶ç”¨åˆ° as , åŒæ—¶aså¯ä»¥çœç•¥ä»¥ç©ºæ ¼ä»£æ›¿å³å¯.</span><br><span class="line">select å­—æ®µ1 (as) åˆ«å1,å­—æ®µ2*12 åˆ«å2 from è¡¨åï¼› </span><br><span class="line"></span><br><span class="line">#æ³¨æ„ï¼Œå½“åˆ«åå–ä¸­æ–‡åçš„æ—¶å€™,éœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ æ—¢å¯ä»¥ä½¿ç”¨å•å¼•å·å’ŒåŒå¼•å·</span><br><span class="line">#MySQLå¯¹äºä¸¤ç§å¼•å·éƒ½å…¼å®¹ï¼Œè€ŒOracleåªå¯¹å•å¼•å·å…¼å®¹ï¼Œè€ƒè™‘ä»¥åä¼šæ¥è§¦åˆ°å…¶å®ƒæ•°æ®åº“</span><br><span class="line">#æ›´æ¨èä½¿ç”¨ å•å¼•å· .</span><br></pre></td></tr></table></figure>



<h3 id="æ¡ä»¶æŸ¥è¯¢è¯­å¥"><a href="#æ¡ä»¶æŸ¥è¯¢è¯­å¥" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢è¯­å¥"></a>æ¡ä»¶æŸ¥è¯¢è¯­å¥</h3><p>åŸºæœ¬çš„è¯­å¥ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select</span><br><span class="line">	å­—æ®µn</span><br><span class="line">from</span><br><span class="line">	è¡¨å</span><br><span class="line">where</span><br><span class="line">	æ¡ä»¶;</span><br><span class="line"></span><br><span class="line">#ä»¥ä¸Šè¿™ç§æ ¼å¼åœ¨å‘½ä»¤è¡Œä¸­ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œè¿™ä¹ˆå†™åªæ˜¯ä¸ºäº†çœ‹çš„æ›´æ¸…æ¥š.</span><br><span class="line">#æ¡ä»¶ å¯ä»¥æ˜¯ è¯¸å¦‚ å­—æ®µ &#x3D; xxxx; åŒæ ·çš„ä¸­æ–‡éœ€è¦å•å¼•å·</span><br></pre></td></tr></table></figure>



<p>ç°åœ¨ç»™å‡ºä¸€å¼ æ ·è¡¨ï¼Œä»¥ä¾¿åç»­çš„ä¸¾ä¾‹å’Œå­¦ä¹ .</p>
<img src="/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="table">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„å¤§äº(å°äº)2000ä»¥ä¸Šçš„äººçš„åå•</span><br><span class="line">select ename from emp where sal &gt;ï¼ˆ&lt;ï¼‰ 2000;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„å¤§äºç­‰äº2000ä»¥ä¸Šçš„äººçš„åå•</span><br><span class="line">select ename from emp where sal &gt;&#x3D; 2000;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸ç­‰äº3000çš„</span><br><span class="line">select ename from emp where sal &lt;&gt; 3000;</span><br><span class="line">#æˆ–è€…</span><br><span class="line">select ename from emp where sal !&#x3D; 3000;</span><br></pre></td></tr></table></figure>



<h4 id="betweenÂ·Â·Â·and-in-and-or"><a href="#betweenÂ·Â·Â·and-in-and-or" class="headerlink" title="betweenÂ·Â·Â·and, in , and , or"></a>betweenÂ·Â·Â·and, in , and , or</h4><ul>
<li><strong>betweenÂ·Â·Â·and</strong></li>
</ul>
<p><code>betweenÂ·Â·Â·and</code> ä¸ºé—­åŒºé—´.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä½äº1000 åˆ° 2000çš„äººçš„åå•</span><br><span class="line">select ename,sal from emp where sal between 1000 and 2000;</span><br><span class="line"></span><br><span class="line">#ä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²ä½¿ç”¨</span><br><span class="line">select ename from emp where ename between &#39;A&#39; and &#39;F&#39;;</span><br><span class="line"></span><br><span class="line">#å½“ç„¶äº†æ•°æ®å¿…é¡»å·¦å°å³å¤§ï¼Œæ‡‚çš„éƒ½æ‡‚å“ˆï¼Œä¸ç„¶æŸ¥ä¸åˆ°çš„</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>andã€or</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 å’Œ 1500çš„äººçš„åå•</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 and sal &#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 æˆ– 1500çš„äººçš„åå•</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 or sal &#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º 3000 å’Œ éƒ¨é—¨ç¼–å·ä¸º15æˆ–è€…30çš„</span><br><span class="line">#åº”è¯¥ä¸ä¼šæœ‰äººè¿™ä¹ˆå†™å§ï¼Œè¿™æ— ç–‘æ˜¯é”™è¯¯çš„å†™æ³•</span><br><span class="line">select ename,deptno , sal from emp where sal &#x3D; 3000 and deptno &#x3D; 15 or deptno &#x3D; 30;</span><br><span class="line">#è¿™æ¡è¯­å¥æŸ¥è¯¢çš„æ˜¯ ï¼ˆå·¥èµ„ä¸º3000å¹¶ä¸”ç¼–å·ä¸º15ï¼‰ æˆ–è€… ç¼–å·ä¸º30çš„äººçš„åå•</span><br><span class="line"></span><br><span class="line">#æ­£ç¡®å†™æ³•</span><br><span class="line">select ename,deptno , sal from emp where sal &#x3D; 3000 and (deptno &#x3D; 15 or deptno &#x3D; 30);</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>in</strong></li>
</ul>
<p>inçš„ç”¨æ³•ä¸oråŸºæœ¬ç›¸åŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸º3000 æˆ–è€… 1500çš„äººçš„åå•</span><br><span class="line">#ç”¨or</span><br><span class="line">select ename , sal from emp where sal &#x3D; 3000 or sal &#x3D; 1500;</span><br><span class="line">#ç”¨in</span><br><span class="line">select ename , sal from emp where sal in (3000, 1500);</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š inçš„æ‹¬å·ä¸æ˜¯åŒºé—´èŒƒå›´è€Œæ˜¯å€¼ï¼Œç±»ä¼¼äºä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢åŒæ ·ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè®°å¾—è¦åŠ å•å¼•å·</strong></p>
<hr>
<p>æ¥ä¸‹æ¥ç»™å‡ºä¸€ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„ä¸æ˜¯3000å’Œ1500çš„äººçš„åå•</span><br><span class="line">#æœ€ç›´ç™½çš„å†™æ³•</span><br><span class="line">select ename , sal from emp where sal !&#x3D; 3000 and sal !&#x3D; 1500;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨in</span><br><span class="line">select ename , sal from emp where sal not in (3000 , 1500);</span><br></pre></td></tr></table></figure>



<p><strong>ä»¥ä¸Šå¯ä»¥çŸ¥é“ï¼Œ<code>not in</code> çš„ä½¿ç”¨ååˆ†æ–¹ä¾¿ï¼Œå†æ¬¡å¼ºè°ƒï¼Œæ‹¬å·ä¸­å¹¶ä¸æ˜¯èŒƒå›´è€Œæ˜¯å…·ä½“çš„å€¼</strong></p>
<ul>
<li><strong>NULL</strong></li>
</ul>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹ç©º(NULL) ï¼Œè¡¨ä¸­å­—æ®µ <code>comm</code> ä¸­åŒ…å« <code>NULL</code> å€¼ï¼Œé‚£ä¹ˆå¦‚ä½•ç­›é€‰å‡ºè¿™äº›åŒ…å« <code>NULL</code> çš„åå•å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#è¿™ä¸ç®€å•å˜›ï¼Œäºæ˜¯è¿…é€Ÿå†™ä¸‹äº†</span><br><span class="line">select ename , sal from emp where comm &#x3D; â€˜NULLâ€™ ;</span><br><span class="line">#å¥½å®¶ä¼™ï¼Œæœä¸å…¶ç„¶æŠ¥é”™äº†ï¼Œä¸æ„§æ˜¯æˆ‘</span><br><span class="line">#å®é™…ä¸Šè¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</span><br><span class="line">select ename , sal from emp where comm is null;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢commä¸ä¸ºç©ºçš„åå•</span><br><span class="line">select ename , sal from emp where comm is not null;</span><br></pre></td></tr></table></figure>



<h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h4><ul>
<li><strong><code>like</code></strong> : è‹±æ–‡å¯è¯‘ä¸º åƒï¼Œç±»ä¼¼ (ç”±æ­¤å¯è§ <code>sql </code> è¯­å¥æ˜¯å¤šä¹ˆè´´åˆè‹±è¯­çš„å®é™…è¡¨è¾¾å“ˆå“ˆå“ˆå“ˆ)</li>
<li><strong><code>%</code></strong> : ä»£è¡¨å¤šä¸ªå­—ç¬¦</li>
<li><strong><code>_</code></strong> : ä»£è¡¨å•ä¸ªå­—ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢åå­—ä¸­é¦–å­—æ¯ä¸ºAçš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;a%&#39;;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­å«æœ‰Açš„äººçš„åå• </span><br><span class="line">select ename from emp where ename like &#39;%a%&#39; or ename like &#39;a%&#39;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­ä»¥ç¬¬äºŒä¸ªå­—æ¯ä¸ºbçš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;_b%&#39;;</span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢åå­—ä¸­ä»¥bå­—æ¯ç»“å°¾çš„äººçš„åå•</span><br><span class="line">select ename from emp where ename like &#39;%b&#39;;</span><br></pre></td></tr></table></figure>



<h3 id="æ’åºä»¥åŠåˆ†ç»„å‡½æ•°"><a href="#æ’åºä»¥åŠåˆ†ç»„å‡½æ•°" class="headerlink" title="æ’åºä»¥åŠåˆ†ç»„å‡½æ•°"></a>æ’åºä»¥åŠåˆ†ç»„å‡½æ•°</h3><p><strong>æ’åº</strong></p>
<p>&emsp;&emsp;æ’åºåœ¨æ•°æ®å¤„ç†ä¸Šä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œå½“ç„¶ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œä¸‹é¢å°†ç»™å‡ºç›¸å…³çš„ä¸€äº›å‘½ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th align="center">asc</th>
<th align="center">å‡åº</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>desc</strong></td>
<td align="center"><strong>é™åº</strong></td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æŸ¥è¯¢å·¥èµ„åœ¨1500 - 3000ä¹‹é—´çš„å¹¶ä¸”æŒ‰é™åºæ’åˆ—çš„åå•</span><br><span class="line">select ename , sal from emp where sal between 1500 and 3000 order by sal desc;</span><br><span class="line"></span><br><span class="line">#æ’åºè¿˜å¯ä»¥è§„å®šç¬¬äºŒçº§çš„æ’åºï¼Œå³ç¬¬ä¸€çº§æ’åºæ•°å€¼ç›¸åŒçš„æ—¶å€™ï¼Œè§¦å‘äºŒçº§æ’åº æ¯”å¦‚å·¥èµ„ç›¸åŒçš„æ—¶å€™æŒ‰åå­—é¦–å­—æ¯æ’åº</span><br><span class="line">select ename , sal from emp where sal between 1500 and 3000 order by sal desc , ename asc;</span><br><span class="line"></span><br><span class="line">#</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼šå¦‚æœåœ¨ <code>order by </code> ä¸­ä¸å†™æ’åºæ–¹å¼ï¼Œé»˜è®¤å‡åºæ’åˆ—.</strong></p>
<hr>
<p><strong>åˆ†ç»„å‡½æ•°</strong></p>
<table>
<thead>
<tr>
<th align="center">count</th>
<th align="center">sum</th>
<th align="center">avg</th>
<th align="center">max</th>
<th align="center">min</th>
</tr>
</thead>
<tbody><tr>
<td align="center">è®¡æ•°</td>
<td align="center">æ±‚å’Œ</td>
<td align="center">æ±‚å¹³å‡å€¼</td>
<td align="center">æ±‚æœ€å¤§å€¼</td>
<td align="center">æ±‚æœ€å°å€¼</td>
</tr>
</tbody></table>
<p>è®°ä½ï¼šæ‰€æœ‰çš„åˆ†ç»„å‡½æ•°éƒ½æ˜¯å¯¹â€œæŸä¸€ç»„â€æ•°æ®è¿›è¡Œæ“ä½œçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æ‰¾å‡ºå·¥èµ„æ€»å’Œï¼Ÿ</span><br><span class="line">	select sum(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæœ€é«˜å·¥èµ„ï¼Ÿ</span><br><span class="line">	select max(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæœ€ä½å·¥èµ„ï¼Ÿ</span><br><span class="line">	select min(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºå¹³å‡å·¥èµ„ï¼Ÿ</span><br><span class="line">	select avg(sal) from emp;</span><br><span class="line">#æ‰¾å‡ºæ€»äººæ•°ï¼Ÿ</span><br><span class="line">	select count(*) from emp;</span><br><span class="line">	select count(ename) from emp;</span><br><span class="line"></span><br><span class="line">#åˆ†ç»„å‡½æ•°ä¸€å…±5ä¸ªã€‚</span><br><span class="line">#åˆ†ç»„å‡½æ•°è¿˜æœ‰å¦ä¸€ä¸ªåå­—ï¼šå¤šè¡Œå¤„ç†å‡½æ•°ã€‚</span><br><span class="line">#å¤šè¡Œå¤„ç†å‡½æ•°çš„ç‰¹ç‚¹ï¼šè¾“å…¥å¤šè¡Œï¼Œæœ€ç»ˆè¾“å‡ºçš„ç»“æœæ˜¯1è¡Œã€‚</span><br><span class="line">#åˆ†ç»„å‡½æ•°è‡ªåŠ¨å¿½ç•¥NULL , å¹¶ä¸”ä¹Ÿå¯ä»¥é€šè¿‡ as é‡æ–°å‘½å</span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸‹æ¥ï¼Œè¦å¼€å§‹æŒ–å‘äº†ï¼Œé—®é¢˜å¦‚ä¸‹ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„å‘˜å·¥åå•ï¼Ÿ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å­¦ä¹ äº†åˆ†ç»„å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªavgæ°å¥½å¯ä»¥æ±‚å¹³å‡å€¼</span><br><span class="line">#äºæ˜¯</span><br><span class="line">select ename , sal from emp where sal &gt; avg(sal);</span><br><span class="line">#çœ‹ä¼¼è¿™æ¡è¯­å¥é€»è¾‘æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ‰§è¡Œè¿‡åå´ç›´æ¥æŠ¥é”™~~~</span><br><span class="line">#Whyï¼Ÿ</span><br><span class="line">#è¿™é‡Œå…ˆä¸è¿›è¡Œè®²è¿°å’Œåˆ†æï¼Œæˆ‘ä»¬å…ˆæ¥ç€å¾€ä¸‹é¢è®²</span><br></pre></td></tr></table></figure>





<h3 id="å•è¡Œå¤„ç†å‡½æ•°"><a href="#å•è¡Œå¤„ç†å‡½æ•°" class="headerlink" title="å•è¡Œå¤„ç†å‡½æ•°"></a>å•è¡Œå¤„ç†å‡½æ•°</h3><ul>
<li><strong>ä»€ä¹ˆæ˜¯å•è¡Œå¤„ç†å‡½æ•°ï¼Ÿ</strong></li>
</ul>
<p>&emsp;&emsp;è¾“å…¥ä¸€è¡Œï¼Œè¾“å‡ºä¸€è¡Œ</p>
<ul>
<li><p><strong>è®¡ç®—æ¯ä¸ªå‘˜å·¥çš„å¹´è–ªï¼Ÿ</strong></p>
<p><code>select ename , (sal + comm ) * 12 &#39;å¹´è–ª&#39; from emp;</code></p>
<p>æŒ‰ä¸‹å›è½¦ä¼šå‘ç°ï¼Œå¤§éƒ¨åˆ†äººçš„å¹´è–ªä¸º <code>NULL</code> ï¼Œè¾›è¾›è‹¦è‹¦å¹²äº†ä¸€å¹´ï¼Œå…¨ç™½ç»™äº†ï¼Œ23333.</p>
<p>è¿™æ˜¯å› ä¸ºåªè¦æœ‰å«æœ‰ <strong><code>NULL</code></strong> å€¼å‚ä¸è¿ç®—ï¼Œç»“æœéƒ½ä¼šæ˜¯ **<code>NULL</code>**ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦æˆ‘ä»¬çš„å•è¡Œå¤„ç†å‡½æ•°äº†ï¼š</p>
<ul>
<li><p><strong>ifnull()</strong></p>
<p>ç©ºå¤„ç†å‡½æ•°. å¦‚ï¼šcommï¼ˆæ´¥è´´ï¼‰ä¸­æœ‰çš„å€¼ä¸ºç©ºï¼Œæ„æ€å…¶å®å°±æ˜¯0 ï¼Œ é‚£ä¹ˆå°±æ˜¯ <strong><code>ifnull(comm , 0)</code><strong>ï¼Œæ„æ€å°±æ˜¯å¦‚æœcommçš„å€¼ä¸º</strong><code>NULL</code></strong> é‚£ä¹ˆå°±ç”¨ 0 ä»£æ›¿è¿™ä¸ªå€¼.</p>
</li>
</ul>
<p>æ‰€ä»¥ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯ï¼š</p>
<p><strong><code>select ename , (sal + ifnull(comm , 0)) * 12 &#39;yearsal&#39; from emp;</code></strong></p>
</li>
</ul>
<p>ç±»ä¼¼çš„å•è¡Œå¤„ç†å‡½æ•°è¿˜æœ‰å¦‚ä¸‹è¿™äº›ï¼ˆä¸”ä¸å±€é™äºä»¥ä¸‹è¿™äº›ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">Lower</th>
<th align="center">è½¬æ¢å°å†™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>upper</strong></td>
<td align="center"><strong>è½¬æ¢å¤§å†™</strong></td>
</tr>
<tr>
<td align="center"><strong>substr</strong></td>
<td align="center"><strong>å–å­ä¸²</strong>ï¼ˆ**substr(è¢«æˆªå–çš„å­—ç¬¦ä¸²,èµ·å§‹ä¸‹æ ‡,æˆªå–çš„é•¿åº¦)**ï¼‰</td>
</tr>
<tr>
<td align="center"><strong>length</strong></td>
<td align="center"><strong>å–é•¿åº¦</strong></td>
</tr>
<tr>
<td align="center"><strong>trim</strong></td>
<td align="center"><strong>å»ç©ºæ ¼</strong></td>
</tr>
<tr>
<td align="center"><strong>str_to_date</strong></td>
<td align="center"><strong>å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸ</strong></td>
</tr>
<tr>
<td align="center"><strong>date_format</strong></td>
<td align="center"><strong>æ ¼å¼åŒ–æ—¥æœŸ</strong></td>
</tr>
<tr>
<td align="center"><strong>format</strong></td>
<td align="center"><strong>è®¾ç½®åƒåˆ†ä½</strong></td>
</tr>
<tr>
<td align="center"><strong>round</strong></td>
<td align="center"><strong>å››èˆäº”å…¥</strong></td>
</tr>
<tr>
<td align="center"><strong>rand()</strong></td>
<td align="center"><strong>ç”Ÿæˆéšæœºæ•°</strong></td>
</tr>
</tbody></table>
<h3 id="group-by-ä»¥åŠ-having"><a href="#group-by-ä»¥åŠ-having" class="headerlink" title="group by ä»¥åŠ having"></a>group by ä»¥åŠ having</h3><ul>
<li><p><strong>group by ï¼š æŒ‰ç…§æŸä¸ªå­—æ®µæˆ–è€…æŸäº›å­—æ®µè¿›è¡Œåˆ†ç»„</strong></p>
</li>
<li><p><strong>having :  havingæ˜¯å¯¹åˆ†ç»„ä¹‹åçš„æ•°æ®è¿›è¡Œå†æ¬¡è¿‡æ»¤</strong></p>
<hr>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šåˆ†ç»„å‡½æ•°ä¸€èˆ¬éƒ½ä¼šå’Œgroup byè”åˆä½¿ç”¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒè¢«ç§°ä¸ºåˆ†ç»„å‡½æ•°çš„åŸå› .å¹¶ä¸”ä»»ä½•ä¸€ä¸ªåˆ†ç»„å‡½æ•°count sum avg max minï¼‰éƒ½æ˜¯åœ¨group byè¯­å¥æ‰§è¡Œç»“æŸä¹‹åæ‰ä¼šæ‰§è¡Œçš„ï¼Œå½“ä¸€æ¡ <code>sql</code>è¯­å¥æ²¡æœ‰group byçš„è¯ï¼Œæ•´å¼ è¡¨çš„æ•°æ®ä¼šè‡ªæˆä¸€ç»„ã€‚</strong></p>
<p>å¤§è‡´äº†è§£äº†æ˜¯å¹²ä»€ä¹ˆçš„ä¹‹åï¼Œç°åœ¨å…ˆæ¥è®²ä¸€ä¸‹ï¼Œ<code>sql</code> è¯­å¥çš„å„ä¸ªéƒ¨åˆ†çš„æ‰§è¡Œé¡ºåº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select			5.å¯¹å­—æ®µè¿›è¡Œé€‰æ‹©</span><br><span class="line">	xxx</span><br><span class="line">from			1.ç¬¬ä¸€ä¸ªæ‰§è¡Œ,å…ˆç¡®å®šå¤„ç†å“ªä¸€å¼ è¡¨</span><br><span class="line">	xxx</span><br><span class="line">where			2.å¤„ç†whereæ¡ä»¶</span><br><span class="line">	xxx</span><br><span class="line">group by		3.è¿›è¡Œåˆ†ç»„å¤„ç†</span><br><span class="line">	xxx</span><br><span class="line">having			4.è¿›è¡Œæ¡ä»¶è¿‡æ»¤</span><br><span class="line">	xxx</span><br><span class="line">order by		6.è¿›è¡Œæ’åº</span><br><span class="line">	xxx;</span><br></pre></td></tr></table></figure>

<p>è¿˜è®°å¾—è¿™ä¸ªå—ï¼Ÿ æ¥ä¸‹æ¥è¦å¼€å§‹å¡«å‘äº†</p>
<blockquote>
<p><strong>æ¥ä¸‹æ¥ï¼Œè¦å¼€å§‹æŒ–å‘äº†ï¼Œé—®é¢˜å¦‚ä¸‹ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„å‘˜å·¥åå•ï¼Ÿ</strong></p>
</blockquote>
<p>æˆ‘ä»¬å†çœ‹ä¸€çœ¼è¯­å¥ï¼š</p>
<blockquote>
<p><code>select ename , sal from emp where sal &gt; avg(sal);</code></p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢è¯´åˆ°çš„æ‰§è¡Œé¡ºåºå¯ä»¥å‘ç° where çš„æ‰§è¡Œé¡ºåºåœ¨group by ä¹‹å‰ï¼Œ whereä¸­ avg çš„æ‰§è¡Œéœ€è¦group by ä¹‹åæ‰å¯ä»¥æ‰§è¡Œï¼Œæ•…æŠ¥é”™. </p>
<ul>
<li>æ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªèµ„ï¼Œè¦æ±‚æ˜¾ç¤ºè–ªèµ„å¤§äº2000çš„æ•°æ®?</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#é€šè¿‡havingè¿›è¡Œè¿‡æ»¤</span><br><span class="line">select deptno , avg(sal) from emp group by deptno having avg(sal) &gt; 2000;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><strong>é€šè¿‡group by è¿›è¡Œåˆ†ç»„è¿‡å ï¼Œ select çš„ åªèƒ½æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå’Œåˆ†ç»„è¿‡åå­˜åœ¨å¯¹åº”å…³ç³»çš„å€¼.  æ¯”å¦‚å®‰è£…éƒ¨é—¨ç¼–å·deptno è¿›è¡Œåˆ†ç»„ ä¼šåˆ†ä¸ºå››ç»„ï¼Œæ¯ä¸€ç»„ä¸­åŒ…å«å¤šä¸ªäººçš„ä¿¡æ¯</strong></li>
</ul>
<img src="/2021/04/11/MySQL%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="result">

<ul>
<li><strong>ç”±äºæ‰§è¡Œé¡ºåºå¯ä»¥çŸ¥é“ï¼Œä½ éœ€è¦æŸ¥è¯¢çš„å­—æ®µå¿…é¡»èƒ½å¤Ÿå’Œåˆ†ç»„ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚æ¯ä¸ªéƒ¨é—¨å·¥èµ„çš„æœ€å¤§å€¼å’Œæ¯ä¸ªéƒ¨é—¨å·¥èµ„çš„å¹³å‡å€¼</strong></li>
</ul>
<h3 id="æŸ¥è¯¢å»é‡â€”distinct"><a href="#æŸ¥è¯¢å»é‡â€”distinct" class="headerlink" title="æŸ¥è¯¢å»é‡â€”distinct"></a>æŸ¥è¯¢å»é‡â€”distinct</h3><ul>
<li><strong>æŸ¥è¯¢æœ‰å“ªäº›å·¥ä½œå²—ä½ï¼Ÿ</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ä¸€èˆ¬å†™æ³•</span><br><span class="line">select job from emp ;</span><br><span class="line">#å¤„ç†åä¼šå‘ç°,ä¼šæœ‰é‡å¤çš„å·¥ä½œï¼Œä¸æ–¹ä¾¿æŸ¥çœ‹</span><br><span class="line">#äºæ˜¯å¼€å§‹è€ƒè™‘è¿›è¡Œå»é‡</span><br><span class="line">select distinct job from emp ;</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼šdistinct åªèƒ½æ”¾åœ¨æ‰€æœ‰å­—æ®µçš„æœ€å‰é¢ï¼Œå¦‚æœåŒ…å«å¤šä¸ªå­—æ®µï¼Œå»é‡èŒƒå›´å˜å¤§ï¼Œè¡¨ç¤ºå¤šä¸ªå­—æ®µä¸èƒ½å®Œå…¨ä¸€æ ·è€Œä¸æ˜¯ç¬¬ä¸€ä¸ªå­—æ®µä¸èƒ½é‡å¤.ä¾‹å¦‚</strong><code>select distinct deptno , sal from emp ;</code><strong>è¡¨ç¤ºè¿‡æ»¤æ‰éƒ¨é—¨ç¼–å·å’Œå·¥èµ„éƒ½ä¸€æ ·çš„äººï¼Œé”™è¯¯å†™æ³•å¦‚ä¸‹ï¼ˆè°¨è®° <code>distinct</code>åªèƒ½å‡ºç°åœ¨ç¬¬ä¸€ä¸ªå­—æ®µçš„ç­¾åçš„ï¼‰ï¼š</strong><code>select deptno , distinct sal from emp ; </code> </p>
<ul>
<li><strong>ç»Ÿè®¡å²—ä½æ•°é‡ï¼Ÿ</strong></li>
</ul>
<p>&emsp;&emsp;<code>select count(distinct job) from emp;</code></p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MybatisPlus(ä¸€):æè‡´ç®€åŒ–</title>
    <url>/2021/05/12/MybatisPlus%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ"><a href="#ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ"></a>ğŸ‰MybatisPlusåŸºæœ¬æ¦‚å¿µ</h1><p>â€‹    <a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a href="http://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p>
<p><strong>ç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li>
<li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ <code>CURD</code>ï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li>
<li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ <code>Mapper</code>ã€é€šç”¨ <code>Service</code>ï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† <code>CRUD</code> æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</li>
<li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ <code>Lambda</code> è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li>
<li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ -<code> Sequence</code>ï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li>
<li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ <code>ActiveRecord </code>å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li>
<li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ <code>Write once</code>, <code>use anywhere</code> ï¼‰</li>
<li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€…<code> Maven</code> æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ<code>Mapper</code>ã€ <code>Model </code>ã€<code> Service</code> ã€ <code>Controller </code>å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li>
<li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº<code>MyBatis</code> ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li>
<li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ<code> MySQL</code>ã€<code>MariaDB</code>ã€<code>Oracle</code>ã€<code>DB2</code>ã€<code>H2</code>ã€<code>HSQL</code>ã€<code>SQLite</code>ã€<code>Postgre</code>ã€<code>SQLServer</code> ç­‰å¤šç§æ•°æ®åº“</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º<code> Sql</code> è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li>
<li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨<code> delete</code> ã€<code>update</code>æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li>
</ul>
<p>â€‹    </p>
<p>å¯¹äº<code>SpringBoot</code>é¡¹ç›®è€Œè¨€ï¼Œä½¿ç”¨<code>MybatisPlus</code>ååˆ†ä¾¿æºï¼Œç›´æ¥åœ¨ä¾èµ–æ–‡ä»¶ä¸­æ·»åŠ ç›¸å…³ä¾èµ–å³å¯</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­å·²ç»åŒ…å«äº†<code>Mybatis</code>çš„ç›¸å…³ä¾èµ–ï¼Œä¸ç”¨é¢å¤–æ·»åŠ .</p>
<h1 id="ğŸ‡åŸºæœ¬çš„SQLè¯­å¥"><a href="#ğŸ‡åŸºæœ¬çš„SQLè¯­å¥" class="headerlink" title="ğŸ‡åŸºæœ¬çš„SQLè¯­å¥"></a>ğŸ‡åŸºæœ¬çš„SQLè¯­å¥</h1><p>æ„å»ºå®ä½“ç±»ï¼š</p>
<p>ï¼ˆå…¶ä¸­çš„æ³¨é‡Šä¼šåœ¨åç»­æ–‡ç« ä¸­åšæ±‡æ€»ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹åº”çš„æ•°æ®åº“è¡¨åï¼Œè¡¨åçš„é¦–å­—æ¯å¤§å†™å°±æ˜¯ç±»åçš„è¯å¯ä»¥ä¸ç”¨å†™ï¼Œä¸è¿‡è¿˜æ˜¯å»ºè®®åŠ ä¸Šï¼Œæ–¹ä¾¿ç»´æŠ¤</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> </span>&#123;</span><br><span class="line">	<span class="comment">//   æ•°æ®è¡¨ä¸»é”®ï¼Œvalueå€¼ä¸ºè¡¨ä¸­çš„å­—æ®µ  ç±»å‹ä¸ºä¸»é”®è‡ªå¢ </span></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookId</span><span class="params">(Integer bookId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookId = bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getBookName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookName</span><span class="params">(String bookName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookCounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookCounts</span><span class="params">(Integer bookCounts)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetail</span><span class="params">(String detail)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.detail = detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Books&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;bookId=&quot;</span> + bookId +</span><br><span class="line">            <span class="string">&quot;, bookName=&#x27;&quot;</span> + bookName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, bookCounts=&quot;</span> + bookCounts +</span><br><span class="line">            <span class="string">&quot;, detail=&#x27;&quot;</span> + detail + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ„å»º <code>dao</code> å±‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿ä¹‹åæ‰ä¼šæœ‰åŸºæœ¬çš„SQLè¯­å¥ï¼Œè¿™é‡Œä½¿ç”¨äº†æ³›å‹ï¼Œé¿å…éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BooksMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€ååœ¨å¯åŠ¨ç±»é…ç½®æ‰«æåŒ…ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//ç”¨äºè®©SpringBootè‡ªåŠ¨å¸®daoæ¥å£è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.soucat.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå®Œæˆä¹‹åå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ï¼Œååˆ†çš„æ–¹ä¾¿.</p>
<p>åœ¨æµ‹è¯•ç±»ä¸­å…ˆè¦å°†<code>dao</code>æ¥å£è‡ªåŠ¨æ³¨å…¥ï¼Œ<code>idea</code>ä¼šæŠ¥é”™ï¼Œåªæ˜¯å› ä¸ºè¿™ä¸ªå¯¹è±¡æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰ä¼šäº§ç”Ÿï¼Œç¼–è¯‘é˜¶æ®µæ²¡æœ‰åˆ›å»º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> BooksMapper booksMapper;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>æŸ¥è¯¢ç”¨æˆ·</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    System.out.println(booksMapper.selectById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBoos</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Integer&gt; list = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>).collect(Collectors.toList());</span><br><span class="line">    <span class="comment">//è¿™é‡Œå½“ç„¶äº†ä¹Ÿå¯ä»¥åˆ›å»ºListå¯¹è±¡åä¸€ä¸ªä¸€ä¸ªåŠ è¿›å»ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œåªæ˜¯ä»¥ä¸Šæ–¹å¼æ¯”è¾ƒæ–¹ä¾¿</span></span><br><span class="line">    System.out.println(booksMapper.selectBatchIds(list));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>â€‹        å…¶ä½™çš„ä¹Ÿéƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ¯•ç«Ÿåªæ˜¯åŸºæœ¬çš„ <code>SQL</code> è¯­å¥ï¼Œå½“ç„¶äº†ï¼Œ<code>MybatisPlus</code> ä¹Ÿå¯ä»¥åƒ <code>Mybatis</code> é‚£æ ·è‡ªå®šä¹‰ <code>SQL</code> è¯­å¥ï¼Œç¼–å†™é…ç½®æ–‡ä»¶å®ç°.å°±ä¸ä¸€ä¸€æ¼”ç¤ºäº†.</p>
<h1 id="ğŸ¨ARæ¨¡å¼"><a href="#ğŸ¨ARæ¨¡å¼" class="headerlink" title="ğŸ¨ARæ¨¡å¼"></a>ğŸ¨ARæ¨¡å¼</h1><p>â€‹        <code>Active Record</code>(æ´»åŠ¨è®°å½•)ï¼Œæ˜¯ä¸€ç§é¢†åŸŸæ¨¡å‹æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯ä¸€ä¸ªæ¨¡å‹ç±»å¯¹åº”å…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼Œè€Œæ¨¡å‹ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹åº”è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ï¼Œå±äºåŠ¨æ€æ¨¡å‹ã€‚è€ŒJavaä½œä¸ºå‡†é™æ€è¯­è¨€ï¼Œå¯¹äº <code>ActiveRecord </code>å¾€å¾€åªèƒ½æ„Ÿå¹å…¶ä¼˜é›…ï¼Œæ‰€ä»¥ <code>MP</code> ä¹Ÿåœ¨ <code>AR </code>é“è·¯ä¸Šè¿›è¡Œäº†ä¸€å®šçš„æ¢ç´¢ï¼Œæ‰æœ‰äº†ç°åœ¨çš„åŠŸèƒ½Javaä¹Ÿèƒ½å®ç°ARæ¨¡å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ç›´æ¥ç”¨å®ä½“ç±»å¯¹æ•°æ®åº“è¿›è¡Œ<code>CRUD</code>æ“ä½œï¼Œæ¥ä¸‹æ¥çœ‹å…·ä½“ä»£ç ï¼š</p>
<p><strong>è¦å®ç°ARæ¨¡å¼éœ€è¦ä¸¤ä¸ªå‰æï¼šä¸€æ˜¯å®ä½“ç±»ç»§æ‰¿ModelæŠ½è±¡ç±»ï¼ŒäºŒæ˜¯å®šä¹‰å®ä½“ç±»å¯¹åº”çš„mapperæ¥å£ç»§æ‰¿BaseMapper</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line">				<span class="comment">//ä¸€å®šè¦ç»§æ‰¿è¿™ä¸ªModel</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookId</span><span class="params">(Integer bookId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookId = bookId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getBookName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookName</span><span class="params">(String bookName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookName = bookName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getBookCounts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookCounts</span><span class="params">(Integer bookCounts)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bookCounts = bookCounts;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetail</span><span class="params">(String detail)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.detail = detail;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Books&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;bookId=&quot;</span> + bookId +</span><br><span class="line">            <span class="string">&quot;, bookName=&#x27;&quot;</span> + bookName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, bookCounts=&quot;</span> + bookCounts +</span><br><span class="line">            <span class="string">&quot;, detail=&#x27;&quot;</span> + detail + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>dao</code>æ¥å£ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿ä¹‹åæ‰ä¼šæœ‰åŸºæœ¬çš„SQLè¯­å¥ï¼Œè¿™é‡Œä½¿ç”¨äº†æ³›å‹ï¼Œé¿å…éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BooksMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ç±»:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//ç”¨äºè®©SpringBootè‡ªåŠ¨å¸®daoæ¥å£è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.soucat.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>æŸ¥è¯¢åŠŸèƒ½</strong></p>
</blockquote>
<p>ARæ¨¡å¼å’Œæ™®é€šçš„æ¨¡å¼ä¸åŒä¹‹å¤„å°±åœ¨äºå¯ä»¥ç›´æ¥ä½¿ç”¨å®ä½“ç±»è¿›è¡ŒæŸ¥è¯¢,ä¸éœ€è¦ <code>dao</code> æ¥å£å¯¹è±¡æ¥è°ƒï¼Œå½“ç„¶äº†è¿™ä¸æ„å‘³ç€æ¥å£ç±»å¯ä»¥ä¸å†™äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    Books books = <span class="keyword">new</span> Books();</span><br><span class="line">    books.setBookId(<span class="number">1</span>);</span><br><span class="line">    Books books1 = books.selectById();</span><br><span class="line">    System.out.println(books1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä½™çš„åŸºæœ¬è¯­å¥ä¹Ÿéƒ½ç±»ä¼¼ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MybatisPlus</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatisï¼ˆä¸€ï¼‰</title>
    <url>/2021/04/18/Mybatis%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸšåˆè¯†Mybatis"><a href="#ğŸšåˆè¯†Mybatis" class="headerlink" title="ğŸšåˆè¯†Mybatis"></a>ğŸšåˆè¯†Mybatis</h1><blockquote>
<p>&emsp;&emsp;MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
</blockquote>
<p>&emsp;&emsp;MyBatis æ˜¯æ”¯æŒæ™®é€š SQLæŸ¥è¯¢ï¼Œ<a href="https://baike.so.com/doc/2045557-2164405.html">å­˜å‚¨è¿‡ç¨‹</a>å’Œé«˜çº§æ˜ å°„çš„ä¼˜ç§€<a href="https://baike.so.com/doc/7722506-7996601.html">æŒä¹…å±‚</a>æ¡†æ¶ã€‚MyBatis æ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„<a href="https://baike.so.com/doc/2417290-2555569.html">JDBC</a>ä»£ç å’Œå‚æ•°çš„æ‰‹å·¥è®¾ç½®ä»¥åŠ<a href="https://baike.so.com/doc/2123416-2246652.html">ç»“æœé›†</a>çš„æ£€ç´¢ã€‚MyBatis ä½¿ç”¨ç®€å•çš„ XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„POJOs(Plain Ordinary Java Objectsï¼Œæ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<p>&emsp;&emsp;æ¯ä¸ªMyBatisåº”ç”¨ç¨‹åºä¸»è¦éƒ½æ˜¯ä½¿ç”¨SqlSessionFactoryå®ä¾‹çš„ï¼Œä¸€ä¸ªSqlSessionFactoryå®ä¾‹å¯ä»¥é€šè¿‡SqlSessionFactoryBuilderè·å¾—ã€‚SqlSessionFactoryBuilderå¯ä»¥ä»ä¸€ä¸ªxmlé…ç½®æ–‡ä»¶æˆ–è€…ä¸€ä¸ªé¢„å®šä¹‰çš„é…ç½®ç±»çš„å®ä¾‹è·å¾—ã€‚</p>
<p>&emsp;&emsp;ç”¨xmlæ–‡ä»¶æ„å»ºSqlSessionFactoryå®ä¾‹æ˜¯éå¸¸ç®€å•çš„äº‹æƒ…ã€‚æ¨èåœ¨è¿™ä¸ªé…ç½®ä¸­ä½¿ç”¨ç±»è·¯å¾„èµ„æº(classpath resource)ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•Readerå®ä¾‹ï¼ŒåŒ…æ‹¬ç”¨æ–‡ä»¶è·¯å¾„æˆ–file://å¼€å¤´çš„urlåˆ›å»ºçš„å®ä¾‹ã€‚MyBatisæœ‰ä¸€ä¸ªå®ç”¨ç±»â€”-Resourcesï¼Œå®ƒæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä»ç±»è·¯å¾„åŠå…¶å®ƒä½ç½®åŠ è½½èµ„æºã€‚</p>
<p><strong>ç®€è€Œè¨€ä¹‹ï¼š<code>Mybatis</code> å¯ä»¥ç®€åŒ– <code>JDBC</code> çš„ä»£ç ï¼Œå¹¶ä¸”å°† <code>SQL</code> è¯­å¥ä» <code>Java </code> ä»£ç ä¸­ç‹¬ç«‹äº†å‡ºæ¥ï¼Œé™ä½äº†ä»£ç çš„ç»´æŠ¤æˆæœ¬</strong></p>
<h1 id="ğŸƒMybatisçš„å®‰è£…"><a href="#ğŸƒMybatisçš„å®‰è£…" class="headerlink" title="ğŸƒMybatisçš„å®‰è£…"></a>ğŸƒMybatisçš„å®‰è£…</h1><p>&emsp;&emsp;å¯ä»¥åœ¨Mavenä¸­çš„è¿œç¨‹ä»“åº“è¿›è¡Œä¸‹è½½ï¼Œå…·ä½“åœ°å€å¦‚ä¸‹:<strong><code>https://mvnrepository.com/</code></strong> ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬ <code>3.5.6</code> å¤åˆ¶å…¶åæ ‡ï¼Œæ·»åŠ è‡³ <code>pom.xml</code> æ–‡ä»¶ä¸­å³å¯ï¼Œä¸‹é¢ä¹Ÿç»™å‡ºäº†æ‰€éœ€è¦çš„ <code>mysql</code>é©±åŠ¨åŒ… ,ä»¥åŠ <code>maven</code> çš„å•å…ƒæµ‹è¯•åŒ….</p>
<ul>
<li><strong>é¡¹ç›®åˆ›å»ºå°æŠ€å·§ï¼šå…ˆåˆ›å»ºå¥½ä¸€ä¸ª <code>maven</code> é¡¹ç›®ï¼Œå°†ä¸‹æ–¹ä¾èµ–å†™å…¥ï¼Œå¹¶è¿›è¡Œå®‰è£…ä¸‹è½½ï¼Œç„¶ååˆ é™¤ <code>src</code> ç›®å½•ï¼Œä»¥æ­¤é¡¹ç›®ä½œä¸ºçˆ¶é¡¹ç›®ï¼Œè¿™æ ·<code>pom.xml</code> ä¸­çš„ä¾èµ–ä¼šè¢«å­æ¨¡å—ç»§æ‰¿ï¼Œè¿™æ ·å°±ä¸éœ€è¦é¢‘ç¹çš„å¯¼å…¥ä¾èµ–.æ¥ç€ï¼Œåœ¨è¯¥å·¥ç¨‹ä¸‹åˆ›å»ºæˆ‘ä»¬æ‰€éœ€è¦çš„æµ‹è¯• <code>module</code> å³å¯.</strong></li>
</ul>
<p><strong>Mybatisé¡¹ç›®æ‰€éœ€ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>&emsp;&emsp;æ¥ç€åœ¨<code>src--&gt;main--&gt;resources--&gt;æ–°å»º mybatis-config.xml</code> ï¼Œå¹¶ä¸”åŠ å…¥ä»¥ä¸‹ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">r<span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span>            <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span>                  <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span>        <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span>        <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span>    <span class="comment">&lt;!--éœ€è¦é…ç½®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>${driver}</strong> ï¼š<code>com.mysql.cj.jdbc.driver</code> é«˜ç‰ˆæœ¬çš„ <code>mysql</code> éœ€è¦æ·»åŠ  <code>cj</code> </li>
<li><strong>${url}</strong> ï¼š <code>jdbc:mysql://localhost:3306/ä½¿ç”¨çš„æ•°æ®åº“å?serverTimezone=UTC&quot;</code>  é«˜ç‰ˆæœ¬çš„éœ€è¦æ·»åŠ æ—¶åŒº</li>
<li><strong>${username}</strong> ï¼š é»˜è®¤ä¸º <code>root</code></li>
<li><strong>${password}</strong> : æ‡‚çš„éƒ½æ‡‚</li>
<li><strong>resource</strong> ï¼š é…ç½®<code>Mapper.xml</code>æ–‡ä»¶ ï¼Œå¯¹æ­¤æ–‡ä»¶è¿›è¡Œæ³¨å†Œ</li>
</ul>
<h1 id="ğŸ‰Mybatisåˆä½“éªŒ"><a href="#ğŸ‰Mybatisåˆä½“éªŒ" class="headerlink" title="ğŸ‰Mybatisåˆä½“éªŒ"></a>ğŸ‰Mybatisåˆä½“éªŒ</h1><p>å…ˆæ”¾å‡ºå‡†å¤‡å¥½çš„æ•°æ®æ–‡ä»¶ï¼š</p>
<img src="/2021/04/18/Mybatis%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="table">

<p>æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ï¼š</p>
<ul>
<li><strong>Mybatiså·¥å…·ç±»çš„ç¼–å†™</strong></li>
</ul>
<p>é¦–å…ˆï¼š <code>src--&gt;main--&gt;java--&gt;æ–°å»ºutilsåŒ…--&gt;Mybatisutils.java</code></p>
<p><strong>mybaitsçš„å·¥å…·ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mybatisutils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥: è·å– SqlsessionFactoryå¯¹è±¡</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºå®ä½“ç±»</strong></li>
</ul>
<p>åœ¨ <code>java</code> åŒ…ä¸‹åˆ›å»º <code>pojo</code> åŒ… ï¼Œåˆ›å»ºå®ä½“ç±» <code>User</code> , å®šä¹‰ç§æœ‰å±æ€§ï¼Œå±æ€§åä¸æ•°æ®åº“ä¸­çš„å­—æ®µåä¸€ä¸€å¯¹åº”ï¼Œå¹¶ä¸”å¯¹å¤–æä¾› <code>get/set</code> æ–¹æ³•ï¼Œä»¥åŠæœ‰å‚æ„é€ æ–¹æ³•å’Œæ— å‚æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”é‡å†™ <code>tostring</code> æ–¹æ³•ï¼Œåˆ›å»ºå¦‚ä¸‹.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name, String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºæ•°æ®åº“è®¿é—®å¯¹è±¡</strong></li>
</ul>
<p>åœ¨ <code>java</code> åŒ…ä¸‹åˆ›å»º <code>Dao</code> åŒ…ï¼Œåˆ›å»ºæ•°æ®åº“è®¿é—®æ¥å£ <code>UserDao</code> ï¼Œå¹¶ä¸”å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œ<code>getUserList</code> ï¼Œè¿”å›å€¼ç±»å‹ä¸º <code>List&lt;User&gt;</code> </p>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°† <code>UserDao</code> æ›´åä¸ºäº† <code>UserMapper</code> æ˜¯ä¸ºäº†ç»Ÿä¸€è·Ÿé…ç½®æ–‡ä»¶ä¸­çš„ <code>Mapper</code> æ³¨å†Œæ ‡ç­¾ä¸€è‡´.</p>
<ul>
<li><strong>æ•°æ®åº“è®¿é—®å¯¹è±¡å®ç°ç±»</strong></li>
</ul>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§ä»¥å‰çš„æ“ä½œï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ <code>JDBC</code> ä»£ç ï¼Œè¿›è¡Œæ•°æ®åº“è¿æ¥ï¼Œååˆ†å†—æ‚ï¼Œé¡ºä¾¿å›é¡¾ä¸€ä¸‹ <code>JDBC</code> ä¸­å¸¸ç”¨çš„å‡ ä¸ªç±»ï¼š</p>
<p>ç»“æœé›†ç±»ï¼š<code>ResultSet</code> ï¼Œè¿æ¥ç±»ï¼š <code>Connection</code> , æ•°æ®åº“æ“ä½œå¯¹è±¡ç±»ï¼š<code>Statement</code> ä»¥åŠé˜²æ­¢ <code>SQLæ³¨å…¥ </code> çš„ <code>PreparedStatement</code></p>
<p>Mybatisä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºç®€å•çš„æ–¹å¼ï¼Œç¼–å†™<code>xml</code> æ–‡ä»¶ï¼Œ å°† <code>SQL</code> è¯­å¥å®Œå…¨ä¸ <code>Java</code> ä»£ç åˆ†å¼€ .</p>
<p>åœ¨ <code>Dao</code> åŒ…ä¸‹æ–°å»º <code>UserMapper.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;Dao.UserMapper&quot;</span>&gt;</span><span class="comment">&lt;!--æ­¤å¤„å¡«å†™æ–‡ä»¶ä½ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--idä¸­å¡«å†™å¯¹åº”çš„æ¥å£ä¸­çš„æ–¹æ³•resultType ä¸­å¡«å†™å®ä½“ç±»çš„è·¯å¾„--&gt;</span></span><br><span class="line">        select * from bjpowernode.users  <span class="comment">&lt;!--å…·ä½“çš„å¯¹åº”çš„SQLè¯­å¥ä»¥åŠæ•°æ®åº“ä¸­çš„å“ªä¸€ä¸ªè¡¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>åˆ›å»ºæµ‹è¯•ç±»</strong></li>
</ul>
<p>åœ¨<code>test---&gt; Dao ---&gt; UserMapperTest</code> </p>
<p>ç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pojo.User;</span><br><span class="line"><span class="keyword">import</span> utils.Mybatisutils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">        <span class="comment">//è·å–å®ç°ç±»å¯¹è±¡</span></span><br><span class="line">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; list = userMapper.getUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user : list)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç‚¹å‡»æµ‹è¯•å³å¯</strong></li>
</ul>
<h1 id="ğŸæ•°æ®åº“çš„CRUDæ“ä½œ"><a href="#ğŸæ•°æ®åº“çš„CRUDæ“ä½œ" class="headerlink" title="ğŸæ•°æ®åº“çš„CRUDæ“ä½œ"></a>ğŸæ•°æ®åº“çš„CRUDæ“ä½œ</h1><p>æ¥ä¸‹æ¥å°†æ¼”ç¤ºæ•°æ®åº“çš„å››ç§åŸºæœ¬æ“ä½œ.</p>
<p>å‰è¨€ï¼š åœ¨æ•°æ®åº“æ“ä½œå¯¹è±¡çš„å®ç°çš„æ˜ å°„æ–‡ä»¶ä¸­ï¼Œæœ€å¸¸ç”¨çš„è«è¿‡äº <code>select</code> æ ‡ç­¾ï¼Œæ¥ä¸‹æ¥ä»‹ç»å¸¸ç”¨å±æ€§</p>
<ul>
<li><strong><code>parameterType</code></strong> ï¼šè¡¨ç¤ºå½¢å¼å‚æ•°çš„æ•°æ®çš„ç±»å‹</li>
<li><strong><code>id</code></strong> ï¼šå¯¹åº”æ¥å£çš„æ–¹æ³•å</li>
<li><strong><code>resultType</code></strong> ï¼šå®šä¹‰è¿”å›å€¼çš„æ•°æ®ç±»å‹</li>
</ul>
<h2 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p><code>UserMapper</code>çš„æ¥å£ä¸­æ–°åŠ å…¥æŸ¥è¯¢æ–¹æ³• <code>selectUserById</code>  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">      select * from bjpowernode.users where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByIdTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">       </span><br><span class="line">       SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">       UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">       User u = userMapper.selectUserById(<span class="number">1</span>);</span><br><span class="line">       System.out.println(u);</span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä¿®æ”¹æ“ä½œ"><a href="#ä¿®æ”¹æ“ä½œ" class="headerlink" title="ä¿®æ”¹æ“ä½œ"></a>ä¿®æ”¹æ“ä½œ</h2><p><strong>æ³¨æ„ï¼šå¢åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤éƒ½éœ€è¦æäº¤äº‹åŠ¡æ‰å¯ä»¥ç”Ÿæ•ˆ</strong></p>
<ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserByNP1</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name ,<span class="meta">@Param(&quot;pwd&quot;)</span> String pwd)</span></span>;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒä½¿ç”¨Mapï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">User <span class="title">selectUserByNP2</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<p>æ³¨æ„ï¼šå¦‚æœå½¢å¼å‚æ•°æœ‰å¤šä¸ªï¼Œå¯ä»¥ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œæ·»åŠ å¤šä¸ª ï¼Œæ³¨è§£åéœ€è¦å’Œå½¢å¼å‚æ•°åä¿æŒä¸€è‡´.</p>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!--    æ–¹å¼ä¸€:é€šè¿‡<span class="meta">@param</span>æ³¨è§£è¿›è¡Œ--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;selectUserByNP1&quot;</span> resultType=<span class="string">&quot;pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from bjpowernode.users where name = #&#123;name&#125; and pwd = #&#123;pwd&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼š</p>
<p>æœ¬è´¨ä¸Šï¼Œ<code>SQL</code> è¯­å¥ä¸­çš„ <code>#&#123;name&#125; / #&#123;pwd&#125;</code> çš„å‘½åæ˜¯éšæ„ï¼Œåªéœ€ä¿è¯ï¼ŒåŠ å…¥<code>Map</code> é›†åˆçš„ <code>Key</code> å€¼ä¸è¿™ä¸ªä¿æŒä¸€ä¸€å¯¹åº”çš„å…³ç³»å³å¯.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!--    æ–¹å¼äºŒä½¿ç”¨Mapé›†åˆ--&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;selectUserByNP2&quot;</span> parameterType=<span class="string">&quot;map&quot;</span> resultType=<span class="string">&quot;pojo.User&quot;</span>&gt;</span><br><span class="line">        select * from bjpowernode.users where name = #&#123;name&#125; and pwd = #&#123;pwd&#125;</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<p>æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByNpTest01</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User u = userMapper.selectUserByNP1(<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">    System.out.println(u);</span><br><span class="line">    sqlsession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ–¹å¼äºŒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SelectUserByNpTest02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Map&lt;String,Object&gt; map  = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pwd&quot;</span>,<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">    User u = userMapper.selectUserByNP2(map);</span><br><span class="line">    System.out.println(u);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å¢åŠ æ“ä½œ"><a href="#å¢åŠ æ“ä½œ" class="headerlink" title="å¢åŠ æ“ä½œ"></a>å¢åŠ æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<p>è¿”å›å€¼ä¸ºåŒ…è£…ç±»ï¼Œå¦åˆ™ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Integer <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="comment">&lt;!--    è¿›è¡Œæ•°æ®åº“æ·»åŠ æ•°æ®--&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        insert into users (id,name,pwd) values (#</span><span class="template-variable">&#123;id&#125;</span><span class="xml"> , #</span><span class="template-variable">&#123;name&#125;</span><span class="xml"> , #</span><span class="template-variable">&#123;pwd&#125;</span><span class="xml">)</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User u = <span class="keyword">new</span> User(<span class="number">5</span>,<span class="string">&quot;ç‹äºŒ&quot;</span>,<span class="string">&quot;987654321&quot;</span>);</span><br><span class="line">    Integer i = userMapper.addUser(u);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h2><ul>
<li><strong>æ¥å£ä¸­æ·»åŠ æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Integer <span class="title">deletUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Mapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</strong></li>
</ul>
<p>å¯¹äºåŒ…è£…ç±»å’ŒåŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ <code>String</code>, <code>resultTypeä»¥åŠparameterType</code> å¯ä»¥ä¸ç”¨å†™</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;select <span class="built_in">id</span>=<span class="string">&quot;deletUser&quot;</span> resultType=<span class="string">&quot;integer&quot;</span> &gt;</span><br><span class="line">    delete <span class="keyword">from</span> users <span class="keyword">where</span> <span class="built_in">id</span> = <span class="comment">#&#123;id&#125;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>UserMapperTestä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deletUserTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = Mybatisutils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Integer i = userMapper.deletUser(<span class="number">4</span>);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="ğŸ‰Bugè®°å½•"><a href="#ğŸ‰Bugè®°å½•" class="headerlink" title="ğŸ‰Bugè®°å½•"></a>ğŸ‰Bugè®°å½•</h1><p>1.<strong>java.io.IOException: Could not find resource Dao/UserMapper.xml</strong></p>
<p>â€‹    ä¸€èˆ¬ä¸ºDaoç›®å½•ä¸‹çš„mapper.xmlæ–‡ä»¶æ²¡æœ‰è¢«mavenç¼–è¯‘å¤„ç†åˆ°targetä¸­çš„Daoç›®å½•ä¸‹éœ€è¦åœ¨pomä¸­è¿›è¡Œé…ç½®å¤„ç†ï¼Œä½¿mavenå¯ä»¥ä¸€åŒå¤„ç†xmlæ–‡ä»¶ , åœ¨buildæ ‡ç­¾ä¸‹æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>2.<strong>Invalid bound statement (not found): Dao.UserDao.getUserList</strong></p>
<p>â€‹    å¯èƒ½ä¸º<code>æ•°æ®åº“æ“ä½œå¯¹è±¡çš„å®ç°ï¼ˆç±»ï¼‰</code>ï¼ˆMapper.xmlï¼‰æ–‡ä»¶ä¸­ select æ ‡ç­¾ä¸­idå±æ€§ä¸ä¸ºæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•å.</p>
<p>3.<strong>Type interface Dao.UserDao is not known to the MapperRegistry.</strong></p>
<p>â€‹    å¯èƒ½ä¸ºMapper.xml æ–‡ä»¶ä¸­çš„ namespace å¡«å†™é”™è¯¯.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis(ä¸€):äº”å¤§æ•°æ®ç±»å‹</title>
    <url>/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="â›µNoSQL"><a href="#â›µNoSQL" class="headerlink" title="â›µNoSQL"></a>â›µNoSQL</h1><p>â€‹    <code>NoSQL</code>ï¼Œæ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ã€‚éšç€äº’è”ç½‘<a href="https://baike.so.com/doc/7119987-7343121.html">web2.0</a>ç½‘ç«™çš„å…´èµ·ï¼Œä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“åœ¨åº”ä»˜<code>web2.0</code>ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯è¶…å¤§è§„æ¨¡å’Œé«˜å¹¶å‘çš„<a href="https://baike.so.com/doc/3656419-3843163.html">SNS</a>ç±»å‹çš„<code>web2.0</code>çº¯åŠ¨æ€ç½‘ç«™å·²ç»æ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œæš´éœ²äº†å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼Œè€Œéå…³ç³»å‹çš„æ•°æ®åº“åˆ™ç”±äºå…¶æœ¬èº«çš„ç‰¹ç‚¹å¾—åˆ°äº†éå¸¸è¿…é€Ÿçš„å‘å±•ã€‚<code>NoSQL</code>æ•°æ®åº“çš„äº§ç”Ÿå°±æ˜¯ä¸ºäº†è§£å†³å¤§è§„æ¨¡æ•°æ®é›†åˆå¤šé‡æ•°æ®ç§ç±»å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åº”ç”¨éš¾é¢˜ã€‚</p>
<p>â€‹        è™½ç„¶<code>NoSQL</code>æµè¡Œè¯­ç«èµ·æ¥æ‰çŸ­çŸ­ä¸€å¹´çš„æ—¶é—´ï¼Œä½†æ˜¯ä¸å¯å¦è®¤ï¼Œç°åœ¨å·²ç»å¼€å§‹äº†ç¬¬äºŒä»£è¿åŠ¨ã€‚å°½ç®¡æ—©æœŸçš„å †æ ˆä»£ç åªèƒ½ç®—æ˜¯ä¸€ç§å®éªŒï¼Œç„¶è€Œç°åœ¨çš„ç³»ç»Ÿå·²ç»æ›´åŠ çš„æˆç†Ÿã€ç¨³å®šã€‚ä¸è¿‡ç°åœ¨ä¹Ÿé¢ä¸´ç€ä¸€ä¸ªä¸¥é…·çš„äº‹å®:æŠ€æœ¯è¶Šæ¥è¶Šæˆç†Ÿâ€“ä»¥è‡³äºåŸæ¥å¾ˆå¥½çš„<code>NoSQL</code>æ•°æ®å­˜å‚¨ä¸å¾—ä¸è¿›è¡Œé‡å†™ï¼Œä¹Ÿæœ‰å°‘æ•°äººè®¤ä¸ºè¿™å°±æ˜¯æ‰€è°“çš„2.0ç‰ˆæœ¬ã€‚è¿™é‡Œåˆ—å‡ºä¸€äº›æ¯”è¾ƒçŸ¥åçš„å·¥å…·ï¼Œå¯ä»¥ä¸ºå¤§æ•°æ®å»ºç«‹å¿«é€Ÿã€å¯æ‰©å±•çš„å­˜å‚¨åº“ã€‚</p>
<h2 id="NoSQLçš„åº”ç”¨åœºæ™¯"><a href="#NoSQLçš„åº”ç”¨åœºæ™¯" class="headerlink" title="NoSQLçš„åº”ç”¨åœºæ™¯"></a>NoSQLçš„åº”ç”¨åœºæ™¯</h2><ul>
<li><p>æ•°æ®æ¨¡å‹æ¯”è¾ƒç®€å•</p>
</li>
<li><p>éœ€è¦çµæ´»æ€§æ›´å¼ºçš„ITç³»ç»Ÿ</p>
</li>
<li><p>å¯¹æ•°æ®åº“æ€§èƒ½è¦æ±‚è¾ƒé«˜</p>
</li>
<li><p>ä¸éœ€è¦é«˜åº¦çš„æ•°æ®ä¸€è‡´æ€§</p>
</li>
</ul>
<p>å¦‚ï¼šå•†åŸç½‘ç«™ä¸­å¯¹å•†å“æ•°æ®é¢‘ç¹æŸ¥è¯¢ã€å¯¹çƒ­æœå•†å“çš„æ’è¡Œç»Ÿè®¡ã€è®¢å•è¶…æ—¶é—®é¢˜ã€ä»¥åŠå¾®ä¿¡æœ‹å‹åœˆï¼ˆéŸ³é¢‘ï¼Œè§†é¢‘ï¼‰ã€éªŒè¯ç æ¶ˆæ¯éªŒè¯ç­‰</p>
<h1 id="ğŸš‹Redis"><a href="#ğŸš‹Redis" class="headerlink" title="ğŸš‹Redis"></a>ğŸš‹Redis</h1><ul>
<li><p>redisæ˜¯ä¸€ä¸ªå†…å­˜å‹çš„æ•°æ®åº“</p>
</li>
<li><p> Redisæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½key/valueå†…å­˜å‹æ•°æ®åº“</p>
</li>
<li><p> Redisæ”¯æŒä¸°å¯Œçš„æ•°æ®ç±»å‹ </p>
</li>
<li><p> Redisæ”¯æŒæŒä¹…åŒ– </p>
</li>
<li><p> Rediså•çº¿ç¨‹,å•è¿›ç¨‹ï¼ˆé«˜ç‰ˆæœ¬ä¹Ÿæ”¯æŒå¤šçº¿ç¨‹ï¼‰</p>
</li>
</ul>
<h2 id="Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤"><a href="#Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤" class="headerlink" title="Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤"></a>Redisæ•°æ®åº“ç›¸å…³æŒ‡ä»¤</h2><h3 id="æ•°æ®åº“æ“ä½œæŒ‡ä»¤"><a href="#æ•°æ®åº“æ“ä½œæŒ‡ä»¤" class="headerlink" title="æ•°æ®åº“æ“ä½œæŒ‡ä»¤"></a>æ•°æ®åº“æ“ä½œæŒ‡ä»¤</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.Redisä¸­åº“è¯´æ˜</span></span><br><span class="line"><span class="bullet">-</span> ä½¿ç”¨redisçš„é»˜è®¤é…ç½®å™¨åŠ¨redisæœåŠ¡å,é»˜è®¤ä¼šå­˜åœ¨16ä¸ªåº“,ç¼–å·ä»0-15</span><br><span class="line"><span class="bullet">-</span> å¯ä»¥ä½¿ç”¨select åº“çš„ç¼–å· æ¥é€‰æ‹©ä¸€ä¸ªredisçš„åº“</span><br><span class="line"></span><br><span class="line"><span class="section"># 2.Redisä¸­æ“ä½œåº“çš„æŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> æ¸…ç©ºå½“å‰çš„åº“  FLUSHDB</span><br><span class="line"><span class="bullet">-</span> æ¸…ç©ºå…¨éƒ¨çš„åº“  FLUSHALL</span><br><span class="line"></span><br><span class="line"><span class="section"># 3.rediså®¢æˆ·ç«¯æ˜¾ç¤ºä¸­æ–‡</span></span><br><span class="line"><span class="bullet">-</span>	./redis-cli  -p 7000 --raw</span><br></pre></td></tr></table></figure>

<h3 id="æ“ä½œkeyç›¸å…³æŒ‡ä»¤"><a href="#æ“ä½œkeyç›¸å…³æŒ‡ä»¤" class="headerlink" title="æ“ä½œkeyç›¸å…³æŒ‡ä»¤"></a>æ“ä½œkeyç›¸å…³æŒ‡ä»¤</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.DELæŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³• :  DEL key [key ...] </span><br><span class="line"><span class="bullet">-</span> ä½œç”¨ :  åˆ é™¤ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªkey ã€‚ä¸å­˜åœ¨çš„key ä¼šè¢«å¿½ç•¥ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼š è¢«åˆ é™¤key çš„æ•°é‡ã€‚ </span><br><span class="line"></span><br><span class="line"><span class="section"># 2.EXISTSæŒ‡ä»¤</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:  EXISTS key</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨:  æ£€æŸ¥ç»™å®škey æ˜¯å¦å­˜åœ¨ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼š è‹¥key å­˜åœ¨ï¼Œè¿”å›1 ï¼Œå¦åˆ™è¿”å›0ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 3.EXPIRE</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:  EXPIRE key seconds</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨:  ä¸ºç»™å®škey è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œå½“key è¿‡æœŸæ—¶(ç”Ÿå­˜æ—¶é—´ä¸º0 )ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">-</span> å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span><br><span class="line"><span class="bullet">-</span> æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span><br><span class="line"><span class="bullet">-</span> è¿”å›å€¼ï¼šè®¾ç½®æˆåŠŸè¿”å›1 ã€‚</span><br><span class="line"></span><br><span class="line"><span class="section"># 4.KEYS</span></span><br><span class="line"><span class="bullet">-</span> è¯­æ³• :  KEYS pattern</span><br><span class="line"><span class="bullet">-</span> ä½œç”¨ :  æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼pattern çš„key ã€‚</span><br><span class="line"><span class="bullet">-</span> è¯­æ³•:</span><br><span class="line"><span class="code">	KEYS * åŒ¹é…æ•°æ®åº“ä¸­æ‰€æœ‰key ã€‚</span></span><br><span class="line"><span class="code">	KEYS h?llo åŒ¹é…hello ï¼Œhallo å’Œhxllo ç­‰ã€‚</span></span><br><span class="line"><span class="code">	KEYS h*llo åŒ¹é…hllo å’Œheeeeello ç­‰ã€‚</span></span><br><span class="line"><span class="code">	KEYS h[ae]llo åŒ¹é…hello å’Œhallo ï¼Œä½†ä¸åŒ¹é…hillo ã€‚ç‰¹æ®Šç¬¦å·ç”¨ &quot;\&quot; éš”å¼€</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š ç¬¦åˆç»™å®šæ¨¡å¼çš„key åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 5.MOVE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  MOVE key db</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  å°†å½“å‰æ•°æ®åº“çš„key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“db å½“ä¸­ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š ç§»åŠ¨æˆåŠŸè¿”å›1 ï¼Œå¤±è´¥åˆ™è¿”å›0 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 6.PEXPIRE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PEXPIRE key milliseconds</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤å’ŒEXPIRE å‘½ä»¤çš„ä½œç”¨ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸åƒEXPIRE å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- æ—¶é—´å¤æ‚åº¦ï¼š O(1)</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šè®¾ç½®æˆåŠŸï¼Œè¿”å›1  key ä¸å­˜åœ¨æˆ–è®¾ç½®å¤±è´¥ï¼Œè¿”å›0</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 7.PEXPIREAT</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PEXPIREAT key milliseconds-timestamp</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤å’ŒEXPIREAT å‘½ä»¤ç±»ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®key çš„è¿‡æœŸunix æ—¶é—´æˆ³ï¼Œè€Œä¸æ˜¯åƒEXPIREATé‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šå¦‚æœç”Ÿå­˜æ—¶é—´è®¾ç½®æˆåŠŸï¼Œè¿”å›1 ã€‚å½“key ä¸å­˜åœ¨æˆ–æ²¡åŠæ³•è®¾ç½®ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›0 ã€‚(æŸ¥çœ‹EXPIRE å‘½ä»¤è·å–æ›´å¤šä¿¡æ¯)</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 8.TTL</span></span><br><span class="line"><span class="code">- è¯­æ³• :   TTL key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :   ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®škey çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="code">	å½“key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›-2 ã€‚</span></span><br><span class="line"><span class="code">	å½“key å­˜åœ¨ä½†æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code">	å¦åˆ™ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚</span></span><br><span class="line"><span class="code">- Note : åœ¨Redis 2.8 ä»¥å‰ï¼Œå½“key ä¸å­˜åœ¨ï¼Œæˆ–è€…key æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œå‘½ä»¤éƒ½è¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 9.PTTL</span></span><br><span class="line"><span class="code">- è¯­æ³• :  PTTL key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿™ä¸ªå‘½ä»¤ç±»ä¼¼äºTTL å‘½ä»¤ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸æ˜¯åƒTTL å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 2.6.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š å½“key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›-2 ã€‚å½“key å­˜åœ¨ä½†æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code">- å¦åˆ™ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œè¿”å›key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ã€‚</span></span><br><span class="line"><span class="code">- æ³¨æ„ : åœ¨Redis 2.8 ä»¥å‰ï¼Œå½“key ä¸å­˜åœ¨ï¼Œæˆ–è€…key æ²¡æœ‰è®¾ç½®å‰©ä½™ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œå‘½ä»¤éƒ½è¿”å›-1 ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 10.RANDOMKEY</span></span><br><span class="line"><span class="code">- è¯­æ³• :  RANDOMKEY</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›(ä¸åˆ é™¤) ä¸€ä¸ªkey ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼šå½“æ•°æ®åº“ä¸ä¸ºç©ºæ—¶ï¼Œè¿”å›ä¸€ä¸ªkey ã€‚å½“æ•°æ®åº“ä¸ºç©ºæ—¶ï¼Œè¿”å›nil ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 11.RENAME</span></span><br><span class="line"><span class="code">- è¯­æ³• :  RENAME key newkey</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  å°†key æ”¹åä¸ºnewkey ã€‚å½“key å’Œnewkey ç›¸åŒï¼Œæˆ–è€…key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚å½“newkey å·²ç»å­˜åœ¨æ—¶ï¼ŒRENAME å‘½ä»¤å°†è¦†ç›–æ—§å€¼ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š æ”¹åæˆåŠŸæ—¶æç¤ºOK ï¼Œå¤±è´¥æ—¶å€™è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"># 12.TYPE</span></span><br><span class="line"><span class="code">- è¯­æ³• :  TYPE key</span></span><br><span class="line"><span class="code">- ä½œç”¨ :  è¿”å›key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="code">- å¯ç”¨ç‰ˆæœ¬ï¼š &gt;= 1.0.0</span></span><br><span class="line"><span class="code">- è¿”å›å€¼ï¼š</span></span><br><span class="line"><span class="code">	none (key ä¸å­˜åœ¨)</span></span><br><span class="line"><span class="code">	string (å­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="code">	list (åˆ—è¡¨)</span></span><br><span class="line"><span class="code">	set (é›†åˆ)</span></span><br><span class="line"><span class="code">	zset (æœ‰åºé›†)</span></span><br><span class="line"><span class="code">	hash (å“ˆå¸Œè¡¨)</span></span><br></pre></td></tr></table></figure>

<h3 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h3><h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨æ“ä½œå‘½ä»¤"><a href="#å¸¸ç”¨æ“ä½œå‘½ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œå‘½ä»¤"></a>å¸¸ç”¨æ“ä½œå‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>set</td>
<td>è®¾ç½®ä¸€ä¸ªkey/value</td>
</tr>
<tr>
<td>get</td>
<td>æ ¹æ®keyè·å¾—å¯¹åº”çš„value</td>
</tr>
<tr>
<td>mset</td>
<td>ä¸€æ¬¡è®¾ç½®å¤šä¸ªkey value</td>
</tr>
<tr>
<td>mget</td>
<td>ä¸€æ¬¡è·å¾—å¤šä¸ªkeyçš„value</td>
</tr>
<tr>
<td>getset</td>
<td>è·å¾—åŸå§‹keyçš„å€¼ï¼ŒåŒæ—¶è®¾ç½®æ–°å€¼</td>
</tr>
<tr>
<td>strlen</td>
<td>è·å¾—å¯¹åº”keyå­˜å‚¨valueçš„é•¿åº¦</td>
</tr>
<tr>
<td>append</td>
<td>ä¸ºå¯¹åº”keyçš„valueè¿½åŠ å†…å®¹</td>
</tr>
<tr>
<td>getrange ç´¢å¼•0å¼€å§‹</td>
<td>æˆªå–valueçš„å†…å®¹</td>
</tr>
<tr>
<td>setex</td>
<td>è®¾ç½®ä¸€ä¸ªkeyå­˜æ´»çš„æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰</td>
</tr>
<tr>
<td>psetex</td>
<td>è®¾ç½®ä¸€ä¸ªkeyå­˜æ´»çš„æœ‰æ•ˆæœŸï¼ˆæ¯«ç§’ï¼‰</td>
</tr>
<tr>
<td>setnx</td>
<td>å­˜åœ¨ä¸åšä»»ä½•æ“ä½œ,ä¸å­˜åœ¨æ·»åŠ </td>
</tr>
<tr>
<td>msetnxåŸå­æ“ä½œ(åªè¦æœ‰ä¸€ä¸ªå­˜åœ¨ä¸åšä»»ä½•æ“ä½œ)</td>
<td>å¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªkey,åªæœ‰æœ‰ä¸€ä¸ªå­˜åœ¨éƒ½ä¸ä¿å­˜</td>
</tr>
<tr>
<td>decr</td>
<td>è¿›è¡Œæ•°å€¼ç±»å‹çš„-1æ“ä½œ</td>
</tr>
<tr>
<td>decrby</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®è¿›è¡Œå‡æ³•æ“ä½œ</td>
</tr>
<tr>
<td>Incr</td>
<td>è¿›è¡Œæ•°å€¼ç±»å‹çš„+1æ“ä½œ</td>
</tr>
<tr>
<td>incrby</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®è¿›è¡ŒåŠ æ³•æ“ä½œ</td>
</tr>
<tr>
<td>Incrbyfloat</td>
<td>æ ¹æ®æä¾›çš„æ•°æ®åŠ å…¥æµ®ç‚¹æ•°</td>
</tr>
</tbody></table>
<h3 id="Listç±»å‹"><a href="#Listç±»å‹" class="headerlink" title="Listç±»å‹"></a>Listç±»å‹</h3><p>list åˆ—è¡¨ ç›¸å½“äºjavaä¸­list é›†åˆ  ç‰¹ç‚¹  å…ƒç´ æœ‰åº  ä¸” å¯ä»¥é‡å¤</p>
<h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹-1"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹-1" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"><a href="#å¸¸ç”¨æ“ä½œæŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"></a>å¸¸ç”¨æ“ä½œæŒ‡ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>lpush</td>
<td>å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨å¤´éƒ¨</td>
</tr>
<tr>
<td>lpushx</td>
<td>åŒlpush,ä½†æ˜¯å¿…é¡»è¦ä¿è¯è¿™ä¸ªkeyå­˜åœ¨</td>
</tr>
<tr>
<td>rpush</td>
<td>å°†æŸä¸ªå€¼åŠ å…¥åˆ°ä¸€ä¸ªkeyåˆ—è¡¨æœ«å°¾</td>
</tr>
<tr>
<td>rpushx</td>
<td>åŒrpush,ä½†æ˜¯å¿…é¡»è¦ä¿è¯è¿™ä¸ªkeyå­˜åœ¨</td>
</tr>
<tr>
<td>lpop</td>
<td>è¿”å›å’Œç§»é™¤åˆ—è¡¨å·¦è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>rpop</td>
<td>è¿”å›å’Œç§»é™¤åˆ—è¡¨å³è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>lrange</td>
<td>è·å–æŸä¸€ä¸ªä¸‹æ ‡åŒºé—´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>llen</td>
<td>è·å–åˆ—è¡¨å…ƒç´ ä¸ªæ•°</td>
</tr>
<tr>
<td>lset</td>
<td>è®¾ç½®æŸä¸€ä¸ªæŒ‡å®šç´¢å¼•çš„å€¼(ç´¢å¼•å¿…é¡»å­˜åœ¨)</td>
</tr>
<tr>
<td>lindex</td>
<td>è·å–æŸä¸€ä¸ªæŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ </td>
</tr>
<tr>
<td>lrem</td>
<td>åˆ é™¤é‡å¤å…ƒç´ </td>
</tr>
<tr>
<td>ltrim</td>
<td>ä¿ç•™åˆ—è¡¨ä¸­ç‰¹å®šåŒºé—´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>linsert</td>
<td>åœ¨æŸä¸€ä¸ªå…ƒç´ ä¹‹å‰ï¼Œä¹‹åæ’å…¥æ–°å…ƒç´ </td>
</tr>
</tbody></table>
<h3 id="Setç±»å‹"><a href="#Setç±»å‹" class="headerlink" title="Setç±»å‹"></a>Setç±»å‹</h3><p>ç‰¹ç‚¹: Setç±»å‹ Seté›†åˆ å…ƒç´ æ— åº  ä¸å¯ä»¥é‡å¤</p>
<h4 id="å†…å­˜å­˜å‚¨æ¨¡å‹-2"><a href="#å†…å­˜å­˜å‚¨æ¨¡å‹-2" class="headerlink" title="å†…å­˜å­˜å‚¨æ¨¡å‹"></a>å†…å­˜å­˜å‚¨æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>sadd</td>
<td>ä¸ºé›†åˆæ·»åŠ å…ƒç´ </td>
</tr>
<tr>
<td>smembers</td>
<td>æ˜¾ç¤ºé›†åˆä¸­æ‰€æœ‰å…ƒç´  æ— åº</td>
</tr>
<tr>
<td>scard</td>
<td>è¿”å›é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td>
</tr>
<tr>
<td>spop</td>
<td>éšæœºè¿”å›ä¸€ä¸ªå…ƒç´  å¹¶å°†å…ƒç´ åœ¨é›†åˆä¸­åˆ é™¤</td>
</tr>
<tr>
<td>smove</td>
<td>ä»ä¸€ä¸ªé›†åˆä¸­å‘å¦ä¸€ä¸ªé›†åˆç§»åŠ¨å…ƒç´   å¿…é¡»æ˜¯åŒä¸€ç§ç±»å‹</td>
</tr>
<tr>
<td>srem</td>
<td>ä»é›†åˆä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>sismember</td>
<td>åˆ¤æ–­ä¸€ä¸ªé›†åˆä¸­æ˜¯å¦å«æœ‰è¿™ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>srandmember</td>
<td>éšæœºè¿”å›å…ƒç´ </td>
</tr>
<tr>
<td>sdiff</td>
<td>å»æ‰ç¬¬ä¸€ä¸ªé›†åˆä¸­å…¶å®ƒé›†åˆå«æœ‰çš„ç›¸åŒå…ƒç´ </td>
</tr>
<tr>
<td>sinter</td>
<td>æ±‚äº¤é›†</td>
</tr>
<tr>
<td>sunion</td>
<td>æ±‚å’Œé›†</td>
</tr>
</tbody></table>
<h3 id="ZSetç±»å‹"><a href="#ZSetç±»å‹" class="headerlink" title="ZSetç±»å‹"></a>ZSetç±»å‹</h3><p>ç‰¹ç‚¹: å¯æ’åºçš„seté›†åˆ  æ’åº  ä¸å¯é‡å¤ </p>
<p>ZSET å®˜æ–¹  å¯æ’åºSET  sortSet   </p>
<h4 id="å†…å­˜æ¨¡å‹"><a href="#å†…å­˜æ¨¡å‹" class="headerlink" title="å†…å­˜æ¨¡å‹"></a>å†…å­˜æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤-1"><a href="#å¸¸ç”¨å‘½ä»¤-1" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>zadd</td>
<td>æ·»åŠ ä¸€ä¸ªæœ‰åºé›†åˆå…ƒç´ </td>
</tr>
<tr>
<td>zcard</td>
<td>è¿”å›é›†åˆçš„å…ƒç´ ä¸ªæ•°</td>
</tr>
<tr>
<td>zrange å‡åº zrevrange é™åº</td>
<td>è¿”å›ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>zrangebyscore</td>
<td>æŒ‰ç…§åˆ†æ•°æŸ¥æ‰¾ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td>
</tr>
<tr>
<td>zrank</td>
<td>è¿”å›æ’å</td>
</tr>
<tr>
<td>zrevrank</td>
<td>å€’åºæ’å</td>
</tr>
<tr>
<td>zscore</td>
<td>æ˜¾ç¤ºæŸä¸€ä¸ªå…ƒç´ çš„åˆ†æ•°</td>
</tr>
<tr>
<td>zrem</td>
<td>ç§»é™¤æŸä¸€ä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>zincrby</td>
<td>ç»™æŸä¸ªç‰¹å®šå…ƒç´ åŠ åˆ†</td>
</tr>
</tbody></table>
<h3 id="hashç±»å‹"><a href="#hashç±»å‹" class="headerlink" title="hashç±»å‹"></a>hashç±»å‹</h3><p>ç‰¹ç‚¹: value æ˜¯ä¸€ä¸ªmapç»“æ„ å­˜åœ¨key value  key æ— åºçš„  </p>
<h4 id="å†…å­˜æ¨¡å‹-1"><a href="#å†…å­˜æ¨¡å‹-1" class="headerlink" title="å†…å­˜æ¨¡å‹"></a>å†…å­˜æ¨¡å‹</h4><img src="/2021/06/08/Redis%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="å›¾ç‰‡">



<h4 id="å¸¸ç”¨å‘½ä»¤-2"><a href="#å¸¸ç”¨å‘½ä»¤-2" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>hset</td>
<td>è®¾ç½®ä¸€ä¸ªkey/valueå¯¹</td>
</tr>
<tr>
<td>hget</td>
<td>è·å¾—ä¸€ä¸ªkeyå¯¹åº”çš„value</td>
</tr>
<tr>
<td>hgetall</td>
<td>è·å¾—æ‰€æœ‰çš„key/valueå¯¹</td>
</tr>
<tr>
<td>hdel</td>
<td>åˆ é™¤æŸä¸€ä¸ªkey/valueå¯¹</td>
</tr>
<tr>
<td>hexists</td>
<td>åˆ¤æ–­ä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td>hkeys</td>
<td>è·å¾—æ‰€æœ‰çš„key</td>
</tr>
<tr>
<td>hvals</td>
<td>è·å¾—æ‰€æœ‰çš„value</td>
</tr>
<tr>
<td>hmset</td>
<td>è®¾ç½®å¤šä¸ªkey/value</td>
</tr>
<tr>
<td>hmget</td>
<td>è·å¾—å¤šä¸ªkeyçš„value</td>
</tr>
<tr>
<td>hsetnx</td>
<td>è®¾ç½®ä¸€ä¸ªä¸å­˜åœ¨çš„keyçš„å€¼</td>
</tr>
<tr>
<td>hincrby</td>
<td>ä¸ºvalueè¿›è¡ŒåŠ æ³•è¿ç®—</td>
</tr>
<tr>
<td>hincrbyfloat</td>
<td>ä¸ºvalueåŠ å…¥æµ®ç‚¹å€¼</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Shiro(ä¸€):ä»‹ç»ä¸åŸºæœ¬æ¦‚å¿µ</title>
    <url>/2021/06/09/Shiro%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h2 id="ğŸš§æƒé™ç®¡ç†"><a href="#ğŸš§æƒé™ç®¡ç†" class="headerlink" title="ğŸš§æƒé™ç®¡ç†"></a>ğŸš§æƒé™ç®¡ç†</h2><h3 id="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"><a href="#ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†"></a>ä»€ä¹ˆæ˜¯æƒé™ç®¡ç†</h3><p>åŸºæœ¬ä¸Šæ¶‰åŠåˆ°ç”¨æˆ·å‚ä¸çš„ç³»ç»Ÿéƒ½è¦è¿›è¡Œæƒé™ç®¡ç†ï¼Œæƒé™ç®¡ç†å±äºç³»ç»Ÿå®‰å…¨çš„èŒƒç•´ï¼Œæƒé™ç®¡ç†å®ç°<code>å¯¹ç”¨æˆ·è®¿é—®ç³»ç»Ÿçš„æ§åˆ¶</code>ï¼ŒæŒ‰ç…§å®‰å…¨è§„åˆ™æˆ–è€…<a href="http://baike.baidu.com/view/160028.htm">å®‰å…¨ç­–ç•¥</a>æ§åˆ¶ç”¨æˆ·å¯ä»¥è®¿é—®è€Œä¸”åªèƒ½è®¿é—®è‡ªå·±è¢«æˆæƒçš„èµ„æºã€‚</p>
<p>æƒé™ç®¡ç†åŒ…æ‹¬ç”¨æˆ·<code>èº«ä»½è®¤è¯</code>å’Œ<code>æˆæƒ</code>ä¸¤éƒ¨åˆ†ï¼Œç®€ç§°<code>è®¤è¯æˆæƒ</code>ã€‚å¯¹äºéœ€è¦è®¿é—®æ§åˆ¶çš„èµ„æºç”¨æˆ·é¦–å…ˆç»è¿‡èº«ä»½è®¤è¯ï¼Œè®¤è¯é€šè¿‡åç”¨æˆ·å…·æœ‰è¯¥èµ„æºçš„è®¿é—®æƒé™æ–¹å¯è®¿é—®ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯"><a href="#ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯" class="headerlink" title="ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯"></a>ä»€ä¹ˆæ˜¯èº«ä»½è®¤è¯</h3><p><code>èº«ä»½è®¤è¯</code>ï¼Œå°±æ˜¯åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·æ˜¯å¦ä¸ºåˆæ³•ç”¨æˆ·çš„å¤„ç†è¿‡ç¨‹ã€‚æœ€å¸¸ç”¨çš„ç®€å•èº«ä»½è®¤è¯æ–¹å¼æ˜¯ç³»ç»Ÿé€šè¿‡æ ¸å¯¹ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå£ä»¤ï¼Œçœ‹å…¶æ˜¯å¦ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå£ä»¤ä¸€è‡´ï¼Œæ¥åˆ¤æ–­ç”¨æˆ·èº«ä»½æ˜¯å¦æ­£ç¡®ã€‚å¯¹äºé‡‡ç”¨<a href="http://baike.baidu.com/view/5628.htm">æŒ‡çº¹</a>ç­‰ç³»ç»Ÿï¼Œåˆ™å‡ºç¤ºæŒ‡çº¹ï¼›å¯¹äºç¡¬ä»¶Keyç­‰åˆ·å¡ç³»ç»Ÿï¼Œåˆ™éœ€è¦åˆ·å¡ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯æˆæƒ"><a href="#ä»€ä¹ˆæ˜¯æˆæƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯æˆæƒ"></a>ä»€ä¹ˆæ˜¯æˆæƒ</h3><p><code>æˆæƒï¼Œå³è®¿é—®æ§åˆ¶</code>ï¼Œæ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æºã€‚ä¸»ä½“è¿›è¡Œèº«ä»½è®¤è¯åéœ€è¦åˆ†é…æƒé™æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æºï¼Œå¯¹äºæŸäº›èµ„æºæ²¡æœ‰æƒé™æ˜¯æ— æ³•è®¿é—®çš„</p>
<hr>
<h2 id="ğŸä»€ä¹ˆæ˜¯shiro"><a href="#ğŸä»€ä¹ˆæ˜¯shiro" class="headerlink" title="ğŸä»€ä¹ˆæ˜¯shiro"></a>ğŸä»€ä¹ˆæ˜¯shiro</h2><blockquote>
<p><strong>Apache Shiroâ„¢</strong> is a powerful and easy-to-use Java security framework that performs authentication, authorization, cryptography, and session management. With Shiroâ€™s easy-to-understand API, you can quickly and easily secure any application â€“ from the smallest mobile applications to the largest web and enterprise applications.  </p>
<p>Shiro æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„Javaå®‰å…¨æ¡†æ¶ï¼Œå®ƒæ‰§è¡Œèº«ä»½éªŒè¯ã€æˆæƒã€åŠ å¯†å’Œä¼šè¯ç®¡ç†ã€‚ä½¿ç”¨Shiroæ˜“äºç†è§£çš„APIï¼Œæ‚¨å¯ä»¥å¿«é€Ÿè½»æ¾åœ°ä¿æŠ¤ä»»ä½•åº”ç”¨ç¨‹åºâ€”ä»æœ€å°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„webå’Œä¼ä¸šåº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<p><code>Shiroæ˜¯apacheæ——ä¸‹ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå®ƒå°†è½¯ä»¶ç³»ç»Ÿçš„å®‰å…¨è®¤è¯ç›¸å…³çš„åŠŸèƒ½æŠ½å–å‡ºæ¥ï¼Œå®ç°ç”¨æˆ·èº«ä»½è®¤è¯ï¼Œæƒé™æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ï¼Œç»„æˆäº†ä¸€ä¸ªé€šç”¨çš„å®‰å…¨è®¤è¯æ¡†æ¶ã€‚</code></p>
<hr>
<h2 id="ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„"><a href="#ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„" class="headerlink" title="ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„"></a>ğŸŒshiroçš„æ ¸å¿ƒæ¶æ„</h2><img src="/2021/06/09/Shiro%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="æ¶æ„å›¾">



<h3 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h3><p><code>Subjectå³ä¸»ä½“</code>ï¼Œå¤–éƒ¨åº”ç”¨ä¸subjectè¿›è¡Œäº¤äº’ï¼Œsubjectè®°å½•äº†å½“å‰æ“ä½œç”¨æˆ·ï¼Œå°†ç”¨æˆ·çš„æ¦‚å¿µç†è§£ä¸ºå½“å‰æ“ä½œçš„ä¸»ä½“ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé€šè¿‡æµè§ˆå™¨è¯·æ±‚çš„ç”¨æˆ·ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºã€‚    Subjectåœ¨shiroä¸­æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº†å¾ˆå¤šè®¤è¯æˆç›¸å…³çš„æ–¹æ³•ï¼Œå¤–éƒ¨ç¨‹åºé€šè¿‡subjectè¿›è¡Œè®¤è¯æˆï¼Œè€Œsubjectæ˜¯é€šè¿‡SecurityManagerå®‰å…¨ç®¡ç†å™¨è¿›è¡Œè®¤è¯æˆæƒ</p>
<h3 id="SecurityManager"><a href="#SecurityManager" class="headerlink" title="SecurityManager"></a>SecurityManager</h3><p><code>SecurityManagerå³å®‰å…¨ç®¡ç†å™¨</code>ï¼Œå¯¹å…¨éƒ¨çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ï¼Œå®ƒæ˜¯shiroçš„æ ¸å¿ƒï¼Œè´Ÿè´£å¯¹æ‰€æœ‰çš„subjectè¿›è¡Œå®‰å…¨ç®¡ç†ã€‚é€šè¿‡SecurityManagerå¯ä»¥å®Œæˆsubjectçš„è®¤è¯ã€æˆæƒç­‰ï¼Œå®è´¨ä¸ŠSecurityManageræ˜¯é€šè¿‡Authenticatorè¿›è¡Œè®¤è¯ï¼Œé€šè¿‡Authorizerè¿›è¡Œæˆæƒï¼Œé€šè¿‡SessionManagerè¿›è¡Œä¼šè¯ç®¡ç†ç­‰ã€‚</p>
<p><code>SecurityManageræ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿äº†Authenticator, Authorizer, SessionManagerè¿™ä¸‰ä¸ªæ¥å£ã€‚</code></p>
<h3 id="Authenticator"><a href="#Authenticator" class="headerlink" title="Authenticator"></a>Authenticator</h3><p><code>Authenticatorå³è®¤è¯å™¨</code>ï¼Œå¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œè®¤è¯ï¼ŒAuthenticatoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œshiroæä¾›ModularRealmAuthenticatorå®ç°ç±»ï¼Œé€šè¿‡ModularRealmAuthenticatoråŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³å¤§å¤šæ•°éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¤è¯å™¨ã€‚</p>
<h3 id="Authorizer"><a href="#Authorizer" class="headerlink" title="Authorizer"></a>Authorizer</h3><p><code>Authorizerå³æˆæƒå™¨</code>ï¼Œç”¨æˆ·é€šè¿‡è®¤è¯å™¨è®¤è¯é€šè¿‡ï¼Œåœ¨è®¿é—®åŠŸèƒ½æ—¶éœ€è¦é€šè¿‡æˆæƒå™¨åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æ­¤åŠŸèƒ½çš„æ“ä½œæƒé™ã€‚</p>
<h3 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a>Realm</h3><p><code>Realmå³é¢†åŸŸ</code>ï¼Œç›¸å½“äºdatasourceæ•°æ®æºï¼ŒsecurityManagerè¿›è¡Œå®‰å…¨è®¤è¯éœ€è¦é€šè¿‡Realmè·å–ç”¨æˆ·æƒé™æ•°æ®ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·èº«ä»½æ•°æ®åœ¨æ•°æ®åº“é‚£ä¹ˆrealmå°±éœ€è¦ä»æ•°æ®åº“è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚</p>
<ul>
<li>â€‹    æ³¨æ„ï¼šä¸è¦æŠŠrealmç†è§£æˆåªæ˜¯ä»æ•°æ®æºå–æ•°æ®ï¼Œåœ¨realmä¸­è¿˜æœ‰è®¤è¯æˆæƒæ ¡éªŒçš„ç›¸å…³çš„ä»£ç ã€‚</li>
</ul>
<h3 id="SessionManager"><a href="#SessionManager" class="headerlink" title="SessionManager"></a>SessionManager</h3><p><code>sessionManagerå³ä¼šè¯ç®¡ç†</code>ï¼Œshiroæ¡†æ¶å®šä¹‰äº†ä¸€å¥—ä¼šè¯ç®¡ç†ï¼Œå®ƒä¸ä¾èµ–webå®¹å™¨çš„sessionï¼Œæ‰€ä»¥shiroå¯ä»¥ä½¿ç”¨åœ¨éwebåº”ç”¨ä¸Šï¼Œä¹Ÿå¯ä»¥å°†åˆ†å¸ƒå¼åº”ç”¨çš„ä¼šè¯é›†ä¸­åœ¨ä¸€ç‚¹ç®¡ç†ï¼Œæ­¤ç‰¹æ€§å¯ä½¿å®ƒå®ç°å•ç‚¹ç™»å½•ã€‚</p>
<h3 id="SessionDAO"><a href="#SessionDAO" class="headerlink" title="SessionDAO"></a>SessionDAO</h3><p><code>SessionDAOå³ä¼šè¯dao</code>ï¼Œæ˜¯å¯¹sessionä¼šè¯æ“ä½œçš„ä¸€å¥—æ¥å£ï¼Œæ¯”å¦‚è¦å°†sessionå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡jdbcå°†ä¼šè¯å­˜å‚¨åˆ°æ•°æ®åº“ã€‚</p>
<h3 id="CacheManager"><a href="#CacheManager" class="headerlink" title="CacheManager"></a>CacheManager</h3><p><code>CacheManagerå³ç¼“å­˜ç®¡ç†</code>ï¼Œå°†ç”¨æˆ·æƒé™æ•°æ®å­˜å‚¨åœ¨ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<h3 id="Cryptography"><a href="#Cryptography" class="headerlink" title="Cryptography"></a>Cryptography</h3><p>â€‹    <code>Cryptographyå³å¯†ç ç®¡ç†</code>ï¼Œshiroæä¾›äº†ä¸€å¥—åŠ å¯†/è§£å¯†çš„ç»„ä»¶ï¼Œæ–¹ä¾¿å¼€å‘ã€‚æ¯”å¦‚æä¾›å¸¸ç”¨çš„æ•£åˆ—ã€åŠ /è§£å¯†ç­‰åŠŸèƒ½ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Shiro</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring5(ä¸€)</title>
    <url>/2021/04/22/Spring5%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šåœ¨æˆ‘çœ‹æ¥ ï¼Œ æ‰€æœ‰æ¡†æ¶çš„äº§ç”Ÿéƒ½æ¥è‡ªäºå¯¹ä»£ç å¤ç”¨ç‡ä»¥åŠæé«˜å¼€å‘æ•ˆç‡å’Œå¯æ‹“å±•æ€§ä»¥åŠé«˜æ•ˆæ€§èƒ½ä¸ºè¿½æ±‚çš„ï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œå°±æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ¯•ç«Ÿæ—¶é—´å°±æ˜¯é‡‘é’±~~</p>
</blockquote>
<h1 id="ğŸ‡åˆè¯†Spring"><a href="#ğŸ‡åˆè¯†Spring" class="headerlink" title="ğŸ‡åˆè¯†Spring"></a>ğŸ‡åˆè¯†Spring</h1><p>1ã€Springæ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ , å®¹å™¨  .</p>
<p>2ã€Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ , éä¾µå…¥å¼çš„ .</p>
<p><strong>3ã€æ§åˆ¶åè½¬ IoC  , é¢å‘åˆ‡é¢ Aop</strong></p>
<p>4ã€å¯¹äº‹ç‰©çš„æ”¯æŒ , å¯¹æ¡†æ¶çš„æ”¯æŒ</p>
<p>â€¦â€¦.</p>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<p><strong>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚</strong></p>
<p>Spring æ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œç”± 7 ä¸ªå®šä¹‰è‰¯å¥½çš„æ¨¡å—ç»„æˆã€‚Spring æ¨¡å—æ„å»ºåœ¨æ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šï¼Œæ ¸å¿ƒå®¹å™¨å®šä¹‰äº†åˆ›å»ºã€é…ç½®å’Œç®¡ç† bean çš„æ–¹å¼ .</p>
<p>ç»„æˆ Spring æ¡†æ¶çš„æ¯ä¸ªæ¨¡å—ï¼ˆæˆ–ç»„ä»¶ï¼‰éƒ½å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…ä¸å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—è”åˆå®ç°ã€‚æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒå®¹å™¨</strong>ï¼šæ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨<em>æ§åˆ¶åè½¬</em>ï¼ˆIOCï¼‰ æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</li>
<li><strong>Spring ä¸Šä¸‹æ–‡</strong>ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</li>
<li><strong>Spring AOP</strong>ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½ , é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†ä»»ä½•æ”¯æŒ AOPçš„å¯¹è±¡ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ–ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</li>
<li><strong>Spring DAO</strong>ï¼šJDBC DAO æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘ JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring ORM</strong>ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº† ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ JDOã€Hibernate å’Œ iBatis SQL Mapã€‚æ‰€æœ‰è¿™äº›éƒ½éµä» Spring çš„é€šç”¨äº‹åŠ¡å’Œ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring Web æ¨¡å—</strong>ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼ŒSpring æ¡†æ¶æ”¯æŒä¸ Jakarta Struts çš„é›†æˆã€‚Web æ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚</li>
<li><strong>Spring MVC æ¡†æ¶</strong>ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚</li>
</ul>
<h1 id="ğŸŠæ§åˆ¶åè½¬-ï¼ˆIOCï¼‰"><a href="#ğŸŠæ§åˆ¶åè½¬-ï¼ˆIOCï¼‰" class="headerlink" title="ğŸŠæ§åˆ¶åè½¬ ï¼ˆIOCï¼‰"></a>ğŸŠæ§åˆ¶åè½¬ ï¼ˆIOCï¼‰</h1><p>**ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿåœ¨<code>Java</code> ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ‘ä»¬é€šå¸¸é€šè¿‡ç›´æ¥ <code>new</code> å‡ºç›¸åº”çš„å¯¹è±¡ ï¼Œè¿™éœ€è¦æˆ‘ä»¬ç›´æ¥ç¼–å†™æºä»£ç .è€Œæ§åˆ¶åè½¬å°±æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä»¥åŠåˆ›å»ºä»€ä¹ˆå¯¹è±¡åˆ¤æ–­äº¤ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸éœ€è¦æˆ‘ä»¬æ¥åˆ¤æ–­ï¼Œæˆ‘ä»¬åªéœ€è¦ä»ç¬¬ä¸‰æ–¹å–å‡ºå³å¯ï¼Œè¿™å°±æ˜¯æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œç”¨ <code>OOP</code>ï¼ˆé¢å‘å¯¹è±¡ï¼‰çš„æ€æƒ³æ¥è¯´ï¼Œå°±æ˜¯å°†å®ç°ç±»è¿›ä¸€æ­¥æŠ½è±¡åŒ–ï¼Œä½¿å®ç°ç±»æ›´å…·æœ‰å…¼å®¹æ€§. çœ‹äº†ä»¥ä¸‹çš„ä¾‹å­å†å›è¿‡å¤´çœ‹ï¼Œå°±ä¼šæ˜ç™½äº† **</p>
<p>æ–°å»ºä¸€ä¸ªç©ºç™½çš„mavené¡¹ç›®</p>
<blockquote>
<p>åˆ†æå®ç°</p>
</blockquote>
<p>æˆ‘ä»¬å…ˆç”¨æˆ‘ä»¬åŸæ¥çš„æ–¹å¼å†™ä¸€æ®µä»£ç  .</p>
<p>1ã€å…ˆå†™ä¸€ä¸ªUserDaoæ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å†å»å†™Daoçš„å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ç„¶åå»å†™UserServiceçš„æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€æœ€åå†™Serviceçš„å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   UserService service = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">   service.getUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯æˆ‘ä»¬åŸæ¥çš„æ–¹å¼ , å¼€å§‹å¤§å®¶ä¹Ÿéƒ½æ˜¯è¿™ä¹ˆå»å†™çš„å¯¹å§ . é‚£æˆ‘ä»¬ç°åœ¨ä¿®æ”¹ä¸€ä¸‹ .</p>
<p>æŠŠUserdaoçš„å®ç°ç±»å¢åŠ ä¸€ä¸ª .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoMySqlImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;MySqlè·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç´§æ¥ç€æˆ‘ä»¬è¦å»ä½¿ç”¨MySqlçš„è¯ , æˆ‘ä»¬å°±éœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao = <span class="keyword">new</span> UserDaoMySqlImpl();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å‡è®¾, æˆ‘ä»¬å†å¢åŠ ä¸€ä¸ªUserdaoçš„å®ç°ç±» .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoOracleImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;Oracleè·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨Oracle , åˆéœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç° . å‡è®¾æˆ‘ä»¬çš„è¿™ç§éœ€æ±‚éå¸¸å¤§ , è¿™ç§æ–¹å¼å°±æ ¹æœ¬ä¸é€‚ç”¨äº†, ç”šè‡³åäººç±»å¯¹å§ , æ¯æ¬¡å˜åŠ¨ , éƒ½éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç  . è¿™ç§è®¾è®¡çš„è€¦åˆæ€§å¤ªé«˜äº†, ç‰µä¸€å‘è€ŒåŠ¨å…¨èº« .</p>
<p><strong>é‚£æˆ‘ä»¬å¦‚ä½•å»è§£å†³å‘¢ ?</strong> </p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°ä»–çš„åœ°æ–¹ , ä¸å»å®ç°å®ƒ , è€Œæ˜¯ç•™å‡ºä¸€ä¸ªæ¥å£ , åˆ©ç”¨set , æˆ‘ä»¬å»ä»£ç é‡Œä¿®æ”¹ä¸‹ .</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="comment">// åˆ©ç”¨setå®ç°</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       userDao.getUser();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å»æˆ‘ä»¬çš„æµ‹è¯•ç±»é‡Œ , è¿›è¡Œæµ‹è¯• ;</p>
<p>ä½¿ç”¨ <code>Spring</code> è¿‡åï¼Œä¹Ÿä¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   UserServiceImpl service = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">   service.setUserDao( <span class="keyword">new</span> UserDaoMySqlImpl() );</span><br><span class="line">   service.getUser();</span><br><span class="line">   <span class="comment">//é‚£æˆ‘ä»¬ç°åœ¨åˆæƒ³ç”¨Oracleå»å®ç°å‘¢</span></span><br><span class="line">   service.setUserDao( <span class="keyword">new</span> UserDaoOracleImpl() );</span><br><span class="line">   service.getUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤§å®¶å‘ç°äº†åŒºåˆ«æ²¡æœ‰ ? å¯èƒ½å¾ˆå¤šäººè¯´æ²¡å•¥åŒºåˆ« . ä»–ä»¬å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜åŒ– , å¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¸€æ ·äº† . ä»”ç»†å»æ€è€ƒä¸€ä¸‹ , ä»¥å‰æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç”±ç¨‹åºå»è¿›è¡Œæ§åˆ¶åˆ›å»º , è€Œç°åœ¨æ˜¯ç”±æˆ‘ä»¬è‡ªè¡Œæ§åˆ¶åˆ›å»ºå¯¹è±¡ , æŠŠä¸»åŠ¨æƒäº¤ç»™äº†è°ƒç”¨è€… . ç¨‹åºä¸ç”¨å»ç®¡æ€ä¹ˆåˆ›å»º,æ€ä¹ˆå®ç°äº† . å®ƒåªè´Ÿè´£æä¾›ä¸€ä¸ªæ¥å£ .</p>
<p>è¿™ç§æ€æƒ³ , ä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ , æˆ‘ä»¬ç¨‹åºå‘˜ä¸å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº† , æ›´å¤šçš„å»å…³æ³¨ä¸šåŠ¡çš„å®ç° . è€¦åˆæ€§å¤§å¤§é™ä½ . è¿™ä¹Ÿå°±æ˜¯IOCçš„åŸå‹ !</p>
<h1 id="ğŸSpringä¹‹é…ç½®æ–‡ä»¶"><a href="#ğŸSpringä¹‹é…ç½®æ–‡ä»¶" class="headerlink" title="ğŸSpringä¹‹é…ç½®æ–‡ä»¶"></a>ğŸSpringä¹‹é…ç½®æ–‡ä»¶</h1><p>åˆ›å»ºä¸€ä¸ª <code>maven</code> é¡¹ç›® ï¼Œ å¯¼å…¥ <code>Spring</code>çš„ä¾èµ–åŒ… ï¼Œ è¿™é‡Œé€‰æ‹©å¯¼å…¥ä¸€ä¸ªä¾èµ– <code>Spring</code>çš„åŒ…ï¼Œå› ä¸º <code>Spring</code>çš„ä¾èµ–åŒ…æ¯”è¾ƒå¤šï¼Œè¿™æ ·å¯¼å…¥æ¯”è¾ƒæ–¹ä¾¿,ä¸‹é¢ç»™å‡ºä¾èµ–åæ ‡ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™ä¸€ä¸ªå®ä½“ç±» <code>User</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œè¿ç”¨äº†lombokç®€åŒ–å¼€å‘é¡ºå¸¦ç»™å‡ºç›¸å…³ä¾èµ–</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">		&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;1.18.4&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String , Object&gt; map;</span><br><span class="line">    <span class="keyword">private</span> Product product;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; set;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> Properties properties;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String pname;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™ <code>applicationContext.xml</code> æ–‡æœ¬ä¹Ÿå°±æ˜¯<code>Spring</code>æ–‡ä»¶ ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å‘½åï¼Œåœ¨<code>idea</code>ä¸­éœ€è¦è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š</li>
</ul>
<img src="/2021/04/22/Spring5%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="å›¾ç‰‡">

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--beanå°±æ˜¯javaå¯¹è±¡,ç”±Springåˆ›å»ºå’Œç®¡ç†--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   id æ˜¯beançš„æ ‡è¯†ç¬¦,è¦å”¯ä¸€,å¦‚æœæ²¡æœ‰é…ç½®id,nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">   å¦‚æœé…ç½®id,åˆé…ç½®äº†name,é‚£ä¹ˆnameæ˜¯åˆ«å</span></span><br><span class="line"><span class="comment">   nameå¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å,å¯ä»¥ç”¨é€—å·,åˆ†å·,ç©ºæ ¼éš”å¼€</span></span><br><span class="line"><span class="comment">   å¦‚æœä¸é…ç½®idå’Œname,å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·å–å¯¹è±¡;</span></span><br><span class="line"><span class="comment">   classæ˜¯beançš„å…¨é™å®šå=åŒ…å+ç±»å</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--å¯ä»¥å–åˆ«åï¼Œåœ¨æµ‹è¯•ç¨‹åºä¸­å¯ä»¥é€šè¿‡åˆ«åæ¥è·å–å¯¹è±¡--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--name ä¹Ÿç›¸å½“äºæ˜¯å–åˆ«å å¯ä»¥å–å¤šä¸ª å¯ä»¥ç”¨å¾ˆå¤šç¬¦å·è¿›è¡Œåˆ†éš” å¦‚ç©ºæ ¼ é€—å·  åˆ†å·ç­‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--classç”¨äºè¿æ¥å®ä½“ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--å¯¹å±æ€§è¿›è¡Œèµ‹å€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;éš”å£è€ç‹&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Mapå±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;First&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•1ing&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;Second&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•2ing&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        æ•°ç»„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        List--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>23333<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>66666<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        set--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Product å¯¹å®ä½“ç±»è¿›è¡Œåˆå§‹åŒ–èµ‹å€¼--&gt;</span></span><br><span class="line">        			<span class="comment">&lt;!--refæŒ‡å‘ä¸€ä¸ªbeanï¼ˆå¯¹è±¡ï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;product&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;addr&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--Propertieså±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span>å¼ ä¸‰<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å¹´é¾„&quot;</span>&gt;</span>18<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Product&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¹¦&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¿›è¡Œæµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        User user = (User) context.getBean(<span class="string">&quot;user2&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>è¾“å‡º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">User(</span><br><span class="line">    name=éš”å£è€ç‹, age=<span class="number">18</span>, </span><br><span class="line">    map=&#123;First=æµ‹è¯•1ing, Second=æµ‹è¯•2ing&#125;, </span><br><span class="line">    product=Product(pname=ä¹¦, price=<span class="number">100</span>, num=<span class="number">100</span>), </span><br><span class="line">    list=[<span class="number">23333</span>, <span class="number">66666</span>], </span><br><span class="line">    set=[LOL], </span><br><span class="line">    books=[è¥¿æ¸¸è®°, çº¢æ¥¼æ¢¦],</span><br><span class="line">    properties=&#123;å§“å=å¼ ä¸‰, å¹´é¾„=<span class="number">18</span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>è‹¥æœå«æœ‰å¤šä¸ªé…ç½®æ–‡ä»¶å¯ä»¥ä½¿ç”¨<code>importå¯¼å…¥</code>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;è·¯å¾„&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring5</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(ä¸ƒ):è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£</title>
    <url>/2021/06/23/SpringBoot%EF%BC%88%E4%B8%83%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†"><a href="#ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†" class="headerlink" title="ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†"></a>ğŸš—åŠ¨æ€æ³¨å…¥å®ç°åŸç†</h1><p><code>SpringBoot</code>ä¸­çš„ä¸€å¤§ç‰¹è‰²ä¸ºè‡ªåŠ¨é…ç½®(åŒ…æ‹¬åŠ¨æ€é…ç½®)ï¼Œå…¶åº•å±‚å®ç°åŸç†ä¾æ‰˜äº<code>springFramework</code>ä¸­çš„<code>condition</code>æ¥å£ç±»ï¼Œåœ¨<code>SpringBoot</code>çš„æºç ä¸­ï¼Œéšå¤„å¯è§ç±»ä¼¼äº<code>@ConditionalOnBean</code>è¿™æ ·ç±»ä¼¼çš„æ³¨è§£ï¼Œå…¶ä¾èµ–çš„æ¡ä»¶ç±»ä¸º<code>OnBeanCondition</code>.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨åœ¨ç±»ä¸Š å’Œ æ–¹æ³•ä¸Š</span></span><br><span class="line"><span class="meta">@Target(&#123; ElementType.TYPE, ElementType.METHOD &#125;)</span></span><br><span class="line">/è¿è¡Œæ—¶æœ‰æ•ˆ</span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">//ä¸javadocæ–‡æ¡£æœ‰å…³</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">//å½“OnBeanConditionåˆ¤æ–­æœ‰æ•ˆ(è¿”å›true)æ—¶å¯ç”¨</span></span><br><span class="line"><span class="meta">@Conditional(OnBeanCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ConditionalOnBean &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç±»ä¼¼çš„è¿˜æœ‰ä»¥ä¸‹æ³¨è§£:</p>
<table>
<thead>
<tr>
<th align="center">åºå·</th>
<th align="center">æ³¨è§£</th>
<th align="center">æ¡ä»¶ç±»</th>
<th align="center">è¿”å›trueçš„æ¡ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">@ConditionalOnBean</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æœ‰æŒ‡å®šbeançš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">@ConditionalOnMissingBean</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æ²¡æœ‰æŒ‡å®šbeançš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">@ConditionalOnSingleCandidate</td>
<td align="center">OnBeanCondition</td>
<td align="center">å®¹å™¨ä¸­æŒ‡å®šçš„beanåªæœ‰ä¸€ä¸ªæ—¶ä¸ºtrue</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">@ConditionalOnClass</td>
<td align="center">OnClassCondition</td>
<td align="center">å½“ç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šç±»çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">@ConditionalOnMissingClass</td>
<td align="center">OnClassCondition</td>
<td align="center">å½“ç±»è·¯å¾„ä¸‹æ²¡æœ‰æŒ‡å®šç±»çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">@ConditionalOnProperty</td>
<td align="center">OnPropertyCondition</td>
<td align="center">å½“æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">@ConditionalOnResource</td>
<td align="center">OnResourceCondition</td>
<td align="center">ç±»è·¯å¾„æœ‰æŒ‡å®šçš„å€¼çš„æ—¶å€™ä¸ºtrue</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">@ConditionalOnExpression</td>
<td align="center">OnExpressionCondition</td>
<td align="center">åŸºäºspringELè¡¨è¾¾å¼åˆ¤æ–­æ˜¯å¦ä¸ºtrue</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">@ConditionalOnJava</td>
<td align="center">OnJavaCondition</td>
<td align="center">åŸºäºJavaç‰ˆæœ¬è¿›è¡Œåˆ¤æ–­ï¼Œæ»¡è¶³ç‰ˆæœ¬è¦æ±‚ä¸ºtrue</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">@ConditionalOnNotWebApplication</td>
<td align="center">OnWebApplicationCondition</td>
<td align="center">å½“é¡¹ç›®ä¸æ˜¯webé¡¹ç›®çš„æ¡ä»¶ä¸‹ä¸ºtrue</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">@ConditionalOnWebApplication</td>
<td align="center">OnWebApplicationCondition</td>
<td align="center">å½“é¡¹ç›®æ—¶webé¡¹ç›®çš„æ¡ä»¶ä¸‹ä¸ºtrue</td>
</tr>
</tbody></table>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨<code>application.properties</code>ä¸­è¿›è¡Œä¸€äº›é…ç½®ï¼Œé‚£ä¹ˆè¿™æ˜¯å¦‚ä½•è¿›è¡ŒåŠ¨æ€è¯»å–é…ç½®çš„å‘¢ï¼Ÿ</p>
<p>é‚£å°±è¦ä½¿ç”¨åˆ°<code>@ConditionalOnProperty ã€@ConfigurationProperties</code> ç­‰ï¼Œåœ¨å¯åŠ¨<code>SpringBoot</code>çš„æ—¶å€™ä¼šå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œæ‰«æï¼Œå¦‚æœæ‰«æåˆ°å¯¹åº”çš„é…ç½®ï¼Œåˆ™å¯¹è¿™äº›é…ç½®è¿›è¡ŒåŠ è½½ï¼Œå½“ç„¶ï¼Œè¿™äº›é…ç½®ä¹Ÿæœ‰éƒ¨åˆ†ä¹Ÿæœ‰éœ€è¦å­˜åœ¨é»˜è®¤å€¼ï¼Œå“ªæ€•ä¸è¿›è¡Œæ˜¾ç¤ºçš„é…ç½®ï¼Œä¹Ÿå¯ä»¥è¿›è¡ŒåŠ è½½é…ç½®.</p>
<h1 id="ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»"><a href="#ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»" class="headerlink" title="ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»"></a>ğŸè‡ªå®šä¹‰Conditonæ¡ä»¶ç±»</h1><p>ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰æ¡ä»¶ç±»ï¼Ÿä¸€æ¥ï¼Œå¯ä»¥åŠ æ·±å¯¹<code>SpringBoot</code>è‡ªåŠ¨é…ç½®åŸç†.äºŒæ¥ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡éœ€æ±‚ä¸­è‡ªå·±å®šåˆ¶åŒ–é…ç½®ï¼ŒåŠ å¿«å¼€å‘æ•ˆç‡.æ€»ä¹‹ï¼Œä¸ç®¡æ€ä¹ˆæ ·ï¼Œå°è¯•è‡ªå·±å®ç°ä¸€éå…¶å®ä¹ŸæŒºæœ‰æ„æ€çš„hhh.</p>
<ul>
<li>è‡ªå®šä¹‰æ¥å£ç±»(æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è¿›è¡Œç±»æŠ½è±¡ï¼Œä¾¿äºåˆ¤æ–­)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MessagePrint</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMessage</span> <span class="keyword">implements</span> <span class="title">MessagePrint</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶å­˜åœ¨ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YourMessage</span> <span class="keyword">implements</span> <span class="title">MessagePrint</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>conditionæ¡ä»¶ç±»å®ç°conditionæ¥å£(ç”¨äºè¿›è¡Œæ¡ä»¶åˆ¤æ–­)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext conditionContext, </span></span></span><br><span class="line"><span class="function"><span class="params">                           AnnotatedTypeMetadata annotatedTypeMetadata)</span> </span>&#123;</span><br><span class="line">        		<span class="comment">//ä¸Šä¸‹æ–‡.èµ„æºåŠ è½½å™¨.è·å–èµ„æº(&quot;èµ„æºå&quot;).æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">return</span> conditionContext.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YourCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext conditionContext,</span></span></span><br><span class="line"><span class="function"><span class="params">                           AnnotatedTypeMetadata annotatedTypeMetadata)</span> </span>&#123;</span><br><span class="line">        		<span class="comment">//ä¸Šä¸‹æ–‡.èµ„æºåŠ è½½å™¨.è·å–èµ„æº(&quot;èµ„æºå&quot;).æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">return</span> !conditionContext.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è‡ªåŠ¨æ³¨å…¥é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®ç±»ï¼Œè¡¨ç¤ºæ³¨å…¥iocå®¹å™¨ä¸­ï¼Œå­˜åœ¨äºé…ç½®æ–‡ä»¶çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//å½“MyCondition åˆ¤æ–­ä¸º true çš„æ—¶å€™ å‘å®¹å™¨ä¸­æ³¨å…¥ MyMessage</span></span><br><span class="line">    <span class="meta">@Conditional(MyCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MessagePrint <span class="title">myMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//å½“YourCondition åˆ¤æ–­ä¸º true çš„æ—¶å€™ å‘å®¹å™¨ä¸­æ³¨å…¥ YourMessage</span></span><br><span class="line">    <span class="meta">@Conditional(YourCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MessagePrint <span class="title">yourMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> YourMessage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//è·å–æ³¨è§£é…ç½®ä¸Šä¸‹æ–‡</span></span><br><span class="line">      AnnotationConfigApplicationContext context;</span><br><span class="line">      <span class="comment">//è·å–æ¡ä»¶é…ç½®ç±»</span></span><br><span class="line">      context = <span class="keyword">new</span> AnnotationConfigApplicationContext(ConditionConfig.class);</span><br><span class="line">      <span class="comment">//è·å–æ¥å£ç±»(è¿™å°±æ˜¯å†™æ¥å£çš„å¥½å¤„,ä¸éœ€è¦çŸ¥é“è‡ªå®šä¹‰ç±»åæ˜¯ä»€ä¹ˆ,åªéœ€è¦è¯†åˆ«çˆ¶ç±»)</span></span><br><span class="line">      MessagePrint bean = context.getBean(MessagePrint.class);</span><br><span class="line">      System.out.println(bean.showMessage());</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(ä¸‰):æ•°æ®åº“è¿æ¥æ± </title>
    <url>/2021/05/08/SpringBoot%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ"><a href="#ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ"></a>ğŸ¡æ•°æ®åº“è¿æ¥æ± ç›¸å…³æ¦‚å¿µ</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ± ï¼Ÿ</strong></p>
<p>â€‹        æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç”¨äºç®¡ç†å¯¹æ•°æ®åº“çš„è¿æ¥ï¼Œç”¨äºå­˜æ”¾å’Œç®¡ç†è¿™äº›è¿æ¥ï¼Œå½“ä½¿ç”¨å®Œè¿™äº›è¿æ¥ä¹‹åä¼šå°†è¿æ¥è¿˜å›æ± ä¸­è€Œä¸æ˜¯ç›´æ¥å…³é—­æ‰ï¼Œå¯ä»¥ç­‰å¾…ä¸‹æ¬¡è¿›è¡Œè¿æ¥å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
</li>
<li><p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“è¿æ¥æ± ?</strong></p>
<p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œä¼šå­˜åœ¨å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå¦‚æœæ¯æ¬¡æ“ä½œéƒ½è¦è¿›è¡Œä¸€æ¬¡æ•°æ®åº“è¿æ¥ï¼Œé‚£ä¹ˆæ¶ˆè€—çš„å†…å­˜å’Œèµ„æºååˆ†å·¨å¤§ï¼Œå†åŠ ä¸Šé«˜å¹¶å‘é‡ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œé€ æˆæ— æ³•ä¼°è®¡çš„æŸå¤±.æœ‰äº†æ•°æ®åº“è¿æ¥æ± ä¹‹åï¼Œå¯ä»¥åŠ¨æ€çš„åˆ†é…å·²ç»æœ‰çš„è¿æ¥ï¼Œå¯ä»¥åŠ¨æ€æ§åˆ¶è¿æ¥æ•°é‡ï¼Œåˆç†çš„åˆ†é…è¿æ¥ï¼Œå¤§å¤§æé«˜äº†ä½¿ç”¨ç‡å’Œè¿è¡Œæ•ˆç‡.</p>
</li>
<li><p><strong>æ•°æ®åº“è¿æ¥æ± çš„åº•å±‚åŸç†ï¼Ÿ</strong></p>
<p>â€‹        æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç”¨ <code>Java</code> ä¸­çš„é›†åˆå¯¹è±¡æ¥å®ç° ï¼Œ æ¯”å¦‚ <code>LinkedList</code> ï¼Œåˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ•°ä¸º10ä¸ªï¼Œä¾æ¬¡åŠ å…¥ <code>LinkedList</code>  å½“éœ€è¦æ‰§è¡Œ <code>SQL</code> è¯­å¥çš„æ—¶å€™ï¼Œè¯·æ±‚ä»é›†åˆä¸­è·å¾—è¿æ¥ï¼Œå…ˆè¦åˆ¤æ–­ç›®å‰æ˜¯å¦æœ‰é—²ç½®çš„è¿æ¥ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ç»™è¯·æ±‚å¯¹è±¡ï¼Œæœ¬è´¨å°±æ˜¯å°†è¿æ¥ä»é›†åˆä¸­ç§»é™¤ï¼Œä½¿ç”¨å®Œæ¯•åé‡æ–°åŠ å…¥é›†åˆç­‰å¾…è¯·æ±‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„é—²ç½®çŠ¶æ€ï¼Œå¦‚æœè¯·æ±‚æ—¶æ°å¥½æ²¡æœ‰é—²ç½®çš„è¿æ¥ï¼Œåˆ™è¿›å…¥ç­‰å¾…ï¼Œè¶…è¿‡ç­‰å¾…æ—¶é—´åï¼ŒæŠ›å‡ºå¼‚å¸¸ç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚.</p>
</li>
</ul>
<h1 id="ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± "><a href="#ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± "></a>ğŸ¥½å¸¸è§æ•°æ®åº“è¿æ¥æ± </h1><p>å¸¸ç”¨çš„æ•°æ®åº“è¿æ¥æ± æœ‰å¦‚ä¸‹å››ç§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">DBCP</th>
<th align="center">Tomcatå†…éƒ¨é›†æˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>C3P0</strong></td>
<td align="center"><strong>æ€§èƒ½è¾ƒå·®æ¶æ„å¤æ‚</strong></td>
</tr>
<tr>
<td align="center"><strong>Druid</strong></td>
<td align="center"><strong>SQLç›‘æ§é»‘åå•æ‹¦æˆªæ€§èƒ½å“è¶Š</strong></td>
</tr>
<tr>
<td align="center"><strong>HikariCP</strong></td>
<td align="center"><strong>æ€§èƒ½æœ€å¼ºç¨³å®šæ€§è¾ƒå¥½screwå†…ç½®ä½¿ç”¨</strong></td>
</tr>
</tbody></table>
<p>â€‹        <code>SpringBoot</code>é»˜è®¤å°†<code>HikariCP</code>ä½œä¸ºé»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± .<code>Java</code> å¸¸ç”¨äºæ„å»ºå¤§å‹çš„ <code>Web</code> é¡¹ç›®ï¼Œåœ¨å­˜åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¿…ç„¶è¦æŒ‘é€‰ä¸€ä¸ªæ€§èƒ½æå¼ºçš„æ•°æ®åº“è¿æ¥æ± è€Œ<code>HikariCP</code>å½“ä¹‹æ— æ„§ä¸ºæ€§èƒ½ä¹‹ç‹.</p>
<h1 id="âœ¨SpringBootä¸­HikariCPé…ç½®"><a href="#âœ¨SpringBootä¸­HikariCPé…ç½®" class="headerlink" title="âœ¨SpringBootä¸­HikariCPé…ç½®"></a>âœ¨SpringBootä¸­HikariCPé…ç½®</h1><p>1.<code>autoCommit</code><br>        è‡ªåŠ¨æäº¤ä»æ± ä¸­è¿”å›çš„è¿æ¥ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚</p>
<p>2.<code>connectionTimeout</code><br>        ç­‰å¾…æ¥è‡ªæ± çš„è¿æ¥çš„æœ€å¤§æ¯«ç§’æ•°ï¼Œé»˜è®¤ä¸º30000ï¼Œå¦‚æœå°äº250æ¯«ç§’ï¼Œåˆ™è¢«é‡ç½®å›30ç§’ã€‚</p>
<p>3.<code>idleTimeout</code><br>        è¿æ¥å…è®¸åœ¨æ± ä¸­é—²ç½®çš„æœ€é•¿æ—¶é—´ï¼Œé»˜è®¤ä¸º600000ï¼Œå³10åˆ†é’Ÿã€‚å¦‚æœ<code>idleTimeout</code>+1ç§’&gt;<code>maxLifetime</code> ä¸” <code>maxLifetime</code>&gt;0ï¼Œåˆ™ä¼šè¢«é‡ç½®ä¸º0ï¼ˆä»£è¡¨æ°¸è¿œä¸ä¼šé€€å‡ºï¼‰ï¼›å¦‚æœ<code>idleTimeout</code>!=0ä¸”å°äº10ç§’ï¼Œåˆ™ä¼šè¢«é‡ç½®ä¸º10ç§’ã€‚åªæœ‰å½“<code>minimumIdle</code>å°äº<code>maximumPoolSize</code>æ—¶ï¼Œè¿™ä¸ªå‚æ•°æ‰ç”Ÿæ•ˆï¼Œå½“ç©ºé—²è¿æ¥æ•°è¶…è¿‡<code>minimumIdle</code>ï¼Œè€Œä¸”ç©ºé—²æ—¶é—´è¶…è¿‡<code>idleTimeout</code>ï¼Œåˆ™ä¼šè¢«ç§»é™¤ã€‚</p>
<p>4.<code>maxLifetime</code><br>        æ± ä¸­è¿æ¥æœ€é•¿ç”Ÿå‘½å‘¨æœŸã€‚é»˜è®¤ä¸º1800000ï¼Œå¦‚æœä¸ç­‰äº0ä¸”å°äº30ç§’åˆ™ä¼šè¢«é‡ç½®å›30åˆ†é’Ÿã€‚</p>
<p>5.<code>minimumIdle</code><br>        æ§åˆ¶è¿æ¥æ± ç©ºé—²è¿æ¥çš„æœ€å°æ•°é‡ï¼Œå½“è¿æ¥æ± ç©ºé—²è¿æ¥å°‘äº<code>minimumIdle</code>ï¼Œè€Œä¸”æ€»å…±è¿æ¥æ•°ä¸å¤§äº<code>maximumPoolSize</code>æ—¶ï¼Œ<code>HikariCP</code>ä¼šå°½åŠ›è¡¥å……æ–°çš„è¿æ¥ã€‚ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œä¸å»ºè®®è®¾ç½®æ­¤å€¼ï¼Œè€Œæ˜¯è®©<code>HikariCP</code>æŠŠè¿æ¥æ± å½“åšå›ºå®šå¤§å°çš„å¤„ç†ï¼Œé»˜è®¤<code>minimumIdle</code>ä¸<code>maximumPoolSize</code>ä¸€æ ·ã€‚å½“<code>minIdle</code>&lt;0æˆ–è€…<code>minIdle</code>&gt;<code>maxPoolSize</code>,åˆ™è¢«é‡ç½®ä¸º<code>maxPoolSize</code>ï¼Œè¯¥å€¼é»˜è®¤ä¸º10ã€‚</p>
<p>6.<code>maximumPoolSize</code><br>        æ± ä¸­æœ€å¤§è¿æ¥æ•°ï¼ŒåŒ…æ‹¬é—²ç½®å’Œä½¿ç”¨ä¸­çš„è¿æ¥ã€‚é»˜è®¤ä¸º10ã€‚å¦‚æœ<code>maxPoolSize</code>å°äº1ï¼Œåˆ™ä¼šè¢«é‡ç½®ã€‚å½“<code>minIdle</code>&lt;=0è¢«é‡ç½®ä¸º<code>DEFAULT_POOL_SIZE</code>åˆ™ä¸º10;å¦‚æœ<code>minIdle</code>&gt;0åˆ™é‡ç½®ä¸º<code>minIdle</code>çš„å€¼ã€‚</p>
<p>7.<code>poolName</code><br>è¿æ¥æ± çš„ç”¨æˆ·å®šä¹‰åç§°ï¼Œä¸»è¦å‡ºç°åœ¨æ—¥å¿—è®°å½•å’ŒJMXç®¡ç†æ§åˆ¶å°ä¸­ä»¥è¯†åˆ«æ± å’Œæ± é…ç½®ã€‚é»˜è®¤ä¸º<code>HikariPool-1</code>ã€‚</p>
<p>8.<code>readOnly</code><br>ä»æ± ä¸­è·å–çš„è¿æ¥æ˜¯å¦é»˜è®¤å¤„äºåªè¯»æ¨¡å¼ã€‚é»˜è®¤ä¸º<code>false</code>ã€‚</p>
<p>9.<code>connection-test-query</code><br>å¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºæ”¯æŒ<code>JDBC4</code>ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ä¸è¦è®¾ç½®æ­¤å±æ€§ã€‚è¿™æ˜¯é’ˆå¯¹ä¸æ”¯æŒ<code>JDBC4</code>çš„â€œä¼ ç»Ÿâ€é©±åŠ¨ç¨‹åº<code>Connection.isValid() API</code>ã€‚è¿™æ˜¯åœ¨è¿æ¥ä»æ± ä¸­è·å¾—è¿æ¥ä»¥ç¡®è®¤ä¸æ•°æ®åº“çš„è¿æ¥ä»ç„¶å­˜åœ¨ä¹‹å‰å°†è¦æ‰§è¡Œçš„æŸ¥è¯¢ã€‚å†ä¸€æ¬¡ï¼Œå°è¯•è¿è¡Œæ²¡æœ‰æ­¤å±æ€§çš„æ± ï¼Œå¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºä¸ç¬¦åˆ<code>JDBC4</code>çš„è¦æ±‚ï¼Œ<code>HikariCP</code>å°†è®°å½•ä¸€ä¸ªé”™è¯¯ä»¥å‘ŠçŸ¥æ‚¨ã€‚ é»˜è®¤å€¼ï¼šæ— </p>
<h1 id="ğŸŠSpringBootä¸­Druidé…ç½®"><a href="#ğŸŠSpringBootä¸­Druidé…ç½®" class="headerlink" title="ğŸŠSpringBootä¸­Druidé…ç½®"></a>ğŸŠSpringBootä¸­Druidé…ç½®</h1><p>1.çº¯é…ç½®æ–‡ä»¶é…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># æ•°æ®æºé…ç½®</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment"># è¿æ¥æ± é…ç½®</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="comment"># åˆå§‹åŒ–å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ¯«ç§’</span></span><br><span class="line">      <span class="attr">time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜æ—¶é—´</span></span><br><span class="line">      <span class="attr">min-evictable-idle-time-millis:</span> <span class="number">300000</span></span><br><span class="line">      <span class="attr">validation-query:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">sys_user</span></span><br><span class="line">      <span class="attr">test-while-idle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-borrow:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># æ‰“å¼€ PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿æ¥ä¸Š PSCache çš„å¤§å°</span></span><br><span class="line">      <span class="attr">pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„ Filterï¼Œå»æ‰åç›‘æ§ç•Œé¢ SQL æ— æ³•ç»Ÿè®¡ï¼Œwall ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">      <span class="comment"># é€šè¿‡ connection-properties å±æ€§æ‰“å¼€ mergeSql åŠŸèƒ½ï¼›æ…¢ SQL è®°å½•</span></span><br><span class="line">      <span class="attr">connection-properties:</span> <span class="string">druid.stat.mergeSql\=true;druid.stat.slowSqlMillis\=5000</span></span><br><span class="line">      <span class="comment"># é…ç½® DruidStatFilter</span></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">.js,*.gif,*.jpg,*.bmp,*.png,*.css,*.ico,/druid/*</span></span><br><span class="line">      <span class="comment"># é…ç½® DruidStatViewServlet</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="comment"># IP ç™½åå•ï¼Œæ²¡æœ‰é…ç½®æˆ–è€…ä¸ºç©ºï¼Œåˆ™å…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        <span class="attr">allow:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">        <span class="comment"># IP é»‘åå•ï¼Œè‹¥ç™½åå•ä¹Ÿå­˜åœ¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨</span></span><br><span class="line">        <span class="attr">deny:</span> <span class="number">192.168</span><span class="number">.31</span><span class="number">.253</span></span><br><span class="line">        <span class="comment"># ç¦ç”¨ HTML ä¸­ Reset All æŒ‰é’®</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment"># ç™»å½•ç”¨æˆ·å/å¯†ç </span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="number">123</span></span><br></pre></td></tr></table></figure>



<p>2.é…ç½®ç±»ç‰ˆæœ¬ï¼š</p>
<p>â€‹    é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="comment"># æ•°æ®æºçš„å…¶ä»–é…ç½®</span></span><br><span class="line">        <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">        <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">        <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">        <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">        <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„ filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢ sql æ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">        <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">        <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">        <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>

<p>â€‹    é…ç½®ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.StatViewServlet;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.WebStatFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰å‰ç¼€ä¸ºspring.datasourceä¸‹çš„é…ç½®é¡¹éƒ½åŠ è½½DataSourceä¸­</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druidDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean&lt;Servlet&gt; <span class="title">druidServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿›è¡Œ druid ç›‘æ§çš„é…ç½®å¤„ç†</span></span><br><span class="line">        ServletRegistrationBean&lt;Servlet&gt; srb = <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;(<span class="keyword">new</span> StatViewServlet(), <span class="string">&quot;/druid/**&quot;</span>);</span><br><span class="line">        <span class="comment">// ç™½åå•</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;allow&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="comment">// é»‘åå•</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;deny&quot;</span>, <span class="string">&quot;192.168.31.253&quot;</span>);</span><br><span class="line">        <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;loginUsername&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯†ç </span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;loginPassword&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">// æ˜¯å¦å¯ä»¥é‡ç½®æ•°æ®æº</span></span><br><span class="line">        srb.addInitParameter(<span class="string">&quot;resetEnable&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> srb;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean&lt;Filter&gt; <span class="title">filterRegistrationBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean&lt;Filter&gt; frb = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;();</span><br><span class="line">        frb.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚è¿›è¡Œç›‘æ§å¤„ç†</span></span><br><span class="line">        frb.addUrlPatterns(<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">        <span class="comment">// æ’é™¤åå•</span></span><br><span class="line">        frb.addInitParameter(<span class="string">&quot;exclusions&quot;</span>, <span class="string">&quot;*.js,*.gif,*.jpg,*.css,/druid/*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> frb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨<code>SpringBoot</code>åå¯åœ¨ <code> http://localhost:8080/druid/login.html</code> ä¸­æŸ¥çœ‹ç›‘æ§ä¿¡æ¯.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootï¼ˆä¸€ï¼‰:Hello World</title>
    <url>/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ"><a href="#ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ" class="headerlink" title="ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ"></a>ğŸ‰SpringBootä¸ºå¿«é€Ÿå¼€å‘ä¸ºç”Ÿ</h1><blockquote>
<p>å‰è¨€ï¼šåœ¨å­¦å®Œ Spring + SpringMVC + Mybatis ä¹‹åè¿›è¡Œäº† SSMæ•´åˆé¡¹ç›®çš„æ­å»ºï¼Œæ­å»ºé¡¹ç›®æœ€èŠ±è´¹æ—¶é—´çš„å…¶å®æ˜¯åœ¨å„ç§çš„é…ç½®æ–‡ä»¶ä¸Šï¼Œæ¯”å¦‚mybatis-config.xml å’Œ Springä¸­çš„applicationContext.xml ä»¥åŠ SpringMVCä¸­ Web.xml éƒ½æœ‰å›ºå®šçš„æ–‡ä»¶å¤´ç­‰ç­‰å†…å®¹ï¼Œæ¯æ¬¡å†™éƒ½è¿˜è¦å»åˆ«å¤„å¤åˆ¶ç²˜è´´ï¼Œéš¾æã€‚å…‰æ˜¯å»ºä¸ªæ–‡ä»¶ä¹‹åçš„å¤åˆ¶ç²˜è´´å°±å·²ç»è®©æˆ‘å¤´å¤§äº†ï¼Œæœ€éš¾æçš„è¿˜æ˜¯Springä¸­æ–‡ä»¶é…ç½®æ–‡ä»¶ä¸­ä¸€äº›å°ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šSqlsessionFactory ä»¥åŠ dao å±‚è‡ªåŠ¨æ¥å£æ‰«æå™¨ï¼Œå®Œå…¨å¯ä»¥è¯´æ˜¯å›ºå®šå†™æ³•ï¼ŒSpringMVCçš„é…ç½®ä¸­éœ€è¦é…ç½®è§†å›¾è§£æå™¨ï¼Œä»¥åŠäº‹ç‰©å¤„ç†å™¨ï¼Œweb.xmlä¸­éœ€è¦é…ç½®è¯·æ±‚è½¬å‘å™¨å’Œèµ„æºè¿‡æ»¤ï¼Œé…ç½®è¿‡ç¨‹å‡ ä¹å®Œå…¨é¢å‘å¤åˆ¶ç²˜è´´ï¼Œç¹çä¸”å†—æ‚ï¼Œä¹Ÿéå¸¸å®¹æ˜“å‡ºé”™ï¼Œæˆ‘æ•´åˆçš„SSMçš„é¡¹ç›®è‡³ä»Šæ²¡æœ‰è·‘èµ·æ¥ï¼ŒDebugäº†ä¸€ä¸ªå¤šæ˜ŸæœŸæ— æœï¼Œä»Giteeä¸Šæ‰’ä¸‹æ¥åˆ«äººçš„é¡¹ç›®è·‘ï¼Œèƒ½è·‘ï¼Œæˆ‘çš„å°±æ˜¯è·‘ä¸èµ·æ¥ï¼Œé‚£å‡ å¤©æˆ‘çœŸæ˜¯åšæ¢¦éƒ½åœ¨æƒ³é…ç½®æ–‡ä»¶å“ªé‡Œå‡ºé”™äº†QAQ</p>
</blockquote>
<p>æ¥ä¸‹ï¼Œè¿›å…¥æ­£é¢˜ï¼š</p>
<p>â€‹        SpringBootçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒæŠŠé…ç½®ç®€åŒ–åˆ°å‡ ä¹æ²¡æœ‰ï¼Œå°±è¿Tomcatéƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å»é…ç½®äº†ï¼Œä¸å¾—ä¸è¯´ï¼ŒSpringBootæ°¸è¿œæ»´ç¥.æ¥ä¸‹æ¥æˆ‘å°†æ¼”ç¤ºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpringBooté¡¹ç›®åˆ°å¯åŠ¨çš„å…¨è¿‡ç¨‹.</p>
<p><strong>åœ¨æ­¤ä¹‹å‰ï¼Œä»‹ç»ä¸€ä¸‹SpringBootçš„ç›¸å…³ç‰¹ç‚¹ï¼š</strong></p>
<p>   1.<strong>åˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ç¨‹åº</strong></p>
<ol start="2">
<li><p><strong>åµŒå…¥çš„Tomcatï¼Œæ— éœ€éƒ¨ç½²WARæ–‡ä»¶</strong></p>
</li>
<li><p><strong>ç®€åŒ–Mavené…ç½®</strong></p>
</li>
<li><p><strong>è‡ªåŠ¨é…ç½®Spring</strong></p>
</li>
<li><p><strong>æä¾›ç”Ÿäº§å°±ç»ªå‹åŠŸèƒ½ï¼Œå¦‚æŒ‡æ ‡ï¼Œå¥åº·æ£€æŸ¥å’Œå¤–éƒ¨é…ç½®</strong></p>
</li>
<li><p>**ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆå¹¶ä¸”å¯¹XMLä¹Ÿæ²¡æœ‰é…ç½®è¦æ±‚ **</p>
</li>
</ol>
<hr>
<p>æ¥ä¸‹æ¥ä½“éªŒä¸€ä¸‹å’¯ï¼š</p>
<ul>
<li>é€šè¿‡IDEAåˆ›å»ºé¡¹ç›®</li>
</ul>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="creat">



<p>ç‚¹å‡»**<code>Next</code>**ï¼Œä¸‹ä¸€æ­¥</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="create">



<p>ç‚¹å‡» <strong><code>Next</code></strong> ï¼Œä¸‹ä¸€æ­¥</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="creat">





<p>ç‚¹å‡» <strong><code>Next</code></strong> ï¼Œä¸‹ä¸€æ­¥ï¼Œåé¢å°±æ˜¯å¡«å†™é¡¹ç›®åç§°ï¼Œè¿™é‡Œå°±ç•¥è¿‡äº†ï¼Œå¿«è¿›åˆ°åˆ›å»ºå</p>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="create">



<ul>
<li>æ¥ä¸‹æ¥ç¼–å†™ <code>Controller</code> å±‚ï¼Œæ³¨æ„ï¼Œè¦åœ¨DemoApplication.javaçš„åŒç›®å½•ä¸‹åˆ›å»ºåŒ…ä¸‹çš„javaæ–‡ä»¶æˆ–è€…javaæ–‡ä»¶æ‰èƒ½è¢«æ‰«æåˆ°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºä¸ä¼šè·³è½¬JSPã€HTML è€Œæ˜¯ç›´æ¥å°†è¿”å›çš„å†…å®¹å†™å…¥ Httpå“åº”åŒ…ä¸­çš„å“åº”ä½“ä¸­,ç›´æ¥å°†å†…å®¹å‘ˆç°åœ¨é¡µé¢ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="comment">//@Controller</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloSpringBoot</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨äºå»ºç«‹è¯·æ±‚URLå’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå°†è¯¥æ–¹æ³•æ˜ å°„åˆ°è¿™ä¸ªurlè·¯å¾„ä¸Š</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello SpringBoot !&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥å¯åŠ¨é¡¹ç›®äº†ï¼ŒSpringBootä¸ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¾“å…¥URL.</p>
<p>æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8080/hello</code></p>
</li>
</ul>
<img src="/2021/05/05/SpringBoot%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="create">



<p>ä¼šå‘ç°ï¼Œä»æ¥åˆ°å°¾æˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™éœ€è¦è¿›è¡Œé…ç½®ï¼Œåˆ›å»ºå¥½ååªéœ€è¦ç¼–å†™ä¸šåŠ¡é€»è¾‘å³å¯è¿è¡Œ.</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(äºŒ):æ•´åˆMybatis</title>
    <url>/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‰SpringBoot-Mybatisæ•´åˆ"><a href="#ğŸ‰SpringBoot-Mybatisæ•´åˆ" class="headerlink" title="ğŸ‰SpringBoot-Mybatisæ•´åˆ"></a>ğŸ‰SpringBoot-Mybatisæ•´åˆ</h1><blockquote>
<p>å‰è¨€ï¼šç§‰æŒç€å­¦æŠ€æœ¯å…ˆå­¦ä¼šä½¿ç”¨çš„å†æ·±å…¥å…¶åº•å±‚åŸç†çš„ç†å¿µï¼Œæ¥ç€ä¸Šä¸€ç¯‡æ–‡ç« çš„åˆä½“éªŒï¼Œæƒ³å¿…å·²ç»èƒ½å¤Ÿä½“ä¼šSpringBootçš„å¼ºå¤§äº†ï¼Œæ¥ä¸‹æ¥å°†æ¥ç€ç»§ç»­ä½“éªŒäº†.</p>
</blockquote>
<p>â€‹        å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>SpringBoot</code> çš„å¼ºå¤§ä¹Ÿåœ¨äºå¯ä»¥è·Ÿå„ç§æ¡†æ¶æˆ–è€…æ’ä»¶æ•´åˆï¼Œååˆ†æ–¹ä¾¿ï¼Œå¤§å¤šåªéœ€è¦åœ¨ <code>pom.xml</code> ä¸­å¼•å…¥åæ ‡å³å¯.å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ˜¯å› ä¸º <code>Java</code> çš„ç”Ÿæ€å¤ªä¸°å¯Œäº†ï¼Œä»€ä¹ˆæ ·çš„å·¥å…·éƒ½æœ‰ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œ<code>Java</code> ç¨‹åºå‘˜æˆé•¿ä¸å®¹æ˜“å•Šï¼Œé“é˜»ä¸”é•¿.</p>
<p>æ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜ï¼š</p>
<ul>
<li>åˆ›å»ºé¡¹ç›®ï¼Œç›´æ¥å¿«è¿›åˆ°å¯¹åˆ›å»ºåœºæ™¯çš„é€‰æ‹©</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="create">



<ul>
<li><p>åˆ›å»ºå®Œæ¯•åï¼Œä¸å¦¨æ¥çœ‹ä¸€ä¸‹ <code>pom.xml</code> ä¸­å¢åŠ äº†å“ªé‡Œä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--JDBC--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--Mybatis-SpringBootæ•´åˆåŒ…ï¼Œå…¶ä¸­åŒ…å«äº†Mybatisæ‰€éœ€è¦çš„åŒ…--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="comment">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="comment">&lt;!--æ•°æ®åº“é©±åŠ¨--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ¥ä¸‹æ¥è§„åˆ’é¡¹ç›®ç›®å½•</p>
</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class title="create">



<ul>
<li>æ¥ä¸‹æ¥å…ˆé…ç½®å¥½æ•°æ®åº“ï¼Œå…ˆå°† <code>IDEA</code> ä¸æ•°æ®åº“è¿æ¥ä¸€ä¸‹ï¼Œæ–¹ä¾¿ç­‰ç­‰å†™å®ä½“ç±»</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class title="create">



<ul>
<li>é…ç½®æ•°æ®åº“ä¿¡æ¯</li>
</ul>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/4.png" class title="create">



<ul>
<li>åœ¨ <code>application.yml</code> ä¸­é…ç½®æ•°æ®åº“ä¿¡æ¯</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/bjpowernode?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">qwe123456</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#ä»¥ä¸‹å†…å®¹å¯ä»¥ä¸é…ï¼Œå°±ä½¿ç”¨é»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†é¡ºå¸¦å·©å›ºä¸€ä¸‹druidçš„ç›¸å…³é…ç½®ï¼Œä»¥åä¼šä¸“é—¨å†™æ–‡ç« æ¥è®°å½•å…¶é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="comment">#2.è¿æ¥æ± é…ç½®</span></span><br><span class="line">      <span class="comment">#åˆå§‹åŒ–è¿æ¥æ± çš„è¿æ¥æ•°é‡ å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment">#é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment">#é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">      <span class="attr">min-evictable-idle-time-millis:</span> <span class="number">30000</span></span><br><span class="line">      <span class="attr">validation-query:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">      <span class="attr">test-while-idle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-borrow:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCache  å®˜æ–¹å»ºè®®MySQLä¸‹å»ºè®®å…³é—­   ä¸ªäººå»ºè®®å¦‚æœæƒ³ç”¨SQLé˜²ç«å¢™ å»ºè®®æ‰“å¼€</span></span><br><span class="line">      <span class="attr">pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="comment"># é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ&#x27;wall&#x27;ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">merge-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">5000</span></span><br><span class="line">      <span class="comment">#3.åŸºç¡€ç›‘æ§é…ç½®</span></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="comment">#è®¾ç½®ä¸ç»Ÿè®¡å“ªäº›URL</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span></span><br><span class="line">        <span class="attr">session-stat-enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">session-stat-max-count:</span> <span class="number">100</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment">#è®¾ç½®ç›‘æ§é¡µé¢çš„ç™»å½•åå’Œå¯†ç </span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">qwe123456</span></span><br><span class="line">        <span class="comment">#deny: 192.168.1.100</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><p>å°Tipså¿«é€Ÿç”Ÿæˆå®ä½“ç±»</p>
<ul>
<li><p>é€‰æ‹©éœ€è¦åˆ›å»ºå®ä½“ç±»å¯¹åº”çš„è¡¨è¿›è¡Œåˆ›å»º</p>
<img src="/2021/05/06/SpringBoot%EF%BC%88%E4%BA%8C%EF%BC%89/5.png" class title="create"></li>
</ul>
</li>
<li><p>åˆ›å»ºå¥½å®ä½“ç±»åï¼Œæ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ <code>dao</code> å±‚</p>
</li>
</ul>
<p>è¿™é‡Œç›´æ¥ä½¿ç”¨äº†æ³¨è§£çš„æ–¹å¼ï¼Œä¸»è¦æ˜¯å› ä¸º <code>SQL</code> è¯­å¥æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰å¤æ‚æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿˜æ˜¯å»ºè®®é…ç½®æ–‡ä»¶ä¸æ³¨è§£ç›¸ç»“åˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.soucat.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.soucat.pojo.Users;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œå¦‚æœå†™@Repositoryåˆ™è¿˜è¦è‡ªå·±å®ç°è¿™ä¸ªæ¥å£</span></span><br><span class="line"><span class="comment">//@Repository</span></span><br><span class="line"><span class="comment">//è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“æ“ä½œå¯¹è±¡æ¥å£ç±»æ•ˆæœç­‰ä»·äºå†™å®ç°ç±»</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from users&quot;)</span></span><br><span class="line">    <span class="function">List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from users where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="function">Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update users set name = #&#123;name&#125; , pwd = #&#123;pwd&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">updateUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from users where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into users ( id , name , pwd ) values (#&#123;id&#125; , #&#123;name&#125; , #&#123;pwd&#125; )&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">insertUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆ <code>dao</code> å±‚åˆ°æ­¤ç¼–å†™å®Œæ¯•.</p>
<ul>
<li><p>æ¥ä¸‹æ¥å¼€å§‹ç¼–å†™ <code>Service </code> å±‚</p>
<p><code>sevice</code> æ¥å£</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">updateUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">insertUsers</span><span class="params">(Users users)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>    sevice</code> æ¥å£å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UsersService</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersMapper usersMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.getUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">updateUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.updateUsers(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteUsersByID</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.deleteUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insertUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersMapper.insertUsers(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>æ¥ä¸‹æ¥ç¼–å†™ <code>controller</code> å±‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersService usersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">getUserList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Users&gt; list = usersService.getUserList();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getUserByid</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersService.getUsersByID(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateUsers</span><span class="params">(Users users)</span></span>&#123;</span><br><span class="line">        usersService.updateUsers(users);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Update Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        usersService.deleteUsersByID(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Delete Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insertUser</span><span class="params">(Users users)</span></span>&#123;</span><br><span class="line">        usersService.insertUsers(users);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Insert Success!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åˆ°æ­¤å°±æ•´åˆå®Œæ¯•å’¯ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œæµ‹è¯•äº†ï¼Œå½“ç„¶äº†æ­£å¸¸å¼€å‘ä¸­è¿˜æ˜¯å¾—å†™ä¸€ç‚¹æµ‹è¯•ä¸€ç‚¹ï¼Œå…å¾—å†™å®Œä¹‹åå¾ˆéš¾ <code>debug</code>.</p>
<p>ç»è¿‡æµ‹è¯•ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œå…¨éƒ¨æ­£å¸¸è¿è¡Œï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†hhh~~</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(äº”):å®ç°é‚®ç®±éªŒè¯</title>
    <url>/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šå½“ä¸‹çš„ä¸šåŠ¡èƒŒæ™¯ä¸­ï¼Œå­˜åœ¨è®¸å¤šéœ€è¦ä¿è¯ç”¨æˆ·æ•°æ®å®‰å…¨çš„åœºæ™¯ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨é‚®ç®±éªŒè¯/æ‰‹æœºçŸ­ä¿¡éªŒè¯çš„æ–¹å¼å¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œå®¡æ ¸ï¼Œè¿™å¤§å¤§æé«˜äº†ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§.åœ¨æ³¨å†Œåœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨è¿™æ ·çš„æ‰‹æ®µæ¥é˜»æ­¢æ¶æ„æ³¨å†Œ.</p>
</blockquote>
<h1 id="ğŸƒå‡†å¤‡å·¥ä½œ"><a href="#ğŸƒå‡†å¤‡å·¥ä½œ" class="headerlink" title="ğŸƒå‡†å¤‡å·¥ä½œ"></a>ğŸƒå‡†å¤‡å·¥ä½œ</h1><p>å†ä½¿ç”¨ä»£ç è¿›è¡Œå‘é€é‚®ç®±ä¹‹å‰éœ€è¦è¿›è¡Œä¸€äº›å‡†å¤‡å·¥ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<h2 id="å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡"><a href="#å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡" class="headerlink" title="å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡"></a>å¼€å¯é‚®ç®±çš„åŠŸèƒ½æœåŠ¡</h2><p>è¿™é‡Œä»¥QQé‚®ç®±ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯<code>POP3/SMTP</code>æœåŠ¡ã€ä»¥åŠ<code>IMAP/SMTP</code>æœåŠ¡.</p>
<img src="/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/1.png" class title="å›¾ç‰‡">

<img src="/2021/06/15/SpringBoot%EF%BC%88%E4%BA%94%EF%BC%89/2.png" class title="å›¾ç‰‡">

<p>å¼€å¯è¿‡åï¼Œä¼šå‘Šè¯‰æˆ‘ä»¬<strong>æˆæƒç </strong>ï¼Œå‘é€é‚®ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ä¸ªæˆæƒç å¾—åˆ°æƒé™ï¼Œä»è€Œå‘é€é‚®ä»¶ï¼Œä¿è¯é‚®ç®±çš„ä½¿ç”¨ä¸è¢«æ»¥ç”¨ä¾µçŠ¯ï¼Œè¿™ä¸ªæˆæƒç è¦ç•™ç€ï¼Œç­‰å¾…åç»­ä½¿ç”¨.</p>
<h2 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h2><p>ç”±äºéœ€è¦å­˜å‚¨éªŒè¯ç ï¼Œå¹¶ä¸”éªŒè¯ç å­˜åœ¨æ—¶æ•ˆæ€§ï¼Œäºæ˜¯è¿™é‡Œä½¿ç”¨äº†<code>Redis</code>æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œäºæ˜¯ä¹Ÿéœ€è¦å¯¼å…¥<code>Redis</code>çš„ä¾èµ–.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é‚®ç®±--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  é…ç½®redis</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span> <span class="comment">#é€‰æ‹©ç¬¬ä¸€ä¸ªæ•°æ®åº“</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">xxxxxx</span> <span class="comment">#redis æœåŠ¡å™¨ ip å¦‚æœåœ¨æœ¬åœ°å°±å¡« localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span> <span class="comment">#redisæœåŠ¡ç«¯å£å·é»˜è®¤ 6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxx</span> <span class="comment">#redisç™»å½•å¯†ç </span></span><br><span class="line"><span class="comment"># é…ç½®é‚®ç®±</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.qq.com</span>  <span class="comment">#ä½¿ç”¨å“ªä¸€ä¸ªç±»å‹çš„é‚®ç®±çš„æ ‡è¯†</span></span><br><span class="line">    <span class="attr">username:</span> <span class="number">3164297994</span><span class="string">@qq.com</span> <span class="comment">#å‘é€è€…çš„é‚®ç®±</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxxxxxxxx</span> <span class="comment">#POP3æœåŠ¡çš„æˆæƒç </span></span><br><span class="line">    <span class="attr">default-encoding:</span> <span class="string">utf-8</span> <span class="comment">#æ–‡æœ¬è§£ææ ¼å¼</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸš˜ä»£ç å®ç°"><a href="#ğŸš˜ä»£ç å®ç°" class="headerlink" title="ğŸš˜ä»£ç å®ç°"></a>ğŸš˜ä»£ç å®ç°</h1><ul>
<li>å‘é€é‚®ç®±éªŒè¯ç çš„æœåŠ¡ç±»ç¼–å†™</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å‘ä»¶äºº</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">   	<span class="keyword">private</span> String from;</span><br><span class="line">    <span class="comment">//è‡ªåŠ¨æ³¨å…¥Javaé‚®ä»¶å‘é€å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender sender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€é‚®ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> to æ”¶ä¿¡äººé‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> title ä¿¡ä»¶æ ‡é¢˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code éªŒè¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendEmail</span><span class="params">(String to , String title , String code)</span></span>&#123;</span><br><span class="line">		SimpleMailMessage message = <span class="keyword">new</span> SimpleMailMessage();</span><br><span class="line">        message.setFrom(from); <span class="comment">//å‘ä»¶äººé‚®ç®±</span></span><br><span class="line">        message.setTo(to); <span class="comment">//æ”¶ä»¶äººé‚®ç®±</span></span><br><span class="line">        message.setSubject(title); <span class="comment">//é‚®ä»¶æ ‡é¢˜</span></span><br><span class="line">        message.setText(code);  <span class="comment">//é‚®ä»¶å†…å®¹</span></span><br><span class="line">        sender.send(message);<span class="comment">//å‘é€é‚®ä»¶</span></span><br><span class="line">        System.out.println(<span class="string">&quot;é‚®ä»¶å‘é€æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é‚®ä»¶å‘é€çš„æ¥å£ç¼–å†™</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmailService emailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/email&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">emailVertCode</span><span class="params">(<span class="meta">@RequestBody</span> JSONObject requestbody)</span></span>&#123;</span><br><span class="line">        JSONObject response = <span class="keyword">new</span> JSONObject(<span class="keyword">true</span>);</span><br><span class="line">        String username = requestbody.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String email = requestbody.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰çš„ç”Ÿæˆ 6 ä½éªŒè¯ç çš„å·¥å…·ç±»</span></span><br><span class="line">        String code = VerificationCode.getCode();</span><br><span class="line">        emailService.sendSimple(email,<span class="string">&quot;éªŒè¯ç æµ‹è¯•&quot;</span>,code);</span><br><span class="line">        <span class="comment">//å°†éªŒè¯ç å­˜å…¥redis</span></span><br><span class="line">        stringRedisTemplate.opsForHash().put( username , username ,code);</span><br><span class="line">        <span class="comment">//è®¾ç½®éªŒè¯ç çš„è¿‡æœŸæ—¶é—´ä¸º 5 åˆ†é’Ÿ</span></span><br><span class="line">        stringRedisTemplate.expire(username , <span class="number">5</span> ,TimeUnit.MINUTES);</span><br><span class="line">        response.put(<span class="string">&quot;code&quot;</span>,<span class="number">200</span>);</span><br><span class="line">        response.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å‘é€é‚®ä»¶æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> response.toJSONString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é™„ä¸Šè‡ªå·±å†™çš„éªŒè¯ç ç”Ÿæˆå·¥å…·</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VerificationCode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> counts = <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">int</span> resCode = <span class="number">0</span>;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random(System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">while</span> (counts-- != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = random.nextInt(<span class="number">10</span>);</span><br><span class="line">            <span class="keyword">while</span> (i == <span class="number">0</span> &amp;&amp; counts == <span class="number">5</span>) &#123;</span><br><span class="line">                i = random.nextInt(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>) resCode *= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">else</span> resCode += (<span class="keyword">int</span>) (i * Math.pow(<span class="number">10</span>, <span class="number">5</span> - counts));</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> String.valueOf(resCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å…«):è‡ªå®šä¹‰starter</title>
    <url>/2021/06/24/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš€SpringBoot-starteræœºåˆ¶"><a href="#ğŸš€SpringBoot-starteræœºåˆ¶" class="headerlink" title="ğŸš€SpringBoot starteræœºåˆ¶"></a>ğŸš€SpringBoot starteræœºåˆ¶</h1><p><code>SpringBoot</code>ä¸­æä¾›äº†å¤§é‡å¼€ç®±å³ç”¨çš„<code>starter</code>ï¼Œ<code>starter</code>ä¸­é…ç½®äº†ä¸€å®šä¸šåŠ¡åœºæ™¯ä¸­æ‰€éœ€è¦çš„ä¾èµ–ä»¥åŠå„ç§æœåŠ¡ï¼Œè®©å¼€å‘è€…æ‘†è„±äº†å¤§é‡é…ç½®å’Œä¾èµ–æ–‡ä»¶ï¼Œè®©å·¥ç¨‹çš„æ•´ä½“ç»“æ„æ›´åŠ ä¼˜ç¾è€Œä¸è‡ƒè‚¿ï¼Œå…¶å…·ä½“å®ç°ä¾æ‰˜äº<code>SpringBoot</code>ä¸­è‡ªåŠ¨é…ç½®åŸç†ï¼Œè‡ªåŠ¨è¿›è¡ŒåŒ…æ‰«æï¼Œæ—¢å¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½®.</p>
<h1 id="ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™"><a href="#ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™" class="headerlink" title="ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™"></a>ğŸ›è‡ªå®šä¹‰starterçš„å‘½åè§„åˆ™</h1><p><code>SpringBoot</code>æä¾›çš„<code>starter</code>ä»¥<code>spring-boot-starter-xxx</code>çš„æ–¹å¼å‘½åçš„ã€‚å®˜æ–¹å»ºè®®è‡ªå®šä¹‰çš„<code>starter</code>ä½¿ç”¨<code>xxx-spring-boot-starter</code>å‘½åè§„åˆ™ã€‚ä»¥åŒºåˆ†<code>SpringBoot</code>ç”Ÿæ€æä¾›çš„<code>starter</code></p>
<h1 id="ğŸ¡è‡ªå®šä¹‰starter"><a href="#ğŸ¡è‡ªå®šä¹‰starter" class="headerlink" title="ğŸ¡è‡ªå®šä¹‰starter"></a>ğŸ¡è‡ªå®šä¹‰starter</h1><ul>
<li><p>åˆ›å»ºä¸€ä¸ª<code>SpringBoot</code>é¡¹ç›®</p>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œåˆ é™¤<code>SpringBoot</code>å¯åŠ¨ç±»ä»¥åŠé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©æ€§åˆ æ‰<code>test</code>ç›®å½•ï¼Œå†åˆ é™¤<code>pom.xml</code>ä¸­<code>plugins</code>ï¼Œä¸ç„¶æ‰“åŒ…ä¼šæŠ¥é”™.</p>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/2.png" alt="img"></p>
</li>
<li><p>å¼•å…¥ç›¸å…³ä¾èµ–</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ‹“å±•é…ç½®æ–‡ä»¶çš„æ ¼å¼--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!--å¿…éœ€--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™æ•°æ®æ˜ å°„å®ä½“ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥æŠŠ.propertiesä¸­è·å–.yamlä¸­ç¬¦å·ä»¥ä¸‹å‰ç¼€çš„æ•°æ®æ˜ å°„åˆ°æœ¬ç±»ä¸­</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;com.anthony.starter&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String msg = <span class="string">&quot;é»˜è®¤å€¼&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™serviceç±»: ç”¨äºå¯¹å¤–æä¾›æœåŠ¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‘IOCå®¹å™¨ä¸­æ³¨å†Œè¯¥ç±»</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//å…è®¸è¯¥ç±»è¿›è¡Œæ•°æ®æ˜ å°„</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(MyProperties.class)</span></span><br><span class="line"><span class="comment">//å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨è¯¥ç±»æ—¶å†å¾€IOCå®¹å™¨ä¸­è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(MyService.class)</span></span><br><span class="line"><span class="comment">//å½“é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨è¿™äº›é…ç½®æ—¶ï¼Œå¯ä»¥æ³¨å…¥ï¼Œå¦‚æœæœªåŒ¹é…åˆ°ä¹Ÿå¯ä»¥æ³¨å…¥ï¼Œæ‰€ä»¥è¿™ä¸€æ¡å†™ä¸å†™éƒ½è¡Œ</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;com.anthony.starter&quot; , value = &quot;enabled&quot; , matchIfMissing = true )</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyProperties myProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyService <span class="title">myService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyService myService = <span class="keyword">new</span> MyService()</span><br><span class="line">                .setMsg(myProperties.getMsg())</span><br><span class="line">                .setPassword(myProperties.getPassword())</span><br><span class="line">                .setUsername(myProperties.getUsername());</span><br><span class="line">        <span class="keyword">return</span> myService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ‰“åŒ…å‘å¸ƒå®‰è£…åˆ°æœ¬åœ°ä»“åº“</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringBoot%EF%BC%88%E5%85%AB%EF%BC%89/1.png" alt="img"></p>
<ul>
<li>å¼•ç”¨æ—¶åªéœ€è¦åƒæ™®é€šä¾èµ–ä¸€æ ·å¼•å…¥å°±å¯ä»¥äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶å½“å‰é¡¹ç›®ä¸­çš„é¡¹ç›®åæ ‡</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å…­):è§£å†³å‰åç«¯åˆ†ç¦»è·¨åŸŸ</title>
    <url>/2021/06/18/SpringBoot%EF%BC%88%E5%85%AD%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"><a href="#ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ" class="headerlink" title="ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ"></a>ğŸš€ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ</h1><ul>
<li><strong>urlçš„ä¸€èˆ¬æ ¼å¼</strong>ï¼š</li>
</ul>
<p><font color="skyblue">åè®® + åŸŸåï¼ˆå­åŸŸå + ä¸»åŸŸåï¼‰ + ç«¯å£å· + èµ„æºåœ°å€</font></p>
<ul>
<li><strong>ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<p><a href="https://www.dustyblog.cn:8080/say/Hello">https://www.dustyblog.cn:8080/say/Hello</a> æ˜¯ç”±</p>
<p>https + www + dustyblog.cn + 8080 + say/Helloç»„æˆã€‚</p>
<blockquote>
<p>åªè¦<font color="red">åè®®ï¼Œå­åŸŸåï¼Œä¸»åŸŸåï¼Œç«¯å£å·è¿™å››é¡¹ç»„æˆéƒ¨åˆ†ä¸­æœ‰ä¸€é¡¹ä¸åŒ</font>å°±å¯ä»¥è®¤ä¸ºæ˜¯ä¸åŒçš„åŸŸï¼Œä¸åŒçš„åŸŸä¹‹é—´äº’ç›¸è®¿é—®èµ„æºï¼Œå°±è¢«ç§°ä¹‹ä¸ºè·¨åŸŸã€‚</p>
</blockquote>
<p>å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œå‰ç«¯é¡¹ç›®åç«¯é¡¹ç›®åˆ†åˆ«å ç”¨ä¸åŒçš„ç«¯å£å·(è¿™é‡Œåªæ˜¯é’ˆå¯¹ä¸ªäººå¼€å‘è€Œè¨€ï¼Œå®é™…ä¸šåŠ¡ä¸­ä¸ä¸€å®š)ä»è€Œå¯¼è‡´äº†è·¨åŸŸé—®é¢˜</p>
<h1 id="ğŸš‘è§£å†³æ–¹æ¡ˆ"><a href="#ğŸš‘è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ğŸš‘è§£å†³æ–¹æ¡ˆ"></a>ğŸš‘è§£å†³æ–¹æ¡ˆ</h1><p><strong>æ³¨æ„</strong>ï¼šè§£å†³æ–¹æ¡ˆæ—¢å¯ä»¥åœ¨å‰ç«¯è§£å†³ä¹Ÿå¯ä»¥åœ¨åç«¯è§£å†³ï¼Œè¿™é‡Œåªè®¨è®ºåç«¯çš„è§£å†³æ–¹æ¡ˆ.</p>
<h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><blockquote>
<p>è§£å†³è·¨åŸŸé—®é¢˜æœ‰å¤šç§å…¨å±€é…ç½®çš„æ–¹æ¡ˆï¼Œæ¥ä¸‹æ¥ä¸€ä¸€åˆ—ä¸¾</p>
</blockquote>
<h3 id="é…ç½®æ–¹æ¡ˆä¸€"><a href="#é…ç½®æ–¹æ¡ˆä¸€" class="headerlink" title="é…ç½®æ–¹æ¡ˆä¸€"></a>é…ç½®æ–¹æ¡ˆä¸€</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsConfiguration <span class="title">corsConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CorsConfiguration corsConfiguration = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        <span class="comment">//å®é™…è¯·æ±‚ä¸­å…è®¸æºå¸¦çš„é¦–éƒ¨å­—æ®µ</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">//å…è®¸é‚£äº›åŸŸè·¨åŸŸè®¿é—®</span></span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">//å…è®¸é‚£äº›è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> corsConfiguration;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsFilter <span class="title">corsFilter</span><span class="params">(CorsConfiguration corsConfiguration)</span> </span>&#123;</span><br><span class="line">        UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration); <span class="comment">// 4</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CorsFilter(source);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="é…ç½®æ–¹æ¡ˆäºŒ"><a href="#é…ç½®æ–¹æ¡ˆäºŒ" class="headerlink" title="é…ç½®æ–¹æ¡ˆäºŒ"></a>é…ç½®æ–¹æ¡ˆäºŒ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebAllowConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ·»åŠ è®¿é—®ä»€ä¹ˆè·¯å¾„æ—¶éœ€è¦é…ç½®è·¨åŸŸ</span></span><br><span class="line">        <span class="comment">//æ­¤å¤„é…ç½®æ‰€æœ‰è·¯å¾„</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>) <span class="comment">//å…è®¸è°è·¨åŸŸ,vueå¼€å¯æœåŠ¡é»˜è®¤è·‘åœ¨8080</span></span><br><span class="line">                .allowedOrigins(<span class="string">&quot;http://localhost:8080&quot;</span>, <span class="string">&quot;null&quot;</span>)  <span class="comment">//å…è®¸è°è·¨åŸŸ,vueå¼€å¯æœåŠ¡é»˜è®¤è·‘åœ¨8080</span></span><br><span class="line">                .allowedMethods(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;GET&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;OPTIONS&quot;</span>, <span class="string">&quot;DELETE&quot;</span>) <span class="comment">//è®¾ç½®éœ€è¦è¿›è¡Œé…ç½®çš„httpè¯·æ±‚æ–¹æ³•</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>) <span class="comment">//è®¾ç½®æœ€å¤§ç›¸åº”æ—¶é—´</span></span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h2><p><code>@CrossOrigin</code> ç”¨äº<code>controller</code>ç±»ä¸Šï¼Œä½¿ç”¨ç›¸å¯¹è¾ƒä¸ºç®€å•.</p>
<p>ä½†æ˜¯æœ‰å‘ï¼š<code>CROS</code>å¤æ‚è¯·æ±‚æ—¶ä¼šé¦–å…ˆå‘é€ä¸€ä¸ª<code>OPTIONS</code>è¯·æ±‚åšå—…æ¢ï¼Œæ¥æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦æ”¯æŒæœ¬æ¬¡è¯·æ±‚ï¼Œè¯·æ±‚æˆåŠŸåæ‰ä¼šå‘é€çœŸå®çš„è¯·æ±‚ï¼›è€Œ<code>OPTIONS</code>è¯·æ±‚ä¸ä¼šæºå¸¦ä»»ä½•æ•°æ®ï¼Œå¯¼è‡´è¿™ä¸ªè¯·æ±‚ä¸ç¬¦åˆæˆ‘ä»¬æ‹¦æˆªå™¨çš„æ ¡éªŒè§„åˆ™è¢«æ‹¦æˆªäº†ï¼Œç›´æ¥è¿”å›äº†çŠ¶æ€ç ï¼Œå“åº”å¤´ä¸­ä¹Ÿæ²¡æºå¸¦è§£å†³è·¨åŸŸéœ€è¦çš„å¤´éƒ¨ä¿¡æ¯ï¼Œè¿›è€Œå‡ºç°äº†è·¨åŸŸé—®é¢˜.</p>
<p>åªéœ€è¦é‡å†™<code>handler</code>ä¸­<code>preHandlr</code>å¹¶ä¸”åŠ ä¸Šä¸‹æ–¹ä»£ç å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">&quot;OPTIONS&quot;</span>.equals(request.getMethod().toUpperCase())) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Method:OPTIONS&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot(å››):æ³¨è§£å¼€å‘</title>
    <url>/2021/06/15/SpringBoot%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å¯ä»¥è¯´æ³¨è§£æ˜¯SpringBootçš„ç²¾é«“ï¼Œæœ‰ç€éå¸¸éå¸¸å¤šçš„æ³¨è§£ï¼Œè¿™ç¯‡åšå®¢å°†æŒç»­æ›´æ–°æˆ‘å¹³æ—¶æ‰€ç”¨åˆ°çš„æ³¨è§£~~</p>
<p>å½“ç„¶äº†ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦æ˜¯ä¸ºäº†ä½œä¸ºä¸€ä»½å¤‡å¿˜å½•ï¼Œå…·ä½“çš„åº•å±‚è§£æï¼Œä¼šå¦å¤–å†™åšå®¢è¿›è¡Œåˆ†æ~</p>
</blockquote>
<h1 id="ğŸç±»æ³¨è§£"><a href="#ğŸç±»æ³¨è§£" class="headerlink" title="ğŸç±»æ³¨è§£"></a>ğŸç±»æ³¨è§£</h1><ul>
<li><code>@Component</code> ï¼šå½“ä¸æ˜ç¡®ç±»å±äºå“ªä¸€å±‚æ¶æ„æ—¶ï¼Œç”¨äºæ³¨å†Œ<code>Spring</code>ç»„ä»¶.</li>
<li><code>@Repository</code> ï¼šå¯¹åº”æŒä¹…å±‚å³<code>Dao</code>å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œ.</li>
<li><code>@Service</code> ï¼šå¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° <code>Dao </code>å±‚.</li>
<li><code>@Controller</code> ï¼šå¯¹åº”MVC æ§åˆ¶å±‚ï¼Œç”¨æˆ·æ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ <code>Service </code>å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢.</li>
<li><code>@RestController</code>ï¼šç›¸è¾ƒäº<code>@Controller</code> è€Œè¨€ï¼Œé™åˆ¶äº†æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•è¿”å›å€¼åªèƒ½ä¸º<code>return</code>ä¸­å†…å®¹æœ¬èº«</li>
<li><code>@SpringBootAplication</code>ï¼šç”¨äºæ ‡æ³¨SpringBootå¯åŠ¨ç±»ï¼Œä¹Ÿæ˜¯å¯åŠ¨è‡ªåŠ¨é…ç½®æ‰«æçš„æ³¨è§£</li>
<li><code>@SpringBootTest</code>ï¼šç”¨äºè¿›è¡Œå•å…ƒæµ‹è¯•</li>
<li><code>@Configuration</code>ï¼šç”¨äºå£°æ˜æŸä¸ªç±»ä¸ºé…ç½®ç±»ï¼Œå¤šç”¨äº<code>Spring</code>åº”ç”¨ä¸­ï¼Œç›¸å½“äºåœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³é…ç½®</li>
<li><code>@SpringBootConfiguration</code>ï¼šæ›´å¤šçš„ç”¨äº<code>SpringBoot</code>åº”ç”¨ä¸­ï¼Œæ•ˆæœåŒ<code>@Configuration</code></li>
<li><code>@ComponentScan</code>ï¼šä½¿<code>SpringBoot</code>åº”ç”¨è‡ªåŠ¨æ‰«æ<code>@SpringBootApplication</code>æ‰€åœ¨ç±»çš„åŒçº§åŒ…ä»¥åŠå®ƒçš„å­åŒ…ä¸­çš„é…ç½®</li>
<li><code>@EnableAutoConfiguration</code>ï¼šä½¿<code>SpringBoot</code>æ ¹æ®å½“å‰åº”ç”¨é¡¹ç›®çš„ä¾èµ–è¿›è¡Œç›¸å…³çš„é…ç½®</li>
<li><code>@ConfigurationProperties(prefix = &quot;xxxx&quot;)</code>ï¼šç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</li>
<li><code>@PropertySource</code>ï¼šå¯ä»¥æŒ‡å®šéœ€è¦åŠ è½½çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¸€ä¸ªä¹Ÿå¯ä»¥å¤šä¸ª(å¤šä¸ªä½¿ç”¨{}æ‹¬èµ·æ¥å³å¯)ï¼Œè¯»å–æ•°æ®éœ€è¦ä½¿ç”¨<code>@Value</code></li>
</ul>
<h1 id="ğŸ«æ–¹æ³•æ³¨è§£"><a href="#ğŸ«æ–¹æ³•æ³¨è§£" class="headerlink" title="ğŸ«æ–¹æ³•æ³¨è§£"></a>ğŸ«æ–¹æ³•æ³¨è§£</h1><ul>
<li><code>@RequestMapping</code>ï¼šè¯·æ±‚æ˜ å°„è·¯å¾„</li>
<li><code>@GetMapping</code>ï¼š<code>get</code>è¯·æ±‚æ˜ å°„è·¯å¾„ï¼Œåªæ¥å—<code>get</code>è¯·æ±‚</li>
<li><code>@PostMapping</code>: <code>post</code>è¯·æ±‚æ˜ å°„è·¯å¾„ï¼Œåªæ¥å—<code>post</code>è¯·æ±‚</li>
<li><code>@ResponseBody</code>: å½“ä½¿ç”¨<code>@controller</code>çš„æ—¶å€™ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ æ¬¡æ³¨è§£ç­‰ä»·äºä½¿ç”¨<code>@RestController</code></li>
<li><code>@Test</code>ï¼šæ ‡æ³¨æµ‹è¯•æ–¹æ³•ï¼Œè®©æ–¹æ³•å¯ä»¥ç‹¬ç«‹è¿è¡Œ</li>
</ul>
<h1 id="ğŸ¨å±æ€§æ³¨è§£"><a href="#ğŸ¨å±æ€§æ³¨è§£" class="headerlink" title="ğŸ¨å±æ€§æ³¨è§£"></a>ğŸ¨å±æ€§æ³¨è§£</h1><ul>
<li><code>@Value</code> : ç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­å€¼</li>
<li><code>@Autowired</code>ï¼šç”¨äºè‡ªåŠ¨æ³¨å…¥<code>Spring IOC</code> å®¹å™¨ä¸­çš„å¯¹è±¡</li>
<li><code>@RequestBody</code>ï¼šåªèƒ½ç”¨äºè·å–<code>Post</code>è¯·æ±‚ä¸­çš„è¯·æ±‚ä½“</li>
<li><code>@PathVarible</code>ï¼šç”¨äºè·å–<code>RESTful</code>é£æ ¼çš„<code>get</code>è¯·æ±‚å‚æ•°</li>
<li><code>@RequestParam</code>ï¼šç”¨äºè·å–<code>post/get</code>è¯·æ±‚æ–¹å¼çš„è¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼Œå¦‚æœå˜é‡åä¸ä¸€è‡´ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCï¼šæµç¨‹åˆ†ææ¦‚è§ˆ</title>
    <url>/2021/05/06/SpringMVC%EF%BC%9A%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E6%A6%82%E8%A7%88/</url>
    <content><![CDATA[<h1 id="ğŸˆSpringMVCç®€ä»‹"><a href="#ğŸˆSpringMVCç®€ä»‹" class="headerlink" title="ğŸˆSpringMVCç®€ä»‹"></a>ğŸˆSpringMVCç®€ä»‹</h1><p>â€‹        <code>SpringMVC</code> æ˜¾ç„¶æ˜¯ç”± <code>Spring</code> ä»¥åŠ <code>MVC</code> ä¿©éƒ¨åˆ†ç»„æˆï¼Œå…ˆè¯´è¯´ <code>Spring</code> é‚£å½“ç„¶å°±æ˜¯æŒ‡ <code>Spring Framework</code> æ¡†æ¶äº†ï¼Œå‰é¢çš„æ–‡ç« å·²ç»ä»‹ç»è¿‡äº†ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™é‡Œå°±ç›¸å½“äºåœ¨ <code>Spring</code> ä¸­ä½¿ç”¨<code>MVC</code> æ¶æ„ï¼Œå½“ç„¶äº†è¿™é‡Œè®¨è®ºåº”ç”¨äºåœ¨ <code>Web</code> å¼€å‘ä¹‹ä¸­.</p>
<p>â€‹        æ¥ä¸‹æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ <code>MVC</code> æ¶æ„ä»¥åŠ <code>Web </code> å¼€å‘ä¸­çš„ä¸‰å±‚æ¶æ„ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ç†è§£æµ…æ˜¾ï¼Œåœ¨æˆ‘çœ‹æˆ‘ <code>MVC</code> æ¶æ„ä¸ <code>Web</code> ä¸­ç»å…¸çš„ä¸‰å±‚ç»“æ„ååˆ†ç›¸ä¼¼ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†ä»£ç è§£è€¦åˆã€ä»¥åŠé«˜å¯ç»´æŠ¤æ€§.</p>
<ul>
<li><p><code>MVC(MODEL-VIEW-CONTROLLER)</code> å³ æ¨¡å‹-è§†å›¾-æ§åˆ¶</p>
<ul>
<li><p><code>MODEL</code> : å±äºå¤„ç†ä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†ï¼Œç›¸å½“äºä¸‰å±‚æ¶æ„ä¸­çš„ <code>serviceã€dao</code> å±‚ï¼Œå¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œç›´æ¥æ“ä½œï¼Œå‚¨å­˜ä¸šåŠ¡æ ¸å¿ƒé€»è¾‘.</p>
</li>
<li><p><code>VIEW</code> : å±äºå‘ç”¨æˆ·å±•ç¤ºçš„éƒ¨åˆ†, <code>MODEL</code> å±‚å¤„ç†å®Œä¹‹åè¿”å›çš„æ•°æ®äº¤ç»™ <code>CONTROLLER </code> å±‚ï¼Œå†äº¤ç”± <code>VIEW</code> å±‚ï¼Œä»è€Œå‘ˆç°ç›¸åº”çš„é¡µé¢.</p>
</li>
<li><p><code>CONTROLLER</code> ï¼šå±äºè¿æ¥<code>MODEL</code> ä¸ <code>VIEW</code> çš„éƒ¨åˆ†ï¼Œç›¸å½“äº<code>Servlet</code> ä¸­çš„å­˜å‚¨çš„æ˜ å°„å…³ç³»ï¼Œèµ·åˆ°äº†<code>Servlet</code>çš„ä½œç”¨ï¼Œå°†<code>MODLE</code> ä¸</p>
<p><code>VIEW</code> è§£è€¦åˆ.</p>
</li>
</ul>
</li>
</ul>
<p>ç”¨ä¸€å¼ å›¾æ¥æ¦‚æ‹¬ï¼š</p>
<p>â€‹                                        <img src="https://img-blog.csdnimg.cn/20181030204359635.png" alt="MVC"></p>
<p>â€‹        è€Œ <code>SpringMVC</code> ç®€åŒ–äº† <code>JavaWeb</code> çš„å¼€å‘ï¼Œå°†<code>Servlet</code> çš„ç›¸å…³é…ç½®ç®€åŒ–äº†è®¸å¤š ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ª <code>è¯·æ±‚è½¬å‘æ§åˆ¶å™¨DispatcherServlet</code> ä»¥åŠ <code>èµ„æºè§†å›¾è§£æå™¨ResourceViewResolver</code> å³å¯ï¼Œæœ‰æ•ˆæé«˜äº†å¼€å‘æ•ˆç‡.</p>
<hr>
<h1 id="âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ"><a href="#âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ" class="headerlink" title="âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ"></a>âœ¨SpringMVCæ‰§è¡Œæ¦‚è§ˆ</h1><img src="/2021/05/06/SpringMVC%EF%BC%9A%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E6%A6%82%E8%A7%88/1.png" class title="æµç¨‹å›¾">



<p>æµç¨‹åˆ†æï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œé€šè¿‡webå®¹å™¨ä¸­é€šè¿‡ <code>DispathcerServlet</code> çš„æ˜ å°„è·¯å¾„å°†è¯·æ±‚äº¤ç»™ <code>DispathcerServlet</code> å¤„ç†.</li>
<li><code>DispatcherServlet</code>é€šè¿‡å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆ <code>HandlerMapping</code> ï¼‰è·å–è¯·æ±‚ä¿¡æ¯å¯¹åº”çš„å¤„ç†å™¨æ‰§è¡Œé“¾.</li>
<li><code>DispatcherServlet</code> å°†æ‰§è¡Œé“¾äº¤ç»™å¤„ç†å™¨é€‚é…å™¨ï¼ˆ <code>HandlerAdapter</code> ï¼‰ç„¶åå…¶è°ƒç”¨ç›¸åº”çš„å¤„ç†å™¨ï¼ˆ<code>Handler </code>ï¼‰æ‰§è¡Œ</li>
<li>æœ€ç»ˆè¿”å›å¤„ç†ç»“æœåˆ° <code>DispatcherServlet</code></li>
<li><code>DispatcherServlet</code> å°†ç»“æœäº¤ç»™è§†å›¾è§£æå™¨ï¼ˆ<code>ViewResolver</code>ï¼‰è§£æè§†å›¾ï¼Œéšåè¿”å›è§£æåçš„Viewå¯¹è±¡</li>
<li><code>DispatcherServlet</code>å†å°†Viewå¯¹è±¡è¿›è¡Œè§†å›¾æ¸²æŸ“æœ€åè¿”å›ç»™ç”¨æˆ·å‘ˆç°å‡ºé¡µé¢</li>
</ol>
<blockquote>
<h2 id="ç»„ä»¶è¯´æ˜ï¼š"><a href="#ç»„ä»¶è¯´æ˜ï¼š" class="headerlink" title="ç»„ä»¶è¯´æ˜ï¼š"></a>ç»„ä»¶è¯´æ˜ï¼š</h2><ul>
<li><h3 id="DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"><a href="#DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨" class="headerlink" title="DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨"></a><code>DispatcherServlet</code>ï¼šå‰ç«¯æ§åˆ¶å™¨</h3></li>
</ul>
<p>â€‹      <strong>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº<code>mvc</code>æ¨¡å¼ä¸­çš„<code>c</code>ï¼Œ<code>dispatcherServlet</code>æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œ</strong></p>
<p>â€‹      <strong>ç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œ<code>dispatcherServlet</code>çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚</strong></p>
<ul>
<li><h3 id="HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"><a href="#HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨" class="headerlink" title="HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨"></a><code>HandlerMapping</code>ï¼šå¤„ç†å™¨æ˜ å°„å™¨</h3></li>
</ul>
<p>ã€€ã€€ã€€<code>HandlerMapping</code>è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚<code>url</code>æ‰¾åˆ°<code>Handler</code>å³å¤„ç†å™¨ï¼Œ<code>springmvc</code>æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œ</p>
<p>ã€€ã€€  <strong>ä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</strong></p>
<ul>
<li><h3 id="Handlerï¼šå¤„ç†å™¨"><a href="#Handlerï¼šå¤„ç†å™¨" class="headerlink" title="Handlerï¼šå¤„ç†å™¨"></a><code>Handler</code>ï¼šå¤„ç†å™¨</h3></li>
</ul>
<p>ã€€ã€€ <strong><code>Handler</code> æ˜¯ç»§ <code>DispatcherServlet </code>å‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨ <code>DispatcherServlet </code>çš„æ§åˆ¶ä¸‹ <code>Handler</code>å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</strong></p>
<p>â€‹    <strong>ç”±äº <code>Handler </code>æ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘Handlerã€‚</strong></p>
<ul>
<li><h3 id="HandlAdapter-ï¼šå¤„ç†å™¨é€‚é…å™¨"><a href="#HandlAdapter-ï¼šå¤„ç†å™¨é€‚é…å™¨" class="headerlink" title="HandlAdapter ï¼šå¤„ç†å™¨é€‚é…å™¨"></a><code>HandlAdapter </code>ï¼šå¤„ç†å™¨é€‚é…å™¨</h3></li>
</ul>
<p>ã€€ã€€<strong>é€šè¿‡<code>HandlerAdapter</code>å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚</strong></p>
<ul>
<li><h3 id="ViewResolverï¼šè§†å›¾è§£æå™¨"><a href="#ViewResolverï¼šè§†å›¾è§£æå™¨" class="headerlink" title="ViewResolverï¼šè§†å›¾è§£æå™¨"></a><code>ViewResolver</code>ï¼šè§†å›¾è§£æå™¨</h3></li>
</ul>
<p>ã€€ã€€<strong>View Resolverè´Ÿè´£å°†å¤„ç†ç»“æœç”ŸæˆViewè§†å›¾ï¼ŒView Resolveré¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œ</strong></p>
<p>ã€€ã€€<strong>å†ç”ŸæˆViewè§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹Viewè¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚</strong></p>
<ul>
<li><h3 id="Viewï¼šè§†å›¾"><a href="#Viewï¼šè§†å›¾" class="headerlink" title="Viewï¼šè§†å›¾"></a><code>View</code>ï¼šè§†å›¾</h3></li>
</ul>
<p>ã€€ã€€<strong><code>springmvc</code>æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„Viewè§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š<code>jstlViewã€freemarkerViewã€pdfView</code>ç­‰ã€‚æˆ‘ä»¬æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯<code>jsp</code>ã€‚</strong></p>
<p>ã€€ã€€ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(ä¸€):è®¿é—®è®¤è¯ä¸èº«ä»½æˆæƒ</title>
    <url>/2021/07/10/SpringSecurity%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šå¥½ä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œå¿™å®Œäº†æœŸæœ«è€ƒè¯•ç„¶åèƒŒå¥½äº†è¡Œå›Šå›äº†å®¶ï¼Œç°åœ¨ç»ˆäºå¯ä»¥å¥½å¥½çš„æ›´æ–°ä¸€ä¸‹åšå®¢äº†ï¼Œæ¯•ç«Ÿéœ€è¦æ•´ç†çš„ä¸œè¥¿è¿˜æœ‰å¾ˆå¤šæ²¡æœ‰æ•´ç†ï¼Œæœç„¶ç¨‹åºå‘˜è¿™æ¡é“è·¯å°±æ˜¯ï¼Œè¶Šå­¦è¶Šè§‰å¾—è‡ªå·±è¶Šèœï¼Œæ´»åˆ°è€ï¼Œå­¦åˆ°è€hhh.</p>
</blockquote>
<h1 id="ğŸš“SpringSecurityç®€ä»‹"><a href="#ğŸš“SpringSecurityç®€ä»‹" class="headerlink" title="ğŸš“SpringSecurityç®€ä»‹"></a>ğŸš“SpringSecurityç®€ä»‹</h1><p>&emsp;&emsp;<code>spring security </code>æ˜¯åŸºäº<code>spring </code>çš„å®‰å…¨æ¡†æ¶ã€‚å®ƒæä¾›å…¨é¢çš„å®‰å…¨æ€§è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶åœ¨Webè¯·æ±‚çº§å’Œæ–¹æ³•è°ƒç”¨çº§å¤„ç†èº«ä»½ç¡®è®¤å’Œæˆæƒã€‚åœ¨<code>Spring Framework</code>åŸºç¡€ä¸Š,<code>spring security </code>å……åˆ†åˆ©ç”¨äº†ä¾èµ–æ³¨å…¥ï¼ˆDI )å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOP)åŠŸèƒ½ï¼Œä¸ºåº”ç”¨ç³»ç»Ÿæä¾›å£°æ˜å¼çš„å®‰å…¨è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå‡å°‘äº†ä¸ºä¼ä¸šç³»ç»Ÿå®‰å…¨æ§åˆ¶ç¼–å†™å¤§é‡é‡å¤ä»£ç çš„å·¥ä½œã€‚æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®‰å…¨æ¡†æ¶ã€‚å®ƒä¸<code>Spring MVC</code>æœ‰å¾ˆå¥½åœ°é›†æˆ.</p>
<h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><p>( 1 ) <strong>è®¤è¯</strong>ï¼ˆä½ æ˜¯è°ï¼Œç”¨æˆ·/è®¾å¤‡/ç³»ç»Ÿ)</p>
<p>( 2 ) <strong>éªŒè¯</strong>ï¼ˆä½ èƒ½å¹²ä»€ä¹ˆï¼Œä¹Ÿå«æƒé™æ§åˆ¶/æˆæƒï¼Œå…è®¸æ‰§è¡Œçš„æ“ä½œ)</p>
<h2 id="åŸºæœ¬å®ç°åŸç†"><a href="#åŸºæœ¬å®ç°åŸç†" class="headerlink" title="åŸºæœ¬å®ç°åŸç†"></a>åŸºæœ¬å®ç°åŸç†</h2><p>åŸºäº <code>Filter</code> , <code>Servlet</code> ,<code>AOP</code> å®ç°èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯.</p>
<h1 id="ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·"><a href="#ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·" class="headerlink" title="ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·"></a>ğŸ°é…ç½®æ–‡ä»¶ä¸­é…ç½®ç”¨æˆ·</h1><ul>
<li>åœ¨<code>application.properties</code>ä¸­é…ç½®</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.security.user.name</span>=<span class="string">xxx</span></span><br><span class="line"><span class="meta">spring.security.user.password</span>=<span class="string">xxxx</span></span><br></pre></td></tr></table></figure>

<h2 id="å…³é—­ç™»é™†è®¤è¯"><a href="#å…³é—­ç™»é™†è®¤è¯" class="headerlink" title="å…³é—­ç™»é™†è®¤è¯"></a>å…³é—­ç™»é™†è®¤è¯</h2><p>åœ¨å¯åŠ¨ç±»æ³¨è§£ä¸­å°†è‡ªåŠ¨é…ç½®å»é™¤åŠ è½½å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å…³é—­å®‰å…¨éªŒè¯</span></span><br><span class="line"><span class="meta">@SpringBootApplication(exclude = SecurityAutoConfiguration.class)</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·"><a href="#ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·" class="headerlink" title="ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·"></a>ğŸ›°å†…å­˜ä¸­é…ç½®ç”¨æˆ·</h1><ul>
<li><p>ç»§æ‰¿<code>WebSecurityConfigurerAdapter</code></p>
<ul>
<li><p>é‡å†™ <code>protected void configure(AuthenticationManagerBuilder auth)</code>.</p>
</li>
<li><p>å¼€å¯æ–¹æ³•çº§åˆ«æˆæƒ<code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="comment">//  å¯ç”¨æ–¹æ³•çº§åˆ«çš„è®¤è¯</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder; <span class="comment">//ç”¨äºå¯¹å¯†ç è¿›è¡ŒåŠ å¯†(å¿…é¡»çš„ï¼Œå¦åˆ™æ— æ³•å­˜å‚¨åˆ°å†…å®¹ä¸­)</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">                .password(passwordEncoder.encode(<span class="string">&quot;123456&quot;</span>))</span><br><span class="line">                .roles(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">                .password(passwordEncoder.encode(<span class="string">&quot;123&quot;</span>))</span><br><span class="line">                .roles(<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ <code>@PreAuthorize(value = &quot;hasAnyRole(&#39;admin&#39; , &#39;normal&#39;)&quot;)</code> è¿›è¡Œæˆæƒç»‘å®š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line">    <span class="meta">@PreAuthorize(value = &quot;hasAnyRole(&#x27;admin&#x27; , &#x27;normal&#x27;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloWorld</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello Spring Security&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ"><a href="#â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ" class="headerlink" title="â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ"></a>â›µæ•°æ®åº“ä¸­ç”¨æˆ·æˆæƒ</h1><ul>
<li>å®ä½“ç±»åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>dao</code>å±‚åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserInfoMapper</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">UserInfo</span> , <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>service</code>å±‚åˆ›å»º</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfoServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserInfoService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function">UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> userInfoMapper.<span class="title">findByUsername</span><span class="params">(username)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>service</code>å®ç°ç±»åˆ›å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfoServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserInfoService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserInfo <span class="title">findByUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userInfoMapper.findByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>é…ç½®è®¤è¯ï¼ˆå®ç° <code>UserDetailsService</code>ï¼‰</p>
<p><font color="red">æ³¨æ„:</font>ç”¨æˆ·æƒé™å‰é¢å¿…é¡»åŠ ä¸Š <code>ROLE_</code> </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;MyUserDetailService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyUserDetailService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        User user = <span class="keyword">null</span>;</span><br><span class="line">        UserInfo userInfo = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(username != <span class="keyword">null</span>)&#123;</span><br><span class="line">            userInfo = userInfoMapper.findByUsername(username);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userInfo != <span class="keyword">null</span>)&#123;</span><br><span class="line">            List&lt;GrantedAuthority&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            GrantedAuthority authority = <span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">&quot;ROLE_&quot;</span>+userInfo.getRole());</span><br><span class="line">            list.add(authority);</span><br><span class="line">            user  = <span class="keyword">new</span> User(userInfo.getUsername(),userInfo.getPassword(),list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆå§‹åŒ–æ•°æ®åº“æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcInit</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserInfoMapper userInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        PasswordEncoder encoder = <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">        UserInfo u = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        u.setPassword(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;admin&quot;</span>));</span><br><span class="line">        u.setUsername(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        u.setRole(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        userInfoMapper.save(u);</span><br><span class="line"></span><br><span class="line">        u = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        u.setRole(<span class="string">&quot;normal&quot;</span>);</span><br><span class="line">        u.setUsername(<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        u.setPassword(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;normal&quot;</span>));</span><br><span class="line">        userInfoMapper.save(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºé…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="comment">//  å¯ç”¨æ–¹æ³•çº§åˆ«çš„è®¤è¯</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;MyUserDetailService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userDetailsService;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//æ­¤å¤„åŠ å¯†æ–¹å¼å¿…é¡»ä¸åˆå§‹åŒ–æ—¶æ•°æ®åº“çš„åŠ å¯†æ–¹å¼ç›¸åŒ</span></span><br><span class="line">        auth.userDetailsService(userDetailsService).passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(ä¸‰):è‡ªå®šä¹‰ç™»å½•é¡µé¢</title>
    <url>/2021/07/13/SpringSecurity%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼"><a href="#ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼" class="headerlink" title="ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼"></a>ç™»å½•éªŒè¯çš„ä¸¤ç§æ¨¡å¼</h1><p>å¾ˆæ˜¾ç„¶åˆ†ä¸ºä¿©ç§æ¨¡å¼ï¼Œä¸€ç§ä¸ºå‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œå¦ä¸€ç§åˆ™æ˜¯å½“ä¸‹ç››è¡Œçš„å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œå¯¹äºè¿™ä¿©ç§å¼€å‘æ¨¡å¼ï¼Œè‡ªå®šä¹‰ç™»å½•é¡µé¢æœ‰ä¿©ç§ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œä½†å¯¹äºåç«¯æ¥è®²ï¼Œè¿™ä¸¤è€…åœ¨å®ç°<code>UserDetailsã€UserDetailsService</code>æ˜¯ä¸€è‡´çš„ï¼Œæ¥ä¸‹æ¥é€ä¸€è¯´æ˜å…¶ä¸ä¸€æ ·çš„éƒ¨åˆ†.</p>
<h2 id="å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"><a href="#å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹" class="headerlink" title="å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"></a>å‰åç«¯ä¸åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹</h2><ul>
<li>åœ¨<code>resource</code>ç›®å½•ä¸‹ <code>static</code> ä¸­åˆ›å»º <code>login.html</code>ï¼Œæ–¹ä¾¿æ¼”ç¤ºï¼Œè¿™é‡Œåªç¼–å†™äº†è¾ƒä¸ºç®€å•çš„è¡¨å•</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>éªŒè¯è®¿é—®<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç”¨æˆ·å&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¯†ç &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">VALUE</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç»§æ‰¿<code>WebSecurityConfigurerAdapter</code><ul>
<li>é‡å†™<code>protected void configure(HttpSecurity http)</code></li>
<li>é‡å†™<code>protected void configure(WebSecurity web)</code></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    web.ignoring().antMatchers(<span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and() <span class="comment">//è¡¨ç¤ºä¸€æ®µé…ç½®çš„ç»“æŸ</span></span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">        	<span class="comment">//æ”¾è¡Œå¦‚ä¸Šè¯·æ±‚</span></span><br><span class="line">            .permitAll() </span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><code>web.ignoring() </code>ç”¨æ¥é…ç½®å¿½ç•¥æ‰çš„ URL åœ°å€ï¼Œä¸€èˆ¬å¯¹äºé™æ€æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ­¤æ“ä½œã€‚</li>
<li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>XML</code>æ¥é…ç½® <code>Spring Security</code> ï¼Œé‡Œè¾¹ä¼šæœ‰ä¸€ä¸ªé‡è¦çš„æ ‡ç­¾ <code>&lt;http&gt;</code>ï¼Œ<code>HttpSecurity</code> æä¾›çš„é…ç½®æ–¹æ³• éƒ½å¯¹åº”äº†è¯¥æ ‡ç­¾ã€‚</li>
<li><code>authorizeRequests</code> å¯¹åº”äº† <code>&lt;intercept-url&gt;</code>ã€‚</li>
<li><code>formLogin</code> å¯¹åº”äº† <code>&lt;formlogin&gt;</code>ã€‚</li>
<li><code>and</code> æ–¹æ³•è¡¨ç¤ºç»“æŸå½“å‰æ ‡ç­¾ï¼Œä¸Šä¸‹æ–‡å›åˆ°<code>HttpSecurity</code>ï¼Œå¼€å¯æ–°ä¸€è½®çš„é…ç½®ã€‚</li>
<li><code>permitAll</code> è¡¨ç¤ºç™»å½•ç›¸å…³çš„é¡µé¢/æ¥å£ä¸è¦è¢«æ‹¦æˆªã€‚</li>
<li>æœ€åè®°å¾—å…³é—­ <code>csrf </code></li>
</ol>
<p>å½“æˆ‘ä»¬å®šä¹‰äº†ç™»å½•é¡µé¢ä¸º <code>/login.html </code>çš„æ—¶å€™ï¼Œ<code>Spring Security </code>ä¹Ÿä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ³¨å†Œä¸€ä¸ª <code>/login.html </code>çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£æ˜¯ <code>POST </code>è¯·æ±‚ï¼Œç”¨æ¥å¤„ç†ç™»å½•é€»è¾‘ã€‚</p>
<ol start="8">
<li>å¦‚æœæƒ³è¦è‡ªå®šä¹‰ç™»å½•æ¥å£åï¼Œ<code>SpringSecurity</code>ä¹Ÿæä¾›çš„ç›¸å…³çš„æ–¹å¼ï¼Œä½¿ç”¨ <code>loginProcessingUrl(url)</code>è¿›è¡Œè®¾ç½®ï¼Œ<code>action</code>å¤„åŒæ­¥æ›´æ”¹å³å¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">            .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"><a href="#å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹" class="headerlink" title="å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹"></a>å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸‹</h2><p>&emsp;&emsp;è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€å°†<code>SpringSecurity</code>çš„æ¥å£æä¾›ç»™å‰ç«¯è°ƒç”¨å³å¯ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†æˆ‘ä»¬è‡ªå·±åç«¯çš„ä¸šåŠ¡é€»è¾‘å³å¯ï¼Œå½“ç„¶äº†å‰åç«¯è¿˜æ˜¯ä¾æ—§éœ€è¦<code>Json</code>æ•°æ®è¿›è¡Œäº¤äº’çš„ï¼Œæ­¤æ—¶ä½œä¸ºåç«¯ä¸éœ€è¦ç®¡ç†æˆåŠŸå’Œå¤±è´¥åå¦‚ä½•è·³è½¬ï¼Œåªéœ€è¦è¿”å›çŠ¶æ€ç å’Œä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆè·³è½¬ç›´æ¥ç”©ç»™å‰ç«¯è¿›è¡Œåˆ¤æ–­.</p>
<blockquote>
<p>å‰åç«¯åˆ†ç¦»ä¹‹å‰ï¼š</p>
</blockquote>
<p>å¤„ç†ç™»å½•æˆåŠŸçš„é…ç½®ä¾æ‰˜äº: <code>defaultSuccessUrl</code> ï¼Œ<code>successForwardUrl</code></p>
<blockquote>
<p>å‰åç«¯åˆ†ç¦»åï¼š</p>
</blockquote>
<p>æ˜¾ç„¶è¿™æ ·åšå·²ç»ä¸å®é™…äº† ï¼Œé‚£ä¹ˆå°±éœ€è¦ <code>successHandler</code>äº†</p>
<ul>
<li><code>successHandler</code>ï¼ˆç™»å½•æˆåŠŸï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http.authorizeRequests()</span><br><span class="line">               .anyRequest().authenticated()</span><br><span class="line">               .and()</span><br><span class="line">               .formLogin()</span><br><span class="line">               .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">               .successHandler((req,resp,authentication)-&gt;&#123;</span><br><span class="line">                   <span class="comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">                   Object principal = authentication.getPrincipal();</span><br><span class="line">                   <span class="comment">//å®šä¹‰å“åº”ä½“æ•°æ®æ ¼å¼</span></span><br><span class="line">                   resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                   <span class="comment">//è·å–IOè¾“å‡ºæµ</span></span><br><span class="line">                   PrintWriter out = resp.getWriter();</span><br><span class="line">                   <span class="comment">//å°†æ•°æ®å†™å…¥å“åº”ä½“</span></span><br><span class="line">                   out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                   <span class="comment">//ç¡®ä¿å°†è¾“å‡ºæµä¸­æ•°æ®å…¨éƒ¨å–å‡º</span></span><br><span class="line">                   out.flush();ã€</span><br><span class="line">                   <span class="comment">//å…³é—­è¾“å‡ºæµ</span></span><br><span class="line">                   out.close();</span><br><span class="line">               &#125;)</span><br><span class="line">               .permitAll()</span><br><span class="line">               .and()</span><br><span class="line">               .csrf().disable();</span><br></pre></td></tr></table></figure>

<p><code>successHandler</code> æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª <code>AuthenticationSuccessHandler </code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æˆ‘ä»¬è¦å®ç°çš„æ–¹æ³•æ˜¯ <code>onAuthenticationSuccess</code></p>
<p><code>onAuthenticationSuccess </code>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>HttpServletRequest</code></li>
<li><code>HttpServletResponse</code></li>
<li><code>Authentication</code></li>
</ul>
<p>æœ‰äº†å‰ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™é‡Œéšå¿ƒæ‰€æ¬²çš„è¿”å›æ•°æ®äº†ã€‚åˆ©ç”¨<code> HttpServletRequest</code> æˆ‘ä»¬å¯ä»¥åšæœåŠ¡ç«¯è·³è½¬ï¼Œåˆ©ç”¨ <code>HttpServletResponse</code> æˆ‘ä»¬å¯ä»¥åšå®¢æˆ·ç«¯è·³è½¬ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¿”å› <code>JSON</code> æ•°æ®ã€‚</p>
<p>ç¬¬ä¸‰ä¸ª <code>Authentication</code> å‚æ•°åˆ™ä¿å­˜äº†æˆ‘ä»¬åˆšåˆšç™»å½•æˆåŠŸçš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<blockquote>
<p>åˆ©ç”¨<code>postman</code>è¿›è¡Œæ¥å£æµ‹è¯•ï¼ŒæˆåŠŸè¿”å›æ•°æ®</p>
</blockquote>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%B8%89%EF%BC%89/1.png" alt="image-20210713042108311"></p>
<ul>
<li><code>failureHandler</code>(ç™»å½•å¤±è´¥)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.failureHandler((req, resp, e) -&gt; &#123;</span><br><span class="line">                    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                    PrintWriter out = resp.getWriter();</span><br><span class="line">                    String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">if</span> (e <span class="keyword">instanceof</span> LockedException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¢«é”å®šï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> CredentialsExpiredException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;å¯†ç è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AccountExpiredException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> DisabledException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;è´¦æˆ·è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> BadCredentialsException) &#123;</span><br><span class="line">                        msg = <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥!&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(msg)));</span><br><span class="line">                    out.flush();</span><br><span class="line">                    out.close();</span><br><span class="line">                &#125;)</span><br></pre></td></tr></table></figure>



<h3 id="æœªç™»å½•æç¤º"><a href="#æœªç™»å½•æç¤º" class="headerlink" title="æœªç™»å½•æç¤º"></a>æœªç™»å½•æç¤º</h3><p>å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•å°±è®¿é—®ä¸€ä¸ªéœ€è¦è®¤è¯åæ‰èƒ½è®¿é—®çš„é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è®©ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œè€Œæ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªå°šæœªç™»å½•çš„æç¤ºï¼Œå‰ç«¯æ”¶åˆ°æç¤ºä¹‹åï¼Œå†è‡ªè¡Œå†³å®šé¡µé¢è·³è½¬ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.exceptionHandling() <span class="comment">//é¢å¤–çš„å¤„ç†</span></span><br><span class="line">.authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">            resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">            PrintWriter out = resp.getWriter();</span><br><span class="line">            out.write(<span class="string">&quot;å°šæœªç™»å½•ï¼Œè¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">        &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="æ³¨é”€ç™»å½•"><a href="#æ³¨é”€ç™»å½•" class="headerlink" title="æ³¨é”€ç™»å½•"></a>æ³¨é”€ç™»å½•</h2><p>æ³¨é”€ç™»å½•æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼ŒæŒ‰ç…§å‰é¢çš„é…ç½®ï¼Œæ³¨é”€ç™»å½•ä¹‹åï¼Œç³»ç»Ÿè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸åˆé€‚çš„ï¼Œå¦‚æœæ˜¯å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œæ³¨é”€ç™»å½•æˆåŠŸåè¿”å› JSON å³å¯ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.and()</span><br><span class="line">.logout()</span><br><span class="line">.logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">.logoutSuccessHandler((req, resp, authentication) -&gt; &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.write(<span class="string">&quot;æ³¨é”€æˆåŠŸ!&quot;</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;)</span><br><span class="line">.permitAll()</span><br><span class="line">.and()</span><br></pre></td></tr></table></figure>



<h2 id="å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ"><a href="#å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ" class="headerlink" title="å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ"></a>å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹çš„é…ç½®æ€»è§ˆ</h2><p>æ€»ä½“ä¸Šæ¥è¯´é…ç½®è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†æ˜¯è¿™äº›ä¸œè¥¿åªè¦å†™ä¸€æ¬¡ï¼Œä»¥åä½¿ç”¨å°±å¯ä»¥ç›´æ¥ç…§æ¬äº†hhh</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/doLogin&quot;</span>)</span><br><span class="line">            <span class="comment">//ç™»å½•æˆåŠŸå¤„ç†ç±»</span></span><br><span class="line">            .successHandler((req,resp,authentication)-&gt;&#123;</span><br><span class="line">                Object principal = authentication.getPrincipal();</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">//ç™»å½•å¤±è´¥å¤„ç†ç±»</span></span><br><span class="line">            .failureHandler((req, resp, e) -&gt; &#123;</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span> (e <span class="keyword">instanceof</span> LockedException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¢«é”å®šï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> CredentialsExpiredException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;å¯†ç è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AccountExpiredException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> DisabledException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;è´¦æˆ·è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> BadCredentialsException) &#123;</span><br><span class="line">                    msg = <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥!&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(msg)));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">        	<span class="comment">//é¿å…ä¼ªé€ è·¨åŸŸè¯·æ±‚</span></span><br><span class="line">            .csrf().disable()</span><br><span class="line">            <span class="comment">//é¢å¤–å¤„ç†ç±»</span></span><br><span class="line">            .exceptionHandling()</span><br><span class="line">            .authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">                        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                        PrintWriter out = resp.getWriter();</span><br><span class="line">                        out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(<span class="string">&quot;å°šæœªç™»å½•ï¼Œæ¸…å…ˆç™»å½•ï¼&quot;</span>)));</span><br><span class="line">                        out.flush();</span><br><span class="line">                        out.close();</span><br><span class="line">                    &#125;</span><br><span class="line">            )</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">//ç™»å‡ºæ³¨é”€æ“ä½œéƒ¨åˆ†</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">            .logoutSuccessHandler((req, resp, authentication) -&gt; &#123;</span><br><span class="line">                resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = resp.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(Result.failure(<span class="string">&quot;æ³¨é”€æˆåŠŸï¼&quot;</span>)));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(å››):ç»“åˆVueå®ç°å¼‚æ­¥ç™»å½•</title>
    <url>/2021/07/16/SpringSecurity%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸé—®é¢˜åˆ†æ"><a href="#ğŸé—®é¢˜åˆ†æ" class="headerlink" title="ğŸé—®é¢˜åˆ†æ"></a>ğŸé—®é¢˜åˆ†æ</h1><p>&emsp;&emsp;ä½¿ç”¨å¼‚æ­¥<code>axios</code>è¯·æ±‚çš„æ–¹å¼è¿›è¡Œç™»å½•ä¸ç›´æ¥ä½¿ç”¨ <code>postman</code> å‘é€ <code>post</code> è¯·æ±‚è¿›è¡Œæµ‹è¯• ï¼Œæäº¤æ•°æ®çš„æ–¹å¼ä¼¼ä¹ä¸å¤ªä¸€æ ·ï¼Œ<code>postman</code>èƒ½è·‘é€šï¼Œè€Œä½¿ç”¨<code>axios</code> ï¼Œåå°<code>loadUserByusername</code>è·å–ä¸åˆ°ç”¨æˆ·åï¼Œè¿™å°±å¾ˆå¥‡æ€ªï¼Œå¥ˆä½•çœ‹ä¸å¤ªæ‡‚æºç ï¼Œä¸»è¦æ˜¯å„ç§è®¾è®¡æ¨¡å¼æ²¡å­¦è¿‡ä»¥åŠåº•å±‚çš„å°è£…å±‚æ•°å¤ªå¤šäº†ï¼Œçœ‹çš„ä½¿äººå¿ƒç´¯ï¼Œäºæ˜¯å¼€å§‹é€›è®ºå›ä»¥åŠå¼€æºç½‘ç«™çœ‹åˆ«äººçš„ä»£ç ï¼Œåæ¥æ‰å‘ç°ï¼Œ<code>axios</code>æäº¤çš„å‚æ•°æ˜¯å­˜æ”¾åœ¨è¯·æ±‚ä½“å½“ä¸­çš„ï¼Œè€Œ<code>SpringSecurity</code>ä¸­çš„å¤„ç†é€»è¾‘ä½¿ç”¨äº† <code>request.getParameter</code> è¿›è¡Œå‚æ•°è·å–ï¼Œæœ‰è¿‡åŸå§‹è¡¨å•æˆ–è€… <code>servlet</code> å¼€å‘ç»éªŒçš„äººéƒ½çŸ¥é“ ï¼Œ æ­¤æ–¹æ³•åªèƒ½è·å–åˆ°ç±»ä¼¼äº <code>get</code>è¯·æ±‚ ä»¥åŠ ä»¥åŸå§‹è¡¨å•æ ¼å¼æäº¤çš„<code>post</code> æ•°æ® ï¼Œ ç„¶è€Œå°è¯•è¿‡åå‘ç° ï¼Œåˆ©ç”¨<code>axios</code>è¯·æ±‚ï¼Œå°†è¯·æ±‚å¤´è®¾ç½®ä¸€ä¸‹ï¼Œå³<code>Content-Type: application/x-www-form-urlencoded``;charset=utf-8</code> ï¼Œ å®‰å…¨æ¡†æ¶ä»ç„¶è§£æä¸åˆ°<code>username</code>ï¼Œæ­¤æ—¶å¿ƒæ€å·²ç»å´©äº†ï¼Œç„¶è€Œå°±åœ¨æ­¤æ—¶ï¼Œç¿»åˆ°ä¸€ç¯‡åšå®¢ï¼Œè®°è¿°åˆ°å¯ä»¥å°†ä¼ ç»ŸåŸç”Ÿçš„è¡¨å•æäº¤æ ¼å¼æ›´æ”¹ä¸º <code>get</code> æäº¤æ•°æ®çš„æ•°æ®æ ¼å¼ï¼Œå½“ç„¶äº†åªæ˜¯æ›´æ”¹äº†æ•°æ®æ ¼å¼ï¼Œå¹¶æ²¡æœ‰æ›´æ”¹è¯·æ±‚æ–¹å¼å“ˆ.</p>
<h1 id="ğŸ˜è§£å†³æ–¹æ¡ˆ"><a href="#ğŸ˜è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ğŸ˜è§£å†³æ–¹æ¡ˆ"></a>ğŸ˜è§£å†³æ–¹æ¡ˆ</h1><p>åˆ©ç”¨<code>qs</code> åŒ… ä¸­çš„ <code>stringify</code> æ–¹æ³•æ ¼å¼åŒ–æ•°æ®.</p>
<p>å…·ä½“ï¼š</p>
<ul>
<li>å…ˆå®‰è£…è¯¥åŒ… <code>npm install qs --save</code></li>
<li>ä¿®æ”¹å‰ç«¯æäº¤æ•°æ®çš„æ ¼å¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> http.request(&#123;</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">    data: qs.stringify(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•è¿‡åå¯ä»¥è¯·æ±‚æˆåŠŸï¼Œç‹‚å–œ~</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringSecurity(äºŒ):æ•´åˆmybatis</title>
    <url>/2021/07/12/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="æ„å»ºæ•°æ®åº“è¡¨"><a href="#æ„å»ºæ•°æ®åº“è¡¨" class="headerlink" title="æ„å»ºæ•°æ®åº“è¡¨"></a>æ„å»ºæ•°æ®åº“è¡¨</h1><ul>
<li>ç”¨æˆ·è¡¨:<code>sys_user</code><ul>
<li>å…¶ä¸­ <code>is_enable</code> ã€ <code>is_lock</code> ã€<code>is_credentials</code> ã€<code>is_expired</code> æ¥æºäº<code>SpringSecurity</code>ä¸­ç”¨æˆ·æŠ½è±¡ç±»ä¸­çš„å››ä¸ªå±æ€§ï¼Œæœ¬è´¨ä¸Šï¼Œè¿™å¼ è¡¨ä¹Ÿæ˜¯åŸºäºç”¨æˆ·æŠ½è±¡ç±»è¿›è¡Œè‡ªå®šä¹‰å®ç°çš„.</li>
</ul>
</li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/1.png"></p>
<ul>
<li>æƒé™è¡¨: <code>sys_role</code></li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" alt="image-20210712205655520"></p>
<ul>
<li>ç”¨æˆ·-æƒé™ä¸­é—´è¡¨ï¼š<code>sys_user_role</code></li>
</ul>
<p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/SpringSecurity%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" alt="image-20210712205805311"></p>
<h1 id="æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–"><a href="#æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–" class="headerlink" title="æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–"></a>æ„å»ºé¡¹ç›®ã€å¼•å…¥Mybatisä¾èµ–</h1><p>æ­¤æ­¥éª¤å°±ä¸å†è¿›è¡Œè¿‡å¤šèµ˜è¿°.</p>
<p><font color="red">Â æ³¨æ„ï¼š</font> <code>mybatis</code>å¹¶æ²¡æœ‰è‡ªåŠ¨å¼€å¯é©¼å³°å‘½åä¸ä¸‹åˆ’çº¿ä¹‹é—´çš„è½¬æ¢ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯(ç”¨ä¹ æƒ¯äº†<code>mybatis-plus</code> å¯¼è‡´æ‰¾è¿™ä¸ªbugæ‰¾äº†åŠå¤©QAQ)ï¼ŒåŒæ—¶ä¹Ÿè¦è®°å¾—åœ¨å¯åŠ¨ç±»å¤„åŠ ä¸Š<code>@MapperScan</code>è¿™ä¸ªæ³¨è§£.</p>
<h1 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h1><ul>
<li>ç”¨æˆ·ç±»å®ç° <code>UserDetails</code> ç±»ï¼Œå¹¶é‡å†™æ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUser</span> <span class="keyword">implements</span> <span class="title">UserDetails</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String realName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isEnable;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isLock;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isCredentials;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isExpired;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> Date loginTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;GrantedAuthority&gt; authorities;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isExpired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonLocked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isLock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCredentialsNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isCredentials;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isEnable;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æƒé™ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysRole</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleMemo;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRoleName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> roleName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleName</span><span class="params">(String roleName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.roleName = roleName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getRoleMemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> roleMemo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoleMemo</span><span class="params">(String roleMemo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.roleMemo = roleMemo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£"><a href="#åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£" class="headerlink" title="åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£"></a>åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£</h1><ul>
<li><code>SysUserMappper</code>ã€<code>xml</code>æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysUserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(SysUser user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">SysUser <span class="title">selectAllUsers</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.anthony.dao.SysUserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> &gt;</span></span><br><span class="line">        insert into sys_user</span><br><span class="line">            (username, password, real_name, is_enable, is_lock, is_credentials, create_time, login_time)</span><br><span class="line">        values</span><br><span class="line">            (#&#123;username&#125;,#&#123;password&#125;,#&#123;realName&#125;,#&#123;isEnable&#125;,#&#123;isLock&#125;,#&#123;isCredentials&#125;,#&#123;createTime&#125;,#&#123;loginTime&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.anthony.entity.SysUser&quot;</span>&gt;</span></span><br><span class="line">        select * from sys_user where username = #&#123;username&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>SysRoleMapper</code> ã€<code>xml</code>æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SysUserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(SysUser user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">SysUser <span class="title">selectAllUsers</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.anthony.dao.SysRoleMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.anthony.entity.SysRole&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.Integer&quot;</span> &gt;</span></span><br><span class="line">        select r.role_memo ,r.role_name</span><br><span class="line">        from sys_role r , sys_user_role ur</span><br><span class="line">        where ur.user_id = #&#123;id&#125; and ur.role_id = r.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="å®ç°ä¸šåŠ¡å±‚"><a href="#å®ç°ä¸šåŠ¡å±‚" class="headerlink" title="å®ç°ä¸šåŠ¡å±‚"></a>å®ç°ä¸šåŠ¡å±‚</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUserDetailService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysRoleMapper sysRoleMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserMapper sysUserMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        SysUser sysUsers = sysUserMapper.selectAllUsers(username);</span><br><span class="line">        System.out.println(<span class="string">&quot;=======&quot;</span>+ sysUsers.toString());</span><br><span class="line">        <span class="comment">//åˆ›å»ºæƒé™é›†åˆ</span></span><br><span class="line">        List&lt;GrantedAuthority&gt; authorities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(sysUsers != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;RoleæŸ¥è¯¢å¼€å§‹ï¼&quot;</span> + sysUsers.getId());</span><br><span class="line">            <span class="comment">//æŸ¥è¯¢ç”¨æˆ·æƒé™</span></span><br><span class="line">            SysRole sysRole = sysRoleMapper.selectAll(sysUsers.getId());</span><br><span class="line">            <span class="keyword">if</span>(sysRole == <span class="keyword">null</span>) System.out.println(<span class="string">&quot; =============null===========&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;RoleæŸ¥è¯¢å®Œæˆï¼&quot;</span> + sysRole.getRoleName());</span><br><span class="line">            <span class="comment">//æ³¨å†Œæƒé™ä¿¡æ¯</span></span><br><span class="line">            GrantedAuthority grantedAuthority = <span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">&quot;ROLE_&quot;</span>+sysRole.getRoleName());</span><br><span class="line">            System.out.println(<span class="string">&quot;å»ºç«‹æƒé™æˆåŠŸï¼&quot;</span>+ grantedAuthority.toString());</span><br><span class="line">            authorities.add(grantedAuthority);</span><br><span class="line">            System.out.println(<span class="string">&quot;æƒé™å&quot;</span>+ sysRole.getRoleName()+<span class="string">&quot;æƒé™æè¿°&quot;</span>+ sysRole.getRoleMemo());</span><br><span class="line">            <span class="comment">//è®¾ç½®æƒé™ä¿¡æ¯</span></span><br><span class="line">            sysUsers.setAuthorities(authorities);</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> sysUsers;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–å†™é…ç½®ç±»"><a href="#ç¼–å†™é…ç½®ç±»" class="headerlink" title="ç¼–å†™é…ç½®ç±»"></a>ç¼–å†™é…ç½®ç±»</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService service;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(auth);</span></span><br><span class="line">        <span class="comment">//å¡«å…¥è‡ªå®šä¹‰çš„ç”¨æˆ·ç±»ä¸å¯†ç åŠ å¯†æ–¹å¼</span></span><br><span class="line">        auth.userDetailsService(service).passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(http);</span></span><br><span class="line">        <span class="comment">//å‘é€æˆæƒè¯·æ±‚æ—¶</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">            	<span class="comment">//å½“è®¿é—®æ¥å£ /index</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/index&quot;</span>)</span><br><span class="line">            	<span class="comment">//å…è®¸è®¿é—®ä¸éœ€è¦ç™»å½•</span></span><br><span class="line">                .permitAll()</span><br><span class="line">            	<span class="comment">//è®¿é—®å¦‚ä¸‹æ¥å£ï¼Œéœ€è¦å…·æœ‰åé¢çš„èº«ä»½ä¿¡æ¯</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/access/user/**&quot;</span>).hasRole(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/access/admin/**&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            	<span class="comment">//æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯æˆæƒ</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">            	<span class="comment">//ä½¿ç”¨è¡¨å•ç™»å½•</span></span><br><span class="line">                .formLogin();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æ§åˆ¶å±‚"><a href="#æ§åˆ¶å±‚" class="headerlink" title="æ§åˆ¶å±‚"></a>æ§åˆ¶å±‚</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toIndexHtml</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è·³è½¬é¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/index.html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/access/user&quot;, produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hiUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello User!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/access/admin&quot;,produces = &quot;text/html;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hiAdmin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello admin!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringSecurity</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(ä¸€):ä»‹ç»ä¸èµ·æ­¥ä½¿ç”¨</title>
    <url>/2021/06/01/Vue%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Vue-jsä»‹ç»"><a href="#Vue-jsä»‹ç»" class="headerlink" title="Vue.jsä»‹ç»"></a>Vue.jsä»‹ç»</h1><p>â€‹        Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº <strong>view</strong>) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„<strong>æ¸è¿›å¼æ¡†æ¶</strong>ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸<a href="https://cn.vuejs.org/v2/guide/single-file-components.html">ç°ä»£åŒ–çš„å·¥å…·é“¾</a>ä»¥åŠå„ç§<a href="https://github.com/vuejs/awesome-vue#libraries--plugins">æ”¯æŒç±»åº“</a>ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ï¼Œå¹¶ä¸”é‡‡ç”¨äº†<code>SPA</code>çš„è®¾è®¡æ€æƒ³æ¥å¯¹é¡µé¢è¿›è¡Œå¼€å‘ï¼Œè®©å¼€å‘ååˆ†ä¾¿æºä¸”å¯ç»´æŠ¤æ€§å¾—åˆ°æé«˜.</p>
<h1 id="å¼•å…¥Vue"><a href="#å¼•å…¥Vue" class="headerlink" title="å¼•å…¥Vue"></a>å¼•å…¥Vue</h1><p>â€‹        å°è¯• Vue.js æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://codesandbox.io/s/github/vuejs/vuejs.org/tree/master/src/v2/examples/vue-20-hello-world">Hello World ä¾‹å­</a>ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å®ƒï¼Œè·Ÿç€ä¾‹å­å­¦ä¹ ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥<a href="https://github.com/vuejs/vuejs.org/blob/master/src/v2/examples/vue-20-hello-world/index.html">åˆ›å»ºä¸€ä¸ª <code>.html</code> æ–‡ä»¶</a>ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•å…¥ Vueï¼š</p>
<p><code>CDN</code>å¼•å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>æœ¬åœ°å¼•å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span><br><span class="line">&lt;!--è¿›å…¥ç½‘ç«™ï¼Œä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œåœ¨æœ¬åœ°å¼•å…¥å³å¯ --&gt;</span><br><span class="line">https:<span class="comment">//cdn.jsdelivr.net/npm/vue/dist/vue.js</span></span><br></pre></td></tr></table></figure>





<h1 id="Vueå®ä¾‹"><a href="#Vueå®ä¾‹" class="headerlink" title="Vueå®ä¾‹"></a>Vueå®ä¾‹</h1><p>â€‹        ä½¿ç”¨ <code>Vue</code> å¼€å‘ï¼Œéµå¾ªåªæœ‰ä¸€ä¸ª<code>Vue</code>å®ä¾‹çš„åŸåˆ™ï¼Œè¿™ä¸€ç‚¹åœ¨ä»¥åä½¿ç”¨äº†<code>vue-cli</code>ä»¥åä¼šæ›´åŠ æ˜äº†ï¼Œè¿™é‡Œå…ˆä¸åšèµ˜è¿°.</p>
<p><strong>åˆ›å»ºä¸€ä¸ª<code>Vue</code>å®ä¾‹</strong></p>
<p>å…ˆå¤§è‡´äº†è§£ä¸‹ä¸€ä¸ª <code>Vue</code> å®ä¾‹èƒ½å†™å“ªäº›ä¸œè¥¿å…ˆå¤§è‡´ä¸Šè®¤è¯†ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œä»¥åä¼šæ…¢æ…¢ä»‹ç»ï¼Œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">//æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span></span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span> ,</span><br><span class="line">    <span class="comment">//å£°æ˜æ•°æ®</span></span><br><span class="line">    data: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ç¼–å†™å‡½æ•°</span></span><br><span class="line">    methods: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ç”¨äºæ³¨å†Œç»„ä»¶</span></span><br><span class="line">    components: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    computed: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//ä»¥ä¸‹å‡æ˜¯Vueå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåé¢ä¼šæ…¢æ…¢è®²åˆ°</span></span><br><span class="line">    beforeCreate: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    created: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    updated: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Vue</code>å®ä¾‹å½“ä¸­çš„ <code>data</code>  å¯ä»¥é€šè¿‡å£°æ˜ <code>js</code> å¯¹è±¡çš„æ–¹å¼ï¼Œåœ¨å¤–éƒ¨èµ‹å€¼ï¼Œåœ¨å†…éƒ¨ä½¿ç”¨å˜é‡ç›´æ¥ä½¿ç”¨.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    name : <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    data: data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h1 id="æ¨¡æ¿è¯­æ³•"><a href="#æ¨¡æ¿è¯­æ³•" class="headerlink" title="æ¨¡æ¿è¯­æ³•"></a>æ¨¡æ¿è¯­æ³•</h1><p>â€‹        Vue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œå…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³åº•å±‚ Vue å®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰ Vue.js çš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLï¼Œæ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚</p>
<p>åœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶ï¼Œå¹¶æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚</p>
<p>å¦‚æœä½ ç†Ÿæ‚‰è™šæ‹Ÿ DOM å¹¶ä¸”åçˆ± JavaScript çš„åŸå§‹åŠ›é‡ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¨¡æ¿ï¼Œ<a href="https://cn.vuejs.org/v2/guide/render-function.html">ç›´æ¥å†™æ¸²æŸ“ (render) å‡½æ•°</a>ï¼Œä½¿ç”¨å¯é€‰çš„ JSX è¯­æ³•ã€‚</p>
<h2 id="Mustacheè¯­æ³•"><a href="#Mustacheè¯­æ³•" class="headerlink" title="Mustacheè¯­æ³•"></a><strong>Mustacheè¯­æ³•</strong></h2><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p>æ–‡æœ¬æ•°æ®ç»‘å®šç»å¸¸ä½¿ç”¨åˆ°çš„åŒå¤§æ‹¬å·ç»‘å®šï¼š<code>&#123;&#123; msg &#125;&#125;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨æ„å¤–å±‚éœ€è¦ç”¨ id = app çš„å—çº§å…ƒç´ è¿›è¡ŒåŒ…è£¹--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¿™æ ·å°±å¯ä»¥ä»å®ä¾‹ä¸­å–å‡ºå€¼,å¹¶ä¸”æ¸²æŸ“åœ¨é¡µé¢ä¸Š--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœåŠ å…¥äº† v-once é‚£ä¹ˆè¿™ä¸ªå€¼å°±ä¸ä¼šéšç€ å®ä¾‹ä¸­å‚æ•°å€¼çš„å˜åŒ–è€Œå˜åŒ–äº†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨<code>vue</code>å®ä¾‹å½“ä¸­å£°æ˜è¿™ä¸ªæ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    name : <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    data: data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>â€‹    **æ³¨æ„:**å¦‚æœ<code>data</code>ä¸­çš„å±æ€§å€¼ä¸­æœ‰<code>html</code> æ ‡ç­¾ï¼Œå¦‚æœæƒ³è¦è§£æè¿™ä¸ªæ ‡ç­¾ï¼Œéœ€è¦åœ¨ä½¿ç”¨æ•°æ®çš„æ ‡ç­¾ä¸ŠåŠ ä¸Š <code>v-html</code>è¿™ä¸ªå±æ€§.</p>
<h3 id="ä½¿ç”¨JavaScriptè¡¨è¾¾å¼"><a href="#ä½¿ç”¨JavaScriptè¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨JavaScriptè¡¨è¾¾å¼"></a>ä½¿ç”¨<code>JavaScriptè¡¨è¾¾å¼</code></h3><p>â€‹        è¿„ä»Šä¸ºæ­¢ï¼Œåœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åªç»‘å®šç®€å•çš„ property é”®å€¼ã€‚ä½†å®é™…ä¸Šï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®šï¼ŒVue.js éƒ½æä¾›äº†å®Œå…¨çš„ JavaScript è¡¨è¾¾å¼æ”¯æŒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;&#123; number + <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? <span class="string">&#x27;YES&#x27;</span> : <span class="string">&#x27;NO&#x27;</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>) &#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â€‹        è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å± Vue å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸º JavaScript è¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«<strong>å•ä¸ªè¡¨è¾¾å¼</strong>ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½<strong>ä¸ä¼š</strong>ç”Ÿæ•ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">var</span> a = <span class="number">1</span> &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;</span><br><span class="line">&#123;&#123; <span class="keyword">if</span> (ok) &#123; <span class="keyword">return</span> message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€ç»‘å®š"><a href="#åŠ¨æ€ç»‘å®š" class="headerlink" title="åŠ¨æ€ç»‘å®š"></a>åŠ¨æ€ç»‘å®š</h2><p>â€‹        é€šå¸¸æƒ…å†µä¸‹ï¼Œé¡µé¢ä¸­çš„æ•°æ®å¹¶ä¸æ˜¯æ°¸è¿œä¸ä¼šå˜çš„ï¼Œå¯èƒ½åœ¨è§¦å‘æŸäº›æ—¶é—´è¿‡åä¼šå®æ—¶æ›´æ–°æ•°æ®ï¼Œå½“ç„¶äº†ï¼Œè¿™é‡Œä¸æ˜¯æŒ‡<code>&#123;&#123; &#125;&#125;</code>ä¸­çš„æ•°æ®ï¼Œå› ä¸ºè¿™é‡Œé¢çš„æ•°æ®æœ¬èº«å°±ç”±<code>vue</code>æ¥ç®¡ç†æ¥è¿›è¡ŒåŠ¨æ€æ›´æ–°çš„.è¿™é‡Œçš„åŠ¨æ€ç»‘å®šæŒ‡çš„æ˜¯æ ‡ç­¾çš„å±æ€§å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒåŠ¨æ€çš„æ›´æ–°. </p>
<h3 id="v-bind-çš„ä½¿ç”¨"><a href="#v-bind-çš„ä½¿ç”¨" class="headerlink" title="**v-bind**çš„ä½¿ç”¨"></a>**<code>v-bind</code>**çš„ä½¿ç”¨</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">  //å½“å¯¹ h2 æ ‡ç­¾ä¸è¿›è¡Œä»»ä½•å¤„ç† æ˜¯æ— æ³•è¯»å–åˆ°ids æˆ‘ä»¬éœ€è¦å°† idå±æ€§äº¤ç»™ vueå»ç®¡ç†å°±å¯ä»¥è¯»å–åˆ°äº†</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">       &lt;h2 id =&quot;ids&quot;&gt;&lt;/h2&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;script&gt;</span><br><span class="line">       let app = new Vue(&#123;</span><br><span class="line">           //æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span><br><span class="line">           el: &#x27;#app&#x27; ,</span><br><span class="line">           //å£°æ˜æ•°æ®</span><br><span class="line">           data: &#123;</span><br><span class="line">               ids: &quot;test&quot;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®çš„æ–¹å¼åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹å³å¯ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-bind:id</span> = <span class="string">&quot;ids&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:id</span> = <span class="string">&quot;ids&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="v-onçš„ä½¿ç”¨"><a href="#v-onçš„ä½¿ç”¨" class="headerlink" title="v-onçš„ä½¿ç”¨"></a><strong><code>v-on</code>çš„ä½¿ç”¨</strong></h3><p>å¦‚æœéœ€è¦ä½¿ç”¨<code>vue </code> å®ä¾‹å½“ä¸­çš„ <code>methods</code> åŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè§¦å‘äº‹ä»¶äº¤ç»™ <code>vue </code>å»ç®¡ç† </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æˆ–è€… åŠ¨æ€ç»‘å®šäº‹ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @[<span class="attr">event</span>]=<span class="string">&quot;test&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>vue</code>ä¸­çš„æ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">      <span class="comment">//æŒ‚è½½htmlå…ƒç´ ,ä½¿ç”¨idè¿›è¡ŒæŒ‚è½½ç»‘å®šï¼Œå› ä¸ºidå…·æœ‰å”¯ä¸€æ€§</span></span><br><span class="line">      el: <span class="string">&#x27;#app&#x27;</span> ,</span><br><span class="line">      <span class="comment">//å£°æ˜æ•°æ®</span></span><br><span class="line">      data: &#123;</span><br><span class="line">          ids: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">          event: <span class="string">&quot;click&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    	methods: &#123;</span><br><span class="line">          <span class="comment">//ES5å†™æ³•</span></span><br><span class="line">          test: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">              </span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">//ES6å†™æ³•</span></span><br><span class="line">          <span class="function"><span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">              </span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue(äºŒ):æ•´åˆmavon-editor</title>
    <url>/2021/07/22/Vue%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>å‰è¨€ï¼šä¸å¾—ä¸è¯´æˆ‘è¿˜æ˜¯å¤ªæ‡’äº†ï¼Œå‰ç«¯éƒ¨åˆ†çš„æ–‡ç« ä¸€ç›´æ²¡æœ‰å†™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰ä»€ä¹ˆå…´è‡´å†™ï¼Œç°åœ¨è¶ç€æœ‰æ—¶é—´è¿˜æ˜¯å†™å†™å§ï¼ŒVueæœ€è¿‘ä¹Ÿç®—æ˜¯ç”¨çš„æœ‰ç‚¹æ„Ÿè§‰äº†ï¼Œç»„ä»¶åŒ–æ€æƒ³æœ‰ä¸€è¯´ä¸€ï¼Œå¯¹äºä¸ªäººå¼€å‘è€…è€Œè¨€ï¼Œå¼€å‘å°å‹é¡¹ç›®è¿˜æ˜¯ç”¨åç«¯æ¨¡æ¿å†™å‰ç«¯æ¯”è¾ƒæ–¹ä¾¿hhh.</p>
</blockquote>
<h1 id="ğŸš€ä¸‹è½½å®‰è£…-mavon-editor"><a href="#ğŸš€ä¸‹è½½å®‰è£…-mavon-editor" class="headerlink" title="ğŸš€ä¸‹è½½å®‰è£… mavon-editor"></a>ğŸš€ä¸‹è½½å®‰è£… mavon-editor</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install mavon-editor --save</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ›°ä½¿ç”¨-mavon-editor"><a href="#ğŸ›°ä½¿ç”¨-mavon-editor" class="headerlink" title="ğŸ›°ä½¿ç”¨ mavon-editor"></a>ğŸ›°ä½¿ç”¨ mavon-editor</h1><h2 id="åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨"><a href="#åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨"></a>åœ¨éœ€è¦çš„ç»„ä»¶ä¸­ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;mavon-editor v-model&#x3D;&quot;content&quot; </span><br><span class="line">                  :codeStyle&#x3D;&quot;codeStyle&quot;</span><br><span class="line">                  &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mavonEditor &#125; from &#39;mavon-editor&#39;</span><br><span class="line">import &#39;mavon-editor&#x2F;dist&#x2F;css&#x2F;index.css&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;MavonEditor&#39;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      content: &#39;&#39;,</span><br><span class="line">      codeStyle: &#39;ä¸»é¢˜&#39;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    mavonEditor</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š<code>content</code> ä¿å­˜çš„ä¸ºmdè¯­æ³•ï¼Œ<code>codeStyle</code>å±æ€§å¯ä»¥æ›´æ¢ä»£ç å—çš„ä¸»é¢˜ï¼Œå…·ä½“æœ‰å“ªäº›ä¸»é¢˜å¯ä»¥å‚è€ƒä¸€ä¸‹  <a href="https://github.com/hinesboy/mavonEditor/blob/HEAD/src/lib/core/hljs/lang.hljs.css.js"><font color="red">å¯é€‰ä¸»é¢˜è¡¨</font></a>  , æ¯ä¸€ç§ä¸»é¢˜çš„æ ·å¼å¯ä»¥å‚è€ƒ<a href="https://highlightjs.org/static/demo/"> <code>highlight.js</code>demoæ–‡æ¡£</a>  ï¼Œ æ›´å¤šç›¸å…³çš„è®¾ç½®å¯ä»¥å‚è€ƒæ–‡æ¡£ : <a href="https://www.npmjs.com/package/mavon-editor">mavon-editorå‚è€ƒæ–‡æ¡£</a> </p>
<h2 id="å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ "><a href="#å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ " class="headerlink" title="å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ "></a>å®ç°ç¼–è¾‘å™¨ä¸­å®æ—¶å›¾ç‰‡ä¸Šä¼ </h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;mavon-editor ref&#x3D;md @imgAdd&#x3D;&quot;imgAdd&quot; @imgDel&#x3D;&quot;$imgDel&quot;&gt;&lt;&#x2F;mavon-editor&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    exports default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        &#x2F;&#x2F; ç»‘å®š@imgAdd event</span><br><span class="line">        imgAdd(pos, $file)&#123;</span><br><span class="line">		   let _this &#x3D; this</span><br><span class="line">            &#x2F;&#x2F; ç¬¬ä¸€æ­¥.å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨.</span><br><span class="line">           var formdata &#x3D; new FormData();</span><br><span class="line">           formdata.append(&#39;image&#39;, $file);</span><br><span class="line">           axios(&#123;</span><br><span class="line">               url: &#39;å›¾ç‰‡ä¸Šä¼ apiè·¯å¾„&#39;,</span><br><span class="line">               method: &#39;post&#39;,</span><br><span class="line">               data: formdata,</span><br><span class="line">               headers: &#123; &#39;Content-Type&#39;: &#39;multipart&#x2F;form-data&#39; &#125;,</span><br><span class="line">           &#125;).then((url) &#x3D;&gt; &#123;</span><br><span class="line">               _this.$refs.md.$img2Url(pos, url);</span><br><span class="line">           &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°çš„å†™æ³•æ¯”è¾ƒå›ºå®šï¼ŒæŒ‰ç€å¦‚ä¸Šæ–¹å¼å†™å³å¯.</p>
<p>æ³¨æ„æ›¿æ¢çš„æ–¹å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†è¿”å›çš„urlæ›¿æ¢åˆ°æ–‡æœ¬åŸä½ç½®![...](0) -&gt; ![...](url)  æ›¿æ¢æ–¹å¼ä¸º: $vm.$img2Url(pos , url)</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $vm æŒ‡ä¸ºmavonEditorå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ç§æ–¹å¼è·å–</span></span><br><span class="line"><span class="comment"> * 1. é€šè¿‡å¼•å…¥å¯¹è±¡è·å–: `import &#123;mavonEditor&#125; from ...` ç­‰æ–¹å¼å¼•å…¥åï¼Œ`$vm`ä¸º`mavonEditor`</span></span><br><span class="line"><span class="comment"> * 2. é€šè¿‡$refsè·å–: htmlå£°æ˜ref : `&lt;mavon-editor ref=md &gt;&lt;/mavon-editor&gt;ï¼Œ`$vm`ä¸º`this.$refs.md`</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·Git</title>
    <url>/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/</url>
    <content><![CDATA[<h1 id="ğŸ”å‰è¨€"><a href="#ğŸ”å‰è¨€" class="headerlink" title="ğŸ”å‰è¨€"></a>ğŸ”å‰è¨€</h1><p>&emsp;&emsp;åœ¨å­¦ä¹ çš„ <code>Vue-Cli</code> è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°<code>Git</code>çš„é…ç½®ï¼Œç”±æ­¤æ‰å¼€å§‹ï¼Œè™½ç„¶ä»¥å‰äº†è§£è¿‡ <code>Git</code> ä½†æ˜¯å¹¶ä¸çŸ¥é“ <code>Git</code> å…·ä½“èƒ½å¸®åŠ©æˆ‘å¹²ä»€ä¹ˆï¼Œç°åœ¨æƒ³æ¥å½“æ—¶è¿˜æ˜¯å¤ªå¹´è½»äº†å“ˆï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚ğŸ˜ç¡®ä¿¡ï¼Œä¹Ÿæ­£æ˜¯ç”±æ­¤è®©æˆ‘æ­å»ºäº†è‡ªå·±çš„åšå®¢Â·Â·Â·Â·</p>
<h1 id="ğŸ‰Gitçš„ç›¸å…³ä»‹ç»"><a href="#ğŸ‰Gitçš„ç›¸å…³ä»‹ç»" class="headerlink" title="ğŸ‰Gitçš„ç›¸å…³ä»‹ç»"></a>ğŸ‰Gitçš„ç›¸å…³ä»‹ç»</h1><p><strong>äº†è§£ <code>Git</code> ä¹‹å‰å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ</strong></p>
<blockquote>
<p>&emsp;&emsp;ç‰ˆæœ¬æ§åˆ¶ï¼ˆRevision controlï¼‰æ˜¯ä¸€ç§åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç”¨äºç®¡ç†æˆ‘ä»¬å¯¹æ–‡ä»¶ã€ç›®å½•æˆ–å·¥ç¨‹ç­‰å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ›´æ”¹å†å²è®°å½•ï¼Œå¤‡ä»½ä»¥ä¾¿æ¢å¤ä»¥å‰çš„ç‰ˆæœ¬çš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯ã€‚     </p>
</blockquote>
<ul>
<li>å®ç°è·¨åŒºåŸŸå¤šäººååŒå¼€å‘</li>
<li>è¿½è¸ªå’Œè®°è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶çš„å†å²è®°å½•</li>
<li>ç»„ç»‡å’Œä¿æŠ¤ä½ çš„æºä»£ç å’Œæ–‡æ¡£</li>
<li>ç»Ÿè®¡å·¥ä½œé‡</li>
<li>å¹¶è¡Œå¼€å‘ã€æé«˜å¼€å‘æ•ˆç‡</li>
<li>è·Ÿè¸ªè®°å½•æ•´ä¸ªè½¯ä»¶çš„å¼€å‘è¿‡ç¨‹</li>
<li>å‡è½»å¼€å‘äººå‘˜çš„è´Ÿæ‹…ï¼ŒèŠ‚çœæ—¶é—´ï¼ŒåŒæ—¶é™ä½äººä¸ºé”™è¯¯</li>
</ul>
<p>&emsp;&emsp;ç®€å•è¯´å°±æ˜¯ç”¨äºç®¡ç†å¤šäººååŒå¼€å‘é¡¹ç›®çš„æŠ€æœ¯ã€‚</p>
<p>&emsp;&emsp;æ²¡æœ‰è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æˆ–è€…ç‰ˆæœ¬æ§åˆ¶æœ¬èº«ç¼ºä¹æ­£ç¡®çš„æµç¨‹ç®¡ç†ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å°†ä¼šå¼•å…¥å¾ˆå¤šé—®é¢˜ï¼Œå¦‚è½¯ä»¶ä»£ç çš„ä¸€è‡´æ€§ã€è½¯ä»¶å†…å®¹çš„å†—ä½™ã€è½¯ä»¶è¿‡ç¨‹çš„äº‹ç‰©æ€§ã€è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å¹¶å‘æ€§ã€è½¯ä»¶æºä»£ç çš„å®‰å…¨æ€§ï¼Œä»¥åŠè½¯ä»¶çš„æ•´åˆç­‰é—®é¢˜ã€‚</p>
<p>&emsp;&emsp;æ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯å­¦ä¹ ï¼Œæˆ–è€…æ˜¯è‡ªå·±åšç¬”è®°ï¼Œéƒ½ç»å†è¿‡è¿™æ ·ä¸€ä¸ªé˜¶æ®µï¼æˆ‘ä»¬å°±è¿«åˆ‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼</p>
<p>ç‰ˆæœ¬æ§åˆ¶å™¨æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p>
<ul>
<li><strong>Git</strong></li>
<li><strong>SVN</strong>ï¼ˆSubversionï¼‰</li>
<li><strong>CVS</strong>ï¼ˆConcurrent Versions Systemï¼‰</li>
<li><strong>VSS</strong>ï¼ˆMicorosoft Visual SourceSafeï¼‰</li>
<li><strong>TFS</strong>ï¼ˆTeam Foundation Serverï¼‰</li>
<li>Visual Studio Online</li>
</ul>
<p>ç‰ˆæœ¬æ§åˆ¶äº§å“éå¸¸çš„å¤šï¼ˆPerforceã€Rational ClearCaseã€RCSï¼ˆGNU Revision Control Systemï¼‰ã€Serena Dimentionã€SVKã€BitKeeperã€Monotoneã€Bazaarã€Mercurialã€SourceGear Vaultï¼‰ï¼Œç°åœ¨å½±å“åŠ›æœ€å¤§ä¸”ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Gitä¸SVN.</p>
<p><strong>1ã€é›†ä¸­ç‰ˆæœ¬æ§åˆ¶  SVN</strong></p>
<p>&emsp;&emsp;æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼ŒååŒå¼€å‘è€…ä»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ›´æ–°æˆ–ä¸Šä¼ è‡ªå·±çš„ä¿®æ”¹ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·çš„æœ¬åœ°åªæœ‰è‡ªå·±ä»¥å‰æ‰€åŒæ­¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸è¿ç½‘çš„è¯ï¼Œç”¨æˆ·å°±çœ‹ä¸åˆ°å†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•åˆ‡æ¢ç‰ˆæœ¬éªŒè¯é—®é¢˜ï¼Œæˆ–åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œã€‚è€Œä¸”ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å•ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤§çš„é£é™©è¿™ä¸ªæœåŠ¡å™¨ä¼šæŸåï¼Œè¿™æ ·å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®ï¼Œå½“ç„¶å¯ä»¥å®šæœŸå¤‡ä»½ã€‚ä»£è¡¨äº§å“ï¼šSVNã€CVSã€VSS</p>
<p><strong>2ã€åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶  Git</strong></p>
<p>&emsp;&emsp;æ¯ä¸ªäººéƒ½æ‹¥æœ‰å…¨éƒ¨çš„ä»£ç ï¼å®‰å…¨éšæ‚£ï¼</p>
<p>&emsp;&emsp;æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä»“åº“å…¨éƒ¨åŒæ­¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç”¨æˆ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥ç¦»çº¿åœ¨æœ¬åœ°æäº¤ï¼Œåªéœ€åœ¨è¿ç½‘æ—¶pushåˆ°ç›¸åº”çš„æœåŠ¡å™¨æˆ–å…¶ä»–ç”¨æˆ·é‚£é‡Œã€‚ç”±äºæ¯ä¸ªç”¨æˆ·é‚£é‡Œä¿å­˜çš„éƒ½æ˜¯æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®ï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡æ²¡æœ‰é—®é¢˜å°±å¯ä»¥æ¢å¤æ‰€æœ‰çš„æ•°æ®ï¼Œä½†è¿™å¢åŠ äº†æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å ç”¨ï¼Œä¸ä¼šå› ä¸ºæœåŠ¡å™¨æŸåæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œé€ æˆä¸èƒ½å·¥ä½œçš„æƒ…å†µï¼</p>
<p><strong>3.Gitä¸SVNçš„ä¸»è¦åŒºåˆ«</strong></p>
<p>&emsp;&emsp;SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå·¥ä½œçš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå·¥ä½œï¼Œå®Œæˆå·¥ä½œåï¼Œéœ€è¦æŠŠè‡ªå·±åšå®Œçš„æ´»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¯¹ç½‘ç»œå¸¦å®½è¦æ±‚è¾ƒé«˜ã€‚</p>
<p>&emsp;&emsp;Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œå·¥ä½œçš„æ—¶å€™ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬éƒ½åœ¨è‡ªå·±ç”µè„‘ä¸Šã€‚ååŒçš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šæ¯”å¦‚è¯´è‡ªå·±åœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œå…¶ä»–äººä¹Ÿåœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¸¤ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚Gitå¯ä»¥ç›´æ¥çœ‹åˆ°æ›´æ–°äº†å“ªäº›ä»£ç å’Œæ–‡ä»¶ï¼</p>
<p><strong>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</strong></p>
<h1 id="ğŸˆGitçš„å®‰è£…"><a href="#ğŸˆGitçš„å®‰è£…" class="headerlink" title="ğŸˆGitçš„å®‰è£…"></a>ğŸˆGitçš„å®‰è£…</h1><p>&emsp;&emsp;é€šå¸¸æƒ…å†µä¸‹è½½ <a href="https://git-scm.com/"><code>Git</code></a> (ç‚¹å‡»è·³è½¬)åœ¨å®˜ç½‘ä¸‹è½½ï¼Œç”±äºå±äºå›½å¤–ç½‘ç«™ï¼Œè™½ç„¶æ–‡ä»¶å°ï¼Œä½†æ˜¯ä¸‹è½½é€Ÿåº¦æå…¶æ…¢ï¼Œäºæ˜¯æ¨èä½¿ç”¨ <a href="http://npm.taobao.org/mirrors/git-for-windows/"><code>æ·˜å®é•œåƒ</code></a> (ç‚¹å‡»è·³è½¬)ä¸‹è½½ï¼Œæ˜¯ä¸æ˜¯ä¼šç–‘æƒ‘ä»€ä¹ˆæ˜¯ <code>æ·˜å®é•œåƒ</code> ï¼Ÿé€šä¿—çš„æ¥è®²ï¼Œå°±æ˜¯æ·˜å®æŠŠå›½å¤–ç½‘ç«™çš„ä¸œè¥¿ä¸‹å¥½äº†æ”¾åœ¨å›½å†…çš„ç½‘ç«™ä¸­ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘ä»¬é«˜é€Ÿä¸‹è½½ï¼Œç±»ä¼¼çš„è¿˜æœ‰ <code>é˜¿é‡Œé•œåƒ</code> ä¹Ÿååˆ†å¸¸ç”¨.</p>
<p>&emsp;&emsp;å›åˆ°æ­£é¢˜ï¼Œä¸‹è½½å¥½ä¹‹åï¼Œæœ‰ä¸€è¯´ä¸€é™¤äº†æ›´æ”¹å®‰è£…è·¯å¾„å¤–ï¼Œå…¶ä½™çš„éƒ½ç‚¹nextå³å¯~~  å®‰è£…çš„æ—¶å€™ä¼šå¸®åŠ©ä½ é…ç½®å¥½<code>ç¯å¢ƒå˜é‡</code>ï¼Œå…¶å® <code>Git</code> çš„è¿è¡Œé™ªä¸é…ç½®éƒ½è¡Œï¼Œé…ç½®äº†ä¹‹ååªæ˜¯è®©ä½ åœ¨è®¡ç®—æœºçš„ä»»æ„ä½ç½®ï¼Œé¼ æ ‡å³é”®è¿›è¡Œé€‰æ‹©å¯ä»¥ä½¿ç”¨ <code>Git Bash / Git GUI</code> .</p>
<p>&emsp;&emsp;åœ¨è¿›è¡Œè¿›ä¸€æ­¥é…ç½®ä¹‹å‰ï¼Œå»ºè®®å…ˆæ³¨å†Œä¸€ä¸ª <a href="https://gitee.com/"><code>Gitee/GitHub</code></a>  (ç‚¹å‡»è·³è½¬)çš„è´¦å·(æ­¤å¤„ä»¥ <code>Gitee</code> ä¸ºä¾‹ï¼Œæ²¡é”™å°±æ˜¯å› ä¸º <code>Gitee</code> æ˜¯å›½å†…çš„è®¿é—®æ¯”è¾ƒå¿«)ï¼Œå»ºè®®ç”¨è‹±æ–‡åä¸”å…¨éƒ¨å°å†™ä¸å«ç©ºæ ¼çš„é‚£ç§ï¼Œç”¨å¤§å†™è¿‡åé…ç½®ä»£ç æ‰˜ç®¡å¤§æ¦‚ç‡ä¼šå‡ºé—®é¢˜ï¼Œè°è¸©å‘è°çŸ¥é“.</p>
<p>&emsp;&emsp;æ¥ä¸‹æ¥ç»™å‡ºä¸€äº› <code>Git</code> çš„å¸¸è§å‘½ä»¤(åœ¨ <code>Git Bash</code> ä¸­ä½¿ç”¨)ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹ç³»ç»Ÿconfig</span><br><span class="line">git config --system --list</span><br><span class="line">ã€€ã€€</span><br><span class="line">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span><br><span class="line">git config --global  --list</span><br><span class="line"></span><br><span class="line">#è®¾ç½®ç”¨æˆ·æ˜µç§°è¦ä¸Giteeçš„ç”¨æˆ·åä¸€è‡´</span><br><span class="line">git config --global user.name &quot;username&quot; </span><br><span class="line"></span><br><span class="line">#è®¾ç½®ç”¨æˆ·é‚®ç®±,å¦‚æœGiteeç»‘å®šäº†ï¼Œä¹Ÿç”¨ä¸€æ ·çš„å°±è¡Œ</span><br><span class="line">git config --global user.email &quot;youremail&quot;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è¿›å…¥ C:\Users\Administrator\.ssh ç›®å½• å¦‚æœæ²¡æœ‰è‡ªå·±å°±å»ºä¸€ä¸ª</span><br><span class="line"># ç”Ÿæˆå…¬é’¥,è¿‡åä¼šåœ¨.sshä¸­ç”Ÿæˆä¸€ä¸ª id_rsa ä»¥åŠ id_rsa.pub  åˆ†åˆ«ä¸ºç§äººç§˜é’¥å’Œå…¬å¼€ç§˜é’¥ ï¼Œå…¬å¼€ç§˜é’¥å¯ä»¥è§£å¯†ä¸ºç§é’¥</span><br><span class="line">#æˆ‘ä»¬è¿‡åé…ç½®æ‰˜ç®¡ä»“åº“ä¼šç”¨åˆ° å…¬é’¥</span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;è‡³æ­¤å®‰è£…å’Œç›¸å…³é…ç½®å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥ä¼šä»‹ç»Linuxçš„å¸¸ç”¨å‘½ä»¤</p>
<h1 id="âœ¨å¸¸ç”¨Linuxå‘½ä»¤"><a href="#âœ¨å¸¸ç”¨Linuxå‘½ä»¤" class="headerlink" title="âœ¨å¸¸ç”¨Linuxå‘½ä»¤"></a>âœ¨å¸¸ç”¨Linuxå‘½ä»¤</h1><p>å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1ï¼‰ã€cd : æ”¹å˜ç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰ã€cd . . å›é€€åˆ°ä¸Šä¸€ä¸ªç›®å½•ï¼Œç›´æ¥cdè¿›å…¥é»˜è®¤ç›®å½•</span><br><span class="line"></span><br><span class="line">3ï¼‰ã€pwd : æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚</span><br><span class="line"></span><br><span class="line">4ï¼‰ã€ls(ll):  éƒ½æ˜¯åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¸è¿‡ll(ä¸¤ä¸ªll)åˆ—å‡ºçš„å†…å®¹æ›´ä¸ºè¯¦ç»†ã€‚</span><br><span class="line"></span><br><span class="line">5ï¼‰ã€touch : æ–°å»ºä¸€ä¸ªæ–‡ä»¶ å¦‚ touch index.js å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">6ï¼‰ã€rm:  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶, rm index.js å°±ä¼šæŠŠindex.jsæ–‡ä»¶åˆ é™¤ã€‚</span><br><span class="line"></span><br><span class="line">7ï¼‰ã€mkdir:  æ–°å»ºä¸€ä¸ªç›®å½•,å°±æ˜¯æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</span><br><span class="line"></span><br><span class="line">8ï¼‰ã€rm -r :  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹, rm -r src åˆ é™¤srcç›®å½•</span><br><span class="line"></span><br><span class="line">rm -rf / åˆ‡å‹¿åœ¨Linuxä¸­å°è¯•ï¼åˆ é™¤ç”µè„‘ä¸­å…¨éƒ¨æ–‡ä»¶ï¼</span><br><span class="line"></span><br><span class="line">9ï¼‰ã€mv ç§»åŠ¨æ–‡ä»¶, mv index.html src index.html æ˜¯æˆ‘ä»¬è¦ç§»åŠ¨çš„æ–‡ä»¶, src æ˜¯ç›®æ ‡æ–‡ä»¶å¤¹,å½“ç„¶, è¿™æ ·å†™,å¿…é¡»ä¿è¯æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶å¤¹åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">10ï¼‰ã€reset é‡æ–°åˆå§‹åŒ–ç»ˆç«¯/æ¸…å±ã€‚</span><br><span class="line"></span><br><span class="line">11ï¼‰ã€clear æ¸…å±ã€‚</span><br><span class="line"></span><br><span class="line">12ï¼‰ã€history æŸ¥çœ‹å‘½ä»¤å†å²ã€‚</span><br><span class="line"></span><br><span class="line">13ï¼‰ã€help å¸®åŠ©ã€‚</span><br><span class="line"></span><br><span class="line">14ï¼‰ã€exit é€€å‡ºã€‚</span><br><span class="line"></span><br><span class="line">15ï¼‰ã€#è¡¨ç¤ºæ³¨é‡Š</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸ„Gitçš„å·¥ä½œæµç¨‹"><a href="#ğŸ„Gitçš„å·¥ä½œæµç¨‹" class="headerlink" title="ğŸ„Gitçš„å·¥ä½œæµç¨‹"></a>ğŸ„Gitçš„å·¥ä½œæµç¨‹</h1><p>ä¸‹é¢å°†ç»™å‡ºGitçš„å·¥ä½œæµç¨‹å›¾ï¼š</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/git-process.png" alt="å·¥ä½œæµç¨‹"></p>
<p>æ¥ä¸‹æ¥ç†è§£ä¸‹ Git å·¥ä½œåŒºã€æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“æ¦‚å¿µï¼š</p>
<ul>
<li><strong>å·¥ä½œåŒºï¼š</strong>å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚</li>
<li><strong>æš‚å­˜åŒºï¼š</strong>è‹±æ–‡å« stage æˆ– indexã€‚ä¸€èˆ¬å­˜æ”¾åœ¨ <strong>.git</strong> ç›®å½•ä¸‹çš„ index æ–‡ä»¶ï¼ˆ.git/indexï¼‰ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæš‚å­˜åŒºæœ‰æ—¶ä¹Ÿå«ä½œç´¢å¼•ï¼ˆindexï¼‰ã€‚</li>
<li><strong>ç‰ˆæœ¬åº“ï¼š</strong>å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½• <strong>.git</strong>ï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯ Git çš„ç‰ˆæœ¬åº“ã€‚</li>
</ul>
<p>ä¸‹é¢è¿™ä¸ªå›¾å±•ç¤ºäº†å·¥ä½œåŒºã€ç‰ˆæœ¬åº“ä¸­çš„æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/1352126739_7909.jpg" alt="img"></p>
<ul>
<li>å›¾ä¸­å·¦ä¾§ä¸ºå·¥ä½œåŒºï¼Œå³ä¾§ä¸ºç‰ˆæœ¬åº“ã€‚åœ¨ç‰ˆæœ¬åº“ä¸­æ ‡è®°ä¸º â€œindexâ€ çš„åŒºåŸŸæ˜¯æš‚å­˜åŒºï¼ˆstage/indexï¼‰ï¼Œæ ‡è®°ä¸º â€œmasterâ€ çš„æ˜¯ master åˆ†æ”¯æ‰€ä»£è¡¨çš„ç›®å½•æ ‘ã€‚</li>
<li>å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ­¤æ—¶ â€œHEADâ€ å®é™…æ˜¯æŒ‡å‘ master åˆ†æ”¯çš„ä¸€ä¸ªâ€æ¸¸æ ‡â€ã€‚æ‰€ä»¥å›¾ç¤ºçš„å‘½ä»¤ä¸­å‡ºç° HEAD çš„åœ°æ–¹å¯ä»¥ç”¨ master æ¥æ›¿æ¢ã€‚</li>
<li>å›¾ä¸­çš„ objects æ ‡è¯†çš„åŒºåŸŸä¸º Git çš„å¯¹è±¡åº“ï¼Œå®é™…ä½äº â€œ.git/objectsâ€ ç›®å½•ä¸‹ï¼Œé‡Œé¢åŒ…å«äº†åˆ›å»ºçš„å„ç§å¯¹è±¡åŠå†…å®¹ã€‚</li>
<li>å½“å¯¹å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶æ‰§è¡Œ <strong>git add</strong> å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘è¢«æ›´æ–°ï¼ŒåŒæ—¶å·¥ä½œåŒºä¿®æ”¹ï¼ˆæˆ–æ–°å¢ï¼‰çš„æ–‡ä»¶å†…å®¹è¢«å†™å…¥åˆ°å¯¹è±¡åº“ä¸­çš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­ï¼Œè€Œè¯¥å¯¹è±¡çš„IDè¢«è®°å½•åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶ç´¢å¼•ä¸­ã€‚</li>
<li>å½“æ‰§è¡Œæäº¤æ“ä½œï¼ˆgit commitï¼‰æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘å†™åˆ°ç‰ˆæœ¬åº“ï¼ˆå¯¹è±¡åº“ï¼‰ä¸­ï¼Œmaster åˆ†æ”¯ä¼šåšç›¸åº”çš„æ›´æ–°ã€‚å³ master æŒ‡å‘çš„ç›®å½•æ ‘å°±æ˜¯æäº¤æ—¶æš‚å­˜åŒºçš„ç›®å½•æ ‘ã€‚</li>
</ul>
<p><strong>ä¸»è¦æµç¨‹</strong>ï¼š</p>
<p>&emsp;&emsp;1<code>.git</code> åŒæ–‡ä»¶å·¥ä½œåŒºåœ¨ <code>Git Bash</code> ä¸­  é€šè¿‡ <code>git add (.gitç›®å½•ä¸‹æ–‡ä»¶å/. )</code> å‘æš‚å­˜åŒºä¸­æ·»åŠ æ–‡ä»¶</p>
<p>&emsp;&emsp;2. å†é€šè¿‡ <code>git commit -m &quot;å¤‡æ³¨ä¿¡æ¯(å¿…é¡»å†™)&quot;</code>å°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­</p>
<p>&emsp;&emsp;3. å¦‚æœæœ‰é…ç½®è¿œç¨‹çš„ä»“åº“ï¼Œåˆ™éœ€è¦æœ€åé€šè¿‡ <code>git push -u origin åˆ†æ”¯å</code> è¿›è¡Œè¿œç¨‹å’Œæœ¬åœ°çš„ä»£ç åŒæ­¥</p>
<h1 id="ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“"><a href="#ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“"></a>ğŸ“®æ­å»ºè¿œç¨‹ä»“åº“</h1><p>&emsp;&emsp;ç°åœ¨ç»ˆäºè¦ç”¨åˆ°é‚£ä¸ªç§˜é’¥äº†ï¼š</p>
<blockquote>
<p>ç”Ÿæˆå…¬é’¥,è¿‡åä¼šåœ¨.sshä¸­ç”Ÿæˆä¸€ä¸ª id_rsa ä»¥åŠ id_rsa.pub  åˆ†åˆ«ä¸ºç§äººç§˜é’¥å’Œå…¬å¼€ç§˜é’¥ ï¼Œå…¬å¼€ç§˜é’¥å¯ä»¥è§£å¯†ä¸ºç§é’¥</p>
</blockquote>
<p>&emsp;&emsp;<strong>1. é¦–å…ˆåœ¨Giteeä¸Šåˆ›å»ºè‡ªå·±ä»“åº“ï¼Œé€‰æ‹©è¯­è¨€ä»¥åŠåˆå§‹åŒ–æ¡ä»¶ï¼Œæ¨èé€‰æ‹©READMEï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œç ”ç©¶</strong></p>
<p>&emsp;&emsp;<strong>2. å¤åˆ¶<code>id_rsa.pub</code> ä¸­çš„å†…å®¹ï¼Œç„¶ååœ¨Giteeä¸­ï¼šè®¾ç½® â€”&gt; SSHå…¬é’¥ â€”&gt; æ·»åŠ å…¬é’¥ â€”&gt;ç²˜è´´ (æ ‡é¢˜è‡ªå¡«) â€”&gt; ä¿å­˜</strong></p>
<p>æ€»çš„æ¥è¯´è¿œç¨‹ä»“åº“å·²ç»æ­å»ºå®Œæ¯•ï¼Œç°åœ¨å°±éœ€è¦è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå°†æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“è¿›è¡Œè¿æ¥.</p>
<p><strong>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</strong></p>
<p>&emsp;&emsp;åˆå§‹åŒ–çš„æ–¹å¼åˆ†ä¸º2ç§ï¼Œä¸€ç§ä¸ºæœ¬åœ°åœ¨ <code>Git Bash</code> ä¸­ä½¿ç”¨ <code>git init</code> è¿›è¡Œåˆå§‹åŒ–ï¼›</p>
<p>&emsp;&emsp;ç¬¬äºŒç§æ–¹å¼ä¸ºåœ¨ <code>Git Bash</code> ä¸­å¯¹è¿œç¨‹ä»“åº“è¿›è¡Œå…‹éš† ï¼Œå‘½ä»¤ä¸º <code>git clone URL(å…‹éš†/ä¸‹è½½ä¸­çš„httpsé“¾æ¥)</code></p>
<p><strong>æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“å»ºç«‹è¿æ¥</strong></p>
<p>&emsp;&emsp;è¿›è¡Œå¦‚ä¸‹å‘½ä»¤å‰åˆ«å¿˜è®°äº†å¯¹æœ¬åœ°å·¥ä½œåŒºç›®å½•è¿›è¡Œ <code>add</code> ä»¥åŠ <code>commit</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$ git remote add origin SSHé“¾æ¥  //ä¸ºè¿œç¨‹Gitæ›´åä¸ºoriginï¼ŒSSHé“¾æ¥åœ¨Giteeä¸­çš„ä»“åº“é‡Œé€‰æ‹© å…‹éš†/ä¸‹è½½ å¤åˆ¶SSHé“¾æ¥å³å¯</span><br><span class="line"></span><br><span class="line">$ git pull --rebase origin master//å¦‚æœè¿œç¨‹ä»“åº“åˆå§‹åŒ–äº†readmeæ–‡ä»¶ï¼Œéœ€è¦æ‹‰ä¸‹æ¥åŒæ­¥ä»£ç </span><br><span class="line"></span><br><span class="line">$ git push -u origin master //æ¨é€æ­¤æ¬¡ä¿®æ”¹,åé¢å†æ¬¡æäº¤å°±å¯ä»¥ç›´æ¥git push </span><br></pre></td></tr></table></figure>

<hr>
<p><strong>æ³¨æ„ï¼šå¦‚è‹¥åœ¨æ–°çš„æœ¬åœ°ä»“åº“ä¸­æäº¤æ–°æ–‡ä»¶ï¼Œéœ€è¦å°†è¿œç¨‹ä»“åº“çš„ä»£ç   <code>git pull --rebase origin master</code>  æ‹‰ä¸‹æ¥ç„¶åå†è¿›è¡Œ <code>push</code> å³å¯ ï¼Œ ä¸ç„¶ä¼šæŠ¥é”™ï¼Œè‡³äºåŸå› ï¼Œå‡è®¾æœ¬åœ°ä»“åº“åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿œç¨‹ä»“åº“æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå¦‚æœç›´æ¥æäº¤ï¼Œæ€»ä¸èƒ½æ‹¿ä¸€ä¸ªæ–‡ä»¶ç›´æ¥è¦†ç›–æ‰è¿œç¨‹ä»“åº“çš„æ‰€æœ‰æ–‡ä»¶å§ï¼Œä¼šé€ æˆæ–‡ä»¶ç¼ºå¤±ï¼Œè¿™ä¸ªæœºåˆ¶è¿˜æ˜¯éå¸¸äººæ€§åŒ–çš„å“ˆ.</strong></p>
<h1 id="âš½IDEä¸­é›†æˆGit"><a href="#âš½IDEä¸­é›†æˆGit" class="headerlink" title="âš½IDEä¸­é›†æˆGit"></a>âš½IDEä¸­é›†æˆGit</h1><p>&emsp;&emsp;æˆ‘åªåœ¨ <code>Jetbrains</code> å®¶ä¸­çš„ <code>IDE</code> è¿›è¡Œäº†æµ‹è¯•ï¼Œæ‰€ä»¥å°±ç”¨å…¶ä¸­çš„ <code>idea</code> æ¥ä¸¾ä¾‹è¯´æ˜ï¼Œ åªéœ€è¦å°†ä½ åˆå§‹åŒ–æœ¬åœ°ä»“åº“åˆ›å»ºçš„ <code>.git</code> æ–‡ä»¶å¤åˆ¶åˆ°è¯¥å·¥ç¨‹ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³å¯</p>
<img src="/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/1.png" class title="ç¤ºä¾‹1">



<p>&emsp;&emsp;æˆ–è€…ç›´æ¥åœ¨è¯¥è·¯å¾„ä¸‹ï¼Œåœ¨ <code>Git Bash</code> ä¸­è¾“å…¥å‘½ä»¤ <code>git init</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥äº§ç”Ÿ <code>.git</code> æ–‡ä»¶ ï¼Œ è¿‡åå°±å¯ä»¥åœ¨  <code>idea</code> ä¸­çš„ç»ˆç«¯è¾“å…¥å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œå°±è·Ÿåœ¨ <code>Git Bash</code> ä¸­çš„æ“ä½œä¸€æ ·</p>
<img src="/2021/04/09/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Git/2.png" class title="ç¤ºä¾‹2">



<p>å¦‚ä¸Šå›¾ï¼Œè¿™æ˜¯IDEä¸­ç»ˆç«¯çš„æ‰“å¼€æ–¹å¼~~</p>
<h1 id="å¾…åç»­æ›´æ–°-Gitä¸­çš„åˆ†æ”¯æ“ä½œ-ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·"><a href="#å¾…åç»­æ›´æ–°-Gitä¸­çš„åˆ†æ”¯æ“ä½œ-ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·" class="headerlink" title="å¾…åç»­æ›´æ–° Gitä¸­çš„åˆ†æ”¯æ“ä½œ ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·"></a>å¾…åç»­æ›´æ–° Gitä¸­çš„åˆ†æ”¯æ“ä½œ ä»¥åŠæ›´å¤šç»†èŠ‚éƒ¨åˆ†Â·Â·Â·Â·Â·Â·</h1>]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å…¬ä¼—å·åç«¯å¼€å‘(ä¸€):access_tokenä»¥åŠOpenID</title>
    <url>/2021/05/24/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ‘åŸºæœ¬æ¦‚å¿µ"><a href="#ğŸ‘åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ğŸ‘åŸºæœ¬æ¦‚å¿µ"></a>ğŸ‘åŸºæœ¬æ¦‚å¿µ</h1><p>â€‹    </p>
<p><strong><code>access_token</code></strong></p>
<p>â€‹        <code>access_token</code>æ˜¯å…¬ä¼—å·çš„å…¨å±€å”¯ä¸€æ¥å£è°ƒç”¨å‡­æ®ï¼Œå…¬ä¼—å·è°ƒç”¨å„æ¥å£æ—¶éƒ½éœ€ä½¿ç”¨<code>access_token</code>ã€‚å¼€å‘è€…éœ€è¦è¿›è¡Œå¦¥å–„ä¿å­˜ã€‚<code>access_token</code>çš„å­˜å‚¨è‡³å°‘è¦ä¿ç•™512ä¸ªå­—ç¬¦ç©ºé—´ã€‚<code>access_token</code>çš„æœ‰æ•ˆæœŸç›®å‰ä¸º2ä¸ªå°æ—¶ï¼Œéœ€å®šæ—¶åˆ·æ–°ï¼Œé‡å¤è·å–å°†å¯¼è‡´ä¸Šæ¬¡è·å–çš„<code>access_token</code>å¤±æ•ˆã€‚</p>
<p><strong><code>OpenID</code></strong></p>
<p>â€‹        ä¸ºäº†è¯†åˆ«ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·é’ˆå¯¹æ¯ä¸ªå…¬ä¼—å·ä¼šäº§ç”Ÿä¸€ä¸ªå®‰å…¨çš„<code>OpenID</code>ï¼Œå¦‚æœéœ€è¦åœ¨å¤šå…¬ä¼—å·ã€ç§»åŠ¨åº”ç”¨ä¹‹é—´åšç”¨æˆ·å…±é€šï¼Œåˆ™éœ€å‰å¾€å¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œå°†è¿™äº›å…¬ä¼—å·å’Œåº”ç”¨ç»‘å®šåˆ°ä¸€ä¸ªå¼€æ”¾å¹³å°è´¦å·ä¸‹ï¼Œç»‘å®šåï¼Œä¸€ä¸ªç”¨æˆ·è™½ç„¶å¯¹å¤šä¸ªå…¬ä¼—å·å’Œåº”ç”¨æœ‰å¤šä¸ªä¸åŒçš„<code>OpenID</code>ï¼Œä½†ä»–å¯¹æ‰€æœ‰è¿™äº›åŒä¸€å¼€æ”¾å¹³å°è´¦å·ä¸‹çš„å…¬ä¼—å·å’Œåº”ç”¨ï¼Œåªæœ‰ä¸€ä¸ª<code>UnionID</code>ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ç®¡ç†-è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆ<code>UnionID</code>æœºåˆ¶ï¼‰æ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚</p>
<h1 id="âœ¨è·å–access-token"><a href="#âœ¨è·å–access-token" class="headerlink" title="âœ¨è·å–access_token"></a>âœ¨è·å–access_token</h1><p><strong>æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜</strong></p>
<blockquote>
<p>httpsè¯·æ±‚æ–¹å¼: GET</p>
<p> <code>https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&#123;&#123;appid&#125;&#125;&amp;secret=&#123;&#123;appsecret&#125;&#125;</code></p>
</blockquote>
<p><strong>å‚æ•°è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…é¡»</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">grant_type</td>
<td align="left">æ˜¯</td>
<td align="left">è·å–access_tokenå¡«å†™client_credential</td>
</tr>
<tr>
<td align="left">appid</td>
<td align="left">æ˜¯</td>
<td align="left">ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯</td>
</tr>
<tr>
<td align="left">secret</td>
<td align="left">æ˜¯</td>
<td align="left">ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯å¯†é’¥ï¼Œå³appsecret</td>
</tr>
</tbody></table>
<p><strong>è¿”å›è¯´æ˜</strong></p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¾®ä¿¡ä¼šè¿”å›ä¸‹è¿°JSONæ•°æ®åŒ…ç»™å…¬ä¼—å·ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;access_token&quot;</span>:<span class="string">&quot;ACCESS_TOKEN&quot;</span>,<span class="attr">&quot;expires_in&quot;</span>:<span class="number">7200</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">access_token</td>
<td align="left">è·å–åˆ°çš„å‡­è¯</td>
</tr>
<tr>
<td align="left">expires_in</td>
<td align="left">å‡­è¯æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ï¼šç§’</td>
</tr>
</tbody></table>
<p>é”™è¯¯æ—¶å¾®ä¿¡ä¼šè¿”å›é”™è¯¯ç ç­‰ä¿¡æ¯ï¼ŒJSONæ•°æ®åŒ…ç¤ºä¾‹å¦‚ä¸‹ï¼ˆè¯¥ç¤ºä¾‹ä¸ºAppIDæ— æ•ˆé”™è¯¯ï¼‰:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;errcode&quot;</span>:<span class="number">40013</span>,<span class="attr">&quot;errmsg&quot;</span>:<span class="string">&quot;invalid appid&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿”å›ç è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">è¿”å›ç </th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-1</td>
<td align="left">ç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶è¯·å¼€å‘è€…ç¨å€™å†è¯•</td>
</tr>
<tr>
<td align="left">0</td>
<td align="left">è¯·æ±‚æˆåŠŸ</td>
</tr>
<tr>
<td align="left">40001</td>
<td align="left">AppSecreté”™è¯¯æˆ–è€…AppSecretä¸å±äºè¿™ä¸ªå…¬ä¼—å·ï¼Œè¯·å¼€å‘è€…ç¡®è®¤AppSecretçš„æ­£ç¡®æ€§</td>
</tr>
<tr>
<td align="left">40002</td>
<td align="left">è¯·ç¡®ä¿grant_typeå­—æ®µå€¼ä¸ºclient_credential</td>
</tr>
<tr>
<td align="left">40164</td>
<td align="left">è°ƒç”¨æ¥å£çš„IPåœ°å€ä¸åœ¨ç™½åå•ä¸­ï¼Œè¯·åœ¨æ¥å£IPç™½åå•ä¸­è¿›è¡Œè®¾ç½®ã€‚ï¼ˆå°ç¨‹åºåŠå°æ¸¸æˆè°ƒç”¨ä¸è¦æ±‚IPåœ°å€åœ¨ç™½åå•å†…ã€‚ï¼‰</td>
</tr>
<tr>
<td align="left">89503</td>
<td align="left">æ­¤IPè°ƒç”¨éœ€è¦ç®¡ç†å‘˜ç¡®è®¤,è¯·è”ç³»ç®¡ç†å‘˜</td>
</tr>
<tr>
<td align="left">89501</td>
<td align="left">æ­¤IPæ­£åœ¨ç­‰å¾…ç®¡ç†å‘˜ç¡®è®¤,è¯·è”ç³»ç®¡ç†å‘˜</td>
</tr>
<tr>
<td align="left">89506</td>
<td align="left">24å°æ—¶å†…è¯¥IPè¢«ç®¡ç†å‘˜æ‹’ç»è°ƒç”¨ä¸¤æ¬¡ï¼Œ24å°æ—¶å†…ä¸å¯å†ä½¿ç”¨è¯¥IPè°ƒç”¨</td>
</tr>
<tr>
<td align="left">89507</td>
<td align="left">1å°æ—¶å†…è¯¥IPè¢«ç®¡ç†å‘˜æ‹’ç»è°ƒç”¨ä¸€æ¬¡ï¼Œ1å°æ—¶å†…ä¸å¯å†ä½¿ç”¨è¯¥IPè°ƒç”¨</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡å…¬ä¼—å·</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¸€):å¿«é€Ÿæ’åº</title>
    <url>/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš¡å¿«é€Ÿæ’åº"><a href="#ğŸš¡å¿«é€Ÿæ’åº" class="headerlink" title="ğŸš¡å¿«é€Ÿæ’åº"></a>ğŸš¡å¿«é€Ÿæ’åº</h1><blockquote>
<p>â€‹        å¿«é€Ÿæ’åºç”±C. A. R. Hoareåœ¨1962å¹´æå‡ºã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯:é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥<a href="https://baike.so.com/doc/5725016-5937752.html">é€’å½’</a>è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚</p>
</blockquote>
<p>å¿«é€Ÿæ’åºç®€ç§°å¿«æ’ï¼Œæ˜¯åŸºæœ¬çš„æ’åºæ–¹æ³•ä¹‹ä¸€ï¼Œå¿«æ’åœ¨æœ€å¥½çš„æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(nlogn)</code> ï¼Œæœ€åçš„æƒ…å†µä¸‹ä¸º O(n<sup>2</sup>)ï¼Œæ€»ä½“æ¥è¯´è¿˜ç®—å¯ä»¥äº†ï¼Œæœ‰ä¸€è¯´ä¸€.</p>
<h2 id="æ€è·¯è§£æ"><a href="#æ€è·¯è§£æ" class="headerlink" title="æ€è·¯è§£æ"></a>æ€è·¯è§£æ</h2><p>å¿«é€Ÿæ’åºå±äºå…¸å‹çš„<code>åˆ†æ²»+é€’å½’</code>å®ç°çš„ç®—æ³•ï¼Œæ‰€è°“åˆ†æ²»ï¼Œå°±æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œç„¶åå¯¹æ¯ä¸€å—è¿›è¡ŒåŒæ ·çš„æ“ä½œå¤„ç†ä»è€Œè¾¾åˆ°æ’åºçš„æ•ˆæœ.å…·ä½“åˆ†æå°±æ˜¯ï¼Œæˆ‘ä»¬<font color="red">é€‰å®šä¸€ä¸ªåŸºå‡†å€¼ï¼Œç„¶åå°†ä¸€ä¸ªæ•°ç»„é€šè¿‡æŸäº›æ“ä½œåˆ’åˆ†ä¸ºä¿©ä¸ªåŒºé—´ï¼ˆåˆ†æ²»ï¼‰ï¼ŒåŒºé—´çš„å€¼<code>&gt;=</code>åŸºå‡†å€¼ ï¼Œ ä¸€ä¸ªåŒºé—´çš„å€¼ <code>&lt;=</code> åŸºå‡†å€¼ ï¼Œä¹Ÿå°±æ˜¯å°†æ¯”åŸºå‡†å€¼å°çš„å€¼æ”¾åˆ°å…¶å·¦è¾¹ï¼Œå¤§çš„å€¼æ”¾åˆ°å…¶å³è¾¹ï¼Œ è¿™æ ·å†åˆ†åˆ«å¯¹è¿™ä¿©ä¸ªå°åŒºé—´è¿›è¡ŒåŒæ ·çš„æ“ä½œ(é€’å½’)ï¼Œæœ€ç»ˆå°†æ•°ç»„æ’æˆæœ‰åºçš„.</font></p>
<h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>é¢˜ç›®æ¥æºäºï¼šAcwing</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="comment">//ç”¨äºæ¥æ”¶éœ€è¦æ’åºçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> s[])</span></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœåŒºé—´ä¸­åªæœ‰ä¸€ä¸ªå€¼æˆ–è€…æ²¡æœ‰å€¼ï¼Œåˆ™é€’å½’ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// å–ä¸­é—´ç‚¹ä¸ºåŸºå‡†å€¼</span></span><br><span class="line">    <span class="keyword">int</span> x = s[(l+r) &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="comment">//ä¸ºäº†é…åˆä¸‹æ–¹å¾ªç¯çš„å½¢å¼ï¼Œæ•…åšäº†ä¸€å®šåæ ‡çš„åç§»</span></span><br><span class="line">    <span class="keyword">int</span> i = l<span class="number">-1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å½“å·¦ç«¯ç‚¹ å°äº å³ç«¯ç‚¹çš„æ—¶å€™ç»§ç»­å¾ªç¯</span></span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">        <span class="comment">//å½“å€¼å°äºåŸºå‡†å€¼çš„æ—¶å€™ä¸€ç›´å‘å³ç«¯ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(s[i] &lt; x);</span><br><span class="line">        <span class="comment">//å½“å€¼å¤§äºåŸºå‡†å€¼çš„æ—¶å€™ä¸€ç›´å‘å·¦ç«¯ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(s[j] &gt; x);</span><br><span class="line">        <span class="comment">//å¦‚æœ i å°äº j åˆ™äº¤æ¢è¿™ä¸¤å¤„çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(i &lt; j) <span class="built_in">swap</span>(s[i],s[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«å¯¹åŸºå‡†å€¼å·¦å³ä¿©ä¸ªåŒºé—´è¿›è¡Œåˆ†åˆ«æ’åº</span></span><br><span class="line">    <span class="built_in">quick_sort</span>(l , j , s),<span class="built_in">quick_sort</span>(j+<span class="number">1</span> , r , s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m ; i++)&#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¼ å…¥åˆå§‹åæ ‡,æœ«å°¾åæ ‡,éœ€è¦æ’åºçš„æ•°ç»„</span></span><br><span class="line">    <span class="built_in">quick_sort</span>(<span class="number">0</span> , m<span class="number">-1</span> , a);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m ; i++)&#123;</span><br><span class="line">        cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ul>
<li><strong>ä½¿ç”¨Scannerè¯»å…¥</strong>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//Javaæ²¡æœ‰è‡ªå¸¦çš„äº¤æ¢å‡½æ•°,åŒæ—¶æƒ³è¦é«˜äº¤æ¢æ•ˆç‡</span></span><br><span class="line">    <span class="comment">//åœ¨åˆ«äººçš„åšå®¢ä¸­å­¦åˆ°äº†è¿™ä¸€ç§é«˜æ•ˆç‡çš„äº¤æ¢æ–¹å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        nums[j] ^= nums[i];</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> q[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt;= r ) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> x = q[l+r&gt;&gt;<span class="number">1</span>],i = l-<span class="number">1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i] &lt; x);</span><br><span class="line">            <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j] &gt; x);</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) swap(q,i,j);</span><br><span class="line">        &#125;</span><br><span class="line">        quick_sort(l , j , q);</span><br><span class="line">        quick_sort(j+<span class="number">1</span> , r , q);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        <span class="keyword">int</span> [] a = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; n ; j++) a[j] = sc.nextInt() ;</span><br><span class="line">        </span><br><span class="line">        quick_sort(<span class="number">0</span>,n-<span class="number">1</span>,a);</span><br><span class="line">        </span><br><span class="line">      	<span class="keyword">for</span>(<span class="keyword">int</span> i : a) System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ä½¿ç”¨BufferReadè¿›è¡Œè¯»å…¥</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] swap(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j) &#123;</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        nums[j] ^= nums[i];</span><br><span class="line">        nums[i] ^= nums[j];</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> l , <span class="keyword">int</span> r , <span class="keyword">int</span> q[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt;= r ) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> x = q[l+r&gt;&gt;<span class="number">1</span>],i = l-<span class="number">1</span> , j = r+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i] &lt; x);</span><br><span class="line">            <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j] &gt; x);</span><br><span class="line">            <span class="keyword">if</span>(i &lt; j) swap(q,i,j);</span><br><span class="line">        &#125;</span><br><span class="line">        quick_sort(l , j , q);</span><br><span class="line">        quick_sort(j+<span class="number">1</span> , r , q);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="keyword">int</span> n = Integer.parseInt(reader.readLine());</span><br><span class="line">        <span class="keyword">int</span> [] a = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        String [] str = reader.readLine().split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span> ; j &lt; str.length ; j++) a[j] = Integer.parseInt(str[j]);</span><br><span class="line">        </span><br><span class="line">        quick_sort(<span class="number">0</span>,n-<span class="number">1</span>,a);</span><br><span class="line">        </span><br><span class="line">       	<span class="keyword">for</span>(<span class="keyword">int</span> i : a) System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        reader.close();</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ³¨æ„ï¼šä¿©ç§ä¸åŒçš„æ–¹å¼è¯»å…¥å·®è·è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ¨èä½¿ç”¨<code>BufferedReader</code>è¯»å…¥</p>
<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/2.png" class title="æ¯”è¾ƒ">



<h2 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h2><img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/3.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/4.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/5.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/6.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/7.png" class title="å›¾è§£">

<img src="/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/8.png" class title="å›¾è§£">



<p><strong>æœ‰ä¸€è¯´ä¸€</strong>ï¼šç”»å›¾çœŸçš„å¥½ç´¯ï¼Œè¦ä¸æ˜¯æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„å›¾è§£ï¼Œä¹Ÿä¸è‡³äºè‡ªå·±ç”»ï¼Œ2333.</p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(ä¸‰):åŒæŒ‡é’ˆç®—æ³•</title>
    <url>/2021/06/15/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸš åŒæŒ‡é’ˆç®—æ³•"><a href="#ğŸš åŒæŒ‡é’ˆç®—æ³•" class="headerlink" title="ğŸš åŒæŒ‡é’ˆç®—æ³•"></a>ğŸš åŒæŒ‡é’ˆç®—æ³•</h1><p>èŒƒå¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i ++ )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; i &amp;&amp; <span class="built_in">check</span>(i, j)) j ++ ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…·ä½“é—®é¢˜çš„é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><img src="/2021/06/15/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%89%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://www.acwing.com/problem/content/801/">æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—</a></p>
<h2 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h2><p>åˆ©ç”¨åŒæŒ‡é’ˆï¼Œå½¢æˆæ•°çš„è¿ç»­åŒºé—´ï¼ŒæŒ‡é’ˆ<code>j</code>ä½äºåŒºé—´å¤´éƒ¨ï¼Œ<code>i</code>ä½äºåŒºé—´å°¾éƒ¨ï¼Œå½“æŒ‡é’ˆ<code>i</code> ä¸æ–­å‘åéå†çš„æ—¶å€™ï¼Œå¦‚æœåŒºé—´ä¸­å­˜åœ¨ç›¸åŒçš„æ•°ï¼Œåˆ™æŒ‡é’ˆ<code>j</code>å‘å‰ç§»åŠ¨ç›´åˆ°åŒºé—´å†…æ²¡æœ‰é‡å¤çš„æ•°å­—ï¼ŒæŒ‡é’ˆ<code>j</code> æœ€è¿œç§»åŠ¨åˆ°å’ŒæŒ‡é’ˆ<code>i</code>é‡åˆçš„ä½ç½®ï¼Œé‚£ä¹ˆä¸é‡å¤çš„è¿ç»­åŒºé—´é•¿åº¦å³æŒ‡é’ˆ<code>i</code>ä¸æŒ‡é’ˆ<code>j</code>ä¹‹é—´çš„è·ç¦».</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="comment">//qæ•°ç»„ç”¨äºè®°å½•åŸæ¥çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">//sæ•°ç»„ç”¨äºè®°å½•æŒ‡é’ˆåŒºé—´å†…qæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">int</span> q[N], s[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++ ) cin &gt;&gt; q[i];</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i ++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//sæ•°ç»„å­˜å‚¨çš„æ˜¯qæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        s[q[i]] ++ ;</span><br><span class="line">        <span class="comment">//å½“æŒ‡é’ˆiåœ¨å‘å³è¿›è¡Œæ‰«æçš„æ—¶å€™å‡ºç°äº†é‡å¤çš„æ•°å­—åˆ™sæ•°ç»„ä¸­å¯¹åº”çš„å€¼å¿…ç„¶å¤§äº 1</span></span><br><span class="line">        <span class="comment">//å¦‚æœå‡ºç° åŒºé—´ å‡ºç°é‡å¤çš„æ•°å­—ï¼Œå…ˆå°†æŒ‡é’ˆjå¤„æŒ‡å‘çš„æ•°ç»„æ•°å­—å‡ºç°æ¬¡æ•° -1 (sæ•°ç»„è®°å½•çš„æ˜¯ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„æ•°å­—çš„å‡ºç°çš„æ¬¡æ•°)</span></span><br><span class="line">        <span class="comment">//å†å°†æŒ‡é’ˆ j å‘åç§»åŠ¨(å‡ºç°é‡å¤æ•°å­—å¿…ç„¶æ˜¯æŒ‡é’ˆjå¤„å’ŒæŒ‡é’ˆiå¤„çš„å€¼)</span></span><br><span class="line">        <span class="keyword">while</span> (j &lt; i &amp;&amp; s[q[i]] &gt; <span class="number">1</span>) s[q[j]]-- , j++ ;</span><br><span class="line">        <span class="comment">//è·å–åŒºé—´é•¿åº¦</span></span><br><span class="line">        res = <span class="built_in">max</span>(res, i - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N], perSum = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">static</span> BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        n = Integer.parseInt(reader.readLine());</span><br><span class="line">        String[] arrStrs = reader.readLine().split(<span class="string">&quot;\\s+&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            arr[i] = Integer.parseInt(arrStrs[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            perSum[arr[i]]++;</span><br><span class="line">            <span class="keyword">while</span>(perSum[arr[i]] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                perSum[arr[j]]--;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            count = Math.max(count, i - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        reader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(å››):æ»‘åŠ¨çª—å£</title>
    <url>/2021/07/14/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p><img src="https://anthony-img-bed.oss-cn-beijing.aliyuncs.com/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E5%9B%9B%EF%BC%89/1.png" alt="image-20210714161119231"></p>
<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a> â€”-leetcode</p>
<h1 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h1><p>æœ€å¸¸è§çš„è«è¿‡äºåŒé‡å¾ªç¯çš„æš´åŠ›è§£æ³•ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦è¿‡é«˜äº†. </p>
<p>å¯¹äºå­ä¸²é—®é¢˜è¿˜æœ‰ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„è§£æ³•ï¼ŒåŒæŒ‡é’ˆç®—æ³•ï¼Œäºæ˜¯è€ƒè™‘ä½¿ç”¨åŒæŒ‡é’ˆæ¥è¿›è¡Œåˆ†æ.</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ª<code> map</code> æ•°æ®ç»“æ„å­˜å‚¨<code> (k, v)</code>ï¼Œå…¶ä¸­ <code>key</code> å€¼ä¸ºå­—ç¬¦ï¼Œ<code>value</code> å€¼ä¸ºå­—ç¬¦ä½ç½®</li>
<li>æˆ‘ä»¬å®šä¹‰ä¸é‡å¤å­ä¸²çš„å¼€å§‹ä½ç½®ä¸º <code>start</code>ï¼Œç»“æŸä½ç½®ä¸º<code> end</code></li>
<li>éšç€ <code>end</code> ä¸æ–­éå†å‘åï¼Œä¼šé‡åˆ°ä¸ [start, end] åŒºé—´å†…å­—ç¬¦ç›¸åŒçš„æƒ…å†µï¼Œæ­¤æ—¶å°†å­—ç¬¦ä½œä¸º <code>key</code> å€¼ï¼Œè·å–å…¶ <code>value</code> å€¼ï¼Œå¹¶æ›´æ–°<code>start</code>ï¼Œæ­¤æ—¶<code> [start, end]</code> åŒºé—´å†…ä¸å­˜åœ¨é‡å¤å­—ç¬¦</li>
<li>æ— è®ºæ˜¯å¦æ›´æ–°<code> star</code>tï¼Œéƒ½ä¼šæ›´æ–°å…¶ <code>map</code> æ•°æ®ç»“æ„å’Œç»“æœ <code>ans</code>ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li>
</ul>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰mapé›†åˆ</span></span><br><span class="line">        Map&lt;Character,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="comment">//å®šä¹‰ç»“æœ</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å¤´æŒ‡é’ˆ ä»¥åŠ å°¾æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> start = <span class="number">0</span> , end = <span class="number">0</span> ; end &lt; n ; end++)&#123;</span><br><span class="line">            <span class="comment">//å–å‡º å­—ç¬¦ä¸²ä¸­çš„ä½äºå°¾æŒ‡é’ˆå¤„çš„å­—ç¬¦</span></span><br><span class="line">            Character element = s.charAt(end);</span><br><span class="line">            <span class="comment">//å¦‚æœmapä¸­å«æœ‰è¿™ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(element))&#123;</span><br><span class="line">                <span class="comment">//åˆ™ å¤´æŒ‡é’ˆéœ€è¦ç§»åŠ¨ ä½¿ start - end ä¹‹é—´ä¸ºæ— é‡å¤çš„å­—ç¬¦ä¸²</span></span><br><span class="line">                <span class="comment">//åŒæ—¶å¿…é¡»å¾€å³ç§»åŠ¨ï¼Œå¾€å·¦å¿…ç„¶ä¼šå¤šé‡å¤å…ƒç´ ï¼Œå› æ­¤ start å¿…é¡»å¤§äºç­‰äºå½“å‰ start</span></span><br><span class="line">                <span class="comment">//å› æ­¤ start éœ€è¦å– é‡å¤å…ƒç´ åæ ‡çš„ä¸‹ä¸€ä¸ªä½ç½®çš„ä¸‹æ ‡ </span></span><br><span class="line">                start = Math.max(map.get(element)+<span class="number">1</span> , start);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(element , end);</span><br><span class="line">            <span class="comment">//è·å–å­ä¸²é•¿åº¦ </span></span><br><span class="line">            ans = Math.max(end - start + <span class="number">1</span> , ans);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç”¨äºè®°å½• æ¯ä¸ªå­—ç¬¦å‡ºç°çš„ä¸‹æ ‡ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½® </span></span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">m</span><span class="params">(<span class="number">128</span>, <span class="number">0</span>)</span></span>; <span class="comment">//ASCIIç èŒƒå›´ï¼š0-127</span></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> end = <span class="number">0</span>; end &lt; s.<span class="built_in">size</span>(); end++) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªå­—ç¬¦ä»¥åŠå‡ºç°è¿‡</span></span><br><span class="line">            <span class="keyword">if</span>(m[s[end]]!=<span class="number">0</span>)  </span><br><span class="line">            <span class="comment">//åˆ™ç§»åŠ¨å¤´æŒ‡é’ˆåˆ° ä½¿å­—ç¬¦ä¸²ä¸­æ— é‡å¤å­—ç¬¦çš„ä½ç½®</span></span><br><span class="line">            <span class="comment">//è¦ä¹ˆæ˜¯é‡å¤å­—ç¬¦çš„ä¸‹ä¸€ä½ å³ m[s[end]]</span></span><br><span class="line">            <span class="comment">//å¦‚æœåœ¨å½“å‰ä½ç½®ä¹‹å‰ start åˆ™ä¸åŠ¨ </span></span><br><span class="line">            start = <span class="built_in">max</span>(start, m[s[end]]);</span><br><span class="line">			<span class="comment">//å°†å‡ºç°çš„å­—ç¬¦åŠ å…¥é›†åˆ</span></span><br><span class="line">            m[s[end]] = end + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//è®¡ç®—é•¿åº¦</span></span><br><span class="line">            ans = <span class="built_in">max</span>(ans, end - start + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯æ—¥ä¸€é¢˜(äºŒ):åŒæŒ‡é’ˆç®—æ³•</title>
    <url>/2021/06/12/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸƒåŒæŒ‡é’ˆç®—æ³•"><a href="#ğŸƒåŒæŒ‡é’ˆç®—æ³•" class="headerlink" title="ğŸƒåŒæŒ‡é’ˆç®—æ³•"></a>ğŸƒåŒæŒ‡é’ˆç®—æ³•</h1><p>ä½•ä¸ºåŒæŒ‡é’ˆï¼Ÿå…¶å®åœ¨ç®—æ³•ä¸­æ˜¯ä¸€ç§æŠ€å·§æ€§çš„ä¸œè¥¿ï¼Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿå¹¶éå¦‚åŒ<code>Cè¯­è¨€</code> é‚£ç§æŒ‡é’ˆï¼Œåªæ˜¯ä¸€ç§æ ‡è¯†ï¼Œç”¨äºè¡¨ç¤ºçŠ¶æ€ï¼Œå¾ˆå‡‘å·§ï¼Œåœ¨ä¸Šä¸€ç¯‡æ¯æ—¥ä¸€é¢˜ä¸­çš„å¿«é€Ÿæ’åºå°±ä½¿ç”¨äº†åŒæŒ‡é’ˆç®—æ³•,ååˆ†ç»å…¸ï¼Œå¹¶ä¸”å±äºå¯¹æ’æŒ‡é’ˆï¼ˆé€šä¿—çš„è®²å°±æ˜¯ç›¸å‘æ‰«æï¼‰ï¼Œå½“ç„¶äº†ï¼Œæ—¢ç„¶æœ‰ç›¸å‘æ‰«æï¼Œä¹Ÿè‚¯å®šæœ‰åŒå‘æ‰«æï¼Œæ¯”è¾ƒå¸¸ç”¨äºå­—ç¬¦ä¸²æ¯”å¯¹ï¼Œåˆ†æ²»ä¹‹ä¸­.</p>
<p>çªç„¶æœ‰ä¸ªä¸é”™çš„æƒ³æ³•ï¼Œæ¯æ—¥ä¸€é¢˜è¿ç»­æ›´æ–°åŒä¸€ç±»å‹çš„é¢˜ç›®ï¼Œè¿™æ ·æœ‰ä¾¿äºå…¨é¢æŒæ¡ä¸€ç§ç®—æ³•.</p>
<p>è¿™é‡Œé™„ä¸Šä¸Šä¸€ç¯‡æ–‡ç« çš„é“¾æ¥ä»¥ä¾›å¤ä¹ .</p>
<p><a href="https://soul-pe.gitee.io/shdsoul/2021/06/11/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%B8%80%EF%BC%89/">æ¯æ—¥ä¸€é¢˜(ä¸€):å¿«é€Ÿæ’åº</a></p>
<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><img src="/2021/06/12/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="é¢˜ç›®">

<p>é¢˜ç›®æ¥æºï¼šAcwingï¼š<a href="https://www.acwing.com/problem/content/description/773/">åŸé¢˜é“¾æ¥</a></p>
<h2 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h2><p>æˆ‘ä»¬åªéœ€è¦ï¼Œéå†æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸åæ–¹çš„å­—ç¬¦é€ä¸€æ¯”è¾ƒï¼Œç›¸åŒåˆ™ç»§ç»­å‘åæ¯”è¾ƒå¹¶è®°å½•è¿ç»­æ¬¡æ•°ï¼Œä¸åŒåˆ™åœæ­¢æ¯”è¾ƒï¼Œç»§ç»­å‘åæ–¹éå†å³å¯.</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//ç”¨äºæ¥æ”¶è¾“å…¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    string str;</span><br><span class="line">    <span class="comment">//ç”¨äºæ¥æ”¶è¾“å…¥çš„å­—ç¬¦ä¸²æ•°é‡</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">//å½“ n ä¸º 0 çš„æ—¶å€™åœæ­¢è¾“å…¥</span></span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        cin &gt;&gt; str;</span><br><span class="line">        <span class="comment">//å®šä¹‰æœ€å¤§é•¿åº¦ä¸º -1</span></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">-1</span>;</span><br><span class="line">        <span class="comment">//è®°å½•æœ€å¤šé‡å¤çš„å­—ç¬¦</span></span><br><span class="line">        string maxs;</span><br><span class="line">        <span class="comment">//æŒ‡é’ˆi :éå†è¾“å…¥çš„å­—ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; str.<span class="built_in">size</span>() ; i++)&#123;</span><br><span class="line">            <span class="comment">//æŒ‡é’ˆj :ç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">int</span> j = i; <span class="comment">//ç”±äºè¦æ±‚è¿ç»­,æ‰€ä»¥é»˜è®¤å¼€å§‹æ‰«æçš„åœ°æ–¹ä¸º æŒ‡é’ˆi çš„ä½ç½®,åªéœ€è¦éå†åé¢ï¼Œä¸éœ€è¦ç®¡å‰é¢</span></span><br><span class="line">            <span class="keyword">int</span> nums = <span class="number">0</span>;<span class="comment">//ç”¨äºè®°å½•è¿ç»­æ¬¡æ•°</span></span><br><span class="line">            <span class="comment">//å½“æŒ‡é’ˆjæŒ‡å‘çš„å€¼ä¸æŒ‡é’ˆiæŒ‡å‘çš„å€¼ç›¸åŒçš„æ—¶å€™,å¹¶ä¸”jæŒ‡é’ˆæ²¡æœ‰è¶Šç•Œçš„æ—¶å€™</span></span><br><span class="line">            <span class="keyword">while</span>(str[j] == str[i] &amp;&amp; j &lt; str.<span class="built_in">size</span>())</span><br><span class="line">                <span class="comment">//æŒ‡é’ˆjå‘åç§»åŠ¨,è¿ç»­æ¬¡æ•°è‡ªå¢1</span></span><br><span class="line">                j++ , nums++;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿ç»­æ¬¡æ•°å¤§äºæœ€å¤§å€¼åˆ™è¿›è¡Œè®°å½•,å¹¶ä¸”è®°å½•å½“å‰å­—ç¬¦    </span></span><br><span class="line">            <span class="keyword">if</span>(nums &gt; max)</span><br><span class="line">                max = nums,maxs = str[i];</span><br><span class="line">            <span class="comment">//å½“æŒ‡é’ˆjåœæ­¢ç§»åŠ¨æ—¶,[i,j)åŒºé—´ä¸­å¿…ç„¶å…¨æ˜¯ç›¸åŒçš„å­—ç¬¦,æ­¤æ—¶ iåªéœ€è¦ä»jçš„ä½ç½®å¼€å§‹ç»§ç»­éå†å³å¯</span></span><br><span class="line">            i = j <span class="number">-1</span>;<span class="comment">//è¿™é‡Œå‡1,æ˜¯ä¸ºäº†æŠµæ¶ˆæ‰å¾ªç¯ä¸­çš„ i++</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; nums &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; max;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="keyword">int</span> n = Integer.parseInt(reader.readLine());</span><br><span class="line">        <span class="keyword">while</span>(n-- != <span class="number">0</span>)&#123;</span><br><span class="line">            String s = reader.readLine();</span><br><span class="line">            <span class="keyword">char</span> c = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            <span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; s.length() ; i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> j = i;</span><br><span class="line">                <span class="keyword">int</span> nums = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(j &lt; s.length() &amp;&amp; s.charAt(i) == s.charAt(j))&#123; </span><br><span class="line">                    j++;</span><br><span class="line">                    nums++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(nums &gt; max)&#123;</span><br><span class="line">                    max = nums ;</span><br><span class="line">                    c = s.charAt(i);</span><br><span class="line">                &#125;</span><br><span class="line">                i = j - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(c + <span class="string">&quot; &quot;</span> + max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿‘æœŸæ‚è°ˆ</title>
    <url>/2021/04/18/%E8%BF%91%E6%9C%9F%E6%9D%82%E8%B0%88/</url>
    <content><![CDATA[<h1 id="ğŸ•¶å¼€å­¦äº†ï¼Ÿ"><a href="#ğŸ•¶å¼€å­¦äº†ï¼Ÿ" class="headerlink" title="ğŸ•¶å¼€å­¦äº†ï¼Ÿ"></a>ğŸ•¶å¼€å­¦äº†ï¼Ÿ</h1><p>&emsp;&emsp;å…¶å®åœ¨4æœˆåˆçš„æ—¶å€™æˆ‘ä¾æ—§ä¿æŒç€æ”¾å‡çš„çŠ¶æ€ï¼Œä¸Šè¯¾ä¸æ˜¯å¾ˆè®¤çœŸï¼Œåœ¨å¯å®¤ä¹Ÿæ˜¯å­¦æŠ€æœ¯æ•ˆç‡æ¯”è¾ƒæ…¢ï¼Œæ•´ä¸ªäººä¹Ÿå°±æ˜¯å¤„äºæ‚ å“‰æ‚ å“‰çš„é‚£ç§çŠ¶æ€ï¼Œæ„Ÿè§‰ç›®æ ‡æœ‰ç‚¹ä¸æ˜ç¡®ï¼Œä¸çŸ¥é“åˆ°åº•è‡ªå·±æƒ³å¹²å˜›ï¼ŒæœŸé—´æœ€å¼•å‘æˆ‘æ€è€ƒçš„è«è¿‡äºé‚£ä¸€ä»½å…³äºè€ƒç ”å’Œå°±ä¸šé€‰æ‹©çš„é—®å·ï¼Œåœ¨æˆ‘ä¸Šå¤§å­¦æ²¡å¤šä¹…çš„æ—¶å€™ï¼Œè§‰å¾—æˆ‘è‚¯å®šæ˜¯ä¼šè€ƒç ”çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†æå‡è‡ªå·±çš„å­¦å†ï¼Œé¡ºä¾¿ä¹Ÿå¯ä»¥é”»ç‚¼è‡ªå·±ï¼Œç„¶è€Œåˆ°äº†ç°åœ¨æˆ‘å´æ„Ÿè§‰ä¸æ˜¯å¾ˆç¡®å®šäº†ï¼Œå†…å¿ƒå¯èƒ½æ›´å‘å¾€æŠ€æœ¯å¼€å‘çš„æ–¹å‘ï¼Œå®åœ¨ä¸æƒ³åŠ å…¥è€ƒç ”å¤§å†›ï¼Œå°±ç®—æœ‰ä¿ç ”è¿™æ¡è·¯å­ï¼Œä¹Ÿä¸æ˜¯å¾ˆæƒ³åšç ”ç©¶çš„é‚£ç§æ–¹å‘.è‡ªçŸ¥èƒ½åŠ›æœ‰é™ï¼Œè§‰å¾—è‡ªå·±è¿˜æ˜¯ä¸åˆé€‚çš„.ä¸è¿‡å‘¢ï¼Œå…³äºè¿™ä¸ªä»¥åæˆ–è®¸ä¼šæœ‰æ–°çš„æ€è€ƒï¼Œä»¥åå†è¯´å§hhhh.</p>
<p>&emsp;&emsp;å¼€å­¦è‡³4æœˆåˆæœŸï¼Œå¯¹è‡ªå·±çš„è¡¨ç°æ€ä¹ˆè¯´å‘¢ï¼Œæ¯”è¾ƒæ‡’æ•£ï¼Œå¾ˆæµ®èºï¼Œä¹Ÿå¾ˆå¯¹ä¸èµ·æˆ‘å®¶å°æœ‹å‹ï¼Œè€æ˜¯æƒ¹å¥¹ä¸å¼€å¿ƒï¼Œè‡ªå·±çŠ¯çš„é”™è¯¯æ¯”è¾ƒå¤šï¼Œå”‰.é“é˜»ä¸”é•¿ï¼ŒåŒå¿—ä»ç„¶éœ€è¦åŠªåŠ›å•Š.</p>
<h1 id="ğŸƒå‚åŠ äº†æ•°å­¦ç«èµ›ï¼Ÿ"><a href="#ğŸƒå‚åŠ äº†æ•°å­¦ç«èµ›ï¼Ÿ" class="headerlink" title="ğŸƒå‚åŠ äº†æ•°å­¦ç«èµ›ï¼Ÿ"></a>ğŸƒå‚åŠ äº†æ•°å­¦ç«èµ›ï¼Ÿ</h1><p>&emsp;&emsp;æ€ä¹ˆè¯´å‘¢ï¼Œæºäºä»å°å¯¹äºæ•°å­¦çš„å…´è¶£å§ï¼Œæ•°å­¦çš„å·§å¦™é€»è¾‘å®åœ¨æ˜¯è®©æˆ‘æ²‰è¿·ï¼Œé«˜æ•°ä¸­ï¼Œå„å¤§æ•°å­¦å®¶å·§å¦™çš„å®šç†è¯æ˜ä¹Ÿç€å®å¾ˆå¸å¼•æˆ‘ï¼Œå¤§ä¸€ä¸Šè¿˜æ˜¯æœ‰å¥½å¥½å­¦é«˜ç­‰æ•°å­¦çš„.ä¸‹å­¦æœŸå…¶å®ä¹Ÿæœ‰å¥½å¥½å­¦ï¼Œåªæ˜¯ä¸­é€”æœ‰ç‚¹åˆ’æ°´å“ˆâ€¦.è¿™ä¹Ÿç®—æ˜¯æˆ‘å¤§ä¸€ä¸‹ç”Ÿæ´»ä¸­ä¸€ä»¶è¶£äº‹ï¼Œä¸å…¶è¯´æ˜¯å‚åŠ æ¯”èµ›ï¼Œä¸å¦‚è¯´æ˜¯å»æ„Ÿå—çš„.</p>
<h1 id="ğŸ¥¼-æå‰æ­¥å…¥ç¤¾ç•œç”Ÿæ´»ï¼Ÿ"><a href="#ğŸ¥¼-æå‰æ­¥å…¥ç¤¾ç•œç”Ÿæ´»ï¼Ÿ" class="headerlink" title="ğŸ¥¼ æå‰æ­¥å…¥ç¤¾ç•œç”Ÿæ´»ï¼Ÿ"></a>ğŸ¥¼ æå‰æ­¥å…¥ç¤¾ç•œç”Ÿæ´»ï¼Ÿ</h1><p>&emsp;&emsp;hhhhï¼Œå…¶å®æœ‰ç‚¹æ ‡é¢˜å…šçš„å‘³é“äº†ï¼Œå“ªé‡Œæ˜¯ç¤¾ç•œï¼Œè¿˜æ˜¯ä¸ªå­¦å¾’å“ˆ.è¯´æ¥ä¹Ÿååˆ†å¶ç„¶ï¼Œæˆ‘è¿‘æœŸä¹Ÿåªæ˜¯æƒ³æ‰¾ä¸ªåšé¡¹ç›®çš„å›¢é˜Ÿï¼Œä¸€èµ·åšé¡¹ç›®ï¼Œå…±åŒå­¦ä¹ è¿›æ­¥ï¼Œç„¶åç¿»é˜…QQç¾¤ï¼Œå‘ç°äº†ç½‘å®‰åä¼šçš„é¡¹ç›®éƒ¨ï¼Œå†ä¸€ç•ªå’¨è¯¢åï¼ŒæŠ•äº†ç®€å†ï¼Œç„¶åå‚åŠ äº†ç¬”è¯•ä»¥åŠé¢è¯•ï¼Œç„¶åæˆåŠŸè¿›å…¥äº†è¿™ä¸ªéƒ¨é—¨ï¼Œå»çš„æ—¶å€™å¾ˆæƒŠå¥‡è¿™ä¸ªéƒ¨é—¨å±…ç„¶æœ‰åŠå…¬å®¤ï¼Œæˆ‘è¿˜ä¼šæœ‰å·¥ä½ï¼Œåæ¥ç¬¬ä¸€å¤©å»çš„æ—¶å€™æ‰äº†è§£åˆ°éƒ¨é—¨æ——ä¸‹æœ‰ä¸€æ‰€å…¬å¸ï¼Œæˆ‘ç›¸å½“äºè¿›å…¥äº†ä¸€ä¸ªå…¬å¸ï¼Œæˆä¸ºäº†é‡Œé¢çš„èŒå‘˜ï¼Œå“¦å¯¹äº†ï¼Œæˆ‘é€‰æ‹©äº†å¼€å‘å²—ä¸­çš„åç«¯å¼€å‘ï¼Œæ°å¥½ä¹Ÿæ˜¯ä»–ä»¬éƒ¨é—¨ç°åœ¨ç¼ºäººçš„å²—ä½ï¼Œæ€ä¹ˆè¯´å‘¢ä¹ŸæŒºæœ‰å‹åŠ›çš„.æ®è¯´ç­‰ä»¥åå­¦æˆæ¥æ‰‹çš„æ—¶å€™ï¼Œæœ‰ç»©æ•ˆäº†ï¼Œæˆ‘å°±ä¼šæœ‰å·¥èµ„äº†hhhï¼Œè¿˜æŒºæ¿€åŠ¨çš„. è¯åˆè¯´å›æ¥ï¼Œåœ¨è¿™ä¸ªå›¢é˜Ÿä¸­ï¼Œè‡ªå·±ä¹ŸæŒºæƒ³å¿«ç‚¹å­¦ä¹ å¯ä»¥å‚åŠ åˆ°é¡¹ç›®ä¸­ï¼Œè‡ªå·±æœ€è¿‘ä¹Ÿå˜å¾—å¼€å§‹å¥½å¥½æå­¦ä¹ ï¼Œä¸æ˜¯å¾ˆæ‡’æ•£äº†ï¼Œæœ‰ç‚¹å¤§ä¸€ä¸Šå­¦æœŸçš„æ„Ÿè§‰äº†hhhï¼Œä¹Ÿå¤šäºäº†æˆ‘å®¶å°æœ‹å‹ï¼Œç»™äºˆæˆ‘ç†è§£å’Œå¸®åŠ©ï¼Œååˆ†ä½“è´´æˆ‘ï¼Œæ¸©æŸ”åˆå¯çˆ±ï¼Œæœ‰äº†æˆ‘å®¶å°æœ‹å‹ï¼Œæ„Ÿè§‰èƒ½æŠŠæˆ‘ä»ç´§å¼ çš„ç¯å¢ƒä¸­è§£è„±å‡ºæ¥ï¼Œè®©æˆ‘è½»æ¾ä¸å°‘ï¼ŒçœŸå¥½å•Š.</p>
<p>&emsp;&emsp;å¯¹äºç°é˜¶æ®µç›®æ ‡ï¼Œå°±æ˜¯å­¦ä¹ ç»å…¸çš„ <code>SSM</code> æŠ€æœ¯æ¡†æ¶ï¼Œè¯´å¤šä¹Ÿä¸å¤šï¼Œè¯´å°‘ä¹Ÿä¸å°‘ï¼Œæ…¢æ…¢æ¥å’¯ï¼ŒåæœŸæ‰èƒ½è¿ç”¨è‡ªå¦‚ï¼Œè€Œä¸”å›¢é˜Ÿä¸­ç¼ºå°‘ï¼Œ<code>Java</code> åç«¯å¼€å‘çš„è€å¸ˆå‚…ï¼Œç°åœ¨è‡ªå·±åªèƒ½ä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œè„šè¸å®åœ°çš„è¿›è¡Œå­¦ä¹ .æœªæ¥çš„è·¯è¿˜æ˜¯æŒºé•¿çš„ï¼Œæˆ‘å¯¹ç°åœ¨è‡ªå·±çš„çŠ¶æ€å¾ˆæ»¡æ„ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤šä¿æŒä¿æŒï¼Œä¹Ÿå¸Œæœ›å¤šé™ªé™ªæˆ‘å®¶å°æœ‹å‹hhhï¼Œä¹Ÿå¸Œæœ›æˆ‘å®¶å°æœ‹å‹èƒ½ç†è§£æˆ‘å“¦.</p>
<h1 id="âœ¨ç»“æŸEND"><a href="#âœ¨ç»“æŸEND" class="headerlink" title="âœ¨ç»“æŸEND"></a>âœ¨ç»“æŸEND</h1><p>æ”¾ä¸Šä¸€å¥è‡ªå·±ç‰¹åˆ«å–œæ¬¢çš„ä¸€å¥è¯—ï¼šâ€œé†‰åä¸çŸ¥å¤©åœ¨æ°´ï¼Œæ»¡èˆ¹æ¸…æ¢¦å‹æ˜Ÿæ²³.â€   è«åå–œæ¬¢è¿™å¥è¯—çš„æ„å¢ƒï¼Œè®©æˆ‘å¯¹æœªæ¥ç”Ÿæ´»æœ‰ç€æ— é™ç•…æƒ³hhhh</p>
]]></content>
      <categories>
        <category>ç”Ÿæ´»æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹(äºŒ):æœåŠ¡å™¨å¼€å‘ä»¥åŠçº¿ç¨‹æ± </title>
    <url>/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="å‰ç½®-å¤šçº¿ç¨‹"><a href="#å‰ç½®-å¤šçº¿ç¨‹" class="headerlink" title="å‰ç½®-å¤šçº¿ç¨‹"></a>å‰ç½®-å¤šçº¿ç¨‹</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¤šçº¿ç¨‹çš„å®ç°æ–¹å¼ æ–¹å¼ä¸€ï¼š å®ç° runnable  æ–¹å¼äºŒ: ç»§æ‰¿Threadç±»  æ–¹å¼ä¸‰: çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸€ï¼šå®ç° runnable ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼äºŒç»§æ‰¿ threadç±»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æœåŠ¡ç«¯ä»£ç "><a href="#æœåŠ¡ç«¯ä»£ç " class="headerlink" title="æœåŠ¡ç«¯ä»£ç "></a>æœåŠ¡ç«¯ä»£ç </h1><p>æœåŠ¡ç«¯åªéœ€è¦åˆ›å»º <code>ServerSocket</code> å¯¹è±¡å³å¯ï¼Œå†è°ƒç”¨<code>accept</code>å¼€å¯æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ„é€ å™¨ä¸­åªéœ€è¦ä¼ å…¥æœåŠ¡æ‰€åœ¨çš„ç«¯å£å·å³å¯ ,å¦‚æœæƒ³è¦è¯»å–å®¢æˆ·ç«¯ä¼ é€’çš„æ•°ï¼Œè¯»å–å®Œæˆä¹‹åéœ€è¦åŠ ä¸Š <code>shutdownInput</code>.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerSocket01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºæœåŠ¡ç«¯</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8989</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨...&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">        Socket accept = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¾“å…¥æµ</span></span><br><span class="line">        InputStream inputStream = accept.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">byte</span> [] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//è¯»å–åˆ°byteæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            len = inputStream.read(bytes);</span><br><span class="line">            <span class="keyword">if</span>(len == -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            stringBuilder.append(<span class="keyword">new</span> String(bytes , <span class="number">0</span> ,len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¯»å…¥ç»“æŸ </span></span><br><span class="line">        accept.shutdownInput();</span><br><span class="line"></span><br><span class="line">        OutputStream outputStream = accept.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello Client&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å‡ºç»“æŸ</span></span><br><span class="line">        accept.shutdownOutput();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="å®¢æˆ·ç«¯ä»£ç "><a href="#å®¢æˆ·ç«¯ä»£ç " class="headerlink" title="å®¢æˆ·ç«¯ä»£ç "></a>å®¢æˆ·ç«¯ä»£ç </h1><p>å®¢æˆ·ç«¯éœ€è¦åˆ›å»º <code>socket</code> å¯¹è±¡ ï¼Œä¼ å…¥ <code>ip</code>åœ°å€ä¸ç«¯å£å·. ä¼ é€’æ•°æ®éœ€è¦é€šè¿‡ <code>OutPutStream</code>å¯¹è±¡ï¼ŒåŒæ ·ï¼Œä¼ è¾“å®Œæˆåéœ€è¦<code>shutdownOutPut</code> è¿›è¡Œå…³é—­.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Socket01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="comment">// å»ºç«‹è¿æ¥</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;localhost&quot;</span>, <span class="number">8989</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘æœåŠ¡ç«¯ä¼ é€’æ•°æ®</span></span><br><span class="line">        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;Hello Server&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å‡ºç»“æŸ</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¾“å…¥ç•™</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">byte</span> [] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//è¯»å…¥byteæ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            len = inputStream.read(bytes);</span><br><span class="line">            <span class="keyword">if</span>(len == -<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            stringBuilder.append(<span class="keyword">new</span> String(bytes , <span class="number">0</span> ,len));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºè¾“å…¥ç»“æŸ</span></span><br><span class="line">        socket.shutdownInput();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨"><a href="#ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨" class="headerlink" title="ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨"></a>ä½¿ç”¨æ•°æ®è¿‡æ»¤å™¨</h1><p>è¿™é‡Œåªä¸¾ä¸€ä¸ªå°ä¾‹å­ï¼Œç”¨æ³•éƒ½æ˜¯å¤§åŒå°å¼‚çš„ï¼Œéƒ½æ˜¯åˆ›å»º<code>DataIn(Out)PutStream</code> è¿›è¡Œè½¬åŒ–.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   Socket socket = serverSocket.accept();</span><br><span class="line"><span class="comment">//è·å–è¾“å…¥å…­</span></span><br><span class="line">   InputStream inputStream = socket.getInputStream();</span><br><span class="line"><span class="comment">//ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œè½¬æ¢</span></span><br><span class="line">   DataInputStream dataInputStream = <span class="keyword">new</span> DataInputStream(inputStream);</span><br><span class="line"><span class="comment">//ç›´æ¥è¯»å–</span></span><br><span class="line">   System.out.println(dataInputStream.readUTF());</span><br><span class="line">   socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">   OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">   DataOutputStream dataOutputStream = <span class="keyword">new</span> DataOutputStream(outputStream);</span><br><span class="line">   dataOutputStream.writeUTF(<span class="string">&quot;æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œè¿”å›ç›¸åº”çš„æ•°æ®....&quot;</span>);</span><br><span class="line">   socket.shutdownOutput();</span><br><span class="line">   System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°ä¸º:&quot;</span> + Thread.currentThread().getName());</span><br></pre></td></tr></table></figure>

<h1 id="å¼•å…¥çº¿ç¨‹æ± "><a href="#å¼•å…¥çº¿ç¨‹æ± " class="headerlink" title="å¼•å…¥çº¿ç¨‹æ± "></a>å¼•å…¥çº¿ç¨‹æ± </h1><p>åœ¨åŸå…ˆçš„ç¨‹åºä¸­ï¼Œæ˜¾ç„¶æ˜¯ä¸æ”¯æŒå¹¶å‘å¤„ç†çš„ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥çš„ä»£ç ï¼Œæ— æ³•ä¿ƒæˆåŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå¦‚æœæƒ³è¦å®ç°ï¼Œåˆ™éœ€è¦åˆ©ç”¨å¤šçº¿ç¨‹è¿›è¡Œç›¸å…³çš„å¤„ç†.ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerSocket02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8989</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨ä»¥åŠå¯åŠ¨.....&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Socket socket = serverSocket.accept();</span><br><span class="line">                        InputStream inputStream = socket.getInputStream();</span><br><span class="line">                        DataInputStream dataInputStream = <span class="keyword">new</span> DataInputStream(inputStream);</span><br><span class="line">                        System.out.println(dataInputStream.readUTF());</span><br><span class="line">                        socket.shutdownInput();</span><br><span class="line"></span><br><span class="line">                        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">                        DataOutputStream dataOutputStream = <span class="keyword">new</span> DataOutputStream(outputStream);</span><br><span class="line">                        dataOutputStream.writeUTF(<span class="string">&quot;æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œè¿”å›ç›¸åº”çš„æ•°æ®....&quot;</span>);</span><br><span class="line">                        socket.shutdownOutput();</span><br><span class="line">                        System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°ä¸º:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘åœ¨å®¢æˆ·ç«¯åŒæ—¶å‘èµ·äº† 10000 ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œç”µè„‘å·®ç‚¹å°±å´©äº†ï¼Œå†…å­˜ä½¿ç”¨ç›´é€¼ 100% ï¼Œæµè§ˆå™¨å’ŒQQç›´æ¥è‡ªåŠ¨é€€å‡ºâ€¦ å¤ªææ€–äº†</p>
<p>ä»¥ä¸Šç¨‹åºå­˜åœ¨çš„é—®é¢˜ï¼š æ— æ³•çº¿ç¨‹å¤ç”¨ï¼Œå³ç¬¬ä¸€ä¸ªçº¿ç¨‹å¤„ç†å®Œç»“æŸåï¼Œå°±ä¸ä¼šå†ç”¨äº†ï¼Œå†æ¥è¯·æ±‚æ—¶åˆ™åˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚</p>
<p>å¦‚æ­¤ä»¥æ¥ï¼šå°±éœ€è¦çº¿ç¨‹æ± è¿›è¡Œä¼˜åŒ–çº¿ç¨‹çš„ä½¿ç”¨ï¼Œæé«˜æ¯ä¸ªçº¿ç¨‹çš„ä½¿ç”¨ç‡</p>
<img src="/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class>



<p>ä½¿ç”¨<code>ThreadPoolExecutor</code>åˆ›å»ºçº¿ç¨‹æ± ï¼ŒåŒæ ·çš„å¯ä»¥ä½¿ç”¨å…¶å°è£…ç±»æ¥æ›´ä¸ºæ–¹ä¾¿çš„åˆ›å»ºçº¿ç¨‹æ±  <code>Executors.newCachedThreadPool()</code> æˆ–è€…</p>
<p><code>Executors.newFixedThreadPool(10)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadPool</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayBlockingQueue&lt;Runnable&gt; blockingQueue = <span class="keyword">new</span> ArrayBlockingQueue&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">        ThreadFactory threadFactory = Executors.defaultThreadFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ThreadPoolExecutor</span></span><br><span class="line">        <span class="comment">//å‚æ•°1ï¼š æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">        <span class="comment">//å‚æ•°2ï¼š çº¿ç¨‹æ± æœ€å¤§æ•°é‡</span></span><br><span class="line">        <span class="comment">//å‚æ•°3ï¼š æ¯ä¸ªçº¿ç¨‹å®Œæˆä¹‹åçš„ç©ºé—²æ—¶é—´</span></span><br><span class="line">        <span class="comment">//å‚æ•°4ï¼š æ—¶é—´å•ä½</span></span><br><span class="line">        <span class="comment">//å‚æ•°5ï¼š çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">//å‚æ•°6ï¼š çº¿ç¨‹å·¥å‚ --&gt; åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//å‚æ•°7ï¼š æ‹’ç»å¤„ç†å™¨</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥ä¸€ï¼šThreadPoolExecutor.AbortPolicy() æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥äºŒï¼šThreadPoolExecutor.CallerRunsPolicy() åœ¨execute æ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥ä¸‰ï¼šThreadPoolExecutor.DiscardOldestPolicy() æ”¾å¼ƒæœ€æ—§çš„æœªå¤„ç†è¯·æ±‚(å³å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„)ï¼Œç„¶åé‡è¯• executeï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡ã€‚</span></span><br><span class="line">        <span class="comment">//      ç­–ç•¥å››ï¼šThreadPoolExecutor.DiscardPolicy() é»˜è®¤æƒ…å†µä¸‹å®ƒå°†æ”¾å¼ƒè¢«æ‹’ç»çš„ä»»åŠ¡ã€‚</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//çº¿ç¨‹æ± æ‰§è¡Œé€»è¾‘:</span></span><br><span class="line">        <span class="comment">// 1. å½“è¯·æ±‚è¿›å…¥æ—¶,</span></span><br><span class="line">        <span class="comment">//      1.1 è¯·æ±‚æ•°é‡ &lt;= æ ¸å¿ƒçº¿ç¨‹æ•° ---&gt; æ°å¥½åˆ†é…æ¯ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//      1.2 è¯·æ±‚æ•°é‡ &gt; æ ¸å¿ƒçº¿ç¨‹æ•° and è¯·æ±‚æ•°é‡ &lt;= çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡  ---&gt; ç­‰å¾…(è¿›å…¥çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—)æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œåæ‰§è¡Œå‰©ä½™çš„è¯·æ±‚</span></span><br><span class="line">        <span class="comment">//      1.3 è¯·æ±‚æ•°é‡ &gt; çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡  ---&gt; æ‹’ç»å¤„ç†</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor = <span class="keyword">new</span> ThreadPoolExecutor(</span><br><span class="line">                <span class="number">3</span>, <span class="comment">//æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">                <span class="number">5</span>, <span class="comment">//çº¿ç¨‹æ± æœ€å¤§æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ä¸´æ—¶çº¿ç¨‹  ===&gt; ä¸´æ—¶çº¿ç¨‹ä¸º 2</span></span><br><span class="line">                <span class="number">10</span>, <span class="comment">//æ¯ä¸ªçº¿ç¨‹å®Œæˆä¹‹åçš„ç©ºé—²æ—¶é—´</span></span><br><span class="line">                TimeUnit.SECONDS, <span class="comment">//æ—¶é—´å•ä½</span></span><br><span class="line">                blockingQueue, <span class="comment">//çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—</span></span><br><span class="line">                threadFactory, <span class="comment">//çº¿ç¨‹å·¥å‚ --&gt; åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">                <span class="keyword">new</span> ThreadPoolExecutor.DiscardPolicy()); <span class="comment">//æ‹’ç»å¤„ç†å™¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ€å¤§å¤„ç†çº¿ç¨‹çš„æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ç­‰å¾…é˜Ÿåˆ—å®¹é‡ + ä¸´æ—¶çº¿ç¨‹æ•° = çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡ + ç­‰å¾…é˜Ÿåˆ—å®¹é‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++)</span><br><span class="line">        threadPoolExecutor.execute(<span class="keyword">new</span> MyRunnable());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ— é™çº¿ç¨‹æ•°é‡  æœ€å¤§çº¿ç¨‹æ•°é‡ä¸º 2147483648</span></span><br><span class="line">        ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//å›ºå®šçº¿ç¨‹æ•°é‡</span></span><br><span class="line">        ExecutorService executorService1 = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œä¸­...çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æœ€å¤§å¤„ç†çº¿ç¨‹çš„æ•°é‡ = æ ¸å¿ƒçº¿ç¨‹æ•° + ç­‰å¾…é˜Ÿåˆ—å®¹é‡ + ä¸´æ—¶çº¿ç¨‹æ•° = çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°é‡ + ç­‰å¾…é˜Ÿåˆ—å®¹é‡</strong></li>
</ul>
<p><strong>çº¿ç¨‹æ± æ‰§è¡Œé€»è¾‘:</strong></p>
<ol>
<li><p>å½“è¯·æ±‚è¿›å…¥æ—¶,</p>
<p>   1.1 è¯·æ±‚æ•°é‡  **&lt;=**  æ ¸å¿ƒçº¿ç¨‹æ•° â€“&gt; æ°å¥½åˆ†é…æ¯ä¸ªçº¿ç¨‹</p>
<p>   1.2 è¯·æ±‚æ•°é‡  <strong>&gt;</strong>  æ ¸å¿ƒçº¿ç¨‹æ•° and è¯·æ±‚æ•°  **&lt;=**  çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°  â€“&gt; ç­‰å¾…(è¿›å…¥çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—)æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œæ‰§è¡Œå‰©ä½™çš„è¯·æ±‚</p>
<p>   1.3 è¯·æ±‚æ•°é‡  <strong>&gt;</strong>  çº¿ç¨‹æ± ä¸­æœ€å¤§çº¿ç¨‹æ•°  â€“&gt; æ‹’ç»å¤„ç†</p>
</li>
</ol>
<p><strong>å‚æ•°7ï¼š æ‹’ç»å¤„ç†å™¨</strong></p>
<ul>
<li><p>ç­–ç•¥ä¸€ï¼šThreadPoolExecutor.AbortPolicy()</p>
<ul>
<li>æŠ›å‡ºå¼‚å¸¸</li>
</ul>
</li>
<li><p>ç­–ç•¥äºŒï¼šThreadPoolExecutor.CallerRunsPolicy() </p>
<ul>
<li>åœ¨execute æ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</li>
</ul>
</li>
<li><p>ç­–ç•¥ä¸‰ï¼šThreadPoolExecutor.DiscardOldestPolicy()</p>
<ul>
<li>æ”¾å¼ƒæœ€æ—§çš„æœªå¤„ç†è¯·æ±‚(å³å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„)ï¼Œç„¶åé‡è¯• executeï¼›å¦‚æœæ‰§è¡Œç¨‹åºå·²å…³é—­ï¼Œåˆ™ä¼šä¸¢å¼ƒè¯¥ä»»åŠ¡</li>
</ul>
</li>
<li><p>ç­–ç•¥å››ï¼šThreadPoolExecutor.DiscardPolicy()</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹å®ƒå°†æ”¾å¼ƒè¢«æ‹’ç»çš„ä»»åŠ¡</li>
</ul>
<p>â€‹        </p>
</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>çº¿ç¨‹æ± </tag>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡¹ç›®æ„å»ºå·¥å…·ä¹‹Maven</title>
    <url>/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/</url>
    <content><![CDATA[<h1 id="ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ"><a href="#ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ"></a>ğŸ‡mavenæ˜¯ä»€ä¹ˆå¹²ä»€ä¹ˆçš„ï¼Ÿ</h1><blockquote>
<p>mavençš„ä½œç”¨æ˜¯ï¼š1ã€åœ¨æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„é…ç½®ï¼Œmavenå°±ä¼šè‡ªåŠ¨çš„ä¸‹è½½ç›¸åº”çš„jaråŒ…ï¼›2ã€ä¸‹è½½ä¾èµ–ï¼Œåªè¦é…ç½®çš„jaråŒ…æ‰€ä¾èµ–çš„å…¶ä»–jaråŒ…éƒ½ä¼šè¢«å®ƒè‡ªåŠ¨ä¸‹è½½ä¸‹æ¥ï¼› 3ã€å¯ä»¥ç›´æ¥é€šè¿‡å®ƒæ‰“åŒ…waræˆ–è€…jaré¡¹ç›®ã€‚ 4.å¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç æµ‹è¯•ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆæµ‹è¯•æŠ¥å‘Š 5.å¸®åŠ©æˆ‘ä»¬ä¸€æ¬¡æ€§ç¼–è¯‘æ‰€æœ‰æºæ–‡ä»¶ ç”Ÿæˆ <code>.class</code> æ–‡ä»¶ ï¼Œå­˜æ”¾äºtarget ç›®å½•ä¸­.</p>
</blockquote>
<p>&emsp;&emsp;ç”¨é€šä¿—çš„ä¾‹å­æ¥è®²ï¼š<code>maven</code> å¥½æ¯”ä¸€ä¸ªç™¾è´§å•†åœºï¼Œ åœ¨ä»¥å‰æ²¡æœ‰ç™¾è´§å•†åœºçš„æ—¶å€™ ï¼Œ å¦‚æœä½ éœ€è¦ä¹°ä¸€äº›å·¥å…·éœ€è¦å»åˆ°ç›¸åº”çš„åº—é“ºå»å¯»æ‰¾ï¼Œä¹°é£Ÿç‰©éœ€è¦å»åˆ°èœå¸‚åœº ï¼Œååˆ†ç¹çï¼Œç°åœ¨æœ‰äº†ç™¾è´§å•†åœºï¼Œä½ å¯ä»¥å»é‡Œé¢å¾ˆç®€å•çš„å°±ä¹°åˆ°ä½ æ‰€éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿ï¼Œä¸ç”¨å»åˆ°å¤„å¯»æ‰¾.</p>
<p>&emsp;&emsp;åœ¨é¡¹ç›®ä¸­ï¼Œæ­¤æ—¶æˆ‘éœ€è¦çš„ä¸œè¥¿å¯¹åº”çš„å°±æ˜¯ä¸€äº› jar åŒ…  ï¼Œæˆ‘ä»¬åªéœ€è¦è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„jaråŒ…ç›¸åº”çš„ä¿¡æ¯ ï¼Œ<code>maven</code> ä¾¿ä¼šå¸®æˆ‘ä»¬ä¸‹è½½å¥½ï¼Œä¸ä»…å¦‚æ­¤å¦‚æœä¸‹è½½çš„jaråŒ…ä¾èµ–äº†å…¶å®ƒjaråŒ…ï¼Œä¹Ÿä¼šåŒæ—¶å¸®åŠ©æˆ‘ä»¬ä¸‹è½½.åŒæ—¶ï¼Œè¿˜å¯ä»¥å¸®æˆ‘ä»¬å¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ…æˆjaræ–‡ä»¶æˆ–è€…waræ–‡ä»¶.</p>
<p>&emsp;&emsp;mavençš„å‡ºç°ç¡®å®æé«˜äº†ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ï¼Œä¸å†ä¸ºå„å¤„å¯»æ‰¾ç›¸åº”ç‰ˆæœ¬çš„jaråŒ…è€Œå‘æ„~~</p>
<h1 id="ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ"><a href="#ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ" class="headerlink" title="ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ"></a>ğŸŠmavençš„å®‰è£…ç›®å½•è§£æ</h1><p>ä» Apache Maven å®˜ç½‘ä¸‹è½½ Maven çš„å®‰è£…åŒ…å¹¶è§£å‹ä¹‹åï¼Œè¿›å…¥å®‰è£…ç›®å½•ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<p>bin<br>boot<br>conf<br>lib<br>LICENSE.txt<br>NOTICE.txt<br>README.txt<br>æ¥ä¸‹æ¥ï¼Œåˆ†åˆ«è§£è¯»ä»¥ä¸Šç›®å½•çš„å†…å®¹åŠåŠŸèƒ½ï¼š</p>
<p><strong>ç¬¬ 1 ä¸ªï¼šbin</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†mvnè¿è¡Œçš„è„šæœ¬ï¼Œåˆ†åˆ«ä¸ºmvnã€mvn.batã€mvnDebugã€mvnDebug.batå’Œm2.confï¼Œè¿™äº›è„šæœ¬ç”¨æ¥é…ç½® Java å‘½ä»¤ï¼Œå‡†å¤‡ CLASSPATH å’Œç›¸å…³çš„ Java ç³»ç»Ÿå±æ€§ï¼Œç„¶åæ‰§è¡Œ Java å‘½ä»¤ã€‚å…¶ä¸­ï¼Œmvnæ˜¯åŸºäº UNIX å¹³å°çš„shellè„šæœ¬ï¼Œmvn.batæ˜¯åŸºäº Windows å¹³å°çš„batè„šæœ¬ï¼›åŒç†ï¼ŒmvnDebugæ˜¯åŸºäº UNIX å¹³å°çš„shellè„šæœ¬ï¼ŒmvnDebug.batæ˜¯åŸºäº Windows å¹³å°çš„batè„šæœ¬ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»»ä½•ä¸€æ¡mvnå‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨è¿™äº›è„šæœ¬ã€‚è€Œmvnå’ŒmvnDebugçš„åŒºåˆ«å°±åœ¨äºåè€…æ¯”å‰è€…å¤šäº†ä¸€æ¡MAVEN_DEBUG_OPTSé…ç½®ï¼Œå…¶ä½œç”¨å°±æ˜¯åœ¨è¿è¡Œ Maven æ—¶å¼€å¯debugï¼Œä»¥ä¾¿è°ƒè¯• Maven æœ¬èº«ã€‚æ­¤å¤–ï¼Œm2.confæ˜¯classworldsçš„é…ç½®æ–‡ä»¶ã€‚</p>
<p><strong>ç¬¬ 2 ä¸ªï¼šboot</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åªåŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥maven 3.0ä¸ºä¾‹ï¼Œè¯¥æ–‡ä»¶ä¸ºplexus-classworlds-2.2.3.jarã€‚plexus-classworldsæ˜¯ä¸€ä¸ªç±»åŠ è½½å™¨æ¡†æ¶ï¼Œç›¸å¯¹äºé»˜è®¤çš„ Java ç±»åŠ è½½å™¨ï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„è¯­æ³•ä»¥æ–¹ä¾¿é…ç½®ï¼ŒMaven ä½¿ç”¨è¯¥æ¡†æ¶åŠ è½½è‡ªå·±çš„ç±»åº“ã€‚</p>
<p><strong>ç¬¬ 3 ä¸ªï¼šconf</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†è¦ç»™éå¸¸é‡è¦çš„æ–‡ä»¶settings.xmlã€‚ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå°±èƒ½å†æœºå™¨ä¸Šå…¨å±€åœ°å®šåˆ¶ Maven çš„è¡Œä¸ºã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ›´åå‘äºå¤åˆ¶è¯¥æ–‡ä»¶è‡³<del>/.m2/ç›®å½•ä¸‹ï¼ˆ</del>è¡¨ç¤ºç”¨æˆ·ç›®å½•ï¼‰ï¼Œç„¶åä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·èŒƒå›´å®šåˆ¶ Maven çš„è¡Œä¸ºã€‚</p>
<p><strong>ç¬¬ 4 ä¸ªï¼šlib</strong></p>
<p>ã€€ã€€è¯¥ç›®å½•åŒ…å«äº†æ‰€æœ‰ Maven è¿è¡Œæ—¶éœ€è¦çš„ Java ç±»åº“ï¼ŒMaven æœ¬èº«æ˜¯åˆ†æ¨¡å—å¼€å‘çš„ï¼Œå› æ­¤ç”¨æˆ·èƒ½çœ‹åˆ°è¯¸å¦‚maven-core-3.0.jarå’Œmaven-model-3.0.jarä¹‹ç±»çš„æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œè¿™é‡Œè¿˜åŒ…å«ä¸€äº› Maven ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¦‚common-cli-1.2.jarå’Œgoogle-collection-1.0.jarç­‰ã€‚å¯¹äº Maven 2 æ¥è¯´ï¼Œè¯¥ç›®å½•åªåŒ…å«ä¸€ä¸ªå¦‚maven-2.2.1-uber.jarçš„æ–‡ä»¶ï¼ŒåŸæœ¬å„ä¸ºç‹¬ç«‹çš„ JAR æ–‡ä»¶çš„ Maven æ¨¡å—å’Œç¬¬ä¸‰æ–¹ç±»åº“éƒ½è¢«æ‹†è§£åé‡æ–°åˆå¹¶åˆ°äº†è¿™ä¸ª JAR æ–‡ä»¶ä¸­ã€‚å¯ä»¥è¯´ï¼Œlibç›®å½•å°±æ˜¯çœŸæ­£çš„ Mavenã€‚è¿˜æœ‰ä¸€ç‚¹å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ‰¾åˆ° Maven å†…ç½®çš„è¶…çº§ POMã€‚</p>
<p><strong>ç¬¬ 5 ä¸ªï¼šLICENSE.txt</strong></p>
<p>ã€€ã€€è¯¥æ–‡ä»¶è®°å½•äº† Maven ä½¿ç”¨çš„è½¯ä»¶è®¸å¯è¯ Apache License Version 2.0ã€‚</p>
<p><strong>ç¬¬ 6 ä¸ªï¼šNOTICE.txt</strong></p>
<p>ã€€ã€€è¯¥æ–‡ä»¶è®°å½•äº† Maven åŒ…å«çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚</p>
<p><strong>ç¬¬ 7 ä¸ªï¼šREADME.txt</strong></p>
<h1 id="ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ"><a href="#ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ"></a>ğŸ€mavenç›¸å…³æ ¸å¿ƒæ¦‚å¿µ</h1><ul>
<li><p><strong><code>Pom.xml</code></strong> :  ä¹Ÿç§°ä¸ºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œç”¨äºè®°å½•éœ€è¦çš„ <code>jar</code> åŒ…çš„åæ ‡ ä»¥åŠ<code>maven</code>é…ç½®å±æ€§ç­‰.</p>
</li>
<li><p><strong>çº¦å®šçš„ç›®å½•ç»“æ„</strong> ï¼š<code>maven</code> é¡¹ç›®æ„å»ºå‡ºæ¥å…·æœ‰ç‰¹å®šçš„æ–‡ä»¶ç›®å½•ç»“æ„.</p>
</li>
<li><p><strong>åæ ‡ (ä¹Ÿç§°gav)</strong> ï¼šåˆ†åˆ«ç”± <code>groupId ã€artifactId ã€version</code> ç›¸å½“äºä¸€ä¸ªç½‘å€å…·æœ‰å”¯ä¸€æ€§ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ª <code>jar/war </code> åŒ….</p>
</li>
<li><p><strong>ä¾èµ–ç®¡ç†</strong> ï¼šç”¨äºç®¡ç†å„ä¸ª <code>jar</code> åŒ…ä¹‹é—´çš„ä¾èµ– ï¼Œ<code>maven</code> å¯ä»¥è‡ªåŠ¨å¸®åŠ©ç®¡ç†ï¼Œå¹¶ä¸”å…·æœ‰è§£å†³ä¾èµ–çŸ›ç›¾çš„æªæ–½.</p>
</li>
<li><p><strong>ç”Ÿå‘½å‘¨æœŸ</strong> ï¼šå³æ•´ä¸ª <code>maven</code> é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ ï¼ˆé¡¹ç›®çš„æ¸…ç†ã€åˆå§‹åŒ–ã€ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€é›†æˆæµ‹è¯•ã€éªŒè¯ã€éƒ¨ç½²å’Œç«™ç‚¹ç”Ÿæˆç­‰ï¼‰.</p>
</li>
<li><p><strong>æ’ä»¶/ç›®æ ‡</strong> ï¼šæ’ä»¶ç”¨äºè¡¥å……æä¾›åŸæœ¬æ²¡æœ‰çš„åŠŸèƒ½ï¼Œç›®æ ‡å³ <code>target</code> ç”¨äºå­˜å‚¨ç¼–è¯‘å¥½çš„ <code>class</code> æ–‡ä»¶ä»¥åŠæ‰“åŒ…è¿‡åçš„åŒ… .</p>
</li>
<li><p><strong>ä¾èµ–èŒƒå›´ï¼ˆscopeï¼‰</strong>ï¼šå¯¹äºæŸä¸€ä¸ª <code>jar</code> åŒ…åªéœ€åœ¨æµ‹è¯•é˜¶æ®µä½¿ç”¨ï¼Œåœ¨çœŸæ­£éƒ¨ç½²çš„æ—¶å€™å…¶å®ä¸éœ€è¦ï¼Œæ­¤æ—¶çš„ä¾èµ–èŒƒå›´ä»…é™äºæµ‹è¯•.</p>
</li>
<li><p><strong>æœ¬åœ°ä»“åº“</strong> ï¼šç›¸å½“äºè‡ªå®¶çš„å†°ç®±ï¼Œç”¨äºå­˜å‚¨é¡¹ç›®ä¸­éœ€è¦çš„ <code>jar</code> åŒ…ï¼Œå¯ä»¥å­˜å‚¨ä» <code>maven</code> è¿œç¨‹ä»“åº“ä¸‹è½½å¾—åˆ°çš„ <code>jar</code> åŒ….</p>
</li>
<li><p><strong>è¿œç¨‹ä»“åº“</strong> ï¼š<code>maven</code> çš„è¿œç¨‹ä»“åº“ï¼ˆç›¸å½“äºä¸€ä¸ªè¶…å¸‚ï¼‰åŒ…å«å„ç§ç±»å‹ <code>jar</code> åŒ…ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰é˜¿é‡Œäº‘é•œåƒï¼Œä»¥åŠå¼€æºä¸­å›½é•œåƒæˆ–è€…ç§æœ.</p>
</li>
</ul>
<h2 id="Pom-xml-æ–‡ä»¶è¯¦è§£"><a href="#Pom-xml-æ–‡ä»¶è¯¦è§£" class="headerlink" title="Pom.xml æ–‡ä»¶è¯¦è§£"></a>Pom.xml æ–‡ä»¶è¯¦è§£</h2><p><strong>â‘  . åæ ‡</strong> </p>
<blockquote>
<p>åˆ†åˆ«ç”± <code>groupId ã€artifactId ã€version</code> ç›¸å½“äºä¸€ä¸ªç½‘å€å…·æœ‰å”¯ä¸€æ€§ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ª <code>jar/war </code> åŒ….</p>
</blockquote>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--dependenciesæ ‡ç­¾å¤–çš„åæ ‡--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ä¸€èˆ¬ä¸ºåŸŸåå€’å†™å…·æœ‰å”¯ä¸€æ€§<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>   </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>å®é™…é¡¹ç›®åç§°-æ¨¡å—åç§°<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>ç‰ˆæœ¬å·-RELEASEï¼ˆå‘è¡Œï¼‰/SNAPSHOTï¼ˆå¼€å‘ä¸­ï¼‰<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>æ‰“åŒ…é¡¹ç›®ç±»å‹<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--dependencieså†…çš„åæ ‡--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> <span class="comment">&lt;!--ä¾èµ–èŒƒå›´--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>â‘¡ . propertieså±æ€§</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç±»ä¼¼äºjavaä¸­çš„å¯¼åŒ…ï¼Œç”¨.è¡¨ç¤ºå­ç›®å½•/å±æ€§</span></span><br><span class="line"><span class="comment">	ç®€è€Œè¨€ä¹‹å°±æ˜¯è¡¨æ˜ä»¥ä¸‹å±æ€§æ˜¯å¯ä»¥åœ¨æ–‡ä»¶ä¸­ä¸€ä¸€å¯¹åº”çš„ï¼Œ</span></span><br><span class="line"><span class="comment">	ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±æ€§ åœ¨pomçš„å…¶å®ƒä½ç½®å¯ä»¥é€š$&#123;å±æ€§å&#125;è¿›è¡Œå¼•ç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>â‘¢ . plugins</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç”¨äºè®°å½•æ’ä»¶ä¿¡æ¯ä»¥åŠç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="çº¦å®šçš„ç›®å½•ç»“æ„"><a href="#çº¦å®šçš„ç›®å½•ç»“æ„" class="headerlink" title="çº¦å®šçš„ç›®å½•ç»“æ„"></a>çº¦å®šçš„ç›®å½•ç»“æ„</h2><p>ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ª<code>maven</code> é¡¹ç›®åˆå§‹åŒ–åæ‰€æ‹¥æœ‰çš„ç›®å½•ç»“æ„</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">â”œâ”€src                       #ç”¨äºå­˜æ”¾æºæ–‡ä»¶</span><br><span class="line">â”‚  â”œâ”€main                   #ç”¨äºå­˜æ”¾ç¼–å†™çš„javaæ–‡ä»¶ä»¥åŠé…ç½®å±æ€§</span><br><span class="line">â”‚  â”‚  â”œâ”€java                #javaæºæ–‡ä»¶</span><br><span class="line">â”‚  â”‚  â””â”€resources           #é…ç½®å±æ€§</span><br><span class="line">â”‚  â””â”€test	                #å­˜æ”¾æµ‹è¯•ä»£ç å’Œé…ç½®å±æ€§</span><br><span class="line">â”‚      â”œâ”€java	            #æµ‹è¯•ä»£ç </span><br><span class="line">â”‚      â””â”€resources          #é…ç½®å±æ€§</span><br><span class="line">â””â”€target                    #compileç¼–è¯‘ç”Ÿæˆçš„classæ–‡ä»¶ä»¥åŠé…ç½®æ–‡ä»¶</span><br><span class="line">|    â”œâ”€classes</span><br><span class="line">|    â””â”€maven-status</span><br><span class="line">|        â””â”€maven-compiler-plugin</span><br><span class="line">|            â””â”€compile</span><br><span class="line">|                â””â”€<span class="keyword">default</span>-compile</span><br><span class="line">|â€”pom.xml</span><br></pre></td></tr></table></figure>



<h2 id="ä¾èµ–èŒƒå›´"><a href="#ä¾èµ–èŒƒå›´" class="headerlink" title="ä¾èµ–èŒƒå›´"></a>ä¾èµ–èŒƒå›´</h2><p>ä¾èµ–èŒƒå›´å¸¸è§çš„åˆ†ä¸ºå››ç§ï¼š<code>test ã€ compile ã€provided ã€runtime</code> æ¥ä¸‹æ¥ä¸€ä¸€è¿›è¡Œä»‹ç».</p>
<ul>
<li><p><strong><code>test</code></strong> ï¼š é¡¾åæ€ä¹‰å°±æ˜¯åœ¨æµ‹è¯•é˜¶æ®µæ‰€éœ€è¦çš„ä¾èµ–ï¼Œè€Œåœ¨æ‰“åŒ…éƒ¨ç½²é˜¶æ®µå¹¶ä¸ä¼šå¯¹ç¼–è¯‘ä»¥åŠè¿è¡Œäº§ç”Ÿå½±å“ï¼Œå› æ­¤æ‰“åŒ…æ—¶ä¼šå¿½ç•¥è¿™ä¸€ç±»åŒ….</p>
</li>
<li><p><strong><code>compile</code></strong> : è¯¥èŒƒå›´å°±æ˜¯é»˜è®¤ä¾èµ–èŒƒå›´ï¼Œæ­¤ä¾èµ–èŒƒå›´å¯¹ äºç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œä¸‰ç§classpathéƒ½æœ‰æ•ˆ .</p>
</li>
<li><p><strong><code>provide</code></strong> :  ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„ <code>maven</code> ä¾èµ–ï¼Œåªå¯¹ç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œå¯¹è¿è¡Œæ— æ•ˆï¼Œå…¸å‹çš„ä¾‹å­å°±æ˜¯servlet-api .</p>
</li>
<li><p><strong><code>runtime</code></strong> : ä½¿ç”¨è¯¥ä¾èµ–èŒƒå›´çš„mavenä¾èµ–ï¼Œåªå¯¹æµ‹è¯•å’Œè¿è¡Œæœ‰æ•ˆï¼Œå¯¹ç¼–è¯‘çš„æ— æ•ˆï¼Œå…¸å‹ä¾‹å­å°±æ˜¯JDBCçš„é©±åŠ¨å®ç°</p>
</li>
</ul>
<h1 id="ğŸ¡é…ç½®æœ¬åœ°ä»“åº“"><a href="#ğŸ¡é…ç½®æœ¬åœ°ä»“åº“" class="headerlink" title="ğŸ¡é…ç½®æœ¬åœ°ä»“åº“"></a>ğŸ¡é…ç½®æœ¬åœ°ä»“åº“</h1><p> åœ¨å®‰è£…ç›®å½•ä¸­çš„  <code>conf</code> æ–‡ä»¶å¤¹ä¸­çš„ <code>settings.xml</code> ä¸­å¯ä»¥é…ç½®æœ¬åœ°ä»“åº“çš„è·¯å¾„ï¼Œå¯ç”¨äºå­˜å‚¨ä»è¿œç¨‹ä»“åº“ä¸‹è½½æ¥çš„ <code>jar</code> åŒ….</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/1.png" class title="repository">

<p>åªéœ€æ–°å»ºä¸€ä¸ª <code>localRepository</code> æ ‡ç­¾ï¼Œå¹¶ä¸”é…ç½®ä¸Šæœ¬åœ°ä»“åº“çš„è·¯å¾„ï¼Œä¿å­˜å³å¯.</p>
<h1 id="ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ"><a href="#ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ"></a>ğŸé…ç½®è¿œç¨‹é˜¿é‡Œäº‘é•œåƒ</h1><p>åŒæ ·çš„åœ¨ <code>conf</code> æ–‡ä»¶å¤¹ä¸­çš„ <code>settings.xml</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ çº¢è‰²æ¡†ä¸­å†…å®¹å°±å¯ä»¥äº†.</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/2.png" class title="mirrors">

<p><strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¥Ÿmaven-å¸¸ç”¨å‘½ä»¤"><a href="#ğŸ¥Ÿmaven-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ğŸ¥Ÿmaven å¸¸ç”¨å‘½ä»¤"></a>ğŸ¥Ÿmaven å¸¸ç”¨å‘½ä»¤</h1><p>ä»¥ä¸‹å°†åˆ—ä¸¾ <code>maven</code> çš„å¸¸ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn -version Â  Â  Â  Â  Â  Â  Â  Â  æŸ¥çœ‹mavençš„ç‰ˆæœ¬åŠé…ç½®ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">mvn compile Â  Â  Â  Â  Â  Â  Â  Â ç¼–è¯‘é¡¹ç›®ä»£ç </span><br><span class="line"></span><br><span class="line">mvn package Â  Â  Â  Â  Â  Â  Â  æ‰“åŒ…é¡¹ç›®</span><br><span class="line"></span><br><span class="line">mvn package -Dmaven.test.skip&#x3D;true Â  æ‰“åŒ…é¡¹ç›®æ—¶è·³è¿‡å•å…ƒæµ‹è¯•</span><br><span class="line"></span><br><span class="line">mvn test Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â è¿è¡Œå•å…ƒæµ‹è¯•</span><br><span class="line"></span><br><span class="line">mvn clean Â  Â  Â  Â  Â  Â  Â  Â  Â  Â æ¸…é™¤ç¼–è¯‘äº§ç”Ÿçš„targetæ–‡ä»¶å¤¹å†…å®¹ï¼Œå¯ä»¥é…åˆç›¸åº”å‘½ä»¤ä¸€èµ·ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">mvn install Â  Â  Â  Â  Â  Â  Â  Â  Â  æ‰“åŒ…åå°†å…¶å®‰è£…åœ¨æœ¬åœ°ä»“åº“</span><br><span class="line"></span><br><span class="line">mvn deploy Â  Â  Â  Â  Â  Â  Â  Â  Â æ‰“åŒ…åå°†å…¶å®‰è£…åˆ°pomæ–‡ä»¶ä¸­é…ç½®çš„è¿œç¨‹ä»“åº“</span><br><span class="line"></span><br><span class="line">mvn site Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ç”Ÿæˆç«™ç‚¹ç›®å½•</span><br><span class="line"></span><br><span class="line">mvn dependency:list Â  Â  Â æ˜¾ç¤ºæ‰€æœ‰å·²ç»è§£æçš„æ‰€æœ‰ä¾èµ–</span><br><span class="line"></span><br><span class="line">mvn dependency:tree Â  Â  ä»¥æ ‘çš„ç»“æ„å±•ç¤ºé¡¹ç›®ä¸­çš„ä¾èµ–</span><br><span class="line"></span><br><span class="line">mvn dependency:analyze Â å¯¹é¡¹ç›®ä¸­çš„ä¾èµ–è¿›è¡Œåˆ†æï¼Œä¾èµ–æœªä½¿ç”¨ï¼Œä½¿ç”¨å•æœªå¼•å…¥</span><br><span class="line"></span><br><span class="line">mvn tomcat:run Â  Â  Â  Â  Â  Â  Â å¯åŠ¨tomcat</span><br></pre></td></tr></table></figure>





<h1 id="ğŸ£åœ¨IDEAä¸­é…ç½®maven"><a href="#ğŸ£åœ¨IDEAä¸­é…ç½®maven" class="headerlink" title="ğŸ£åœ¨IDEAä¸­é…ç½®maven"></a>ğŸ£åœ¨IDEAä¸­é…ç½®maven</h1><p>åœ¨ <code>IDEA</code>ä¸­è®¾ç½® <code>maven</code> ï¼š<br>    ä½¿ç”¨è‡ªå·±å®‰è£…çš„mavenï¼Œ éœ€è¦è¦†ç›– <code>IDEA</code>ä¸­çš„é»˜è®¤çš„è®¾ç½®.è®© <code>IDEA</code>æŒ‡å®š <code>maven</code>å®‰è£…ä½ç½®ç­‰ä¿¡æ¯</p>
<pre><code>é…ç½®çš„å…¥å£ â‘ ï¼šé…ç½®å½“å‰å·¥ç¨‹çš„è®¾ç½®ï¼Œ file--settings ---Build, Excution,Deployment--Build Tools--Maven 
                       Maven Home directory: mavençš„å®‰è£…ç›®å½•
                        User Settings File :  å°±æ˜¯mavenå®‰è£…ç›®å½•conf/setting.xmlé…ç½®æ–‡ä»¶
                        Local Repository :    æœ¬æœºä»“åº“çš„ç›®å½•ä½ç½®

                   --Build Tools--Maven--Runner  
                      VM Options : -DarchetypeCatalog=internal
                      JRE: ä½ é¡¹ç›®çš„jdk


                archetypeCatalog=internal , mavené¡¹ç›®åˆ›å»ºæ—¶ï¼Œä¼šè”ç½‘ä¸‹è½½æ¨¡ç‰ˆæ–‡ä»¶ï¼Œ
                      æ¯”è¾ƒå¤§ï¼Œ ä½¿ç”¨-DarchetypeCatalog=internalï¼Œä¸ç”¨ä¸‹è½½ï¼Œ åˆ›å»ºmavené¡¹ç›®é€Ÿåº¦å¿«ã€‚

            â‘¡ï¼šé…ç½®ä»¥åæ–°å»ºå·¥ç¨‹çš„è®¾ç½®ï¼Œ New projects settings è·Ÿä¸Šé¢ä¸€æ ·è¿›è¡Œé…ç½®å³å¯
</code></pre>
<p>åˆ›å»ºé¡¹ç›®çš„æ—¶å€™é€‰æ‹©çš„æ¨¡æ¿ï¼š</p>
<ul>
<li><strong>maven-archetype-quickstart : æ™®é€šçš„javaé¡¹ç›®</strong></li>
<li><strong>maven-archetype-webapp : webå·¥ç¨‹</strong></li>
</ul>
<p>ä¾§è¾¹æ å¯ä»¥ç›´æ¥é€šè¿‡ç‚¹å‡»å®ç° <code>maven</code> å‘½ä»¤çš„æ‰§è¡Œï¼š</p>
<img src="/2021/04/17/%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B9%8BMaven/3.png" class title="aside">

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MybatisPlus(äºŒ):å¸¸ç”¨åŠŸèƒ½è§£æ</title>
    <url>/2021/06/06/MybatisPlus%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>æ—¶éš”å¤šæ—¥ï¼Œæœ€è¿‘åœ¨ç†Ÿæ‚‰SpringBootåç«¯é¡¹ç›®ä»£ç ï¼Œå¹¶è¿›è¡Œäº†ä¸€äº›è°ƒè¯•å’Œé…ç½®ï¼Œåœ¨å’Œå­¦é•¿è¿›è¡Œä»£ç å¯¹æ¥ï¼Œå¿™æ´»äº†å¥½ä¸€æ•´å­ï¼Œå†åŠ ä¸ŠæœŸæœ«è€ƒè¯•ï¼Œè¿™ç¯‡åšå®¢é—²ç½®äº†å¾ˆä¹…ï¼Œæ€»è¿˜æ˜¯å·®ä¿©ä¸ªç‚¹æ²¡æœ‰æ—¶é—´å†™.</p>
</blockquote>
<h1 id="ğŸ¥™å¤šç§ä¸»é”®ç±»å‹"><a href="#ğŸ¥™å¤šç§ä¸»é”®ç±»å‹" class="headerlink" title="ğŸ¥™å¤šç§ä¸»é”®ç±»å‹"></a>ğŸ¥™å¤šç§ä¸»é”®ç±»å‹</h1><p>åœ¨å®ä½“ç±»ä¸­ï¼Œåœ¨ä¸»é”®çš„å±æ€§ä¸Šæ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼Œå…¶ä¸­typeæœ‰å¦‚ä¸‹é€‰æ‹©ï¼š</p>
<p>æ¥ä¸‹æ¥ä¼šæŒ‘é€‰å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„è¿›è¡Œè¯¦ç»†è§£é‡Š</p>
<p><strong><code>@TableId(value=&quot; &quot;,type=Id.type.xxx)</code></strong></p>
<table>
<thead>
<tr>
<th align="center">å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AUTO</td>
<td align="center">æ•°æ®åº“IDè‡ªå¢</td>
</tr>
<tr>
<td align="center">NONE</td>
<td align="center">æ— çŠ¶æ€,è¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹(æ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€,å…¨å±€é‡Œçº¦ç­‰äº INPUT)</td>
</tr>
<tr>
<td align="center">INPUT</td>
<td align="center">insertå‰è‡ªè¡Œsetä¸»é”®å€¼</td>
</tr>
<tr>
<td align="center">ASSIGN_ID</td>
<td align="center">åˆ†é…ID(ä¸»é”®ç±»å‹ä¸ºNumber(Longå’ŒInteger)æˆ–String)(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextId</code>(é»˜è®¤å®ç°ç±»ä¸º<code>DefaultIdentifierGenerator</code>é›ªèŠ±ç®—æ³•)</td>
</tr>
<tr>
<td align="center">ASSIGN_UUID</td>
<td align="center">åˆ†é…UUID,ä¸»é”®ç±»å‹ä¸ºString(since 3.3.0),ä½¿ç”¨æ¥å£<code>IdentifierGenerator</code>çš„æ–¹æ³•<code>nextUUID</code>(é»˜è®¤defaultæ–¹æ³•)</td>
</tr>
<tr>
<td align="center">ID_WORKER</td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID é•¿æ•´å‹ç±»å‹(please use <code>ASSIGN_ID</code>)</td>
</tr>
<tr>
<td align="center">UUID</td>
<td align="center">32ä½UUIDå­—ç¬¦ä¸²(please use <code>ASSIGN_UUID</code>)</td>
</tr>
<tr>
<td align="center">ID_WORKER_STR</td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ID å­—ç¬¦ä¸²ç±»å‹(please use <code>ASSIGN_ID</code>)</td>
</tr>
</tbody></table>
<ul>
<li><strong><code>Auto</code></strong> : ä¸»é”®è‡ªåŠ¨é€’å¢ +1 ï¼Œæ’å…¥æ•°æ®çš„æ—¶å€™æ— éœ€æ‰‹åŠ¨è®¾å®šä¸»é”®å€¼ï¼Œå¦‚è‹¥è®¾å®šå®‰è£…è®¾å®šçš„ä¸»é”®å€¼è¿›è¡Œæ’å…¥.</li>
<li><strong><code>INPUT</code></strong> ï¼šæ’å…¥æ•°æ®æ—¶è‡ªå·±æ‰‹åŠ¨è®¾å®š</li>
<li><strong><code>ASSIGN_ID</code></strong> : ä½¿ç”¨é›ªèŠ±ç®—æ³•ç”Ÿæˆä¸€ä¸ª 64  bit çš„ <code>long</code> å‹ä¸»é”®å€¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š64 ä¸ª bit ä¸­ï¼Œå…¶ä¸­ 1 ä¸ª bit æ˜¯ä¸ç”¨çš„ï¼Œç„¶åç”¨å…¶ä¸­çš„ 41 bit ä½œä¸ºæ¯«ç§’æ•°ï¼Œç”¨ 10 bit ä½œä¸ºå·¥ä½œæœºå™¨ idï¼Œ12 bit ä½œä¸ºåºåˆ—å·</li>
<li><strong><code>ASSIGN_UUID</code></strong> : é‡æ–°è‡ªåŠ¨ç”Ÿæˆæ’é™¤ä¸­åˆ’çº¿çš„UUIDä½œä¸ºä¸»é”®,ç±»å‹ä¸ºString</li>
</ul>
<h1 id="ğŸ¥šè‡ªåŠ¨å¡«å……"><a href="#ğŸ¥šè‡ªåŠ¨å¡«å……" class="headerlink" title="ğŸ¥šè‡ªåŠ¨å¡«å……"></a>ğŸ¥šè‡ªåŠ¨å¡«å……</h1><p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œé€šå¸¸éœ€è¦å­˜å‚¨æ•°æ®çš„åˆ›å»ºæ—¶é—´ä»¥åŠæ›´æ–°æ—¶é—´ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ‰‹åŠ¨çš„æ’å…¥å’Œæ›´æ–°çš„è¯ååˆ†ç¹çï¼Œå¹¶ä¸”è¿™ä¸ªæ“ä½œæœ¬èº«ä¸å…·æœ‰å”¯ä¸€æ€§ï¼Œå®é™…ä¸Šåªæ˜¯é‡å¤ç€ä¸€ä¸ªæ“ä½œï¼Œäºæ˜¯<code>MybatisPlus</code>æä¾›äº†è‡ªåŠ¨å¡«å……æœºåˆ¶.</p>
<p>å®ä½“ç±»ï¼šå…¶ä¸­ <strong><code>@TableField</code></strong> ä¸­<code>value</code>ç”¨äºæ ‡è®°å±æ€§ä¸æ•°æ®åº“ä¸­å¯¹åº”çš„å­—æ®µï¼Œç”±äºé…ç½®ä¸­é»˜è®¤å¼€å¯äº†é©¼å³°å‘½åå› æ­¤<code>value</code>å€¼å¯ä»¥ä¸å†™.</p>
<ul>
<li>å®ä½“ç±»éœ€è¦è‡ªåŠ¨å¡«å……çš„å­—æ®µåŠ ä¸Š  <strong><code>@TableField</code></strong> æ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">Books</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@TableId(value = &quot;book_id&quot; , type = IdType.AUTO)</span></span><br><span class="line">  <span class="keyword">private</span> Integer bookId;</span><br><span class="line">  <span class="keyword">private</span> String bookName;</span><br><span class="line">  <span class="keyword">private</span> Integer bookCounts;</span><br><span class="line">  <span class="keyword">private</span> String detail;</span><br><span class="line">  <span class="meta">@Version</span></span><br><span class="line">  <span class="keyword">private</span> Integer version;</span><br><span class="line">  <span class="keyword">private</span> Integer deleteFlag;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//è¡¨ç¤ºæ’å…¥æ—¶å¡«å……</span></span><br><span class="line">  <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">  <span class="keyword">private</span> Date createTime;</span><br><span class="line">  <span class="comment">//è¡¨ç¤ºæ’å…¥å’Œæ›´æ–°æ—¶å¡«å……</span></span><br><span class="line">  <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">  <span class="keyword">private</span> Date updateTime;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™å¤„ç†å™¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisAutoFill</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>,<span class="keyword">new</span> Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span> , <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šå¦‚æœæ•°æ®åº“<code>URL</code> æ—¶åŒºè®¾ç½®çš„ä¸æ˜¯ä¸œå…«åŒºçš„æ—¶åŒºï¼Œé‚£ä¹ˆæ›´æ–°çš„æ—¶é—´ä¼šä¸å½“å‰ç³»ç»Ÿæ—¶é—´å·®å‡ ä¸ªå°æ—¶ï¼Œéœ€è¦ä¿è¯ä¸œå…«åŒºçš„æ—¶åŒºï¼Œåªéœ€è¦å°† <code>ServerTimezone=Asia/shangHai</code></strong></p>
<h1 id="ğŸ–ä¹è§‚é”"><a href="#ğŸ–ä¹è§‚é”" class="headerlink" title="ğŸ–ä¹è§‚é”"></a>ğŸ–ä¹è§‚é”</h1><p>â€‹        åœ¨å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªç”¨æˆ·åŒæ—¶å¯¹ä¸€æ¡æ•°æ®è¿›è¡Œäº†æ“ä½œï¼Œä»è€Œå¯¼è‡´æ•°æ®æ··ä¹±é”™è¯¯ï¼Œå› æ­¤éœ€è¦ä¿è¯ä¸€ä¸ªç”¨æˆ·æ“ä½œå®Œæˆä¹‹åï¼Œå¦ä¸€ä¸ªç”¨æˆ·æ‰èƒ½ç»§ç»­æ“ä½œï¼Œè¿™å°±éœ€è¦ç»™æ•°æ®ä¸Šé”.</p>
<blockquote>
<p><strong>ä»€ä¹ˆæ˜¯é”ï¼Ÿ</strong></p>
</blockquote>
<p>â€‹        é¡¾åæ€ä¹‰å°±æ˜¯ä¿è¯æŸä¸€æ—¶åˆ»çš„æ›´æ–°è€…æ˜¯å”¯ä¸€çš„ï¼Œæ›´æ–°æ•°æ®æ‰€éœ€è¦çš„é’¥åŒ™åªæœ‰ä¸€æŠŠï¼Œä»»ä½•æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªäººæ‹¥æœ‰é’¥åŒ™.</p>
<ul>
<li><p><strong>æ‚²è§‚é”</strong> ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šblockç›´åˆ°å®ƒæ‹¿åˆ°é”â€”â€”â€”&gt;ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³æ§åˆ¶ï¼Œé€‚ç”¨äºå¤šè¯»å°‘å†™çš„åœºæ™¯</p>
</li>
<li><p><strong>ä¹è§‚é”</strong>ï¼šæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®â€”â€”â€”&gt;DBçš„è¡Œé”ã€è¡¨é”ç­‰ï¼Œé€‚ç”¨äºæ•°æ®ä¸€è‡´æ€§æ¯”è¾ƒé«˜çš„åœºæ™¯</p>
</li>
</ul>
<p><code>MybatisPlus</code>ä¸­æä¾›äº†ä¹è§‚é”æœºåˆ¶ï¼Œéœ€è¦åœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ  <code>version</code> å­—æ®µ ,  ç±»å‹ä¸º <code>int</code> é•¿åº¦ 5-6å³å¯ï¼Œå®ä½“ç±»ä¸­ <code>version</code> å±æ€§å€¼,æ•°æ®ç±»å‹ä¸º<code>Integer</code></p>
<ul>
<li>åŠ ä¸Š**<code>@Version</code>** æ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™é…ç½®ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        <span class="comment">//ä¹è§‚é”é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="comment">//åˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥è¯¢ä½¿ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ä¹è§‚é”åªæœ‰åœ¨æ›´æ–°æŸ¥åˆ°çš„æ•°æ®çš„æ—¶å€™æ‰ä¼šèµ·ä½œç”¨ï¼Œå•çº¯çš„æ›´æ–°æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„</span></span><br><span class="line">        Books books = booksMapper.selectById(<span class="number">11</span>);</span><br><span class="line">        books.setBookCounts(<span class="number">777</span>);</span><br><span class="line">        books.setDetail(<span class="string">&quot;æ›´æ–°æµ‹è¯•06&quot;</span>);</span><br><span class="line">        books.updateById();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">æ§åˆ¶å°è¾“å‡ºçš„SQLè¯­å¥:</span><br><span class="line">UPDATE books SET book_name=?, book_counts=?, detail=?, version=?, create_time=?, update_time=? WHERE book_id=? AND version=? AND delete_flag=<span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>åœ¨æ•°æ®åº“ä¸­ï¼Œ<code>version</code>å­—æ®µé»˜è®¤å€¼è®¾ç½®ä¸º1ï¼Œè¿‡åæ¯æ¬¡æŸ¥è¯¢åæ›´æ–°ä¸€æ¬¡ä¹‹åï¼Œ<code>version</code>å€¼åœ¨æŸ¥è¯¢å‡ºçš„å€¼ä¹‹ä¸Šè‡ªå¢ 1 .</p>
<h1 id="ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢"><a href="#ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢" class="headerlink" title="ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢"></a>ğŸ¥Ÿåˆ†é¡µæŸ¥è¯¢</h1><p><code>MybatisPlus</code> ä¸­å†…ç½®äº†åˆ†é¡µæ’ä»¶ï¼Œåªéœ€è¦è¿›è¡Œç®€å•çš„é…ç½®å³å¯å®Œæˆåˆ†é¡µæ“ä½œ</p>
<ul>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        <span class="comment">//ä¹è§‚é”é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="comment">//åˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥è¯¢ä½¿ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">selectBoos</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//åˆ†é¡µå¯¹è±¡             (ç¬¬å‡ é¡µï¼Œä¸€é¡µä¸­æ˜¾ç¤ºå‡ ä¸ª)   </span></span><br><span class="line">        Page&lt;Books&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢è¿”å› pageå¯¹è±¡</span></span><br><span class="line">        Page&lt;Books&gt; page1 = booksMapper.selectPage(page, <span class="keyword">null</span>);</span><br><span class="line">        System.out.println(page1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h1 id="ğŸ§‡-é€»è¾‘åˆ é™¤"><a href="#ğŸ§‡-é€»è¾‘åˆ é™¤" class="headerlink" title="ğŸ§‡ é€»è¾‘åˆ é™¤"></a>ğŸ§‡ é€»è¾‘åˆ é™¤</h1><p>â€‹        åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå­˜åœ¨æŸ¥è¯¢å†å²è®°å½•çš„æƒ…å†µï¼Œä»¥å¡åˆ¸ä¸ºä¾‹ï¼Œè¿‡æœŸæˆ–è€…å·²ç»ä½¿ç”¨çš„å¡åˆ¸åœ¨æ•°æ®åº“ä¸­ç›´æ¥è¿›è¡Œåˆ é™¤ï¼Œåˆ™æ°¸è¿œæ— æ³•æŸ¥è¯¢åˆ°å·²ç»åˆ é™¤çš„å¡åˆ¸ï¼Œ<code>MybatisPlus</code> æä¾›äº†é€»è¾‘åˆ é™¤çš„é…ç½®ï¼Œåªéœ€è¦åœ¨æ•°æ®åº“ä¸­æ·»åŠ é€»è¾‘åˆ é™¤æ ‡å¿—å­—æ®µå³å¯ï¼Œé»˜è®¤å€¼ä¸º 0 ï¼Œæ¯”å¦‚<code>delete_flag</code> ï¼Œ<code>int </code> ç±»å‹ï¼Œå€¼ä¸º 1 çš„æ—¶å€™ è¡¨ç¤ºåˆ é™¤ï¼Œå€¼ä¸º 0 çš„æ—¶å€™è¡¨ç¤ºæœªåˆ é™¤.</p>
<ul>
<li>é…ç½®æ–‡ä»¶ç¼–å†™</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç»‘å®šé€»è¾‘åˆ é™¤åˆ¤æ–­çš„å±æ€§</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-delete-field</span>= <span class="string">deleteFlag</span></span><br><span class="line"><span class="comment">#è®¾ç½®å€¼ä¸º1çš„æ—¶å€™ä¸ºåˆ é™¤</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-delete-value</span>= <span class="string">1</span></span><br><span class="line"><span class="comment">#å€¼ä¸º0çš„æ—¶å€™è¡¨ç¤ºæœªåˆ é™¤</span></span><br><span class="line"><span class="meta">mybatis-plus.global-config.db-config.logic-not-delete-value</span>= <span class="string">0</span></span><br></pre></td></tr></table></figure>



<p>é…ç½®å®Œæˆä¹‹åï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteBook</span><span class="params">()</span></span>&#123;</span><br><span class="line">    booksMapper.deleteById(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åˆ é™¤æ“ä½œå˜æˆäº†å¯¹ <code>delete_flag</code> çš„æ›´æ–°æ“ä½œ</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">JDBC Connection [HikariProxyConnection@816918962 wrapping com.mysql.cj.jdbc.ConnectionImpl@2924f1d8] will not be managed by Spring</span><br><span class="line">==&gt;  Preparing: UPDATE books SET delete_flag=1 WHERE book_id=? AND delete_flag=0</span><br><span class="line">==&gt; Parameters: 10(Integer)</span><br><span class="line">&lt;==    Updates: 1</span><br></pre></td></tr></table></figure>



<p>å½“ç„¶äº†ï¼Œæ­¤æ—¶è¿›è¡Œå…¨è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ˜¾ç¤ºä¸å‡ºæ¥è¿™äº›å·²ç»è¿›è¡Œé€»è¾‘åˆ é™¤çš„æ•°æ®ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book_id,book_name,book_counts,detail,version,delete_flag,create_time,update_time </span><br><span class="line"><span class="keyword">FROM</span> books </span><br><span class="line"><span class="keyword">WHERE</span> delete_flag<span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>å…¨è¡¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šåœ¨æœ«å°¾é»˜è®¤è¯„ä»·é€»è¾‘åˆ é™¤åˆ¤æ–­æ¡ä»¶</p>
<h1 id="ğŸ­-æ¡ä»¶æ„é€ å™¨"><a href="#ğŸ­-æ¡ä»¶æ„é€ å™¨" class="headerlink" title="ğŸ­ æ¡ä»¶æ„é€ å™¨"></a>ğŸ­ æ¡ä»¶æ„é€ å™¨</h1><blockquote>
<p>è¯¥éƒ¨åˆ†æ¬è¿è‡ª Mybatis-pluså®˜æ–¹æ–‡æ¡£ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼Œå…¶å®æœ‰åˆ©ä¹Ÿæœ‰å¼Šï¼Œä½¿ç”¨æ—¶åªéœ€è¦ç¿»é˜…ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å³å¯ï¼Œå¯¹äºå¤æ‚çš„è¯­å¥å»ºè®®è¿˜æ˜¯xmlæ–‡ä»¶æèµ·ï¼Œä¾¿äºåæœŸdebug</p>
</blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>Wrapper</code>æ„é€ å™¨å­˜åœ¨ä¿©ä¸ªå®ç°ç±»ï¼š<code>QueryWrapper </code> ä»¥åŠ <code>UpdateWrapper</code> ï¼Œå®é™…è¿ç”¨ä¸­ï¼Œåˆ›å»ºè¿™ä¿©ä¸ªå®ç°ç±»å¯¹è±¡å³å¯è¿›è¡Œä¸‹é¢è¿™èˆ¬æ“ä½œäº†</p>
<h2 id="allEqï¼ˆå…¨ç­‰äºï¼‰"><a href="#allEqï¼ˆå…¨ç­‰äºï¼‰" class="headerlink" title="allEqï¼ˆå…¨ç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>allEq</code></strong></font>ï¼ˆå…¨ç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">allEq(Map&lt;R, V&gt; params)</span><br><span class="line">allEq(Map&lt;R, V&gt; params, <span class="keyword">boolean</span> null2IsNull)</span><br><span class="line">allEq(<span class="keyword">boolean</span> condition, Map&lt;R, V&gt; params, <span class="keyword">boolean</span> null2IsNull)</span><br></pre></td></tr></table></figure>

<p><code>params</code> : <code>key</code>ä¸ºæ•°æ®åº“å­—æ®µå,<code>value</code>ä¸ºå­—æ®µå€¼<br><code>null2IsNull</code> : ä¸º<code>true</code>åˆ™åœ¨<code>map</code>çš„<code>value</code>ä¸º<code>null</code>æ—¶è°ƒç”¨ <a href="https://mp.baomidou.com/guide/wrapper.html#isnull">isNull</a> æ–¹æ³•,ä¸º<code>false</code>æ—¶åˆ™å¿½ç•¥<code>value</code>ä¸º<code>null</code>çš„</p>
<h2 id="eqï¼ˆç­‰äºï¼‰"><a href="#eqï¼ˆç­‰äºï¼‰" class="headerlink" title="eqï¼ˆç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>eq</code></strong></font>ï¼ˆç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">eq(R column, Object val)</span><br><span class="line">eq(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¾‹: <code>eq(&quot;name&quot;, &quot;è€ç‹&quot;)</code>â€”&gt;<code>name = &#39;è€ç‹&#39;</code></li>
</ul>
<h2 id="neï¼ˆä¸ç­‰äºï¼‰"><a href="#neï¼ˆä¸ç­‰äºï¼‰" class="headerlink" title="neï¼ˆä¸ç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>ne</code></strong></font>ï¼ˆä¸ç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ne(R column, Object val)</span><br><span class="line">ne(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ç­‰äº &lt;&gt;</li>
<li>ä¾‹: <code>ne(&quot;name&quot;, &quot;è€ç‹&quot;)</code>â€”&gt;<code>name &lt;&gt; &#39;è€ç‹&#39;</code></li>
</ul>
<h2 id="gtï¼ˆå¤§äºï¼‰"><a href="#gtï¼ˆå¤§äºï¼‰" class="headerlink" title="gtï¼ˆå¤§äºï¼‰"></a><font size="4" color="orange"><strong><code>gt</code></strong></font>ï¼ˆå¤§äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">gt(R column, Object val)</span><br><span class="line">gt(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤§äº &gt;</li>
<li>ä¾‹: <code>gt(&quot;age&quot;, 18)</code>â€”&gt;<code>age &gt; 18</code></li>
</ul>
<h2 id="geï¼ˆå¤§äºç­‰äºï¼‰"><a href="#geï¼ˆå¤§äºç­‰äºï¼‰" class="headerlink" title="geï¼ˆå¤§äºç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>ge</code></strong></font>ï¼ˆå¤§äºç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ge(R column, Object val)</span><br><span class="line">ge(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å¤§äºç­‰äº &gt;=</li>
<li>ä¾‹: <code>ge(&quot;age&quot;, 18)</code>â€”&gt;<code>age &gt;= 18</code></li>
</ul>
<h2 id="ltï¼ˆå°äºï¼‰"><a href="#ltï¼ˆå°äºï¼‰" class="headerlink" title="ltï¼ˆå°äºï¼‰"></a><font size="4" color="orange"><strong><code>lt</code></strong></font>ï¼ˆå°äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lt(R column, Object val)</span><br><span class="line">lt(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å°äº &lt;</li>
<li>ä¾‹: <code>lt(&quot;age&quot;, 18)</code>â€”&gt;<code>age &lt; 18</code></li>
</ul>
<h2 id="leï¼ˆå°äºç­‰äºï¼‰"><a href="#leï¼ˆå°äºç­‰äºï¼‰" class="headerlink" title="leï¼ˆå°äºç­‰äºï¼‰"></a><font size="4" color="orange"><strong><code>le</code></strong></font>ï¼ˆå°äºç­‰äºï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">le(R column, Object val)</span><br><span class="line">le(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>å°äºç­‰äº &lt;=</li>
<li>ä¾‹: <code>le(&quot;age&quot;, 18)</code>â€”&gt;<code>age &lt;= 18</code></li>
</ul>
<h2 id="betweenï¼ˆåŒºé—´ï¼‰"><a href="#betweenï¼ˆåŒºé—´ï¼‰" class="headerlink" title="betweenï¼ˆåŒºé—´ï¼‰"></a><font size="4" color="orange"><strong><code>between</code></strong></font>ï¼ˆåŒºé—´ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">between(R column, Object val1, Object val2)</span><br><span class="line">between(<span class="keyword">boolean</span> condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<ul>
<li>BETWEEN å€¼1 AND å€¼2</li>
<li>ä¾‹: <code>between(&quot;age&quot;, 18, 30)</code>â€”&gt;<code>age between 18 and 30</code></li>
</ul>
<h2 id="notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰"><a href="#notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰" class="headerlink" title="notbetweenï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰"></a><font size="4" color="orange"><strong><code>notbetween</code></strong></font>ï¼ˆä¸åœ¨æŸåŒºé—´ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notBetween(R column, Object val1, Object val2)</span><br><span class="line">notBetween(<span class="keyword">boolean</span> condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<ul>
<li>NOT BETWEEN å€¼1 AND å€¼2</li>
<li>ä¾‹: <code>notBetween(&quot;age&quot;, 18, 30)</code>â€”&gt;<code>age not between 18 and 30</code></li>
</ul>
<h2 id="likeï¼ˆåƒï¼‰"><a href="#likeï¼ˆåƒï¼‰" class="headerlink" title="likeï¼ˆåƒï¼‰"></a><font size="4" color="orange"><strong><code>like</code></strong></font>ï¼ˆåƒï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">like(R column, Object val)</span><br><span class="line">like(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>LIKE â€˜%å€¼%â€™</li>
<li>ä¾‹: <code>like(&quot;name&quot;, &quot;ç‹&quot;)</code>â€”&gt;<code>name like &#39;%ç‹%&#39;</code></li>
</ul>
<h2 id="notlikeï¼ˆä¸åƒï¼‰"><a href="#notlikeï¼ˆä¸åƒï¼‰" class="headerlink" title="notlikeï¼ˆä¸åƒï¼‰"></a><font size="4" color="orange"><strong><code>notlike</code></strong></font>ï¼ˆä¸åƒï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notLike(R column, Object val)</span><br><span class="line">notLike(<span class="keyword">boolean</span> condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<ul>
<li>NOT LIKE â€˜%å€¼%â€™</li>
<li>ä¾‹: <code>notLike(&quot;name&quot;, &quot;ç‹&quot;)</code>â€”&gt;<code>name not like &#39;%ç‹%&#39;</code></li>
</ul>
<h2 id="inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰"><a href="#inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="inï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>in</code></strong></font>ï¼ˆå…¶ä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">in(R column, Collection&lt;?&gt; value)</span><br><span class="line">in(<span class="keyword">boolean</span> condition, R column, Collection&lt;?&gt; value)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ IN (value.get(0), value.get(1), â€¦)</li>
<li>ä¾‹: <code>in(&quot;age&quot;,&#123;1,2,3&#125;)</code>â€”&gt;<code>age in (1,2,3)</code></li>
</ul>
<h2 id="notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰"><a href="#notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="notinï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>notin</code></strong></font>ï¼ˆéå…¶ä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notIn(R column, Collection&lt;?&gt; value)</span><br><span class="line">notIn(<span class="keyword">boolean</span> condition, R column, Collection&lt;?&gt; value)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ NOT IN (value.get(0), value.get(1), â€¦)</li>
<li>ä¾‹: <code>notIn(&quot;age&quot;,&#123;1,2,3&#125;)</code>â€”&gt;<code>age not in (1,2,3)</code></li>
</ul>
<h2 id="inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰"><a href="#inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="inSqlï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>inSql</code></strong></font>ï¼ˆé›†åˆä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">inSql(R column, String inValue)</span><br><span class="line">inSql(<span class="keyword">boolean</span> condition, R column, String inValue)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ IN ( sqlè¯­å¥ )</li>
<li>ä¾‹: <code>inSql(&quot;age&quot;, &quot;1,2,3,4,5,6&quot;)</code>â€”&gt;<code>age in (1,2,3,4,5,6)</code></li>
<li>ä¾‹: <code>inSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;)</code>â€”&gt;<code>id in (select id from table where id &lt; 3)</code></li>
</ul>
<h2 id="notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰"><a href="#notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰" class="headerlink" title="notinSqlï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰"></a><font size="4" color="orange"><strong><code>notinSql</code></strong></font>ï¼ˆéé›†åˆä¸­ä¹‹ä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">notInSql(R column, String inValue)</span><br><span class="line">notInSql(<span class="keyword">boolean</span> condition, R column, String inValue)</span><br></pre></td></tr></table></figure>

<ul>
<li>å­—æ®µ NOT IN ( sqlè¯­å¥ )</li>
<li>ä¾‹: <code>notInSql(&quot;age&quot;, &quot;1,2,3,4,5,6&quot;)</code>â€”&gt;<code>age not in (1,2,3,4,5,6)</code></li>
<li>ä¾‹: <code>notInSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;)</code>â€”&gt;<code>id not in (select id from table where id &lt; 3)</code></li>
</ul>
<h1 id="ğŸ›ä»£ç ç”Ÿæˆå™¨"><a href="#ğŸ›ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ğŸ›ä»£ç ç”Ÿæˆå™¨"></a>ğŸ›ä»£ç ç”Ÿæˆå™¨</h1><p>â€‹        åœ¨åˆ›å»ºé¡¹ç›®ä¹‹åˆï¼Œæ„å»ºå·¥ç¨‹ç»“æ„æ˜¯éå¸¸ç›¸ä¼¼çš„æ“ä½œï¼Œå³ é…ç½®æ•°æ®åº“å¹¶è¿æ¥æ•°æ®åº“â€”â€“&gt;åˆ›å»ºæ•°æ®åº“è¡¨å®ä½“ç±» â€”&gt; ç¼–å†™<code>dao</code>å±‚å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œâ€”-&gt;ç¼–å†™<code>service</code>å±‚è°ƒç”¨<code>dao</code>å±‚ â€”&gt; ç¼–å†™<code>controller</code>å±‚</p>
<p>â€‹        å¦‚æœå«æœ‰å¤šä¸ªè¡¨ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯ååˆ†ç¹ççš„ï¼Œäºæ˜¯<code>MybatisPlus</code>æä¾›äº†ä»£ç ç”Ÿæˆå™¨ï¼Œå¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿç”Ÿæˆæ¯ä¸€å¼ è¡¨çš„ç»“æ„ï¼Œæå¤§æé«˜äº†å¼€å‘æ•ˆç‡.</p>
<ul>
<li><strong>å¼•å…¥ç›¸å…³ä¾èµ–</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç¼–å†™ä»£ç ç”Ÿæˆå™¨è®¾ç½®ç±»</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line">        <span class="comment">//å…¨å±€é…ç½®</span></span><br><span class="line">        GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        gc.setAuthor(<span class="string">&quot;Soucat&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–å½“å‰æ¨¡å—é¡¹ç›®ä½ç½®</span></span><br><span class="line">        String property = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®è¾“å‡ºç›®å½•</span></span><br><span class="line">        gc.setOutputDir(property+<span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setOpen(<span class="keyword">false</span>);</span><br><span class="line">        gc.setFileOverride(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//å»æ‰Serviceçš„Iå‰ç¼€</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ—¶é—´ç±»å‹</span></span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¸»é”®</span></span><br><span class="line">        gc.setIdType(IdType.AUTO);</span><br><span class="line">        <span class="comment">//Swagger</span></span><br><span class="line">        gc.setSwagger2(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å°†å…¨å±€é…ç½®åŠ å…¥ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line">        </span><br><span class="line">		<span class="comment">//é…ç½®æ•°æ®æº</span></span><br><span class="line">        DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        <span class="comment">//url</span></span><br><span class="line">        dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=Asia/Shanghai&quot;</span>);</span><br><span class="line">        <span class="comment">//drivername</span></span><br><span class="line">        dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//å¯†ç </span></span><br><span class="line">        dsc.setPassword(<span class="string">&quot;qwe123456&quot;</span>);</span><br><span class="line">        <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">        dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        <span class="comment">//æ•°æ®åº“ç±»å‹</span></span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        </span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŒ…é…ç½®</span></span><br><span class="line">        PackageConfig pk = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        <span class="comment">//åŒ…çˆ¶ç±»</span></span><br><span class="line">        pk.setParent(<span class="string">&quot;com.soucat&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®å®ä½“ç±»åŒ…åŒ…å</span></span><br><span class="line">        pk.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®daoå±‚åŒ…å</span></span><br><span class="line">        pk.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ§åˆ¶å™¨åŒ…å</span></span><br><span class="line">        pk.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æœåŠ¡å±‚åŒ…å</span></span><br><span class="line">        pk.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        <span class="comment">//å°†åŒ…é…ç½®åŠ å…¥ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setPackageInfo(pk);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç­–ç•¥é…ç½®</span></span><br><span class="line">        StrategyConfig sc = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        <span class="comment">//æ•°æ®åº“è¡¨å</span></span><br><span class="line">        sc.setInclude(<span class="string">&quot;books&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯å®ä½“ç±»Lombok</span></span><br><span class="line">        sc.setEntityLombokModel(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯å±æ€§åé©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line">        sc.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        <span class="comment">//å¼€å¯å­—æ®µåé©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line">        sc.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        sc.setLogicDeleteFieldName(<span class="string">&quot;deleted_flag&quot;</span>);</span><br><span class="line">		<span class="comment">//è®¾ç½®å­—æ®µè‡ªåŠ¨å¡«å…¥</span></span><br><span class="line">        TableFill createTime = <span class="keyword">new</span> TableFill(<span class="string">&quot;create_time&quot;</span>, FieldFill.INSERT);</span><br><span class="line">        TableFill updateTime = <span class="keyword">new</span> TableFill(<span class="string">&quot;update_time&quot;</span>, FieldFill.INSERT_UPDATE);</span><br><span class="line">        <span class="comment">//è®¾ç½®é›†åˆ</span></span><br><span class="line">        ArrayList&lt;TableFill&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(createTime);</span><br><span class="line">        list.add(updateTime);</span><br><span class="line">        <span class="comment">//åŠ å…¥å­—æ®µé›†åˆ</span></span><br><span class="line">        sc.setTableFillList(list);</span><br><span class="line">        <span class="comment">//è®¾ç½®ä¹è§‚é”å­—æ®µå</span></span><br><span class="line">        sc.setVersionFieldName(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å§‹RestControlleræ³¨è§£</span></span><br><span class="line">        sc.setRestControllerStyle(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//é©¼å³°è½¬æˆè¿å­—ç¬¦</span></span><br><span class="line">        sc.setControllerMappingHyphenStyle(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//å°†ç­–ç•¥é…ç½®åŠ å…¥åˆ°ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.setStrategy(sc);</span><br><span class="line">		<span class="comment">//å¯åŠ¨ä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        mpg.execute();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>MybatisPlus</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatisï¼ˆäºŒï¼‰</title>
    <url>/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸˆé…ç½®å±æ€§"><a href="#ğŸˆé…ç½®å±æ€§" class="headerlink" title="ğŸˆé…ç½®å±æ€§"></a>ğŸˆé…ç½®å±æ€§</h1><ul>
<li><strong>æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ --&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>environments</strong></p>
</blockquote>
<p>&emsp;&emsp;å…¶ä¸­å¯ä»¥é…ç½®å¤šå¥— <code>Mybatis</code> è¿è¡Œç¯å¢ƒï¼Œå°† <code>SQL</code> æ˜ å°„åˆ°ä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¯ä»¥è®¾ç½® <code>default</code> å±æ€§è¿›è¡ŒæŒ‡å®šé…ç½®ï¼Œå¯¹åº”çš„å„å¥—ä¸åŒçš„é…ç½®æ ¹æ® <code>id</code> å±æ€§è¿›è¡ŒåŒºåˆ«.</p>
<ul>
<li>å­èŠ‚ç‚¹</li>
</ul>
<p><code>datasource</code>ï¼šä½¿ç”¨æ ‡å‡†çš„ <code>JDBC</code> æ•°æ®æºæ¥å£æ¥é…ç½® <code>JDBC</code> è¿æ¥æ•°æ®åº“ ï¼Œå…¶ <code>type</code> å±æ€§æœ‰ä¸‰ç§å€¼ï¼š<code>UNPOOLED|POOLED|JNDI</code></p>
<p>â€‹        <code>POOLED</code>ï¼š æ•°æ®åº“è¿æ¥æ± ï¼Œ<code>JDBC</code>è¿æ¥æ˜¯éå¸¸è€—æ—¶ä¸”å ç”¨èµ„æºçš„ï¼Œæ‰€ä»¥è¿ç”¨æ•°æ®åº“è¿æ¥æ± å¯¹æ¯æ¬¡è¿æ¥è¿›è¡Œç¼“å­˜å¤„ç†ï¼Œä½†æ˜¯åŒæ—¶é™åˆ¶äº†åŒæ—¶è¿›è¡Œè¿æ¥çš„æ•°é‡ä»¥åŠç¼“å­˜çš„å¤§å°.</p>
<blockquote>
<p>mappers</p>
</blockquote>
<p>&emsp;&emsp;ç”¨äºæ³¨å†Œ<code>SQL</code> æ˜ å°„æ–‡ä»¶ï¼Œè®©<code>Mybatis</code> çŸ¥é“å»å“ªé‡Œæ‰¾åˆ°å¯¹åº”çš„ <code>SQL</code> æ˜ å°„æ–‡ä»¶.å› æ­¤éœ€è¦å¼•å…¥ <code>SQL</code> æ˜ å°„æ–‡ä»¶ï¼Œå¼•å…¥æ–‡ä»¶çš„æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«ä¸º ï¼š</p>
<ul>
<li>èµ„æºæ–‡ä»¶å¼•å…¥</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨å®Œå…¨é™å®šç±»å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</span></span><br><span class="line"><span class="comment">éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨æ–‡ä»¶å¼•å…¥</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</span></span><br><span class="line"><span class="comment">ä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>Mapperæ˜ å°„æ–‡ä»¶</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>namespace</code> ï¼šå‘½åç©ºé—´ï¼Œç”¨äºç»‘å®šæ•°æ®åº“æ“ä½œæ¥å£ï¼Œåœ¨ä¸ä½¿ç”¨åˆ«åçš„æƒ…å†µä¸‹ï¼šnamespace : åŒ…å + ç±»å</li>
</ul>
<p>åœ¨ <code>mapper </code> æ ‡ç­¾ä¸­ ï¼Œ å¯ä»¥å®šä¹‰ <code>SQL</code> æ ‡ç­¾ ï¼Œå¸¸ç”¨çš„æœ‰ <code>&lt;update&gt; &lt;select&gt; &lt;delete&gt; &lt;insert&gt;</code>å››ç§ï¼Œä½†æ˜¯ä½ åŒæ ·ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªæ ‡ç­¾ä¸­å†™å››ç§ä¸åŒçš„<code>SQL </code> è¯­å¥,ä¸ä¼šæŠ¥é”™ï¼Œè¿™äº›æ ‡ç­¾ä¸­çš„ <code>id</code> å±æ€§å¿…é¡»ä¸æ¥å£ä¸­çš„æ–¹æ³•åç›¸å¯¹åº”ä»è€Œè¿›è¡Œç»‘å®šæ˜ å°„ï¼Œè¿˜æœ‰å…¶å®ƒå±æ€§ä¸Šä¸€ç¯‡æ–‡ç« å·²ç»ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåç»­è¿˜ä¼šç»§ç»­ä»‹ç»å…¶å®ƒå±æ€§. </p>
<p><strong>æ­£æ˜¯å› ä¸ºMapperæ˜ å°„æ–‡ä»¶ï¼Œå½»åº•å°†<code>SQL</code>  è¯­å¥ç‹¬ç«‹å‡ºæ¥ï¼Œç›¸å¯¹äºåŸå§‹çš„ <code>Java</code> ä»£ç å’Œ <code>SQL</code> ä»£ç å¤¹æ‚ï¼Œå¯ç»´æŠ¤æ€§æœ‰å·¨å¤§çš„æå‡,åŒæ—¶è®©æˆ‘ä»¬ä¸“æ³¨äºç¼–å†™ <code>SQL</code> è¯­å¥æé«˜æ•ˆç‡.</strong></p>
<blockquote>
<p>å¯¹JDBCè¿›è¡Œä¼˜åŒ–å¤„ç†</p>
</blockquote>
<p>&emsp;&emsp;åœ¨åŸç”Ÿçš„ä½¿ç”¨<code>JDBC</code>çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨<code>JDBC.properties</code> æ–‡ä»¶å†™å…¥æˆ‘ä»¬éœ€è¦çš„ <code>dirver ã€ url ã€username ã€password</code> ,å®ç°ä»£ç å’Œæ•°æ®ç›¸åˆ†ç¦»ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œä»¥åŠå¤ç”¨æ€§ï¼Œä¹Ÿæ–¹ä¾¿ä¿®æ”¹.</p>
<p>&emsp;&emsp;åŒæ ·çš„åœ¨<code>Mybatis</code>ä¸­ä¹ŸåŒæ ·å¯ä»¥éµå¾ªè¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬å†<code>resources</code> ä¸­åˆ›å»º <code>JDBC.properties</code> ï¼Œé€šè¿‡å¦‚ä¸‹æ ‡ç­¾è¿›è¡Œå¼•ç”¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;JDBC.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>config</code> æ–‡ä»¶ä¸­å¯¹æ ‡ç­¾çš„é¡ºåºæœ‰ç€ä¸¥æ ¼çš„è¦æ±‚ï¼Œå¯ä»¥å…ˆéšä¾¿æ”¾ï¼Œçœ‹é”™è¯¯æç¤ºï¼ŒæŒ‰ç…§é¡ºåºè¿›è¡Œå®‰æ”¾.</strong></p>
<ul>
<li><code>$&#123;å±æ€§å&#125;</code> ï¼šå¼•ç”¨ç¬¦ï¼Œå¼•å…¥è¿‡åï¼Œå±æ€§åå†™å…¥<code>properties</code>ä¸­ç›¸åº”çš„å±æ€§åå³å¯.</li>
</ul>
<p>é…ç½®å®Œåå¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥propertiesæ–‡ä»¶--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>typeAliasesä¼˜åŒ–</p>
</blockquote>
<p>åœ¨ <code>namespace</code> ä¸­å†™å…¥çš„ç±»åï¼Œåœ¨çœŸå®é¡¹ç›®å¯èƒ½å¾ˆé•¿ï¼Œäºæ˜¯å¯ä»¥è€ƒè™‘ç”¨åˆ«åè¿›è¡Œæ›¿ä»£.å…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p>å½“è¿™æ ·é…ç½®æ—¶ï¼Œ<code>User</code>å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨<code>Dao.User</code>çš„åœ°æ–¹.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;Dao.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span>	</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;Dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Java Bean æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li><code>Java Bean</code> æ˜¯ <code>Java</code> å¯¹è±¡çš„ä¸€å¥—è§„èŒƒ ï¼Œå±æ€§ç§æœ‰åŒ–ï¼Œå¯¹å¤–æä¾› <code>Get/Set</code> æ–¹æ³•ç­‰ç­‰. </li>
</ul>
</li>
</ul>
<p>æ¯ä¸€ä¸ªåœ¨åŒ… <code>Dao</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p>
<p>è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>å…¶å®ƒé…ç½®è®¾ç½®</p>
</blockquote>
<p>å¸¸ç”¨è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—åŠŸèƒ½ æ ‡å‡†æ—¥å¿—å®ç°--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯ç¼“å­˜--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯æ‡’åŠ è½½--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;multipleResultSetsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useColumnLabel&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useGeneratedKeys&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PARTIAL&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingUnknownColumnBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WARNING&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultExecutorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultStatementTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultFetchSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;safeRowBoundsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ˜¯å¦å¼€å¯é©¼å³°å‘½åæ˜ å°„--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;localCacheScope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SESSION&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;OTHER&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadTriggerMethods&quot;</span> <span class="attr">value</span>=<span class="string">&quot;equals,clone,hashCode,toString&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¥½rusultMap-ç»“æœé›†æ˜ å°„"><a href="#ğŸ¥½rusultMap-ç»“æœé›†æ˜ å°„" class="headerlink" title="ğŸ¥½rusultMap(ç»“æœé›†æ˜ å°„)"></a>ğŸ¥½rusultMap(ç»“æœé›†æ˜ å°„)</h1><blockquote>
<p>å¦‚æœå®ä½“ç±»ä¸­çš„å±æ€§åå’Œæ•°æ®åº“ä¸­çš„å­—æ®µåä¸ä¸€è‡´å¦‚ä½•å¤„ç† ? ä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
</blockquote>
<p>æœ¬è´¨ä¸Šï¼Œåœ¨ç¼–å†™<code>SQL</code> è¯­å¥çš„æ—¶å€™æŸ¥è¯¢å­—æ®µå¦‚æœç›´æ¥ç”¨ <code>*</code>  é‚£ä¹ˆå°±ç›¸å½“äºæŸ¥è¯¢å®ä½“ç±»ä¸­æ‰€æœ‰çš„å±æ€§ï¼Œè€Œæ­¤æ—¶æœ‰å±æ€§åå’Œå­—æ®µåä¸åŒ¹é…ï¼Œé‚£ä¹ˆè‡ªç„¶ä¼šæŸ¥è¯¢å¤±è´¥.é‚£ä¹ˆçŸ¥é“äº†åŸå› ï¼Œè§£å†³åŠæ³•å¾ˆæ˜æ˜¾ï¼Œæ‰‹åŠ¨ç¼–å†™æƒ³è¦æŸ¥è¯¢çš„å­—æ®µï¼Œå¹¶ä¸”ä»¥æ•°æ®åº“ä¸­çš„å­—æ®µä¸ºæ ‡å‡†ï¼Œå¯ä»¥ç”¨åˆ«åæ›´æ”¹ä¸ºå±æ€§å.  <strong>ä½†æ˜¯</strong> ï¼Œè¿™ç§åŠæ³•è™½ç„¶ç®€å•ï¼Œä½†å¹¶ä¸ä¼˜é›….</p>
<p><strong>æ¥ä¸‹æ¥å°†ä»‹ç»ä¸€ç§ä¼˜é›…çš„è§£æ³•</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--idåéœ€è¦è¦å”¯ä¸€æ€§ï¼Œtypeå±æ€§è¦ä½¿ç”¨å®Œå…¨é™å®šç±»åæˆ–è€…åˆ«å,typeä¸ºå“ªä¸ªå–å†³äºä½ éœ€è¦æŸ¥è¯¢çš„å®ä½“ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- idä¸ºä¸»é”® --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--resultMapç»“æœé›†æ˜ å°„--&gt;</span>                  </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">  select id , name , pwd from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>å¦‚æœå®ä½“ç±»å±æ€§ä¸­æœ‰è‡ªå®šä¹‰å¼•ç”¨æ•°æ®ç±»å‹æˆ–è€…é›†åˆï¼Œéœ€è¦ç”¨åˆ°å…¶å®ƒæ ‡ç­¾.</p>
<ul>
<li>è‡ªå®šä¹‰å¼•ç”¨æ•°æ®ç±»å‹</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StuTea&quot;</span> <span class="attr">type</span>=<span class="string">&quot;pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--propertyä¸º resultMapä¸­typeæŒ‡å®šçš„å®ä½“ç±»ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹å˜é‡å--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--javaType ä¸ºå¯¹åº”çš„å®ä½“ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>é›†åˆ</li>
</ul>
<p>å®ä½“ç±»å¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Score</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer stId;</span><br><span class="line">    <span class="keyword">private</span> Integer stMath;</span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">School</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer classNo;</span><br><span class="line">    <span class="keyword">private</span> String className;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Score&gt; scoreList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;baseResultMap01&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.School&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;class_no&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;classNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;class_name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;className&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">		property å…³è”å±æ€§, ä¸ºå®ä½“å¯¹è±¡ä¸­çš„é›†åˆ</span></span><br><span class="line"><span class="comment">		javaType å…³è”å±æ€§çš„ç±»å‹, é›†åˆçš„ç±»å‹, ä¸€èˆ¬æ˜¯ArrayList</span></span><br><span class="line"><span class="comment">		association å…³è”å±æ€§			</span></span><br><span class="line"><span class="comment">		ofType éœ€è¦æ˜ å°„çš„pojoå®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;list&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">ofType</span>=<span class="string">&quot;com.itheima.domain.Score&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;st_id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;st_math&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stMath&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¡Log4jæ—¥å¿—å®ç°"><a href="#ğŸ¡Log4jæ—¥å¿—å®ç°" class="headerlink" title="ğŸ¡Log4jæ—¥å¿—å®ç°"></a>ğŸ¡Log4jæ—¥å¿—å®ç°</h1><p><strong>ç®€ä»‹ï¼š</strong></p>
<ul>
<li>Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®</li>
<li>é€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ï¼šæ§åˆ¶å°ï¼Œæ–‡æœ¬ï¼ŒGUIç»„ä»¶â€¦.</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li>
</ul>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p>1ã€å¯¼å…¥log4jçš„åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®æ–‡ä»¶ç¼–å†™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span><br><span class="line">log4j.rootLogger=DEBUG,console,file</span><br><span class="line"></span><br><span class="line">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="line">log4j.appender.console = org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.console.Target = System.out</span><br><span class="line">log4j.appender.console.Threshold=DEBUG</span><br><span class="line">log4j.appender.console.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=[%c]-%m%n</span><br><span class="line"></span><br><span class="line">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span><br><span class="line">log4j.appender.file = org.apache.log4j.RollingFileAppender</span><br><span class="line">log4j.appender.file.File=./log/kuang.log</span><br><span class="line">log4j.appender.file.MaxFileSize=10mb</span><br><span class="line">log4j.appender.file.Threshold=DEBUG</span><br><span class="line">log4j.appender.file.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.file.layout.ConversionPattern=[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span><br><span class="line"></span><br><span class="line">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span><br><span class="line">log4j.logger.org.mybatis=DEBUG</span><br><span class="line">log4j.logger.java.sql=DEBUG</span><br><span class="line">log4j.logger.java.sql.Statement=DEBUG</span><br><span class="line">log4j.logger.java.sql.ResultSet=DEBUG</span><br><span class="line">log4j.logger.java.sql.PreparedStatement=DEBUG</span><br></pre></td></tr></table></figure>

<p>3ã€settingè®¾ç½®æ—¥å¿—å®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨ç¨‹åºä¸­ä½¿ç”¨Log4jè¿›è¡Œè¾“å‡ºï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„å¯¼åŒ…ï¼šorg.apache.log4j.Logger</span></span><br><span class="line"><span class="keyword">static</span> Logger logger = Logger.getLogger(MyTest.class);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   logger.info(<span class="string">&quot;infoï¼šè¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   logger.debug(<span class="string">&quot;debugï¼šè¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   logger.error(<span class="string">&quot;error: è¿›å…¥selectUseræ–¹æ³•&quot;</span>);</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">   List&lt;User&gt; users = mapper.selectUser();</span><br><span class="line">   <span class="keyword">for</span> (User user: users)&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼</p>
<ul>
<li>ä½¿ç”¨Log4j è¾“å‡ºæ—¥å¿—</li>
<li>å¯ä»¥çœ‹åˆ°è¿˜ç”Ÿæˆäº†ä¸€ä¸ªæ—¥å¿—çš„æ–‡ä»¶ ã€éœ€è¦ä¿®æ”¹fileçš„æ—¥å¿—çº§åˆ«ã€‘</li>
</ul>
<h1 id="ğŸ§¨Limit-åˆ†é¡µå¤„ç†"><a href="#ğŸ§¨Limit-åˆ†é¡µå¤„ç†" class="headerlink" title="ğŸ§¨Limit åˆ†é¡µå¤„ç†"></a>ğŸ§¨Limit åˆ†é¡µå¤„ç†</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">åŸæœ¬çš„æŸ¥è¯¢è¯­å¥å†™æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users limit startindex , number</span><br><span class="line"></span><br><span class="line">startindex è¡¨ç¤ºèµ·å§‹ä½ç½®çš„å‰ä¸€ä¸ª ä¾‹å¦‚ ï¼š startindex <span class="operator">=</span> <span class="number">5</span> ï¼Œnumber <span class="operator">=</span> <span class="number">2</span>é‚£ä¹ˆå°†è¾“å‡ºç¬¬å…­ä¸ª å’Œ ç¬¬ä¸ƒä¸ª æ•°æ® </span><br><span class="line">å¦‚æœåªæœ‰ä¸€ startindex è¡¨ç¤º [<span class="number">1</span>,startindex] çš„æ‰€æœ‰æ•°æ®</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>çŸ¥é“äº†åŸæœ¬çš„ <code>SQL</code> è¯­å¥å†™æ³•åï¼Œæ€è·¯å°±å¾ˆæ¸…æ™°äº† ï¼Œå¯ä»¥ä½¿ç”¨ Map æ¥å­˜å‚¨ ç›¸åº”çš„èµ·å§‹åæ ‡å’Œæ•°é‡ ï¼Œæ—¢ç„¶è¿›è¡Œåˆ†é¡µï¼Œé‚£ä¹ˆä¸å¦¨è¿›è¡Œä¸€ä¸‹ç®€å•çš„æ¨å¯¼ï¼Œå¯ä»¥çŸ¥é“ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">startindex = (currentpage - <span class="number">1</span>) * pagesize</span><br><span class="line">                 å½“å‰ç¬¬å‡ é¡µ     æ¯ä¸€é¡µæ•°æ®æœ‰å¤šå°‘ä¸ª</span><br><span class="line">    </span><br><span class="line">é‚£ä¹ˆåªéœ€è¦åœ¨Mapä¸­å­˜å‚¨ startindex å’Œ pagesize å³å¯å®ç°</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨<code>Java</code> ä»£ç è¿›è¡Œåˆ†é¡µå¤„ç†ï¼ˆä½†æ˜¯æœ‰ä¸€è¯´ä¸€æ¯”è¾ƒç¹çï¼‰æ¥ä¸‹æ¥è´´å‡ºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUserByRowBounds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">int</span> currentPage = <span class="number">2</span>;  <span class="comment">//ç¬¬å‡ é¡µ</span></span><br><span class="line">   <span class="keyword">int</span> pageSize = <span class="number">2</span>;  <span class="comment">//æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª</span></span><br><span class="line">   RowBounds rowBounds = <span class="keyword">new</span> RowBounds((currentPage-<span class="number">1</span>)*pageSize,pageSize);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€šè¿‡session.**æ–¹æ³•è¿›è¡Œä¼ é€’rowBoundsï¼Œ[æ­¤ç§æ–¹å¼ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†]</span></span><br><span class="line">   List&lt;User&gt; users = session.selectList(<span class="string">&quot;com.kuang.mapper.UserMapper.getUserByRowBounds&quot;</span>, <span class="keyword">null</span>, rowBounds);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (User user: users)&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘"><a href="#ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘" class="headerlink" title="ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘"></a>ğŸ¨ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘</h1><p>åœ¨Mybatis 3 ä¸­æ–°å¢äº†æ³¨è§£çš„é…ç½®ï¼Œæ›´è¿›ä¸€æ­¥çš„æé«˜äº†å¼€å‘æ•ˆç‡è™½ç„¶æ²¡æœ‰æå‡å¾ˆå¤šï¼Œä½†æ˜¯çœŸçš„å¾ˆé¦™.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å¸¸è§çš„å››ä¸ªSQLçš„æ³¨è§£:</span><br><span class="line">	<span class="meta">@select(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@update(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@delete(&quot;&quot;)</span></span><br><span class="line">	<span class="meta">@insert(&quot;&quot;)</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ç®€å•çš„ <code>SQL</code> è¯­å¥å¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œè‡³äºå¤æ‚çš„<code>SQL</code>è¯­å¥ä¾æ—§ä½¿ç”¨ <code>Mapper.xml</code>æ˜ å°„æ–‡ä»¶.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from bjpowernode.users&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦å¢åŠ å¦‚ä¸‹æ³¨è§£ï¼Œå¯ä»¥åˆ æ‰æ˜ å°„æ–‡ä»¶ä¸­å¯¹åº”çš„<code>SQL</code>æ ‡ç­¾ï¼Œå…¶ä½™éƒ¨åˆ†ä¸å˜å³å¯ï¼Œå¦‚æœæ²¡æœ‰æ˜ å°„æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±åœ¨<code>config</code>æ–‡ä»¶ä¸­çš„æ˜ å°„æ–‡ä»¶æ³¨å†Œçš„å¼•å…¥æ–¹å¼æ”¹ä¸ºå®Œå…¨é™å®šç±»åå¼•å…¥.å…¶ä½™çš„è¯­å¥ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåœ¨æ­¤å°±ä¸ç»§ç»­èµ˜è¿°äº†.</p>
<h1 id="ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢"><a href="#ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢" class="headerlink" title="ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢"></a>ğŸ€ä¸€å¯¹å¤šä»¥åŠå¤šå¯¹ä¸€æŸ¥è¯¢</h1><p>å…ˆç»™å‡ºè¡¨æ•°æ®ï¼š</p>
<p>è¡¨åï¼šStudent</p>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/1.png" class title="student">



<p>è¡¨åï¼šTeacher</p>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/2.png" class title="teacher">



<p>ç¼–å†™å®ä½“ç±»ï¼š</p>
<p>è¯¥æ³¨è§£ä¸º <code>lombockæ³¨è§£</code> ç»™å‡º <code>maven</code> åæ ‡</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å¤šå¯¹ä¸€</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span> <span class="comment">//GET,SET,ToStringï¼Œæœ‰å‚ï¼Œæ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="comment">//å¤šä¸ªå­¦ç”Ÿå¯ä»¥æ˜¯åŒä¸€ä¸ªè€å¸ˆï¼Œå³å¤šå¯¹ä¸€</span></span><br><span class="line">   <span class="keyword">private</span> Teacher teacher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   éœ€æ±‚ï¼šè·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">   æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">       1. è·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">       2. æ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID-&gt;è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">       3. æ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">           1. åšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šStudentTeacher</span></span><br><span class="line"><span class="comment">           2. StudentTeacherç»“æœé›†çš„ç±»å‹ä¸º Student</span></span><br><span class="line"><span class="comment">           3. å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚</span></span><br><span class="line"><span class="comment">              å¤šä¸ª [1,...ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=&gt; ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š</span></span><br><span class="line"><span class="comment">           4. æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">æ˜¾ç„¶å¯ä»¥ä½¿ç”¨è¿è¡¨æŸ¥è¯¢ å’Œ å­æŸ¥è¯¢ é¦–è¦æ¨èè¿è¡¨æŸ¥è¯¢.</span><br><span class="line">å­æŸ¥è¯¢:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--associationå…³è”å±æ€§ propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼</span></span><br><span class="line"><span class="comment">   associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">       column=&quot;&#123;key=value,key=value&#125;&quot;</span></span><br><span class="line"><span class="comment">       å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">      select * from teacher where id = #&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¿è¡¨æŸ¥è¯¢:</span><br><span class="line">	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æŒ‰æŸ¥è¯¢ç»“æœåµŒå¥—å¤„ç†</span></span><br><span class="line"><span class="comment">æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">   1. ç›´æ¥æŸ¥è¯¢å‡ºç»“æœï¼Œè¿›è¡Œç»“æœé›†çš„æ˜ å°„</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span> &gt;</span></span><br><span class="line">      select s.id sid, s.name sname , t.name tname</span><br><span class="line">      from student s,teacher t</span><br><span class="line">      where s.tid = t.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--å…³è”å¯¹è±¡property å…³è”å¯¹è±¡åœ¨Studentå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>â€‹    </p>
<ul>
<li><strong>ä¸€å¯¹å¤š</strong></li>
</ul>
<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="comment">//ä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿ</span></span><br><span class="line">   <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  æ€è·¯:</span></span><br><span class="line"><span class="comment">      1. ä»å­¦ç”Ÿè¡¨å’Œè€å¸ˆè¡¨ä¸­æŸ¥å‡ºå­¦ç”Ÿidï¼Œå­¦ç”Ÿå§“åï¼Œè€å¸ˆå§“å</span></span><br><span class="line"><span class="comment">      2. å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ“ä½œåšç»“æœé›†æ˜ å°„</span></span><br><span class="line"><span class="comment">          1. é›†åˆçš„è¯ï¼Œä½¿ç”¨collectionï¼</span></span><br><span class="line"><span class="comment">              JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„</span></span><br><span class="line"><span class="comment">              JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</span></span><br><span class="line"><span class="comment">              ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">     select s.id sid, s.name sname , t.name tname, t.id tid</span><br><span class="line">     from student s,teacher t</span><br><span class="line">     where s.tid = t.id and t.id=#&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span>  <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>å¦‚æœSQLè¯­å¥å†™çš„å¥½ï¼Œå°±ç”¨è¿è¡¨æŸ¥è¯¢å°±è¡Œï¼ŒresultMap éœ€è¦ä¸éœ€è¦å–å†³äº å±æ€§åå’Œå­—æ®µåæ˜¯å¦å¯¹åº”</strong></p>
<h1 id="ğŸåŠ¨æ€SQL"><a href="#ğŸåŠ¨æ€SQL" class="headerlink" title="ğŸåŠ¨æ€SQL"></a>ğŸåŠ¨æ€SQL</h1><p>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼š<strong>åŠ¨æ€SQLæŒ‡çš„æ˜¯æ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ , ç”Ÿæˆä¸åŒçš„Sqlè¯­å¥.</strong></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">å®˜ç½‘æè¿°ï¼š</span><br><span class="line">MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ä¾¿æ˜¯å®ƒçš„åŠ¨æ€ <span class="keyword">SQL</span>ã€‚å¦‚æœä½ æœ‰ä½¿ç”¨ JDBC æˆ–å…¶å®ƒç±»ä¼¼æ¡†æ¶çš„ç»éªŒï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ <span class="keyword">SQL</span> è¯­å¥çš„ç—›è‹¦ã€‚ä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ <span class="keyword">SQL</span> è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</span><br><span class="line">è™½ç„¶åœ¨ä»¥å‰ä½¿ç”¨åŠ¨æ€ <span class="keyword">SQL</span> å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†æ­£æ˜¯ MyBatis æä¾›äº†å¯ä»¥è¢«ç”¨åœ¨ä»»æ„ <span class="keyword">SQL</span> æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ <span class="keyword">SQL</span> è¯­è¨€å¾—ä»¥æ”¹è¿›è¿™ç§æƒ…å½¢ã€‚</span><br><span class="line">åŠ¨æ€ <span class="keyword">SQL</span> å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ <span class="type">XML</span> çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis <span class="number">3</span> å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">  <span class="comment">-------------------------------</span></span><br><span class="line">  - <span class="keyword">if</span></span><br><span class="line">  - choose (<span class="keyword">when</span>, otherwise)</span><br><span class="line">  - trim (<span class="keyword">where</span>, <span class="keyword">set</span>)</span><br><span class="line">  - <span class="keyword">foreach</span></span><br><span class="line">  <span class="comment">-------------------------------</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹‹å‰å†™çš„ SQL è¯­å¥éƒ½æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤æ‚çš„ SQL è¯­å¥ï¼Œå¾€å¾€éœ€è¦æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥ SQL ï¼Œç¨å¾®ä¸æ³¨æ„ï¼Œç”±äºå¼•å·ï¼Œç©ºæ ¼ç­‰ç¼ºå¤±å¯èƒ½éƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦ä½¿ç”¨ mybatis åŠ¨æ€SQLï¼Œé€šè¿‡ if, choose, when, otherwise, trim, where, set, foreachç­‰æ ‡ç­¾ï¼Œå¯ç»„åˆæˆéå¸¸çµæ´»çš„SQLè¯­å¥ï¼Œä»è€Œåœ¨æé«˜ SQL è¯­å¥çš„å‡†ç¡®æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¤§å¤§æé«˜äº†å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚</p>
<hr>
<ul>
<li><strong>æä¾›æ ·è¡¨ï¼š</strong></li>
</ul>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/3.png" class title="blog">

<p><img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/GitHub_Blog\myblog\source_drafts\Mybatiså…¥é—¨ï¼ˆäºŒï¼‰\3.png" alt="image-20210421222515645"></p>
<ul>
<li><strong>ç¼–å†™å®ä½“ç±»</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">private</span> String title;</span><br><span class="line">   <span class="keyword">private</span> String author;</span><br><span class="line">   <span class="keyword">private</span> Date createTime;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> views;</span><br><span class="line">   <span class="comment">//setï¼Œget....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>ç¼–å†™SQLè¯­å¥</strong></li>
</ul>
<blockquote>
<p>if è¯­å¥</p>
</blockquote>
<p><strong>éœ€æ±‚ï¼šæ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</strong></p>
<p>1ã€ç¼–å†™æ¥å£ç±»</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éœ€æ±‚1</span></span><br><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogIf</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚1ï¼š</span></span><br><span class="line"><span class="comment">æ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼</span></span><br><span class="line"><span class="comment">å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">select * from blog where title = #&#123;title&#125; and author = #&#123;author&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog where</span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		è¿™æ ·å†™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ author ç­‰äº nullï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where title=#&#123;title&#125;,ä½†æ˜¯å¦‚æœtitleä¸ºç©ºå‘¢ï¼Ÿé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where and author=#&#123;author&#125;ï¼Œè¿™æ˜¯é”™è¯¯çš„ SQL è¯­å¥ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ where è¯­å¥ï¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>Where</p>
</blockquote>
<p>ä¿®æ”¹ä¸Šé¢çš„SQLè¯­å¥ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">          title = #&#123;title&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">          and author = #&#123;author&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªâ€œwhereâ€æ ‡ç­¾ä¼šçŸ¥é“å¦‚æœå®ƒåŒ…å«çš„æ ‡ç­¾ä¸­æœ‰è¿”å›å€¼çš„è¯ï¼Œå®ƒå°±æ’å…¥ä¸€ä¸ªâ€˜whereâ€™ã€‚æ­¤å¤–ï¼Œå¦‚æœæ ‡ç­¾è¿”å›çš„å†…å®¹æ˜¯ä»¥AND æˆ–OR å¼€å¤´çš„ï¼Œåˆ™å®ƒä¼šå‰”é™¤æ‰ã€‚</strong></p>
<blockquote>
<p>Set</p>
</blockquote>
<p>åŒç†ï¼Œä¸Šé¢çš„å¯¹äºæŸ¥è¯¢ SQL è¯­å¥åŒ…å« where å…³é”®å­—ï¼Œå¦‚æœåœ¨è¿›è¡Œæ›´æ–°æ“ä½œçš„æ—¶å€™ï¼Œå«æœ‰ set å…³é”®è¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p>1ã€ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateBlog</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨æ„setæ˜¯ç”¨çš„é€—å·éš”å¼€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update blog</span><br><span class="line">     <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;,</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            author = #&#123;author&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>chooseè¯­å¥</p>
</blockquote>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ç”¨åˆ°æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåªæƒ³é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼ŒæŸ¥è¯¢æ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å³å¯ï¼Œä½¿ç”¨ choose æ ‡ç­¾å¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜ï¼Œç±»ä¼¼äº Java çš„ switch è¯­å¥</p>
<p>1ã€ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogChoose</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">                title = #&#123;title&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">              and author = #&#123;author&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">              and views = #&#123;views&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>SQLç‰‡æ®µ</p>
</blockquote>
<p>æœ‰æ—¶å€™å¯èƒ½æŸä¸ª sql è¯­å¥æˆ‘ä»¬ç”¨çš„ç‰¹åˆ«å¤šï¼Œä¸ºäº†å¢åŠ ä»£ç çš„é‡ç”¨æ€§ï¼Œç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä»£ç æŠ½å–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>æå–SQLç‰‡æ®µï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å¼•ç”¨SQLç‰‡æ®µï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<p>â‘ ã€æœ€å¥½åŸºäº å•è¡¨æ¥å®šä¹‰ sql ç‰‡æ®µï¼Œæé«˜ç‰‡æ®µçš„å¯é‡ç”¨æ€§</p>
<p>â‘¡ã€åœ¨ sql ç‰‡æ®µä¸­ä¸è¦åŒ…æ‹¬ where</p>
<blockquote>
<p>Foreach</p>
</blockquote>
<p>å°†æ•°æ®åº“ä¸­å‰ä¸‰ä¸ªæ•°æ®çš„idä¿®æ”¹ä¸º1,2,3ï¼›</p>
<p>éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦æŸ¥è¯¢ blog è¡¨ä¸­ id åˆ†åˆ«ä¸º1,2,3çš„åšå®¢ä¿¡æ¯</p>
<p>1ã€ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogForeach</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§</span></span><br><span class="line"><span class="comment">       item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">       open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       select * from blog where 1=1 and (id=1 or id=2 or id=3)</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span>  <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">          id=#&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶"><a href="#ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶"></a>ğŸ«Mybatisçš„ç¼“å­˜æœºåˆ¶</h1><p>1ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ</p>
<ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li>
</ul>
<p>3ã€ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</p>
<ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚</li>
</ul>
<blockquote>
<p>Mybatisç¼“å­˜</p>
</blockquote>
<ul>
<li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong></p>
</li>
<li><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸€çº§ç¼“å­˜</p>
</blockquote>
<p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š</p>
<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li>
</ul>
<blockquote>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</p>
</blockquote>
<p>1.ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç›´å¼€å¯çš„ï¼Œæˆ‘ä»¬å…³é—­ä¸äº†å®ƒï¼›</p>
<p>2.ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µï¼šæ²¡æœ‰ä½¿ç”¨åˆ°å½“å‰çš„ä¸€çº§ç¼“å­˜ï¼Œæ•ˆæœå°±æ˜¯ï¼Œè¿˜éœ€è¦å†å‘æ•°æ®åº“ä¸­å‘èµ·ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼</p>
<p>3.å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™ä¼šè‡ªåŠ¨æ¸…é™¤ç¼“å­˜</p>
<p>4.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‰‹åŠ¨æ¸…ç†ç¼“å­˜</span></span><br><span class="line">sqlsession.clearcache();</span><br></pre></td></tr></table></figure>







<blockquote>
<p>äºŒçº§ç¼“å­˜</p>
</blockquote>
<ul>
<li><p>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</p>
</li>
<li><p>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</p>
</li>
<li><p>å·¥ä½œæœºåˆ¶</p>
</li>
<li><ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li>
<li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä½¿ç”¨æ­¥éª¤</p>
</blockquote>
<p>1ã€å¼€å¯å…¨å±€ç¼“å­˜ ã€mybatis-config.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ï¼›ã€xxxMapper.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">å®˜æ–¹ç¤ºä¾‹=====&gt;æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span><br><span class="line">&lt;cache</span><br><span class="line"> eviction=&quot;FIFO&quot;</span><br><span class="line"> flushInterval=&quot;60000&quot;</span><br><span class="line"> size=&quot;512&quot;</span><br><span class="line"> readOnly=&quot;true&quot;/&gt;</span><br><span class="line">è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</span><br></pre></td></tr></table></figure>



<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</li>
<li>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
</ul>
<img src="/2021/04/21/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/4.png" class title="circle">



<p><strong>æ³¨æ„ï¼šéƒ¨åˆ†å†…å®¹æ¬è‡ªç‹‚ç¥è¯´å…¬ä¼—å·æ–‡æ¡£ï¼Œç¼“å­˜éƒ¨åˆ†å…¶å®æœ¬èº«å¹¶ä¸æƒ³è®²ï¼Œç”¨åˆ°çš„å¹¶ä¸å¤šï¼Œä½†è¿˜æ˜¯äº†è§£ä¸€ä¸‹</strong></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring5(äºŒ)</title>
    <url>/2021/05/01/Spring5%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h1 id="âœŒè‡ªåŠ¨è£…é…"><a href="#âœŒè‡ªåŠ¨è£…é…" class="headerlink" title="âœŒè‡ªåŠ¨è£…é…"></a>âœŒè‡ªåŠ¨è£…é…</h1><p>&emsp;&emsp;å¯¹äºå®ä½“ç±»ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ <code>bean</code> æ ‡ç­¾è¿›è¡Œå±æ€§è£…é…ï¼Œå¯¹äºå¼•ç”¨æ•°æ®ç±»å‹æ¥è¯´ï¼Œè¿™æ ·çš„æ–¹å¼è¾ƒä¸ºç¹çï¼ŒSpringæä¾›äº†ä¸€ç§æ›´ä¸ºç®€å•çš„è£…é…æ–¹å¼â€”â€”<strong>è‡ªåŠ¨è£…é…</strong>.</p>
<p>â€‹        è‡ªåŠ¨è£…é…åˆ†ä¸ºä¸¤ç§ï¼Œä¸‹é¢å°†ä¸€ä¸€ä»‹ç»ï¼š</p>
<ul>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¢æ·»å±æ€§</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">autowireå±æ€§ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ä¼šæŒ‰ç…§ç»™å®šçš„æ–¹å¼åŒ¹é…åˆ°ç›¸åº”çš„å¯¹è±¡ä»è€Œè¿›è¡Œè£…é…ï¼š</span><br><span class="line">	byNameå®é™…ä¸Šå°±æ˜¯é€šè¿‡å±æ€§åçš„å°å†™å½¢å¼è¿›è¡ŒåŒ¹é…</span><br><span class="line">	byTypeå®é™…ä¸Šå°±æ˜¯é€šè¿‡å±æ€§çš„ç±»å‹è¿›è¡ŒåŒ¹é…,é…ç½®æ–‡ä»¶ä¸­ç±»å‹å¿…é¡»å”¯ä¸€</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Person&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span> /&gt;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Person&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>åˆ©ç”¨æ³¨è§£</li>
</ul>
<p>ä½¿ç”¨ä¹‹å‰éœ€è¦è¿›è¡Œç›¸å…³é…ç½®ï¼š</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">åœ¨é…ç½®æ–‡ä»¶beansæ ‡ç­¾ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</span><br><span class="line">xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line"></span><br><span class="line">ç›´æ¥æ·»åŠ åˆ°xlns:schemaLocationä¸­</span><br><span class="line">http:<span class="regexp">//</span>www.springframework.org<span class="regexp">/schema/</span>context</span><br><span class="line">http:<span class="regexp">//</span>www.springframework.org<span class="regexp">/schema/</span>context/spring-context.xsd</span><br><span class="line"></span><br><span class="line">å†æ·»åŠ å¦‚ä¸‹æ ‡ç­¾ï¼š</span><br><span class="line">    &lt;context:annotation-config/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">1. @Autowired : å•ç‹¬ä½¿ç”¨ä¼šå…ˆæŒ‰ByTypeå»æ‰¾,æ‰¾ä¸åˆ°åˆ™æŒ‰Bynameå»æŸ¥æ‰¾(é»˜è®¤å–å½“å‰å±æ€§å)</span><br><span class="line">2. @Resource : æŒ‰ç…§å…ˆBynameå»æŸ¥æ‰¾åå†æŒ‰ByTypeæŸ¥æ‰¾</span><br><span class="line">3. @Qualifier : åœ¨ä½¿ç”¨@Autowireï¼ŒåŠ ä¸Š@Qualifier(â€œtestâ€)å¯ä»¥æŒ‡å®šByNameæ³¨å…¥å“ªä¸ªå¯¹è±¡</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;å…­å…­&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;66&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//    å½“required ä¸º false å¯ä»¥ç†è§£ä¸ºä¸éœ€è¦ å³è¯¥å±æ€§çš„å€¼å¯ä»¥ä¸ºç©º ä¹Ÿå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æ²¡æœ‰è¿™ä¸ªbeanå¯¹è±¡</span></span><br><span class="line"><span class="comment">//    Autowiredçš„å¯ä»¥å¸®åŠ©è‡ªåŠ¨åŒ¹é…è‡ªå®šä¹‰ç±» ï¼Œjavaè‡ªå¸¦çš„ç±»å’Œæ™®é€šçš„æ•°æ®ç±»å‹ä¸èƒ½ä½¿ç”¨</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="comment">//    Qualifierå¯ä»¥å¸®åŠ©Autowired æŒ‰ç…§idè¿›è¡Œé€‰æ‹©</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;address1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resourceå¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ï¼›</span></span><br><span class="line"><span class="comment">//    å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›</span></span><br><span class="line"><span class="comment">//    å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…</span></span><br><span class="line">    <span class="meta">@Resource(name = &quot;cat1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š@Autowire(require = false)å¯ä»¥ç†è§£ä¸ºä¸éœ€è¦ å³è¯¥å±æ€§çš„å€¼å¯ä»¥ä¸ºç©º ä¹Ÿå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æ²¡æœ‰è¿™ä¸ªbeanå¯¹è±¡</strong></p>
<h1 id="ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘"></a>ğŸ˜ä½¿ç”¨æ³¨è§£å¼€å‘</h1><p>åœ¨å­¦ä¹ äº†Mybatisåï¼Œæ„ˆå‘äº†è§£æ³¨è§£çš„ä¾¿åˆ©æ€§ï¼Œå½“ç„¶äº†ä¹Ÿè¿›è¡Œç›¸åº”çš„é…ç½®ï¼š</p>
<p>åªè¦åœ¨ä¸Šè¿°é…ç½®ä¸­æ·»åŠ ä¸€ä¸ªæ ‡ç­¾</p>
<p><code>&lt;context:component-scan base-package=&quot;åŒ…å&quot;/&gt;</code></p>
<p><strong>ç»™å‡ºä¸€äº›å¸¸ç”¨çš„æ³¨è§£</strong>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">1. @Autowired : å•ç‹¬ä½¿ç”¨ä¼šå…ˆæŒ‰ByTypeå»æ‰¾,æ‰¾ä¸åˆ°åˆ™æŒ‰Bynameå»æŸ¥æ‰¾(é»˜è®¤å–å½“å‰å±æ€§å)</span><br><span class="line">2. @Resource : æŒ‰ç…§å…ˆBynameå»æŸ¥æ‰¾åå†æŒ‰ByTypeæŸ¥æ‰¾</span><br><span class="line">3. @Qualifier : åœ¨ä½¿ç”¨@Autowireï¼ŒåŠ ä¸Š@Qualifier(â€œtestâ€)å¯ä»¥æŒ‡å®šBynameæ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼›</span><br><span class="line">4. @Component : ç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„beanæ ‡ç­¾</span><br><span class="line">5. @value : å¯ä»¥ç»™å±æ€§èµ‹å€¼</span><br><span class="line">6. @Repository : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™Daoå±‚æ³¨å†Œ</span><br><span class="line">7. @Service : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™serviceå±‚æ³¨å†Œ</span><br><span class="line">8. @Controller : åŠŸèƒ½ä¸@Componentä¸€è‡´ï¼Œå¸¸ç”¨äºç»™controlå±‚æ³¨å†Œ</span><br><span class="line">9. @Scope : å¯ä»¥å®šä¹‰ä½œç”¨åŸŸï¼Œå•ä¾‹æˆ–è€…å…¶å®ƒç±»å‹ </span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ä¸€ä¸€è¿›è¡Œä»‹ç»ï¼š</p>
<blockquote>
<p>@Component</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="comment">//ç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ &lt;bean id = &quot;user&quot; class=&quot;å½“å‰ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;18&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å® <code>@Repositoryã€@Service ã€@Controller</code> çš„æ•ˆæœä¸ <code>@Component</code> çš„æ•ˆæœä¸€æ ·ï¼Œåªæ˜¯ç”¨çš„åœ°æ–¹ä¸ä¸€æ ·è€Œå·².</p>
<blockquote>
<p>@Scope</p>
</blockquote>
<p>åˆ†ä¸ºå•ä¾‹æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ï¼š</p>
<ul>
<li>å•ä¾‹æ¨¡å¼ï¼šæ— è®ºè·å–å¤šå°‘ä¸ªå¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li>
<li>åŸå‹æ¨¡å¼ï¼šæ— è®ºè·å–å¤šå°‘ä¸ªå¯¹è±¡éƒ½æŒ‡å‘ä¸åŒçš„å¯¹è±¡</li>
</ul>
<p><strong>è¿™æ ·ä»¥æ¥ï¼Œå¯ä»¥å°†Userä¸­çš„<code>Catã€Dog</code> åŒæ ·çš„ä½¿ç”¨ï¼Œå®Œå…¨å…å»äº†åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ›å»ºå¯¹è±¡çš„å·¥ä½œ</strong></p>
<h1 id="ğŸ­ä»£ç†æ¨¡å¼"><a href="#ğŸ­ä»£ç†æ¨¡å¼" class="headerlink" title="ğŸ­ä»£ç†æ¨¡å¼"></a>ğŸ­ä»£ç†æ¨¡å¼</h1><p>ä»£ç†æ¨¡å¼åˆ†ä¸ºä¿©ç§ï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†.</p>
<blockquote>
<h2 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h2></blockquote>
<p><strong>é™æ€ä»£ç†è§’è‰²åˆ†æ</strong></p>
<ul>
<li><p>æŠ½è±¡è§’è‰² : ä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°</p>
</li>
<li><p>çœŸå®è§’è‰² : è¢«ä»£ç†çš„è§’è‰²</p>
</li>
<li><p>ä»£ç†è§’è‰² : ä»£ç†çœŸå®è§’è‰² ; ä»£ç†çœŸå®è§’è‰²å , ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œ .</p>
</li>
<li><p>å®¢æˆ·  :  ä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ .</p>
</li>
</ul>
<p><strong>ä»£ç å®ç°</strong></p>
<p>Rent . java å³æŠ½è±¡è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Host . java å³çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ¿å±‹å‡ºç§Ÿ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Proxy . java å³ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»£ç†è§’è‰²ï¼šä¸­ä»‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> Host host;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Proxy</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Proxy</span><span class="params">(Host host)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.host = host;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç§Ÿæˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>&#123;</span><br><span class="line">       seeHouse();</span><br><span class="line">       host.rent();</span><br><span class="line">       fare();</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seeHouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;å¸¦æˆ¿å®¢çœ‹æˆ¿&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fare</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Client . java å³å®¢æˆ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//æˆ¿ä¸œè¦ç§Ÿæˆ¿</span></span><br><span class="line">       Host host = <span class="keyword">new</span> Host();</span><br><span class="line">       <span class="comment">//ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ</span></span><br><span class="line">       Proxy proxy = <span class="keyword">new</span> Proxy(host);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä½ å»æ‰¾ä¸­ä»‹ï¼</span></span><br><span class="line">       proxy.rent();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ†æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­é€šè¿‡ä»£ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼.</p>
<p><strong>é™æ€ä»£ç†çš„å¥½å¤„:</strong></p>
<ul>
<li>å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .</li>
</ul>
<p>ç¼ºç‚¹ :</p>
<ul>
<li>ç±»å¤šäº† , å¤šäº†ä»£ç†ç±» , å·¥ä½œé‡å˜å¤§äº† . å¼€å‘æ•ˆç‡é™ä½ .</li>
</ul>
<p>æˆ‘ä»¬æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥ , å°±æœ‰äº†åŠ¨æ€ä»£ç† !</p>
<blockquote>
<h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2></blockquote>
<ul>
<li><p>åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†çš„ä¸€æ · .</p>
</li>
<li><p>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ . é™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„</p>
</li>
<li><p>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±» : ä¸€ç±»æ˜¯åŸºäºæ¥å£åŠ¨æ€ä»£ç† , ä¸€ç±»æ˜¯åŸºäºç±»çš„åŠ¨æ€ä»£ç†</p>
</li>
<li><ul>
<li>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†â€”-JDKåŠ¨æ€ä»£ç†</li>
<li>åŸºäºç±»çš„åŠ¨æ€ä»£ç†â€“cglib</li>
<li>ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ <code>javasist</code> æ¥ç”ŸæˆåŠ¨æ€ä»£ç† . ç™¾åº¦ä¸€ä¸‹<code>javasist</code></li>
<li>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨JDKçš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ã€</li>
</ul>
</li>
</ul>
<p><strong>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»</strong></p>
<p>æ ¸å¿ƒ : <code>InvocationHandler</code>   å’Œ   <code>Proxy</code>  ï¼Œ æ‰“å¼€JDKå¸®åŠ©æ–‡æ¡£çœ‹çœ‹</p>
<p>ã€<code>InvocationHandler</code>ï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, æ–¹æ³• method, Object[] args)</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="comment">//å‚æ•°</span></span></span><br><span class="line"><span class="function"><span class="comment">//proxy - è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹</span></span></span><br><span class="line"><span class="function"><span class="comment">//method -æ‰€è¿°æ–¹æ³•å¯¹åº”äºè°ƒç”¨ä»£ç†å®ä¾‹ä¸Šçš„æ¥å£æ–¹æ³•çš„å®ä¾‹ã€‚æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯è¯¥æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯ä»£ç†ç±»ç»§æ‰¿è¯¥æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…çº§æ¥å£ã€‚</span></span></span><br><span class="line"><span class="function"><span class="comment">//args -åŒ…å«çš„æ–¹æ³•è°ƒç”¨ä¼ é€’ä»£ç†å®ä¾‹çš„å‚æ•°å€¼çš„å¯¹è±¡çš„é˜µåˆ—ï¼Œæˆ–nullå¦‚æœæ¥å£æ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…å™¨ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean ã€‚</span></span></span><br></pre></td></tr></table></figure>

<p>ã€Proxy  : ä»£ç†ã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">                                 rent.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä»£ç å®ç°</strong> </p>
<p>æŠ½è±¡è§’è‰²å’ŒçœŸå®è§’è‰²å’Œä¹‹å‰çš„ä¸€æ ·ï¼</p>
<p>Rent . java å³æŠ½è±¡è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Host . java å³çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ¿å±‹å‡ºç§Ÿ&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ProxyInvocationHandler. java </code>å³ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Rent rent;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRent</span><span class="params">(Rent rent)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.rent = rent;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç”Ÿæˆä»£ç†ç±»ï¼Œé‡ç‚¹æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·å–è¦ä»£ç†çš„æŠ½è±¡è§’è‰²ï¼ä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªè§’è‰²ï¼Œç°åœ¨å¯ä»¥ä»£ç†ä¸€ç±»è§’è‰²</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">               rent.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// proxy : ä»£ç†ç±» method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡.</span></span><br><span class="line">   <span class="comment">// å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> throwsThrowable </span>&#123;</span><br><span class="line">       seeHouse();</span><br><span class="line">       <span class="comment">//æ ¸å¿ƒï¼šæœ¬è´¨åˆ©ç”¨åå°„å®ç°ï¼</span></span><br><span class="line">       Object result = method.invoke(rent, args);</span><br><span class="line">       fare();</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seeHouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;å¸¦æˆ¿å®¢çœ‹æˆ¿&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fare</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Client . java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç§Ÿå®¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">       Host host = <span class="keyword">new</span> Host();</span><br><span class="line">       <span class="comment">//ä»£ç†å®ä¾‹çš„è°ƒç”¨å¤„ç†ç¨‹åº</span></span><br><span class="line">       ProxyInvocationHandler pih = <span class="keyword">new</span> ProxyInvocationHandler();</span><br><span class="line">       pih.setRent(host); <span class="comment">//å°†çœŸå®è§’è‰²æ”¾ç½®è¿›å»ï¼</span></span><br><span class="line">       Rent proxy = (Rent)pih.getProxy(); <span class="comment">//åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„ä»£ç†ç±»ï¼</span></span><br><span class="line">       proxy.rent();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒï¼š<strong>ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡ , ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼ã€</strong></p>
<blockquote>
<h3 id="åŠ¨æ€ä»£ç†çš„å¥½å¤„"><a href="#åŠ¨æ€ä»£ç†çš„å¥½å¤„" class="headerlink" title="åŠ¨æ€ä»£ç†çš„å¥½å¤„"></a>åŠ¨æ€ä»£ç†çš„å¥½å¤„</h3></blockquote>
<p>é™æ€ä»£ç†æœ‰çš„å®ƒéƒ½æœ‰ï¼Œé™æ€ä»£ç†æ²¡æœ‰çš„ï¼Œå®ƒä¹Ÿæœ‰ï¼</p>
<ul>
<li>å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼</li>
</ul>
<h1 id="ğŸ‡Spring-AOP"><a href="#ğŸ‡Spring-AOP" class="headerlink" title="ğŸ‡Spring AOP"></a>ğŸ‡Spring AOP</h1><p>&emsp;&emsp;æ„ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦é¢å‘åˆ‡å‘ï¼Ÿåœ¨ä¸šåŠ¡é€»è¾‘å·²ç»å®Œå–„çš„æƒ…å†µä¸‹ï¼Œå»ä¿®æ”¹æºä»£ç æ˜¯ååˆ†å±é™©çš„äº‹æƒ…ï¼Œäºæ˜¯æˆ‘éœ€è¦åœ¨å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæ’å…¥ä¸€ä¸ªåˆ‡é¢ï¼Œä»åˆ‡å…¥ç‚¹åˆ‡å…¥ï¼Œä½†ä¸å½±å“åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¹¶ä¸ä¼šæ¥è§¦åŸæœ‰é¡¹ç›®çš„æºä»£ç ï¼‰ï¼Œåªæ˜¯å¯¹å…¶è¿›è¡ŒåŠŸèƒ½å¢å¼ºä»¥åŠå®Œå–„.æé«˜äº†ä»£ç å¤ç”¨æ€§ä»¥åŠæ•ˆç‡.</p>
<p><strong>æ¥ä¸‹æ¥ä»‹ç»ç›¸å…³çš„æ¦‚å¿µï¼š</strong></p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ â€¦.</li>
<li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ– çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li>
<li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<p>ä½¿ç”¨ä¹‹å‰ä¾æ—§éœ€è¦è¿›è¡Œç›¸å…³é…ç½®:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›¸å…³ä¾èµ–ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š--&gt;</span></span><br><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/aop</span><br><span class="line">http://www.springframework.org/schema/aop/spring-aop.xsd</span><br></pre></td></tr></table></figure>





<p><strong>éœ€æ±‚ï¼šåœ¨æ‰€æœ‰æ–¹æ³•å‰åæ·»åŠ æ–¹æ³•å‰æ—¥å¿—ä»¥åŠæ–¹æ³•åæ—¥å¿—ï¼Ÿ</strong></p>
<blockquote>
<h2 id="ç¬¬ä¸€ç§å®ç°æ–¹å¼"><a href="#ç¬¬ä¸€ç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ç§å®ç°æ–¹å¼"></a>ç¬¬ä¸€ç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>ç”¨<code>Spring</code>æ¡†æ¶ä¸­æä¾›çš„ç±»è¿›è¡Œåˆ‡å…¥</strong>ï¼š</p>
<ul>
<li>æ¥å£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">select</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceIml</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Select===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Update===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Insert===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===Delete===&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•å‰æ—¥å¿—ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">log</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] objects, Object o)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(o.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•è¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–¹æ³•åæ—¥å¿—</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Afterlog</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•åæ—¥å¿—æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.UserServiceIml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;after&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.Afterlog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;before&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.pojo.log&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸€: ç”¨springæ¡†æ¶ä¸­æä¾›çš„ç±»è¿›è¡Œåˆ‡å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å®šä¹‰åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äºä»¥ä¸Š<code>expression=&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</code>çš„è§£è¯»ï¼š</p>
<p>â€‹    <code>execution()</code> : æ‰§è¡Œçš„æ„æ€,</p>
<p>â€‹    ç¬¬ä¸€ä¸ª <code>*</code> : å¯¹åº”è¿”å›å€¼ç±»å‹ï¼Œ * è¡¨ç¤ºæ‰€æœ‰ç±»å‹</p>
<p>â€‹    åŒ…åï¼šéœ€è¦å®ç°ç±»çš„å…¨é™å®šç±»å</p>
<p>â€‹    ç±»ååçš„<code>.*</code> ï¼šè¡¨ç¤ºç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•</p>
<p>â€‹    æœ€åçš„<code>(..)</code> : è¡¨ç¤ºæ‰€æœ‰çš„å½¢å¼å‚æ•°</p>
<ul>
<li>æµ‹è¯•ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        UserDao userservice = context.getBean(<span class="string">&quot;userservice&quot;</span>, UserDao.class);</span><br><span class="line">        userservice.select();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h2 id="ç¬¬äºŒç§å®ç°æ–¹å¼"><a href="#ç¬¬äºŒç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬äºŒç§å®ç°æ–¹å¼"></a>ç¬¬äºŒç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>è‡ªå®šä¹‰å‰åæ–¹æ³•å®ç°</strong></p>
<ul>
<li>è‡ªå®šä¹‰ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;diy&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">diy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å‰æ‰§è¡Œ~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•åæ‰§è¡Œ~~~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ–¹å¼äºŒ:è‡ªå®šä¹‰å‰åæ–¹æ³•è¿›è¡Œå®ç°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>





<blockquote>
<h2 id="ç¬¬ä¸‰ç§å®ç°æ–¹å¼"><a href="#ç¬¬ä¸‰ç§å®ç°æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ç§å®ç°æ–¹å¼"></a>ç¬¬ä¸‰ç§å®ç°æ–¹å¼</h2></blockquote>
<p><strong>åˆ©ç”¨æ³¨è§£å¢å¼ºç±»</strong></p>
<ul>
<li>æ³¨è§£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component(&quot;pointcut&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Annotationpointcut</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* jh.pojo.UserServiceIml.*(..) )&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œä¹‹å‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* jh.pojo.UserServiceIml.*(..) )&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œä¹‹å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¨ç¤ºç¯ç»• ï¼Œ åœ¨æœ€å‰é¢ä¸€ä¸ª å’Œ æœ€åé¢ä¸€ä¸ª</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* jh.pojo.UserServiceIml.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰~~&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾å&quot;</span>+jp.getSignature());</span><br><span class="line">        Object proce = jp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">        System.out.println(proce);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<p><strong>è®°å¾—è®°å¾—å¼€å¯ç»„ä»¶æ‰«æå™¨</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ç¬¬ä¸‰ç§: å®ç°è‡ªå®šä¹‰æ³¨è§£å¢å¼ºå®ç°ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>ä¸ªäººæ¯”è¾ƒå–œæ¬¢ç¬¬ä¸€ç§ï¼Œæ­é…æ³¨è§£ä½¿ç”¨ï¼Œéå¸¸é¦™~ï¼Œç¬¬äºŒç§ä¹Ÿéå¸¸å¥½</strong></p>
<h1 id="ğŸ‰Spring-Mybatisæ•´åˆ"><a href="#ğŸ‰Spring-Mybatisæ•´åˆ" class="headerlink" title="ğŸ‰Spring-Mybatisæ•´åˆ"></a>ğŸ‰Spring-Mybatisæ•´åˆ</h1><p>å…ˆæä¾›ç›¸å…³ä¾èµ–ä»¥åŠé…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--è®©mavaenå¤„ç†xmlæ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>ç¼–å†™<code>Dao</code></p>
<ul>
<li>æ¥å£ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»(æ•´åˆåå¿…é¡»è¦å†™è¿™ä¸ªç±»ä¸èƒ½åªç”¨æ˜ å°„æ–‡ä»¶)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSqlSession</span><span class="params">(SqlSession sqlSession)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sqlSession = sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSession.getMapper(UserMapper.class).getUserList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™æ˜ å°„æ–‡ä»¶è¦ä¸æ¥å£åŒå</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;jh.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userchange&quot;</span> <span class="attr">type</span>=<span class="string">&quot;jh.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userchange&quot;</span>&gt;</span></span><br><span class="line">        select * from users</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>ç¼–å†™å®ä½“ç±»User</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>ç¼–å†™Springé…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    sqlSessionFactoryå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:jh/Dao/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é€šè¿‡sqlSessionFactoryåˆ›å»ºsqlSession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/bjpowernode?serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;qwe123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jh.Dao.UserMapperImpl&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>æµ‹è¯•ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        UserMapper userMapper =(UserMapper) context.getBean(<span class="string">&quot;userMapper&quot;</span>);</span><br><span class="line">        List&lt;User&gt; list = userMapper.getUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ğŸŠå£°æ˜ç¤ºäº‹ç‰©"><a href="#ğŸŠå£°æ˜ç¤ºäº‹ç‰©" class="headerlink" title="ğŸŠå£°æ˜ç¤ºäº‹ç‰©"></a>ğŸŠå£°æ˜ç¤ºäº‹ç‰©</h1><ul>
<li>é…ç½®æ–‡ä»¶ä¸­ç¼–å†™</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®å£°æ˜ç¤ºäº‹ç‰©--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ç»“åˆaopå®ç°äº‹ç‰©--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* jh.Dao.* .*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Spring5</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹(ä¸€):æœåŠ¡å™¨é€šä¿¡æ¦‚å¿µ</title>
    <url>/2021/07/20/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ"><a href="#ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ" class="headerlink" title="ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ"></a>ğŸ§µä½•ä¸ºç½‘ç»œç¼–ç¨‹ï¼Ÿ</h1><p>ç½‘ç»œç¼–ç¨‹é€šä¿—è®²ï¼Œ<strong>å³é€šè¿‡ç¼–ç çš„æ–¹å¼è®©ä¸¤å°è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡ï¼ˆå³è¿›è¡Œæ•°æ®ä¼ é€’å’Œäº¤æ¢ï¼‰</strong></p>
<h1 id="ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜"><a href="#ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜" class="headerlink" title="ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜"></a>ğŸ’¢ç½‘ç»œç¼–ç¨‹ä¸­çš„æ ¸å¿ƒé—®é¢˜</h1><p>ç°æœ‰å¦‚ä¸‹åœºæ™¯ï¼š æ‰“å¼€æµè§ˆå™¨<strong>è®¿é—®</strong>ç™¾åº¦ï¼Œè¾“å…¥<strong>ç™¾åº¦çš„ç½‘å€</strong>ï¼ŒæŒ‰ä¸‹å›è½¦<strong>å‘å‡ºè¯·æ±‚</strong>ï¼Œæ­¤æ—¶å°±å‘<strong>ç™¾åº¦çš„æœåŠ¡å™¨</strong>å‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨<strong>æ¥æ”¶åˆ°è¯·æ±‚</strong>ä¹‹å<strong>å“åº”</strong>ç»™å®¢æˆ·åº¦(æµè§ˆå™¨)ç»“æœå³å‰ç«¯é¡µé¢ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰€è®¿é—®çš„ç™¾åº¦é¡µé¢å°±è¢«æ¸²æŸ“å‡ºæ¥äº†.</p>
<hr>
<p>åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>é€šè¿‡æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ â€”-&gt; B/Sæ¶æ„(BSçš„å‡ºç°è§£å†³äº†CSçš„å†—æ‚ç¹çï¼Œæ›´åŠ é«˜æ ¡)</li>
<li>è¾“å…¥ç™¾åº¦ç½‘å€ â€”-&gt; é€šè¿‡ç½‘å€ç¡®å®šäº†ç™¾åº¦çš„æœåŠ¡å™¨ â€”- &gt; å®šå‘å‘å‡ºè¯·æ±‚</li>
<li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚å â€”-&gt; æ ¹æ®è¯·æ±‚æ‰€æºå¸¦çš„å‚æ•°/ç½‘å€è¿›è¡Œå“åº”ï¼Œè¿”å›ç»™å®¢æˆ·åº¦å“åº”çš„æ•°æ®ï¼Œé€šè¿‡æµè§ˆå™¨å»å±•ç¤º </li>
</ul>
<h2 id="æœåŠ¡å™¨å¯»å€"><a href="#æœåŠ¡å™¨å¯»å€" class="headerlink" title="æœåŠ¡å™¨å¯»å€"></a>æœåŠ¡å™¨å¯»å€</h2><p>åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¼—å¤šçš„æœåŠ¡å™¨ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•ç¡®å®šå»è®¿é—®æˆ‘ä»¬æ‰€éœ€è¦çš„é‚£ä¸€å°æœåŠ¡å™¨å»è¯·æ±‚æœåŠ¡å‘¢ï¼Ÿæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<strong>ç½‘å€</strong>ï¼Œç½‘å€çš„åŸºæœ¬ç»„æˆåŒ…æ‹¬äº›ä»€ä¹ˆå‘¢ï¼Ÿ <strong>ç½‘å€ = <code>åè®®://((ipåœ°å€:ç«¯å£å·)/åŸŸå)/(èµ„æºè·¯å¾„)?(å‚æ•° key = value)</code></strong> ï¼Œ æƒ³è¦ç¡®å®šæœåŠ¡å™¨ï¼Œæ˜¾ç„¶éœ€è¦æœåŠ¡å™¨çš„<code>ip</code> åœ°å€ï¼Œæˆ–è€…å…¶<code>ip</code>åœ°å€æ‰€æ˜ å°„çš„åŸŸåï¼Œå³**é€šè¿‡<code>DNS</code>è§£æåŸŸåä»è€Œè·å¾—<code>ip+ç«¯å£å·</code>**ï¼Œåˆç”±äºåŒä¸€å°æœåŠ¡å™¨ä¸Šä¸åŒçš„ç«¯å£å·è¿è¡Œç€ä¸åŒçš„æœåŠ¡ï¼Œäºæ˜¯æˆ‘ä»¬ä¹Ÿéœ€è¦ç¡®å®šç«¯å£å·ï¼Œå¦‚æœä½¿ç”¨äº†åŸŸåï¼Œç»‘å®šåŸŸåæ—¶åº”è¯¥åŒæ—¶ç»‘å®šç«¯å£å·ã€‚æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦çŸ¥é“æˆ‘ä»¬éœ€è¦è®¿é—®çš„èµ„æºè·¯å¾„å³å¯ï¼Œå¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œé€šè¿‡ <strong>key = value</strong> æˆ–è€… æ›´ä¸ºå®‰å…¨çš„å¦ä¸€ç§æ–¹å¼ æ¥è¿›è¡Œä¼ é€’.</p>
<h2 id="ç½‘ç»œåè®®"><a href="#ç½‘ç»œåè®®" class="headerlink" title="ç½‘ç»œåè®®"></a>ç½‘ç»œåè®®</h2><h3 id="ç½‘ç»œåè®®çš„å®šä¹‰"><a href="#ç½‘ç»œåè®®çš„å®šä¹‰" class="headerlink" title="ç½‘ç»œåè®®çš„å®šä¹‰"></a>ç½‘ç»œåè®®çš„å®šä¹‰</h3><pre><code> â— ç½‘ç»œåè®®æ˜¯ä¸€ç§ç‰¹æ®Šçš„è½¯ä»¶ï¼Œæ˜¯è®¡ç®—æœºç½‘ç»œå®ç°å…¶åŠŸèƒ½çš„åŸºæœ¬æœºåˆ¶

 â— ç½‘ç»œåè®®çš„æœ¬è´¨æ˜¯è§„åˆ™ï¼Œå³å„ç§ç¡¬ä»¶å’Œè½¯ä»¶å¿…é¡»éµå¾ªçš„å…±åŒè§„åˆ™

 â— ç½‘ç»œåè®®å¹¶ä¸æ˜¯ä¸€å¥—å•ç‹¬çš„è½¯ä»¶ï¼Œä»–èåˆäºå…¶ä»–æ‰€æœ‰è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œåè®®åœ¨ç½‘ç»œä¸­æ— æ‰€

    ä¸åœ¨
</code></pre>
<h3 id="å¸¸ç”¨çš„ç½‘ç»œåè®®"><a href="#å¸¸ç”¨çš„ç½‘ç»œåè®®" class="headerlink" title="å¸¸ç”¨çš„ç½‘ç»œåè®®"></a>å¸¸ç”¨çš„ç½‘ç»œåè®®</h3><pre><code>   TCP  UDP     HTTP   HTTPS    FTP  DNS  Telnet    TCP/IP    SSL/TLS   websocket
</code></pre>
<h4 id="TCPåè®®"><a href="#TCPåè®®" class="headerlink" title="TCPåè®®"></a>TCPåè®®</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">TCPåè®®ï¼Œï¼ˆtransmission control protocolï¼‰ï¼Œä¼ è¾“æ§åˆ¶åè®®ã€‚</span><br><span class="line">å®šä¹‰ï¼šTCPåè®®æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€ä¼ è¾“é€Ÿåº¦æ…¢ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</span><br><span class="line"></span><br><span class="line"><span class="code">          åœ¨ç®€åŒ–çš„è®¡ç®—æœºç½‘ç»œOSIæ¨¡å‹ä¸­å®Œæˆç¬¬å››å±‚ä¼ è¾“å±‚æ‰€æŒ‡å®šçš„åŠŸèƒ½ã€‚ </span></span><br></pre></td></tr></table></figure>


<p>æä¾›å¯é çš„ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œå¯ä»¥ä¿è¯æ¥æ”¶æ–¹æ”¶åˆ°çš„æ•°æ®ä¸å‘é€æ–¹å‘é€çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€æ— å·®é”™ï¼ŒåŒæ—¶è¿˜æœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶çš„åŠŸèƒ½ï¼Œæ‰€ä»¥TCPåè®®æ¯”è¾ƒå¤æ‚ï¼Œèƒ½å¤Ÿä¸ºè¦æ±‚å¯é æ€§çš„åº”ç”¨å±‚åè®®æä¾›æœåŠ¡ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€é‚®ä»¶æ”¶å‘ã€ç½‘é¡µæµè§ˆã€è¿œç¨‹ç™»å½•ç­‰ç­‰</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ä½œç”¨ï¼šä¸»è¦ç”¨äºåœ¨ä¸»æœºé—´å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿè¿æ¥ï¼Œä»¥å®ç°é«˜å¯é æ€§çš„æ•°æ®åŒ…äº¤æ¢</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">IPåè®®çš„ä½œç”¨ï¼šå¯ä»¥è¿›è¡ŒIPæ•°æ®åŒ…çš„åˆ†å‰²å’Œç»„è£…</span><br><span class="line"></span><br><span class="line">IPåè®®çš„ç¼ºç‚¹ï¼šä½†æ˜¯é€šè¿‡IPåè®®å¹¶ä¸èƒ½æ¸…æ¥šçš„äº†è§£åˆ°æ•°æ®åŒ…æ˜¯å¦é¡ºåˆ©çš„å‘é€ç»™ç›®æ ‡è®¡ç®—æœº</span><br><span class="line"></span><br><span class="line">TCPçš„ç‰¹ç‚¹ï¼š</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ1ï¼‰é¢å‘è¿æ¥çš„</p>
<p>ï¼ˆ2ï¼‰æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡</p>
<p>ï¼ˆ3ï¼‰æä¾›æµé‡æ§åˆ¶ã€‚TCPèƒ½å¤Ÿæ§åˆ¶è¿›ç¨‹å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä¿è¯å¦ä¸€ç«¯ä¸è¢«å¤§é‡çš„æ•°æ®â€œæ·¹æ²¡â€è€Œå‡ºç°æº¢å‡ºã€‚</p>
<p>ï¼ˆ4ï¼‰æä¾›æ‹¥å¡æ§åˆ¶ã€‚å½“ç½‘ç»œå‡ºç°æ‹¥å¡çš„æ—¶å€™ï¼ŒTCPèƒ½å¤Ÿå‡å°å‘ç½‘ç»œæ³¨å…¥æ•°æ®çš„é€Ÿç‡å’Œæ•°é‡ï¼Œç¼“è§£æ‹¥å¡ã€‚</p>
<p>ï¼ˆ5ï¼‰æä¾›å…¨åŒå·¥é€šä¿¡ã€‚TCPæä¾›åŒå‘çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚TCPå…è®¸é€šä¿¡åŒæ–¹çš„åº”ç”¨è¿›ç¨‹åœ¨ä»»ä½•æ—¶å€™å‘é€æ•°æ®ã€‚TCPè¿æ¥çš„ä¸¤ç«¯éƒ½è®¾æœ‰å‘é€ç¼“å­˜å’Œæ¥æ”¶ç¼“å­˜ï¼Œç”¨æ¥ä¸´æ—¶å­˜æ”¾åŒå‘é€šä¿¡çš„æ•°æ®ã€‚</p>
<p>ï¼ˆ6ï¼‰TCPæ˜¯é¢å‘å­—èŠ‚æµçš„ã€‚TCPä¸­çš„â€œæµâ€æ˜¯æŒ‡æµå…¥åˆ°è¿›ç¨‹æˆ–ä»è¿›ç¨‹æµå‡ºçš„å­—èŠ‚</p>
<h4 id="UDPåè®®"><a href="#UDPåè®®" class="headerlink" title="UDPåè®®"></a>UDPåè®®</h4><p>ç”¨æˆ·æ•°æ®åŒ…åè®®ï¼ˆUser Datagram Protocolï¼‰</p>
<p>UDPåè®®ä¸èƒ½ä¿è¯æ•°æ®ä¸ä¸¢å¤±ã€æ— å·®é”™ï¼Œä¹Ÿä¸èƒ½ä¿è¯æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®çš„é¡ºåºå’Œå‘é€æ–¹å‘é€æ•°æ®çš„é¡ºåºä¸€æ ·ã€‚UDPåè®®æ¯”è¾ƒç®€å•ï¼Œä½†æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œèƒ½ä¸ºå¯¹å¯é æ€§è¦æ±‚ä¸é«˜ï¼Œå¯¹å®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨æä¾›æœåŠ¡ï¼Œå¦‚ä¼ è¾“éŸ³é¢‘å’Œè§†é¢‘ã€‚</p>
<p>å®šä¹‰ï¼šUDPåè®®æ˜¯OSI(Open System Interconnectionï¼Œå¼€æ”¾å¼ç³»ç»Ÿäº’è”)æ¨¡å‹ä¸­çš„ä¸€ç§</p>
<p>æ— è¿æ¥çš„ã€ç®€å•ä¸å¯é çš„ã€ä¼ è¾“é€Ÿåº¦å¿«ã€é¢å‘äº‹åŠ¡çš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<p>UDPåè®®çš„ç‰¹ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ— è¿æ¥çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰UDPæ˜¯ä¸€ç§å°½åŠ›è€Œä¸ºçš„æœåŠ¡æ–¹å¼ï¼Œä¸æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼ˆæ¯”å¦‚æ•°æ®çš„ä¸¢å¤±ã€é‡å¤å’Œæ— åºï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰UDPæ˜¯é«˜æ•ˆçš„ä¼ è¾“åè®®ã€‚</p>
<p>ï¼ˆ4ï¼‰UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶ã€‚</p>
<p>TCPå’ŒUDPåè®®çš„åŒºåˆ«</p>
<p>Aã€TCPé¢å‘è¿æ¥ï¼ˆæ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰ï¼›</p>
<pre><code>  UDPæ˜¯æ— è¿æ¥çš„ï¼ˆå‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼‰ã€‚
</code></pre>
<p>Bã€TCPæä¾›å¯é çš„æœåŠ¡ï¼ˆé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰åºåˆ°è¾¾ï¼‰ï¼›</p>
<pre><code>  UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä¸ä¿è¯å¯é äº¤ä»˜ã€‚
</code></pre>
<p>Cã€TCPåŸºäºå­—èŠ‚æµï¼ˆå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµï¼‰ã€‚</p>
<pre><code>  UDPæ˜¯åŸºäºæŠ¥æ–‡çš„ï¼ŒUDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½

 ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼ŒIPç”µè¯ï¼Œå®æ—¶è§†é¢‘ç”µè¯ï¼‰ã€‚
</code></pre>
<p>Dã€TCPä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼›</p>
<pre><code>  UDPå¯èƒ½ä¸¢åŒ…ã€‚
</code></pre>
<p>Eã€TCPä¿è¯æ•°æ®é¡ºåºï¼›</p>
<pre><code>  UDPä¸ä¿è¯ã€‚
</code></pre>
<p>Fã€æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼›</p>
<pre><code> UDPæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡
</code></pre>
<p>Gã€TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“</p>
<pre><code>  UDPåˆ™æ˜¯ä¸å¯é ä¿¡é“
</code></pre>
<p>Hã€TCPçš„é¦–éƒ¨å¼€é”€20å­—èŠ‚</p>
<pre><code>   UDPçš„é¦–éƒ¨å¼€é”€8å­—èŠ‚
</code></pre>
<p>Iã€TCPè¦æ±‚ç³»ç»Ÿèµ„æºè¾ƒå¤šï¼ŒUDPè¾ƒå°‘</p>
<h4 id="TCP-IPåè®®"><a href="#TCP-IPåè®®" class="headerlink" title="TCP/IPåè®®"></a>TCP/IPåè®®</h4><pre><code> å®è´¨ï¼š TCP/IPå…¶å®å°±æ˜¯TCPå’ŒIPç­‰åè®®çš„ç»„åˆï¼Œå³ä¼ è¾“æ§åˆ¶åè®®/äº’è”ç½‘åè®®ã€‚

åº”ç”¨åœºæ™¯ï¼šä¸»è¦ç”¨äºåœ¨å®‰è£…äº†ä¸åŒç¡¬ä»¶å’Œä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºä¹‹é—´ï¼Œå®ç°å¯é çš„ç½‘ç»œé€š

                 ä¿¡ã€‚TCPåè®®å¯ä»¥ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„å¯é æ€§ï¼›IPåè®®å¯ä»¥ä¿è¯æ•°æ®åŒ…è¢«ä¼ è¾“åˆ°

                ç›®æ ‡è®¡ç®—æœºä¸Šã€‚
</code></pre>
<h4 id="FTPåè®®"><a href="#FTPåè®®" class="headerlink" title="FTPåè®®"></a>FTPåè®®</h4><pre><code> æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFile Transfer Protocolï¼‰ã€‚

 ç”¨é€”ï¼šä¸»è¦ç”¨äºåœ¨ä¸¤å°è®¡ç®—æœºä¹‹é—´å®ç°æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½ï¼Œå…¶ä¸­ä¸€å°è®¡ç®—æœºä½œä¸ºFTPçš„å®¢

            æˆ·ç«¯ï¼Œå¦ä¸€å°ä½œä¸ºFTPçš„æœåŠ¡ç«¯ã€‚é€šè¿‡FTPåè®®å¯ä»¥ä¸Šä¼ ã€ä¸‹è½½å‡ ä¹æ‰€æœ‰çš„æ–‡ä»¶ç±»

            å‹ï¼Œæ¯”å¦‚txt  exe  doc  pdf   mp3  zip rarç­‰
</code></pre>
<h4 id="Telnetåè®®"><a href="#Telnetåè®®" class="headerlink" title="Telnetåè®®"></a>Telnetåè®®</h4><pre><code>  å®šä¹‰ï¼šè¿œç¨‹ç™»å½•åè®®ï¼Œæ˜¯Internetä¸Šæ™®éé‡‡ç”¨çš„ä»¿çœŸç½‘ç»œåè®®ï¼ŒåŒæ—¶Telnetä¹Ÿæ˜¯ä»è¿œç¨‹

            ä½ç½®ç™»å½•å¸¸ç”¨çš„ç¨‹åºã€‚

  ä½œç”¨ï¼šé€šè¿‡Telnetç¨‹åºç™»å½•è¿œç¨‹Telnetè®¡ç®—æœºã€‚ä¸€èˆ¬é‡‡ç”¨æˆæƒçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚ç™»å½•

            ä¹‹åå°±å¦‚åŒä½¿ç”¨æœ¬åœ°è®¡ç®—æœºä¸€æ ·ï¼Œä½¿ç”¨è¿œç¨‹è®¡ç®—æœºçš„çš„ç¡¬ç›˜ã€è¿è¡Œåº”ç”¨ç¨‹åºç­‰ã€‚
</code></pre>
<h4 id="DNSåè®®"><a href="#DNSåè®®" class="headerlink" title="DNSåè®®"></a>DNSåè®®</h4><p>DNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰ï¼Œå› ç‰¹ç½‘ä¸Šä½œä¸ºåŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿ç”¨æˆ·æ›´æ–¹ä¾¿çš„è®¿é—®äº’è”ç½‘ï¼Œè€Œä¸ç”¨å»è®°ä½èƒ½å¤Ÿè¢«æœºå™¨ç›´æ¥è¯»å–çš„IPæ•°ä¸²ã€‚é€šè¿‡ä¸»æœºåï¼Œæœ€ç»ˆå¾—åˆ°è¯¥ä¸»æœºåå¯¹åº”çš„IPåœ°å€çš„è¿‡ç¨‹å«åšåŸŸåè§£æï¼ˆæˆ–ä¸»æœºåè§£æï¼‰ã€‚</p>
<p>ä½œç”¨ï¼š</p>
<p>â— è¯¥åè®®ä¸»è¦è´Ÿè´£å°†åŸŸåè½¬æ¢æˆç½‘ç»œå¯ä»¥è¯†åˆ«çš„IPåœ°å€ï¼ˆ<a href="http://www.cce.com.cnè½¬æ¢æˆ221.122.32.15),åŸŸåå’Œipåœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„./">www.cce.com.cnè½¬æ¢æˆ221.122.32.15ï¼‰ï¼ŒåŸŸåå’ŒIPåœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</a></p>
<p>â— å› ä¸ºè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œæœ€ç»ˆéƒ½æ˜¯è½¬æ¢æˆIPåœ°å€è¿›è¡Œè®¿é—®çš„</p>
<p>â— ç›´æ¥è®¾ç½®DNSæœåŠ¡å™¨ã€‚å¯ä»¥æé«˜ç½‘ç»œçš„è®¿é—®é€Ÿåº¦ï¼Œä¿è¯è®¿é—®çš„æ­£ç¡®æ€§</p>
<p>DNSçš„ä¸¤ç§æŸ¥è¯¢æ–¹å¼ï¼šé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢</p>
<p>a)é€’å½’è§£æ<br>å½“å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±ä¸èƒ½å›ç­”å®¢æˆ·æœºçš„DNSæŸ¥è¯¢æ—¶ï¼Œå®ƒå°±éœ€è¦å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚æ­¤æ—¶æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚å›¾æ‰€ç¤ºçš„æ˜¯é€’å½’æ–¹å¼ã€‚å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±è´Ÿè´£å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€èˆ¬æ˜¯å…ˆå‘è¯¥åŸŸåçš„æ ¹åŸŸæœåŠ¡å™¨æŸ¥è¯¢ï¼Œå†ç”±æ ¹åŸŸåæœåŠ¡å™¨ä¸€çº§çº§å‘ä¸‹æŸ¥è¯¢ã€‚æœ€åå¾—åˆ°çš„æŸ¥è¯¢ç»“æœè¿”å›ç»™å±€éƒ¨DNSæœåŠ¡å™¨ï¼Œå†ç”±å±€éƒ¨DNSæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>b)è¿­ä»£è§£æ</p>
<p>å½“å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±ä¸èƒ½å›ç­”å®¢æˆ·æœºçš„DNSæŸ¥è¯¢æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿­ä»£æŸ¥è¯¢çš„æ–¹å¼è¿›è¡Œè§£æï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å±€éƒ¨DNSæœåŠ¡å™¨ä¸æ˜¯è‡ªå·±å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯æŠŠèƒ½è§£æè¯¥åŸŸåçš„å…¶ä»–DNSæœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™å®¢æˆ·ç«¯DNSç¨‹åºï¼Œå®¢æˆ·ç«¯DNSç¨‹åºå†ç»§ç»­å‘è¿™äº›DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œç›´åˆ°å¾—åˆ°æŸ¥è¯¢ç»“æœä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿­ä»£è§£æåªæ˜¯å¸®ä½ æ‰¾åˆ°ç›¸å…³çš„æœåŠ¡å™¨è€Œå·²ï¼Œè€Œä¸ä¼šå¸®ä½ å»æŸ¥ã€‚æ¯”å¦‚è¯´ï¼šbaidu.comçš„æœåŠ¡å™¨ipåœ°å€åœ¨192.168.4.5è¿™é‡Œï¼Œä½ è‡ªå·±å»æŸ¥å§ï¼Œæœ¬äººæ¯”è¾ƒå¿™ï¼Œåªèƒ½å¸®ä½ åˆ°è¿™é‡Œäº†ã€‚</p>
<h4 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h4><pre><code> è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆ Hyper Text Transfer Protocol ï¼‰

å®šä¹‰ï¼šâ— æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘ï¼ˆwwwï¼‰æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®

          â— æ˜¯ åŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTMLã€å›¾ç‰‡ã€æŸ¥è¯¢ç»“æœç­‰ï¼‰çš„åè®®

          â— æ˜¯ä¸€ä¸ªå±äºåº”ç”¨å±‚çš„ã€é¢å‘å¯¹è±¡çš„åè®®

          â— ç”±äºå…¶ç®€æ·ã€å¿«é€Ÿçš„é€‚ç”¨äºåˆ†å¸ƒå¼è¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿ

å·¥ä½œåŸç†ï¼šHTTPåè®®å·¥ä½œåœ¨å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¶æ„ä¸Šã€‚

                æµè§ˆå™¨ä½œä¸ºHTTPå®¢æˆ·ç«¯é€šè¿‡URLå‘HTTPæœåŠ¡ç«¯ï¼ˆå³WEBæœåŠ¡å™¨ï¼‰å‘é€è¯·æ±‚ï¼Œ

                WEBæœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘é€å“åº”ä¿¡æ¯ã€‚

HTTPè¯·æ±‚/å“åº”çš„æ­¥éª¤ï¼š

           Aã€å®¢æˆ·ç«¯è¿æ¥åˆ°webæœåŠ¡å™¨ï¼šä¸€ä¸ªHTTPå®¢æˆ·ç«¯é€šå¸¸æ˜¯æµè§ˆå™¨ï¼Œä¸webæœåŠ¡å™¨çš„

                HTTPç«¯å£ï¼ˆé»˜è®¤ä¸º80ï¼‰å»ºç«‹ä¸€ä¸ªTCPå¥—æ¥å­—è¿æ¥

           Bã€å‘é€HTTPè¯·æ±‚ï¼šé€šè¿‡TCPå¥—æ¥å­—ï¼Œå®¢æˆ·ç«¯å‘webæœåŠ¡å™¨å‘é€ä¸€ä¸ªæ–‡æœ¬çš„è¯·æ±‚

                æŠ¥æ–‡ï¼Œä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®ç»„æˆ

           Cã€æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶è¿”å›HTTPå“åº”ï¼šWEBæœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œå®šä½è¯·æ±‚èµ„æºã€‚æœ

                 åŠ¡å™¨å°†èµ„æºå‰¯æœ¬å†™åˆ°TCPå¥—æ¥å­—ï¼Œç”±å®¢æˆ·ç«¯è¯»å–ã€‚ä¸€ä¸ªå“åº”ç”±çŠ¶æ€è¡Œã€å“åº”å¤´

                 éƒ¨ã€ç©ºè¡Œã€å“åº”æ•°æ®ç»„æˆ

           Dã€é‡Šæ”¾TCPè¿æ¥ï¼šè‹¥connectionæ¨¡å¼ä¸ºcloseï¼Œåˆ™æœåŠ¡å™¨ä¸»åŠ¨å…³é—­TCPè¿æ¥ï¼Œå®¢æˆ·

                 ç«¯è¢«åŠ¨å…³é—­è¿æ¥ï¼Œé‡Šæ”¾TCPè¿æ¥ï¼›è‹¥connectionæ¨¡å¼ä¸ºkeepaliveï¼Œåˆ™è¯¥è¿æ¥

                 ä¼šä¿æŒä¸€æ®µæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…å¯ä»¥æ¥ç€æ¥æ”¶è¯·æ±‚

            Eã€å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è§£æHTMLå†…å®¹ï¼šå®¢æˆ·ç«¯é¦–å…ˆè§£æçŠ¶æ€è¡Œï¼ŒæŸ¥çœ‹è¡¨æ˜è¯·æ±‚æ˜¯

                 å¦æˆåŠŸçš„çŠ¶æ€ä»£ç   ï¼›ç„¶åè§£ææ¯ä¸€ä¸ªå“åº”å¤´ï¼Œå‘åº”å¤´å‘ŠçŸ¥ä»¥ä¸‹ä¸ºè‹¥å¹²å­—èŠ‚çš„

                  HTMLæ–‡æ¡£å’Œæ–‡æ¡£çš„å­—ç¬¦é›†ã€‚å®¢æˆ·ç«¯è¯»å–å“åº”æ•°æ®HTMLï¼Œæ ¹æ®HTMLçš„è¯­æ³•

                  å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤º

 ç‰¹ç‚¹ï¼šâ— æ— è¿æ¥ï¼šå…¶å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶

               åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œæ–­å¼€è¿æ¥ï¼Œå¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´

           â— æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚

                           ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å¿…é¡»é‡ä¼ ã€‚è¿™å¯èƒ½å¯¼è‡´

                           æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚ä½†æ˜¯åœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶ï¼Œä»–çš„åº”ç­”

                           å°±è¾ƒå¿«

            â— ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚

                               è¯·æ±‚æ–¹æ³•å¸¸ç”¨POST  GET  HEADï¼Œæ¯ç§æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨è”ç³»çš„

                               ç±»å‹ä¸åŒã€‚

                               HTTPåè®®ç®€å•ï¼Œä¼¼çš„HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¿«

             â— çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-Type

                          æ ‡è®°

             â— æ”¯æŒB/S   C/Sæ¨¡å¼

HTTPè¯·æ±‚æ–¹æ³•ï¼šHTTP1.0å®šä¹‰ä¸‰ç§æ–¹æ³•ï¼Œå³POST   GET   HEAD

                          HTTP1.1æ–°å¢5ç§æ–¹æ³•ï¼ŒOPTIONS   PUT  DELETE  TRACE  CONNECT

             â— GETï¼šè¯·æ±‚æŒ‡å®šé¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“

             â— POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•ã€ä¸Šä¼ æ–‡ä»¶ï¼‰

             â— HEADï¼šç±»ä¼¼GETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´

             â— PUTï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹

             â—  DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢

             â—  CONNECTï¼šHTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“å¼çš„ä»£ç†æœåŠ¡å™¨

             â—  OPTIONSï¼šå…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½

             â— TRACEï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­

POSTå’ŒGETçš„åŒºåˆ«ï¼š

             â— GETæäº¤çš„æ•°æ®ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ˆå³æ•°æ®æ”¾åœ¨URLä¹‹åï¼Œä»¥?åˆ†å‰²URLå’Œä¼ è¾“çš„

                æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿ï¼‰ï¼›

               POSTæäº¤çš„æ•°æ®æ”¾åœ¨HTTPåŒ…çš„bodyä¸­ï¼Œå› æ­¤åœ°å€æ ä¸ä¼šæ˜¾ç¤ºæäº¤çš„æ•°æ®

             â— GETæäº¤çš„æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆå› ä¸ºæµè§ˆå™¨å¯¹URLçš„é•¿åº¦æœ‰é™åˆ¶ï¼‰ï¼›

                POSTæäº¤çš„æ•°æ®æ²¡æœ‰é™åˆ¶

             â— GETæ–¹å¼æäº¤æ•°æ®ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚ç™»å½•é¡µé¢ï¼Œé€šè¿‡GETæ–¹å¼æäº¤æ•°æ®æ—¶ï¼Œ

                ç”¨æˆ·åå’Œå¯†ç ä¼šå‡ºç°åœ¨åœ°å€æ ä¸Šï¼Œå¦‚æœé¡µé¢å¯ä»¥è¢«ç¼“å­˜æˆ–è€…å…¶ä»–äººå¯ä»¥è®¿é—®è¿™å°

                æœºå™¨ï¼Œå°±å¯ä»¥ä»å†å²è®°å½•è·å¾—è¯¥ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

                 POSTä¸å­˜åœ¨å®‰å…¨é—®é¢˜

            â— GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼

                POSTé€šè¿‡Request.Formæ¥å–å¾—å˜é‡çš„å€¼
</code></pre>
<p>8ã€SSL/TLSåè®®</p>
<pre><code> â— SSLï¼ˆSecure Sockets Layerï¼‰ï¼Œå®‰å…¨å¥—æ¥å±‚ã€‚ä¸Šä¸–çºª90å¹´ä»£ç”±ç½‘æ™¯å…¬å¸è®¾è®¡ã€‚åŸå…ˆäº’

     è”ç½‘ä½¿ç”¨çš„HTTPåè®®æ˜¯æ˜æ–‡çš„ï¼Œå­˜åœ¨å¾ˆå¤šç¼ºç‚¹ï¼ˆä¼ è¾“å†…å®¹ä¼šè¢«å·çª¥ï¼ˆå—…æ¢ï¼‰å’Œç¯¡æ”¹ï¼‰ã€‚

     SSLå°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜

  â— åˆ°äº†1999å¹´ï¼ŒSSLå› ä¸ºå¹¿æ³›åº”ç”¨ï¼Œå·²ç»æˆä¸ºäº’è”ç½‘ä¸Šçš„äº‹å®æ ‡å‡†ã€‚IETFå°±åœ¨é‚£ä¸€å¹´æŠŠ

      SSLæ ‡å‡†åŒ–ï¼Œæ ‡å‡†åŒ–åç§°æ”¹ä¸ºTLSï¼ˆTransport  Layer  Securityï¼‰ï¼Œä¼ è¾“å±‚å®‰å…¨åè®®

   â— SSLå’ŒTLSæ˜¯åŒä¸€ä¸ªä¸œè¥¿çš„ä¸åŒé˜¶æ®µ
</code></pre>
<h4 id="HTTPSåè®®"><a href="#HTTPSåè®®" class="headerlink" title="HTTPSåè®®"></a>HTTPSåè®®</h4><pre><code> å®šä¹‰ï¼šHTTPSåè®®æ˜¯HTTPåè®®å’ŒSSL/TLSåè®®çš„ç»„åˆ
</code></pre>
<p>   ä¸ºä»€ä¹ˆè¦è®¾è®¡HTTPSæˆè¿™æ ·ï¼š</p>
<pre><code>      â— å…¼å®¹æ€§ï¼šåŸºäºTCPä¼ è¾“ï¼›å•ç‹¬ä½¿ç”¨æ–°çš„åè®®å°†HTTPï¼ŒæŠŠHTTPåè®®åŒ…è£¹èµ·æ¥

      â— å¯æ‰©å±•æ€§

      â— ä¿å¯†æ€§ï¼ˆé˜²æ³„å¯†ï¼‰

      â—  å®Œæ•´æ€§ï¼ˆé˜²ç¯¡æ”¹ï¼‰

      â— çœŸå®æ€§ï¼ˆé˜²å‡å†’ï¼‰

      â— æ€§èƒ½
</code></pre>
<p>   åŠ å¯†å’Œè§£å¯†çš„å®šä¹‰ï¼š</p>
<pre><code>     â€œåŠ å¯†â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠâ€œæ˜æ–‡â€å˜æˆâ€œå¯†æ–‡â€çš„è¿‡ç¨‹ã€‚â€œè§£å¯†â€çš„è¿‡ç¨‹å°±æ˜¯å°†â€œå¯†æ–‡â€

      å˜æˆâ€œæ˜æ–‡â€çš„è¿‡ç¨‹ã€‚åœ¨è¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­ï¼Œéƒ½éœ€å“Ÿå•Šâ€œå¯†é’¥â€ã€‚
</code></pre>
<p>   å¯¹ç§°åŠ å¯†ï¼šâ€œåŠ å¯†â€å’Œâ€œè§£å¯†â€ä½¿ç”¨â€œç›¸åŒå¯†é’¥â€</p>
<p>   éå¯¹ç§°åŠ å¯†ï¼šåŠ å¯†â€å’Œâ€œè§£å¯†â€ä½¿ç”¨â€œä¸åŒå¯†é’¥â€</p>
<p>   å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<pre><code>     â— â€éå¯¹ç§°åŠ å¯†â€œçš„åŠŸèƒ½æ¯”â€å¯¹ç§°åŠ å¯†â€œçš„åŠŸèƒ½è¦å¤š

     â— â€éå¯¹ç§°åŠ å¯†â€œæ¶‰åŠå¤æ‚çš„æ•°å­¦é—®é¢˜ï¼Œæ‰€ä»¥å…¶æ€§èƒ½ç›¸å¯¹â€å¯¹ç§°åŠ å¯†â€œè¦å·®
</code></pre>
<h4 id="websocketåè®®"><a href="#websocketåè®®" class="headerlink" title="websocketåè®®"></a>websocketåè®®</h4><p>1ï¼‰WebSocket æ˜¯Webåº”ç”¨ç¨‹åºçš„ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªHtml5åè®®ï¼Œå®ƒæä¾›äº†åŒå‘çš„ï¼ŒæŒ‰åºåˆ°è¾¾çš„æ•°æ®æµ</p>
<p>2ï¼‰WebSocketçš„è¿æ¥æ˜¯æŒä¹…çš„ï¼Œä»–é€šè¿‡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒåŒå·¥è¿æ¥ï¼ŒæœåŠ¡å™¨çš„æ›´æ–°å¯ä»¥è¢«åŠæ—¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯ä»¥ä¸€å®šæ—¶é—´é—´éš”å»è½®è¯¢ </p>
<p>3ï¼‰WebSocket è¿æ¥å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…¨åŒå·¥é€šä¿¡ï¼Œä»¥ä¾¿ä»»ä¸€æ–¹éƒ½å¯ä»¥é€šè¿‡å»ºç«‹çš„è¿æ¥å°†æ•°æ®æ¨é€åˆ°å¦ä¸€ç«¯ã€‚</p>
<p>4ï¼‰WebSocket åªéœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œå°±å¯ä»¥ä¸€ç›´ä¿æŒè¿æ¥çŠ¶æ€ï¼Œè¿™ç›¸æ¯”äºè½®è¯¢æ–¹å¼çš„ä¸åœå»ºç«‹è¿æ¥æ˜¾ç„¶æ•ˆç‡è¦å¤§å¤§æé«˜</p>
<h4 id="RPCåè®®"><a href="#RPCåè®®" class="headerlink" title="RPCåè®®"></a>RPCåè®®</h4><p>å®šä¹‰ï¼šRPC( Remote Procedure Call)è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ )åè®®</p>
<p>ä¸HTTPåè®®çš„åŒºåˆ«:</p>
<p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ç›´è§‚è¯´æ³•å°±æ˜¯Aé€šè¿‡ç½‘ç»œè°ƒç”¨Bçš„è¿‡ç¨‹æ–¹æ³•</p>
<p>é¦–å…ˆäº†è§£OSIç½‘ç»œä¸ƒå±‚æ¨¡å‹</p>
<p>ç¬¬ä¸€å±‚ï¼šåº”ç”¨å±‚ã€‚å®šä¹‰äº†ç”¨äºåœ¨ç½‘ç»œä¸­è¿›è¡Œé€šä¿¡å’Œä¼ è¾“æ•°æ®çš„æ¥å£ï¼›<br>ç¬¬äºŒå±‚ï¼šè¡¨ç¤ºå±‚ã€‚å®šä¹‰ä¸åŒçš„ç³»ç»Ÿä¸­æ•°æ®çš„ä¼ è¾“æ ¼å¼ï¼Œç¼–ç å’Œè§£ç è§„èŒƒç­‰ï¼›<br>ç¬¬ä¸‰å±‚ï¼šä¼šè¯å±‚ã€‚ç®¡ç†ç”¨æˆ·çš„ä¼šè¯ï¼Œæ§åˆ¶ç”¨æˆ·é—´é€»è¾‘è¿æ¥çš„å»ºç«‹å’Œä¸­æ–­ï¼›<br>ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ã€‚ç®¡ç†ç€ç½‘ç»œä¸­çš„ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“ï¼›<br>ç¬¬äº”å±‚ï¼šç½‘ç»œå±‚ã€‚å®šä¹‰ç½‘ç»œè®¾å¤‡é—´å¦‚ä½•ä¼ è¾“æ•°æ®ï¼›<br>ç¬¬å…­å±‚ï¼šé“¾è·¯å±‚ã€‚å°†ä¸Šé¢çš„ç½‘ç»œå±‚çš„æ•°æ®åŒ…å°è£…æˆæ•°æ®å¸§ï¼Œä¾¿äºç‰©ç†å±‚ä¼ è¾“ï¼›<br>ç¬¬ä¸ƒå±‚ï¼šç‰©ç†å±‚ã€‚è¿™ä¸€å±‚ä¸»è¦å°±æ˜¯ä¼ è¾“è¿™äº›äºŒè¿›åˆ¶æ•°æ®<br>äº”å±‚åè®®ç»“æ„é‡Œé¢æ˜¯æ²¡æœ‰è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚çš„ã€‚åº”è¯¥è¯´å®ƒä»¬å’Œåº”ç”¨å±‚åˆå¹¶ã€‚</p>
<p>1ï¼‰æœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œå°±æ˜¯RPCä¸»è¦æ˜¯åŸºäºTCP/IPåè®®çš„ï¼Œè€ŒHTTPä¸»è¦æ˜¯åŸºäºHTTPåè®®çš„ï¼ŒHTTPåè®®æ˜¯åœ¨ä¼ è¾“å±‚åè®®TCPä¹‹ä¸Šçš„åº”ç”¨å±‚ï¼Œæ•ˆç‡ä¸Šï¼ŒRPCå½“ç„¶æ˜¯è¦æ›´èƒœä¸€ç­¹</p>
<p>2ï¼‰ä¸€èˆ¬æ¥è¯´ï¼ŒRPCæœåŠ¡ä¸»è¦æ˜¯é’ˆå¯¹å¤§å‹ä¼ä¸šçš„ï¼Œè€ŒHTTPæœåŠ¡ä¸»è¦æ˜¯é’ˆå¯¹å°ä¼ä¸šçš„ï¼Œå› ä¸ºRPCæ•ˆç‡æ›´é«˜ï¼Œè€ŒHTTPæœåŠ¡å¼€å‘è¿­ä»£ä¼šæ›´å¿«</p>
<p>RPCæœåŠ¡</p>
<p>ä»ä¸‰ä¸ªè§’åº¦æ¥ä»‹ç»RPCæœåŠ¡ï¼šRPCæ¶æ„ï¼ŒåŒæ­¥å¼‚æ­¥è°ƒç”¨ã€æµè¡Œçš„RPCæ¡†æ¶</p>
<p>1ï¼‰RPCæ¶æ„</p>
<p>åŒ…å«äº†å››ä¸ªæ ¸å¿ƒçš„ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯Client ,Server,Client Stubä»¥åŠServer Stubï¼Œè¿™ä¸ªStubå¤§å®¶å¯ä»¥ç†è§£ä¸ºå­˜æ ¹ã€‚åˆ†åˆ«è¯´è¯´è¿™å‡ ä¸ªç»„ä»¶ï¼š</p>
<p>å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼ŒæœåŠ¡çš„è°ƒç”¨æ–¹ã€‚<br>æœåŠ¡ç«¯ï¼ˆServerï¼‰ï¼ŒçœŸæ­£çš„æœåŠ¡æä¾›è€…ã€‚<br>å®¢æˆ·ç«¯å­˜æ ¹ï¼Œå­˜æ”¾æœåŠ¡ç«¯çš„åœ°å€æ¶ˆæ¯ï¼Œå†å°†å®¢æˆ·ç«¯çš„è¯·æ±‚å‚æ•°æ‰“åŒ…æˆç½‘ç»œæ¶ˆæ¯ï¼Œç„¶åé€šè¿‡ç½‘ç»œè¿œç¨‹å‘é€ç»™æœåŠ¡æ–¹ã€‚<br>æœåŠ¡ç«¯å­˜æ ¹ï¼Œæ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯è§£åŒ…ï¼Œå¹¶è°ƒç”¨æœ¬åœ°çš„æ–¹æ³•<br>2ï¼‰æµè¡Œçš„RPCæ¡†æ¶</p>
<p>ï¼ˆ1ï¼‰gRPCæ˜¯Googleæœ€è¿‘å…¬å¸ƒçš„å¼€æºè½¯ä»¶ï¼ŒåŸºäºæœ€æ–°çš„HTTP2.0åè®®ï¼Œå¹¶æ”¯æŒå¸¸è§çš„ä¼—å¤šç¼–ç¨‹è¯­è¨€</p>
<p>ï¼ˆ2ï¼‰Thriftæ˜¯Facebookçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªè·¨è¯­è¨€çš„æœåŠ¡å¼€å‘æ¡†æ¶</p>
<p>ï¼ˆ3ï¼‰Dubboæ˜¯é˜¿é‡Œé›†å›¢å¼€æºçš„ä¸€ä¸ªæä¸ºå‡ºåçš„RPCæ¡†æ¶ï¼Œåœ¨å¾ˆå¤šäº’è”ç½‘å…¬å¸å’Œä¼ä¸šåº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨</p>
]]></content>
      <categories>
        <category>Web</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
</search>
